{"version":3,"file":"static/js/847.eb33825b.chunk.js","mappings":"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","sources":["../node_modules/@blockshake/defly-connect/dist/App-245bc375.js","../node_modules/@blockshake/defly-connect/dist/index-da03add1.js","../node_modules/@blockshake/defly-connect/dist/index.js","../node_modules/lottie-web/build/player/lottie.js","../QRCodeStyling/webpack/universalModuleDefinition","../QRCodeStyling/node_modules/qrcode-generator/qrcode.js","../QRCodeStyling/src/tools/merge.ts","../QRCodeStyling/src/tools/downloadURI.ts","../QRCodeStyling/src/tools/toDataUrl.ts","../QRCodeStyling/src/constants/qrTypes.ts","../QRCodeStyling/src/constants/errorCorrectionPercents.ts","../QRCodeStyling/src/figures/dot/QRDot.ts","../QRCodeStyling/src/constants/dotTypes.ts","../QRCodeStyling/src/figures/cornerSquare/QRCornerSquare.ts","../QRCodeStyling/src/constants/cornerSquareTypes.ts","../QRCodeStyling/src/figures/cornerDot/QRCornerDot.ts","../QRCodeStyling/src/constants/cornerDotTypes.ts","../QRCodeStyling/src/constants/shapeTypes.ts","../QRCodeStyling/src/core/QRSVG.ts","../QRCodeStyling/src/tools/calculateImageSize.ts","../QRCodeStyling/src/constants/gradientTypes.ts","../QRCodeStyling/src/constants/drawTypes.ts","../QRCodeStyling/src/core/QROptions.ts","../QRCodeStyling/src/constants/errorCorrectionLevels.ts","../QRCodeStyling/src/tools/sanitizeOptions.ts","../QRCodeStyling/src/index.ts","../QRCodeStyling/src/core/QRCodeStyling.ts","../QRCodeStyling/src/tools/getMode.ts","../QRCodeStyling/src/constants/modes.ts","../QRCodeStyling/webpack/bootstrap","../QRCodeStyling/webpack/startup","../QRCodeStyling/webpack/runtime/compat get default export","../QRCodeStyling/webpack/runtime/define property getters","../QRCodeStyling/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["\"use strict\";var n=require(\"./index-da03add1.js\"),e=require(\"qr-code-styling\"),t=require(\"lottie-web\");function o(n){return n&&\"object\"==typeof n&&\"default\"in n?n:{default:n}}require(\"@walletconnect/client\"),require(\"@json-rpc-tools/utils/dist/cjs/format\"),require(\"algosdk\"),require(\"bowser\");var l=o(e),a=o(t);function i(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&\"undefined\"!=typeof document){var o=document.head||document.getElementsByTagName(\"head\")[0],l=document.createElement(\"style\");l.type=\"text/css\",\"top\"===t&&o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l),l.styleSheet?l.styleSheet.cssText=n:l.appendChild(document.createTextNode(n))}}var d=\".defly-wallet-modal-header {\\n  position: absolute;\\n  top: -44px;\\n  right: 0px;\\n  left: 0;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n}\\n.defly-wallet-modal-header--mobile {\\n  position: static;\\n}\\n.defly-wallet-modal-header--mobile .defly-wallet-modal-header__close-button {\\n  width: 24px;\\n  height: 24px;\\n  margin: 0;\\n  padding: 0;\\n  background: transparent;\\n  border: unset;\\n  box-shadow: unset;\\n}\\n\\n.defly-wallet-modal-header__brand {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  font-size: 15px;\\n  font-weight: 600;\\n  line-height: 18px;\\n  letter-spacing: -0.13px;\\n  color: #ffffff;\\n}\\n\\n.defly-wallet-button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: auto;\\n  height: 48px;\\n  padding: 14px;\\n  border: none;\\n  border-radius: 12px;\\n  outline: none;\\n  cursor: pointer;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-size: 14px;\\n}\\n\\n.defly-wallet-modal-header__close-button {\\n  width: 40px;\\n  height: 40px;\\n  margin: 0;\\n  padding: 0;\\n  background: #333333;\\n  border: 1.5px solid rgba(255, 255, 255, 0.08);\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\\n  border-radius: 100%;\\n}\\n\\n.defly-wallet-modal-header__close-button__close-icon {\\n  width: 20px;\\n  height: 20px;\\n}\";i(d);function s(){return document.documentElement.clientWidth<=935}function c(){document.documentElement.style.setProperty(\"--vh\",.01*window.innerHeight+\"px\")}const r=document.createElement(\"template\"),p=n.isMobile()?\"defly-wallet-modal-header defly-wallet-modal-header--mobile\":\"defly-wallet-modal-header defly-wallet-modal-header--desktop\";r.innerHTML=`\\n  <div class=\"${p}\">\\n      ${s()&&n.isMobile()?\"\":\"<div class=\\\"defly-wallet-modal-header__brand\\\">\\n              <img src=\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 36 36'%3e %3cg transform='translate(18090 -8429)'%3e %3cg transform='translate(-18227.732 8408.374)'%3e %3cpath d='M168.632%2c47.566%2c155.742%2c26l-12.89%2c21.566%2c12.89-7.354Z' transform='translate(0)' fill='white'/%3e %3cpath d='M191.634%2c257.081l-10.639-5.607-10.639%2c5.607%2c10.639-3.464Z' transform='translate(-25.252 -207.321)' fill='white'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\\\" />\\n\\n              Defly Connect\\n            </div>\\n            \"} \\n\\n      <button\\n        id=\"defly-wallet-modal-header-close-button\"\\n        class=\"defly-wallet-button defly-wallet-modal-header__close-button\">\\n        <img\\n          class=\"defly-wallet-modal-header__close-button__close-icon\"\\n          src=\"${s()&&n.isMobile()?\"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M18 6L12 12M12 12L6 18M12 12L18 18M12 12L6 6' stroke='%23999999' stroke-width='2'/%3e%3c/svg%3e\":\"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M18 6L12 12M12 12L6 18M12 12L18 18M12 12L6 6' stroke='white' stroke-width='2'/%3e%3c/svg%3e\"}\"\\n        />\\n      </button>\\n    </div>\\n`;class f extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const n=document.createElement(\"style\");n.textContent=d,this.shadowRoot.append(r.content.cloneNode(!0),n)}}}var m=\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 36 36'%3e%3cg transform='translate(18090 -8429)'%3e%3cg transform='translate(-18090 8428)'%3e%3crect width='36' height='36' rx='18' transform='translate(0 1)'/%3e%3c/g%3e%3cg transform='translate(-18227.732 8408.374)'%3e%3cpath d='M168.632%2c47.566%2c155.742%2c26l-12.89%2c21.566%2c12.89-7.354Z' transform='translate(0)' fill='white'/%3e%3cpath d='M191.634%2c257.081l-10.639-5.607-10.639%2c5.607%2c10.639-3.464Z' transform='translate(-25.252 -207.321)' fill='white'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e\",w=\".defly-wallet-download-qr-code-wrapper {\\n  width: fit-content;\\n  margin: 0 auto;\\n  display: flex;\\n  background-color: #ffffff;\\n  box-shadow: 0 12px 32px rgba(26, 35, 91, 0.1);\\n  border-radius: 30px;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 15px;\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-download-qr-code-wrapper {\\n    margin-top: 32px;\\n  }\\n}\";i(w);const x=document.createElement(\"template\");x.innerHTML='\\n  <div id=\"defly-wallet-download-qr-code-wrapper\" class=\"defly-wallet-download-qr-code-wrapper\"></div>  \\n';class y extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const n=document.createElement(\"style\");n.textContent=w,this.shadowRoot.append(x.content.cloneNode(!0),n)}}connectedCallback(){var e;const t=new l.default({width:250,height:250,type:\"svg\",data:n.DEFLY_DOWNLOAD_URL,image:m,dotsOptions:{color:\"#000\",type:\"dots\"},imageOptions:{crossOrigin:\"anonymous\",margin:10},cornersSquareOptions:{type:\"extra-rounded\"},cornersDotOptions:{type:\"dot\"}}),o=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById(\"defly-wallet-download-qr-code-wrapper\");o&&t.append(o)}}var h=\".defly-wallet-connect-modal-desktop-mode {\\n  display: grid;\\n  grid-template-columns: 50% auto;\\n  gap: 24px;\\n  align-items: center;\\n}\\n.defly-wallet-connect-modal-desktop-mode--default .defly-wallet-connect-modal-desktop-mode__default-view {\\n  display: block;\\n}\\n.defly-wallet-connect-modal-desktop-mode--default .defly-wallet-connect-modal-desktop-mode__download-view {\\n  display: none;\\n}\\n.defly-wallet-connect-modal-desktop-mode--download .defly-wallet-connect-modal-desktop-mode__default-view {\\n  display: none;\\n}\\n.defly-wallet-connect-modal-desktop-mode--download .defly-wallet-connect-modal-desktop-mode__download-view {\\n  display: block;\\n}\\n.defly-wallet-connect-modal-desktop-mode--download .defly-wallet-connect-modal-desktop-mode__download-view .defly-wallet-connect-modal-download-defly-view__footer a {\\n  display: flex;\\n  cursor: pointer;\\n}\\n.defly-wallet-connect-modal-desktop-mode--select-account {\\n  width: 100%;\\n  height: 100%;\\n}\\n.defly-wallet-connect-modal-desktop-mode--select-account.defly-wallet-connect-modal-desktop-mode--default {\\n  overflow: hidden;\\n}\\n.defly-wallet-connect-modal-desktop-mode--select-account .defly-wallet-accordion {\\n  overflow: hidden;\\n}\\n.defly-wallet-connect-modal-desktop-mode--select-account #defly-wallet-iframe {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 3;\\n  width: 100%;\\n  height: 100%;\\n  border-radius: 16px;\\n}\\n\\n.defly-wallet-connect-modal-desktop-mode__accordion__description,\\n.defly-wallet-connect-modal-desktop-mode__connect-button-wrapper {\\n  padding: 0 40px 20px 64px;\\n}\\n\\n.defly-wallet-connect-modal-desktop-mode__connect-button {\\n  display: block;\\n  width: 100%;\\n  height: 48px;\\n  border: unset;\\n  border-radius: 6px;\\n  background-color: #333333;\\n  color: white;\\n  cursor: pointer;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-size: 13px;\\n}\\n\\n.defly-wallet-connect-qr-code-wrapper {\\n  width: fit-content;\\n  padding: 10px;\\n  margin: 0 auto;\\n  display: flex;\\n  background-color: #ffffff;\\n  box-shadow: 0 12px 32px rgba(26, 35, 91, 0.1);\\n  border-radius: 30px;\\n}\\n\\n.defly-wallet-connect-qr-code-wrapper {\\n  margin-top: 30px;\\n  cursor: pointer;\\n}\\n\\n.defly-wallet-download-qr-code__image {\\n  width: 300px;\\n  height: 300px;\\n}\\n\\n.defly-wallet-accordion-copy-button {\\n  display: block;\\n  width: 100%;\\n  color: #696868;\\n  text-align: center;\\n  margin-top: 15px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  line-height: 16px;\\n  letter-spacing: -0.1px;\\n  font-weight: 400;\\n  transition: all ease-in 0.2s;\\n}\\n.defly-wallet-accordion-copy-button:hover {\\n  color: #999999;\\n}\\n\\n.defly-wallet-connect-modal-desktop-mode__scan-defly-description {\\n  color: #999999;\\n  text-align: center;\\n  margin: 15px 0 12px;\\n  font-size: 22px;\\n  font-weight: 600;\\n  line-height: 26px;\\n  letter-spacing: 0.2px;\\n}\\n.defly-wallet-connect-modal-desktop-mode__scan-defly-description a {\\n  color: #999999;\\n}\\n.defly-wallet-connect-modal-desktop-mode__scan-defly-description a:hover {\\n  color: #696868;\\n}\\n\\n.defly-wallet-connect-modal-desktop-mode__download-defly-description {\\n  color: #696868;\\n  text-align: center;\\n  margin: 32px 0 12px;\\n  font-size: 13px;\\n  font-weight: 500;\\n  line-height: 20px;\\n  letter-spacing: -0.04px;\\n}\\n\\n.defly-wallet-connect-modal-download-defly-view__back-button {\\n  display: flex;\\n  align-items: center;\\n  gap: 16px;\\n  margin-bottom: 14px;\\n  padding: 12px 24px;\\n  color: #3c3c49;\\n  background-color: #ffffff;\\n  outline: none;\\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\\n  border: unset;\\n  border-radius: 24px;\\n  font-size: 14px;\\n  font-weight: 600;\\n  line-height: 24px;\\n  letter-spacing: -0.1px;\\n  cursor: pointer;\\n}\\n\\n.defly-wallet-connect-modal-download-defly-view {\\n  padding: 20px;\\n  background-color: #333333;\\n  border-radius: 30px;\\n}\\n\\n.defly-wallet-connect-modal-download-defly-view__title {\\n  margin-bottom: 15px;\\n  color: #999999;\\n  font-weight: 600;\\n  font-size: 22px;\\n  line-height: 24px;\\n  text-align: center;\\n  letter-spacing: 0.2px;\\n}\\n\\n.defly-wallet-connect-modal-download-defly-view__footer {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 12px;\\n  margin-top: 20px;\\n}\\n\\n.defly-wallet-connect-modal-download-defly-view__footer__button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 8px;\\n  padding: 8px 16px;\\n  color: #6a6a81;\\n  background-color: #ffffff;\\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\\n  text-decoration: none;\\n  border-radius: 12px;\\n  font-weight: 500;\\n  font-size: 13px;\\n  line-height: 200%;\\n  letter-spacing: -0.04px;\\n  cursor: pointer;\\n}\\n\\n#defly-wallet-iframe {\\n  width: 285px;\\n  height: 376px;\\n  margin: 0 auto;\\n  border: none;\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-connect-modal-desktop-mode {\\n    grid-template-columns: 1fr;\\n    gap: 24px;\\n  }\\n  .defly-wallet-connect-qr-code-wrapper {\\n    margin-top: 16px;\\n  }\\n  .defly-wallet-connect-modal-download-defly-view {\\n    padding: 24px;\\n  }\\n  .defly-wallet-connect-modal-download-defly-view__footer {\\n    margin-top: 40px;\\n  }\\n}\";i(h);var g=\".defly-wallet-accordion-item:not(:last-of-type) {\\n  margin-bottom: 20px;\\n}\\n.defly-wallet-accordion-item:not(:last-of-type) .defly-wallet-accordion-panel {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.defly-wallet-accordion-item .defly-wallet-accordion-item__content {\\n  height: 0;\\n  overflow: hidden;\\n  color: #696868;\\n  font-size: 12px;\\n  font-weight: 500;\\n  line-height: 16px;\\n  letter-spacing: -0.1px;\\n  transition: height ease-in 0.2s;\\n}\\n.defly-wallet-accordion-item--active .defly-wallet-accordion-item__content {\\n  height: 494px;\\n  transition: height ease-in 0.2s;\\n}\\n\\n.defly-wallet-accordion-toggle {\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  gap: 16px;\\n  padding: 12px 24px;\\n  color: #2c3559;\\n  background-color: #ffffff;\\n  border: none;\\n  border-radius: 24px;\\n  outline: none;\\n  cursor: pointer;\\n  font-size: 16px;\\n  line-height: 18px;\\n  letter-spacing: -0.1px;\\n  font-weight: 600;\\n  transition: all ease-in 0.2s;\\n}\\n.defly-wallet-accordion-toggle__text, .defly-wallet-accordion-toggle__content-with-label__text {\\n  color: #6a6a81;\\n}\\n\\n.defly-wallet-accordion-toggle__bold-color {\\n  color: #3c3c49;\\n  font-weight: 600;\\n}\\n\\n.defly-wallet-accordion-toggle__content-with-label {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n}\\n\\n.defly-wallet-accordion-toggle__label {\\n  padding: 4px 9px;\\n  color: #00b19e;\\n  background: rgba(0, 177, 158, 0.08);\\n  border-radius: 12px;\\n  font-size: 11px;\\n  font-weight: 600;\\n  line-height: 18px;\\n  letter-spacing: 0.01px;\\n}\\n\\n.defly-wallet-accordion-toggle__button {\\n  position: absolute;\\n  z-index: 2;\\n  width: 100%;\\n  height: 100%;\\n  background: transparent;\\n  box-shadow: none;\\n  outline: none;\\n  border: none;\\n  cursor: pointer;\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-accordion-toggle {\\n    font-size: 14px;\\n    font-weight: 500;\\n    line-height: 24px;\\n    letter-spacing: -0.1px;\\n  }\\n}\";i(g);const u=document.createElement(\"template\"),_=document.createElement(\"style\"),k=document.createElement(\"style\");_.textContent=h,k.textContent=g;u.innerHTML=\"\\n  <div id=\\\"defly-wallet-connect-modal-desktop-mode\\\" class=\\\"defly-wallet-connect-modal-desktop-mode defly-wallet-connect-modal-desktop-mode--default\\\">\\n      <defly-wallet-connect-modal-information-section></defly-wallet-connect-modal-information-section>\\n\\n      <div class=\\\"defly-wallet-connect-modal-desktop-mode__default-view\\\">\\n\\n        <div class=\\\"defly-wallet-accordion-item defly-wallet-accordion-item--active\\\">\\n\\n          <div class=\\\"defly-wallet-accordion-item__content\\\">\\n            <div id=\\\"defly-wallet-connect-modal-connect-qr-code\\\" class=\\\"defly-wallet-connect-qr-code-wrapper f_copy-button\\\"></div>\\n\\n            <div class=\\\"defly-wallet-accordion-copy-button f_copy-button\\\">Tap to copy</div>\\n            <p class=\\\"defly-wallet-connect-modal-desktop-mode__scan-defly-description\\\">\\n                Scan with <a href=\\\"https://defly.app/\\\">Defly Wallet</a>\\n            </p>\\n\\n            \\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"defly-wallet-connect-modal-desktop-mode__download-view\\\">\\n        <button id=\\\"defly-wallet-connect-modal-download-defly-view-back-button\\\" class=\\\"defly-wallet-connect-modal-download-defly-view__back-button\\\">\\n          <img src=\\\"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.7071 6.29387C11.0976 6.68439 11.0976 7.31756 10.7071 7.70808L7.41421 11.001L19 11.001C19.5523 11.001 20 11.4487 20 12.001C20 12.5533 19.5523 13.001 19 13.001L7.41421 13.001L10.7071 16.2939C11.0976 16.6844 11.0976 17.3176 10.7071 17.7081C10.3166 18.0986 9.68342 18.0986 9.29289 17.7081L4.29289 12.7081C4.10536 12.5205 4 12.2662 4 12.001C4 11.7358 4.10536 11.4814 4.29289 11.2939L9.29289 6.29387C9.68342 5.90335 10.3166 5.90335 10.7071 6.29387Z' fill='%233C3C49'/%3e%3c/svg%3e\\\" alt=\\\"Back Arrow\\\" /> Back\\n        </button>\\n\\n        <div class=\\\"defly-wallet-connect-modal-download-defly-view\\\">\\n          <h1 class=\\\"defly-wallet-connect-modal-download-defly-view__title\\\">\\n            Download Defly Wallet\\n          </h1>\\n\\n          <defly-wallet-download-qr-code></defly-wallet-download-qr-code>\\n\\n          <div class=\\\"defly-wallet-connect-modal-download-defly-view__footer\\\">\\n            <a\\n              href=\\\"https://apps.apple.com/us/app/defly/id1602672723\\\"\\n              target=\\\"_blank\\\"\\n              rel=\\\"noopener noreferrer\\\">\\n              <img src=\\\"data:image/svg+xml,%3csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='40' height='40' rx='12' fill='black'/%3e%3cpath d='M25.6308 20.3011C25.6416 19.4664 25.8633 18.6481 26.2753 17.9221C26.6873 17.1962 27.2763 16.5863 27.9873 16.1491C27.5356 15.5039 26.9397 14.973 26.2469 14.5984C25.554 14.2239 24.7834 14.016 23.9963 13.9914C22.317 13.8151 20.6891 14.9962 19.8333 14.9962C18.9611 14.9962 17.6436 14.0089 16.2249 14.0381C15.3072 14.0677 14.4128 14.3346 13.6289 14.8126C12.8451 15.2906 12.1984 15.9636 11.7519 16.7659C9.81789 20.1144 11.2605 25.0354 13.1132 27.742C14.0401 29.0674 15.1233 30.5478 16.5408 30.4953C17.9278 30.4378 18.4458 29.6108 20.1202 29.6108C21.779 29.6108 22.265 30.4953 23.7112 30.4619C25.1995 30.4378 26.1372 29.1307 27.0316 27.7928C27.6976 26.8484 28.2101 25.8047 28.55 24.7003C27.6853 24.3345 26.9474 23.7224 26.4283 22.9401C25.9092 22.1578 25.6318 21.2399 25.6308 20.3011ZM22.8993 12.2113C23.7108 11.2371 24.1106 9.98492 24.0138 8.7207C22.7739 8.85092 21.6287 9.44347 20.8062 10.3803C20.404 10.838 20.096 11.3704 19.8998 11.9472C19.7035 12.5239 19.6229 13.1337 19.6625 13.7417C20.2826 13.7481 20.8961 13.6137 21.4568 13.3486C22.0175 13.0835 22.5107 12.6946 22.8993 12.2113Z' fill='white'/%3e%3c/svg%3e\\\" alt=\\\"App Store icon\\\" />\\n            </a>\\n\\n            <a\\n              href=\\\"https://play.google.com/store/apps/details?id=io.blockshake.defly.app\\\"\\n              target=\\\"_blank\\\"\\n              rel=\\\"noopener noreferrer\\\">\\n              <img src=\\\"data:image/svg+xml,%3csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='40' height='40' rx='12' fill='black'/%3e%3cpath d='M12.41 9.7719C12.1334 10.0219 11.9683 10.4388 11.9683 10.9922V10.8671V29.1294V29.0091C11.9683 29.5202 12.1099 29.9149 12.3497 30.169L12.4109 30.2277V30.228C12.6051 30.4035 12.854 30.4966 13.1393 30.4963C13.418 30.4963 13.7316 30.4073 14.0626 30.2194L26.0264 23.4107L30.1359 21.0717C30.6578 20.7748 30.9508 20.3917 30.9998 20.0014V19.9998C30.9508 19.6087 30.6578 19.2259 30.1359 18.9289L26.0261 16.5902L14.0627 9.78154C13.731 9.59325 13.4171 9.50391 13.1376 9.50391C12.8527 9.50391 12.6041 9.59677 12.41 9.7719H12.41Z' fill='%2300C1FF'/%3e%3cpath d='M12.411 30.2285L12.3497 30.1698C12.1099 29.9157 11.9683 29.5209 11.9683 29.0098V29.1301V10.8724V10.993C11.9683 10.4396 12.1334 10.0226 12.41 9.77268L22.622 20.0009L12.411 30.2285Z' fill='url(%23paint0_linear_173_14441)'/%3e%3cpath d='M26.0256 23.4102L22.6211 19.9996L26.0253 16.5896L30.1351 18.9283C30.657 19.2253 30.95 19.6081 30.9989 19.9993V20.0008C30.95 20.3911 30.657 20.7742 30.1351 21.0712L26.0256 23.4101' fill='url(%23paint1_linear_173_14441)'/%3e%3cpath d='M13.1374 30.4961C12.8522 30.4964 12.6033 30.4032 12.4092 30.2277V30.2275L22.6202 19.9999L26.0246 23.4104L14.0608 30.2191C13.7298 30.4071 13.4162 30.4961 13.1374 30.4961Z' fill='url(%23paint2_linear_173_14441)'/%3e%3cpath d='M22.6212 20.002L12.4092 9.7737C12.6033 9.59858 12.8519 9.50571 13.1368 9.50571C13.4163 9.50571 13.7302 9.59501 14.0618 9.78335L26.0253 16.592L22.6212 20.002' fill='url(%23paint3_linear_173_14441)'/%3e%3cpath d='M13.1394 30.6172C12.8542 30.6172 12.6049 30.524 12.4108 30.3486L12.4105 30.3489C12.4097 30.3481 12.4088 30.3473 12.4079 30.3466L12.3548 30.2947C12.3531 30.2931 12.3516 30.2912 12.3496 30.2893L12.4108 30.2279C12.6049 30.4034 12.8538 30.4966 13.1392 30.4962C13.4179 30.4962 13.7315 30.4073 14.0625 30.2193L26.0263 23.4106L26.1029 23.4874L26.0253 23.5316L14.0625 30.3398C13.7608 30.5111 13.4739 30.6004 13.2147 30.6153C13.1896 30.6165 13.1645 30.6171 13.1394 30.6172' fill='url(%23paint4_linear_173_14441)'/%3e%3cpath d='M12.3497 30.2891C12.1099 30.0349 11.9683 29.6406 11.9683 29.1292V29.0089C11.9683 29.52 12.1099 29.9146 12.3497 30.1688L12.4109 30.2275L12.3497 30.2891Z' fill='url(%23paint5_linear_173_14441)'/%3e%3cpath d='M26.1025 23.4882L26.0259 23.4114L30.1349 21.0727C30.6568 20.7758 30.9498 20.3927 30.9987 20.0025C30.9987 20.1457 30.9668 20.2889 30.9035 20.4282C30.7756 20.7091 30.5194 20.9744 30.135 21.1934L26.1025 23.4883' fill='url(%23paint6_linear_173_14441)'/%3e%3cpath d='M30.9991 20C30.9501 19.6089 30.6571 19.2261 30.1353 18.9291L26.0259 16.5907L26.1025 16.5139H26.1029L30.1353 18.8088C30.7106 19.1365 30.9987 19.5682 30.9991 20Z' fill='url(%23paint7_linear_173_14441)'/%3e%3cpath d='M11.9683 10.9922V10.8661C11.9683 10.8206 11.9695 10.7761 11.9718 10.7329V10.7309C11.9718 10.7303 11.9718 10.7297 11.972 10.729V10.7242C11.9969 10.284 12.1334 9.94066 12.3497 9.71139L12.4099 9.77198C12.1334 10.0219 11.9683 10.4388 11.9683 10.9922Z' fill='url(%23paint8_linear_173_14441)'/%3e%3cpath d='M26.026 16.5898L14.0625 9.78115C13.7308 9.59285 13.417 9.50355 13.1375 9.50355C12.8525 9.50355 12.6039 9.59642 12.4099 9.77154L12.3496 9.71091C12.3684 9.69096 12.388 9.67172 12.4082 9.65322C12.4089 9.65255 12.4099 9.65188 12.4105 9.65125C12.6031 9.47747 12.849 9.3846 13.1314 9.38293H13.1375C13.417 9.38293 13.7308 9.47227 14.0625 9.66064L26.1029 16.5128L26.1026 16.513L26.026 16.5898Z' fill='url(%23paint9_linear_173_14441)'/%3e%3cdefs%3e%3clinearGradient id='paint0_linear_173_14441' x1='18.4943' y1='10.6794' x2='9.69389' y2='19.494' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2300A0FF'/%3e%3cstop offset='0.00657' stop-color='%2300A1FF'/%3e%3cstop offset='0.2601' stop-color='%2300BEFF'/%3e%3cstop offset='0.5122' stop-color='%2300D2FF'/%3e%3cstop offset='0.7604' stop-color='%2300DFFF'/%3e%3cstop offset='1' stop-color='%2300E3FF'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear_173_14441' x1='31.6348' y1='19.9407' x2='11.691' y2='19.9407' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFE000'/%3e%3cstop offset='0.4087' stop-color='%23FFBD00'/%3e%3cstop offset='0.7754' stop-color='orange'/%3e%3cstop offset='1' stop-color='%23FF9C00'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear_173_14441' x1='24.2172' y1='23.2425' x2='9.30414' y2='38.0705' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FF3A44'/%3e%3cstop offset='1' stop-color='%23C31162'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear_173_14441' x1='9.77725' y1='8.25731' x2='16.4237' y2='14.876' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2332A071'/%3e%3cstop offset='0.0685' stop-color='%232DA771'/%3e%3cstop offset='0.4762' stop-color='%2315CF74'/%3e%3cstop offset='0.8009' stop-color='%2306E775'/%3e%3cstop offset='1' stop-color='%2300F076'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear_173_14441' x1='24.2114' y1='25.6084' x2='12.2683' y2='37.5709' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23CC2E36'/%3e%3cstop offset='1' stop-color='%239C0E4E'/%3e%3c/linearGradient%3e%3clinearGradient id='paint5_linear_173_14441' x1='13.3285' y1='10.6804' x2='5.57625' y2='18.4453' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23008DE0'/%3e%3cstop offset='0.00657' stop-color='%23008DE0'/%3e%3cstop offset='0.2601' stop-color='%2300A7E0'/%3e%3cstop offset='0.5122' stop-color='%2300B8E0'/%3e%3cstop offset='0.7604' stop-color='%2300C4E0'/%3e%3cstop offset='1' stop-color='%2300C7E0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint6_linear_173_14441' x1='31.6346' y1='20.0018' x2='11.6929' y2='20.0018' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23E0C500'/%3e%3cstop offset='0.4087' stop-color='%23E0A600'/%3e%3cstop offset='0.7754' stop-color='%23E09100'/%3e%3cstop offset='1' stop-color='%23E08900'/%3e%3c/linearGradient%3e%3clinearGradient id='paint7_linear_173_14441' x1='31.6349' y1='20.0008' x2='11.6933' y2='20.0008' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFE840'/%3e%3cstop offset='0.4087' stop-color='%23FFCE40'/%3e%3cstop offset='0.7754' stop-color='%23FFBC40'/%3e%3cstop offset='1' stop-color='%23FFB540'/%3e%3c/linearGradient%3e%3clinearGradient id='paint8_linear_173_14441' x1='13.3201' y1='10.6927' x2='5.8533' y2='17.8475' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2340B8FF'/%3e%3cstop offset='0.00657' stop-color='%2340B9FF'/%3e%3cstop offset='0.2601' stop-color='%2340CEFF'/%3e%3cstop offset='0.5122' stop-color='%2340DDFF'/%3e%3cstop offset='0.7604' stop-color='%2340E7FF'/%3e%3cstop offset='1' stop-color='%2340EAFF'/%3e%3c/linearGradient%3e%3clinearGradient id='paint9_linear_173_14441' x1='9.76302' y1='10.4182' x2='15.0961' y2='15.76' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2365B895'/%3e%3cstop offset='0.0685' stop-color='%2362BD95'/%3e%3cstop offset='0.4762' stop-color='%2350DB97'/%3e%3cstop offset='0.8009' stop-color='%2344ED98'/%3e%3cstop offset='1' stop-color='%2340F498'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\\\" alt=\\\"Play Store icon\\\" />\\n            </a>\\n\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  \";class v extends HTMLElement{constructor(){super(),this.attachShadow({mode:\"open\"}),this.shadowRoot&&(this.shadowRoot.append(u.content.cloneNode(!0),_,k),this.shadowRoot.addEventListener(\"click\",(n=>{this.handleAccordion(n)})))}connectedCallback(){this.handleChangeView()}handleChangeView(){var n,e,t;const o=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById(\"defly-wallet-connect-modal-desktop-mode-download-defly-button\"),l=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById(\"defly-wallet-connect-modal-download-defly-view-back-button\"),a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll(\".f_copy-button\");o&&o.addEventListener(\"click\",(()=>{this.onClickDownload()})),l&&l.addEventListener(\"click\",(()=>{this.onClickBack()})),a&&a.length&&a.forEach((n=>{n.addEventListener(\"click\",(()=>{this.onClickCopy()}))})),this.renderQRCode()}handleAccordion(n){var e,t;if(n.target instanceof Element){if(!n.target.classList.contains(\"defly-wallet-accordion-toggle__button\"))return;if(this.shadowRoot&&(null===(e=n.target.parentElement)||void 0===e?void 0:e.parentElement)){const e=null===(t=n.target.parentElement)||void 0===t?void 0:t.parentElement;if(!e)return;if(e.classList.contains(\"defly-wallet-accordion-item--active\"))return;const o=this.shadowRoot.querySelectorAll(\".defly-wallet-accordion-item.defly-wallet-accordion-item--active\");for(let n=0;n<o.length;n++)o[n].classList.remove(\"defly-wallet-accordion-item--active\");e.classList.toggle(\"defly-wallet-accordion-item--active\")}}}renderQRCode(){var n;const e=this.getAttribute(\"uri\");if(e){const t=new l.default({width:330,height:330,type:\"svg\",data:e,image:m,dotsOptions:{color:\"#000\",type:\"dots\"},imageOptions:{imageSize:.21,crossOrigin:\"anonymous\"},cornersSquareOptions:{type:\"extra-rounded\"},cornersDotOptions:{type:\"dot\"}}),o=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById(\"defly-wallet-connect-modal-connect-qr-code\");o&&t.append(o)}}onClickDownload(){if(this.shadowRoot){const n=this.shadowRoot.getElementById(\"defly-wallet-connect-modal-desktop-mode\");n&&(n.classList.remove(\"defly-wallet-connect-modal-desktop-mode--default\"),n.classList.add(\"defly-wallet-connect-modal-desktop-mode--download\"))}}onClickCopy(){if(this.shadowRoot){const n=this.getAttribute(\"uri\");if(n){const e=document.createElement(\"textarea\");e.style.position=\"fixed\",e.style.left=\"0\",e.style.top=\"0\",e.style.opacity=\"0\",e.value=n,document.body.appendChild(e),e.focus(),e.select(),document.execCommand(\"copy\"),document.body.removeChild(e)}}}onClickBack(){if(this.shadowRoot){const n=this.shadowRoot.getElementById(\"defly-wallet-connect-modal-desktop-mode\");n&&(n.classList.add(\"defly-wallet-connect-modal-desktop-mode--default\"),n.classList.remove(\"defly-wallet-connect-modal-desktop-mode--download\"))}}}var b=\".defly-wallet-connect-modal-touch-screen-mode {\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  gap: 46px;\\n  padding: 4px;\\n}\\n\\n.defly-wallet-connect-modal-touch-screen-mode--pending-message-view {\\n  gap: 56px;\\n  grid-template-rows: auto 48px;\\n  height: 100%;\\n  padding-bottom: 70px;\\n}\\n\\n.defly-wallet-connect-modal-touch-screen-mode__launch-defly-wallet-button,\\n.defly-wallet-connect-modal-touch-screen-mode__install-defly-wallet-button {\\n  display: block;\\n  padding: 14px;\\n  border-radius: 12px;\\n  text-decoration: none;\\n  text-align: center;\\n  font-size: 15px;\\n  line-height: 26px;\\n  letter-spacing: -0.09px;\\n  font-weight: 500;\\n  margin: 0 40px;\\n}\\n\\n.defly-wallet-connect-modal-touch-screen-mode__launch-defly-wallet-button {\\n  margin-bottom: 45px;\\n  background: linear-gradient(90deg, #3E38B9, #413AAA);\\n  color: #ffffff;\\n}\\n\\n.defly-wallet-connect-modal-touch-screen-mode__install-defly-wallet-button {\\n  margin-bottom: 20px;\\n  background-color: #494949;\\n  color: #ffffff;\\n}\\n\\n.defly-wallet-connect-modal-touch-screen-mode__new-to-defly-box {\\n  position: relative;\\n  margin-bottom: 5px;\\n}\\n\\n.defly-wallet-connect-modal-touch-screen-mode__new-to-defly-box__text {\\n  color: #999999;\\n  font-size: 16px;\\n  font-weight: 500;\\n  line-height: 24px;\\n  letter-spacing: -0.04px;\\n  text-align: center;\\n}\\n.defly-wallet-connect-modal-touch-screen-mode__new-to-defly-box__text a {\\n  color: inherit;\\n}\";i(b);const E=document.createElement(\"template\"),{name:C}=n.getDeflyWalletAppMeta(),D=`\\n  <div class=\"defly-wallet-connect-modal-touch-screen-mode\">\\n    <defly-wallet-connect-modal-information-section></defly-wallet-connect-modal-information-section>\\n\\n    <div>\\n      <a\\n        id=\"defly-wallet-connect-modal-touch-screen-mode-launch-defly-wallet-button\"\\n        class=\"defly-wallet-connect-modal-touch-screen-mode__launch-defly-wallet-button\"\\n        rel=\"noopener noreferrer\"\\n        target=\"_blank\">\\n        Launch ${C}\\n      </a>\\n\\n      <div\\n        class=\"defly-wallet-connect-modal-touch-screen-mode__new-to-defly-box\">\\n        <p class=\"defly-wallet-connect-modal-touch-screen-mode__new-to-defly-box__text\">\\n          New to <a href=\"https://defly.app/\">Defly Wallet</a>?\\n        </p>\\n      </div>\\n\\n      <a\\n        href=\"https://defly.app/download.html\"\\n        class=\"defly-wallet-connect-modal-touch-screen-mode__install-defly-wallet-button\"\\n        rel=\"noopener noreferrer\"\\n        target=\"_blank\">\\n        Install ${C}\\n      </a>\\n    </div>\\n  </div>\\n`;class L extends HTMLElement{constructor(){var e;if(super(),this.attachShadow({mode:\"open\"}),E.innerHTML=D,this.shadowRoot){const t=document.createElement(\"style\");t.textContent=b,this.shadowRoot.append(E.content.cloneNode(!0),t);const o=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById(\"defly-wallet-connect-modal-touch-screen-mode-launch-defly-wallet-button\"),l=this.getAttribute(\"uri\");o&&l&&(o.setAttribute(\"href\",n.generateDeflyWalletConnectDeepLink(l)),o.addEventListener(\"click\",(()=>{this.onClickLaunch()})))}}onClickLaunch(){if(E.innerHTML=`\\n    <div class=\"defly-wallet-connect-modal-touch-screen-mode defly-wallet-connect-modal-touch-screen-mode--pending-message-view\">\\n      <defly-wallet-connect-modal-pending-message-section should-use-sound=\"${this.getAttribute(\"should-use-sound\")}\"></defly-wallet-connect-modal-pending-message-section>\\n    </div>\\n  `,this.shadowRoot){const n=document.createElement(\"style\");n.textContent=b,this.shadowRoot.innerHTML=\"\",this.shadowRoot.append(E.content.cloneNode(!0),n)}}}var A='@import url(\"https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600&display=swap\");\\n@font-face {\\n  font-family: \"PP Right Grotesk\";\\n  src: url(\"../asset/fonts/pp-right-grotesk-wide-black.woff2\") format(\"woff2\");\\n  font-weight: 900;\\n  font-style: normal;\\n  font-display: swap;\\n}\\n.defly-wallet-modal {\\n  --defly-wallet-modal-font-family: \"Spline Sans\", sans-serif;\\n  --defly-wallet-connect-modal-headline-family: \"PP Right Grotesk\", sans-serif;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  bottom: 0;\\n  z-index: 999999;\\n  width: 100vw;\\n  height: 100vh;\\n  background-color: rgba(0, 0, 0, 0.7);\\n}\\n.defly-wallet-modal--select-account .defly-wallet-modal__body {\\n  width: 480px;\\n  height: 578px;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body {\\n  top: 40px;\\n  bottom: 0;\\n  left: 20px;\\n  width: calc(100% - 40px);\\n  max-width: unset;\\n  height: calc(100 * var(--vh));\\n  padding: 20px;\\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\\n  border-radius: 20px 20px 0px 0px;\\n  animation: 0.3s DeflyWalletConnectMobileSlideIn ease-out;\\n  overflow-y: auto;\\n  transform: unset;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body::before {\\n  background-image: unset;\\n}\\n.defly-wallet-modal * {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-smooth: antialiased;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.defly-wallet-modal ul,\\n.defly-wallet-modal ol,\\n.defly-wallet-modal li {\\n  list-style-type: none;\\n}\\n\\n.defly-wallet-button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: auto;\\n  height: 48px;\\n  padding: 14px;\\n  border: none;\\n  border-radius: 12px;\\n  outline: none;\\n  cursor: pointer;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-size: 14px;\\n}\\n\\n.defly-wallet-modal__logo img {\\n  display: block;\\n  width: 32px;\\n}\\n\\n.defly-wallet-modal__body {\\n  position: relative;\\n  top: 50%;\\n  left: 50%;\\n  width: 979px;\\n  max-width: calc(100vw - 80px);\\n  padding: 28px;\\n  background-color: #131313;\\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\\n  border-radius: 40px;\\n  animation: 0.3s DeflyWalletConnectSlideIn ease-out;\\n  transform: translate(-50%, -50%);\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-modal--desktop .defly-wallet-modal__body {\\n    width: 100%;\\n    max-width: calc(100vw - 32px);\\n    padding: 24px;\\n  }\\n}\\n@keyframes DeflyWalletConnectSlideIn {\\n  0% {\\n    opacity: 0;\\n    transform: translate(-50%, calc(-50% + 24px));\\n  }\\n  100% {\\n    opacity: 1;\\n    transform: translate(-50%, -50%);\\n  }\\n}\\n@keyframes DeflyWalletConnectMobileSlideIn {\\n  0% {\\n    top: 30%;\\n    opacity: 0;\\n  }\\n  100% {\\n    top: 40px;\\n    opacity: 1;\\n  }\\n}';i(A);const S=document.createElement(\"template\"),M=n.isMobile()?`${n.DEFLY_WALLET_MODAL_CLASSNAME} ${n.DEFLY_WALLET_MODAL_CLASSNAME}--mobile`:`${n.DEFLY_WALLET_MODAL_CLASSNAME} ${n.DEFLY_WALLET_MODAL_CLASSNAME}--desktop`;class B extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const e=document.createElement(\"style\");e.textContent=A,s()&&n.isMobile()?(S.innerHTML=`\\n        <div class=\"${M}\">\\n          <div class=\"defly-wallet-modal__body\" part=\"body\">\\n            <defly-wallet-modal-header modal-id=\"${n.DEFLY_WALLET_CONNECT_MODAL_ID}\"></defly-wallet-modal-header/>\\n      \\n            <defly-wallet-modal-touch-screen-mode uri=\"${this.getAttribute(\"uri\")}\" should-use-sound=\"${this.getAttribute(\"should-use-sound\")}\"></defly-wallet-modal-touch-screen-mode>\\n          </div>\\n        </div>\\n      `,this.shadowRoot.append(S.content.cloneNode(!0),e)):(S.innerHTML=`\\n          <div class=\"${M}\">\\n            <div class=\"defly-wallet-modal__body\">\\n              <defly-wallet-modal-header modal-id=\"${n.DEFLY_WALLET_CONNECT_MODAL_ID}\"></defly-wallet-modal-header/>\\n        \\n              <defly-wallet-modal-desktop-mode id=\"defly-wallet-modal-desktop-mode\" uri=\"${this.getAttribute(\"uri\")}\">\\n              </defly-wallet-modal-desktop-mode>\\n            </div>\\n          </div>\\n        `,this.shadowRoot.append(S.content.cloneNode(!0),e))}}}var F='@import url(\"https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600&display=swap\");\\n@font-face {\\n  font-family: \"PP Right Grotesk\";\\n  src: url(\"../asset/fonts/pp-right-grotesk-wide-black.woff2\") format(\"woff2\");\\n  font-weight: 900;\\n  font-style: normal;\\n  font-display: swap;\\n}\\n.defly-wallet-modal {\\n  --defly-wallet-modal-font-family: \"Spline Sans\", sans-serif;\\n  --defly-wallet-connect-modal-headline-family: \"PP Right Grotesk\", sans-serif;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  bottom: 0;\\n  z-index: 999999;\\n  width: 100vw;\\n  height: 100vh;\\n  background-color: rgba(0, 0, 0, 0.7);\\n}\\n.defly-wallet-modal--select-account .defly-wallet-modal__body {\\n  width: 480px;\\n  height: 578px;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body {\\n  top: 40px;\\n  bottom: 0;\\n  left: 20px;\\n  width: calc(100% - 40px);\\n  max-width: unset;\\n  height: calc(100 * var(--vh));\\n  padding: 20px;\\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\\n  border-radius: 20px 20px 0px 0px;\\n  animation: 0.3s DeflyWalletConnectMobileSlideIn ease-out;\\n  overflow-y: auto;\\n  transform: unset;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body::before {\\n  background-image: unset;\\n}\\n.defly-wallet-modal * {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-smooth: antialiased;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.defly-wallet-modal ul,\\n.defly-wallet-modal ol,\\n.defly-wallet-modal li {\\n  list-style-type: none;\\n}\\n\\n.defly-wallet-button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: auto;\\n  height: 48px;\\n  padding: 14px;\\n  border: none;\\n  border-radius: 12px;\\n  outline: none;\\n  cursor: pointer;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-size: 14px;\\n}\\n\\n.defly-wallet-modal__logo img {\\n  display: block;\\n  width: 32px;\\n}\\n\\n.defly-wallet-modal__body {\\n  position: relative;\\n  top: 50%;\\n  left: 50%;\\n  width: 979px;\\n  max-width: calc(100vw - 80px);\\n  padding: 28px;\\n  background-color: #131313;\\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\\n  border-radius: 40px;\\n  animation: 0.3s DeflyWalletConnectSlideIn ease-out;\\n  transform: translate(-50%, -50%);\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-modal--desktop .defly-wallet-modal__body {\\n    width: 100%;\\n    max-width: calc(100vw - 32px);\\n    padding: 24px;\\n  }\\n}\\n@keyframes DeflyWalletConnectSlideIn {\\n  0% {\\n    opacity: 0;\\n    transform: translate(-50%, calc(-50% + 24px));\\n  }\\n  100% {\\n    opacity: 1;\\n    transform: translate(-50%, -50%);\\n  }\\n}\\n@keyframes DeflyWalletConnectMobileSlideIn {\\n  0% {\\n    top: 30%;\\n    opacity: 0;\\n  }\\n  100% {\\n    top: 40px;\\n    opacity: 1;\\n  }\\n}\\n.defly-wallet-redirect-modal {\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  gap: 56px;\\n  grid-template-rows: auto 48px;\\n  height: 100%;\\n  padding: 4px;\\n  padding-bottom: 70px;\\n}\\n\\n.defly-wallet-redirect-modal__content {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n\\n.defly-wallet-redirect-modal__content__title {\\n  margin: 20px 0 8px;\\n  color: #3c3c49;\\n  font-size: 18px;\\n  font-weight: 600;\\n  line-height: 22px;\\n  letter-spacing: -0.26px;\\n}\\n\\n.defly-wallet-redirect-modal__content__description,\\n.defly-wallet-redirect-modal__content__install-defly-text {\\n  color: #3c3c49;\\n  max-width: 271px;\\n  font-size: 14px;\\n  font-weight: 400;\\n  line-height: 24px;\\n  letter-spacing: -0.09px;\\n  text-align: center;\\n}\\n\\n.defly-wallet-redirect-modal__content__description {\\n  margin-bottom: 24px;\\n}\\n\\n.defly-wallet-redirect-modal__content__install-defly-text__link {\\n  color: #6b46fe;\\n  font-size: 14px;\\n  font-weight: 400;\\n  line-height: 24px;\\n  letter-spacing: -0.09px;\\n  text-align: center;\\n}\\n\\n.defly-wallet-redirect-modal__launch-defly-wallet-button {\\n  display: block;\\n  padding: 14px;\\n  color: #ffffff;\\n  background-color: #6b46fe;\\n  border-radius: 12px;\\n  text-decoration: none;\\n  text-align: center;\\n  font-size: 14px;\\n  line-height: 20px;\\n  letter-spacing: -0.09px;\\n  font-weight: 500;\\n}';i(F);const R=document.createElement(\"template\");R.innerHTML=\"\\n  <div class=\\\"defly-wallet-modal defly-wallet-modal--mobile\\\">\\n    <div class=\\\"defly-wallet-modal__body\\\">\\n      <div class=\\\"defly-wallet-redirect-modal\\\">\\n        <div class=\\\"defly-wallet-redirect-modal__content\\\">\\n          <img src=\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='120' height='38' viewBox='0 0 120 38'%3e %3cdefs%3e %3cclipPath id='a'%3e %3crect width='120' height='38' fill='white'/%3e %3c/clipPath%3e %3c/defs%3e %3cg transform='translate(18090 -8428)'%3e %3cg transform='translate(-18090 8428)' clip-path='url(%23a)'%3e %3crect width='36' height='36' rx='7.768' transform='translate(0 1)' fill='%23222222'/%3e %3cpath d='M112.25%2c37h-11.5A5.976%2c5.976%2c0%2c0%2c1%2c95%2c30.818V9.182A5.976%2c5.976%2c0%2c0%2c1%2c100.75%2c3h11.5A5.976%2c5.976%2c0%2c0%2c1%2c118%2c9.182V30.818A5.976%2c5.976%2c0%2c0%2c1%2c112.25%2c37Z' transform='translate(0 -1)' fill='rgba(107%2c70%2c254%2c0.1)'/%3e %3cpath d='M112.25%2c38.5h-11.5a7.484%2c7.484%2c0%2c0%2c1-7.25-7.682V9.182A7.484%2c7.484%2c0%2c0%2c1%2c100.75%2c1.5h11.5a7.484%2c7.484%2c0%2c0%2c1%2c7.25%2c7.682V30.818A7.484%2c7.484%2c0%2c0%2c1%2c112.25%2c38.5Zm-11.5-34A4.487%2c4.487%2c0%2c0%2c0%2c96.5%2c9.182V30.818a4.487%2c4.487%2c0%2c0%2c0%2c4.25%2c4.682h11.5a4.487%2c4.487%2c0%2c0%2c0%2c4.25-4.682V9.182A4.487%2c4.487%2c0%2c0%2c0%2c112.25%2c4.5Z' transform='translate(0 -1)' fill='white'/%3e %3cpath d='M78.927%2c16.594H52v-3H71.683l-2.534-2.534L71.27%2c8.939Z' fill='white'/%3e %3cpath d='M59.73%2c30.655%2c52.073%2c23H79v3H59.317l2.534%2c2.534Z' fill='white'/%3e %3cpath d='M109.565%2c30.175h-5.826a1.5%2c1.5%2c0%2c1%2c1%2c0-3h5.826a1.5%2c1.5%2c0%2c0%2c1%2c0%2c3Z' fill='white'/%3e %3c/g%3e %3cg transform='translate(-18227.544 8408.866)'%3e %3cpath d='M168.632%2c47.566%2c155.742%2c26l-12.89%2c21.566%2c12.89-7.354Z' transform='translate(0)' fill='white'/%3e %3cpath d='M191.634%2c257.081l-10.639-5.607-10.639%2c5.607%2c10.639-3.464Z' transform='translate(-25.252 -207.321)' fill='white'/%3e %3c/g%3e %3c/g%3e%3c/svg%3e\\\" />\\n\\n          <h1 class=\\\"defly-wallet-redirect-modal__content__title\\\">\\n            Can't Launch Defly\\n          </h1>\\n\\n          <p class=\\\"defly-wallet-redirect-modal__content__description\\\">\\n            We couldn't redirect you to Defly Wallet automatically. Please try again.\\n          </p>\\n\\n          <p class=\\\"defly-wallet-redirect-modal__content__install-defly-text\\\">\\n            Don't have Defly Wallet installed yet?\\n            <br />\\n            \\n            <a\\n              id=\\\"defly-wallet-redirect-modal-download-defly-link\\\"\\n              class=\\\"defly-wallet-redirect-modal__content__install-defly-text__link\\\"\\n              href=\\\"https://deflywallet.app/download/\\\"\\n              rel=\\\"noopener noreferrer\\\"\\n              target=\\\"_blank\\\">\\n              Tap here to install.\\n            </a>\\n          </p>\\n        </div>\\n\\n        <a\\n          id=\\\"defly-wallet-redirect-modal-launch-defly-link\\\"\\n          class=\\\"defly-wallet-redirect-modal__launch-defly-wallet-button\\\"\\n          rel=\\\"noopener noreferrer\\\"\\n          target=\\\"_blank\\\">\\n          Launch Defly Wallet\\n        </a>\\n      </div>\\n    </div>\\n  </div>\\n\";class z extends HTMLElement{constructor(){var e,t;if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const o=document.createElement(\"style\");o.textContent=F,this.shadowRoot.append(R.content.cloneNode(!0),o);const l=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById(\"defly-wallet-redirect-modal-download-defly-link\");null==l||l.addEventListener(\"click\",(()=>{this.onClose()}));const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById(\"defly-wallet-redirect-modal-launch-defly-link\");null==a||a.addEventListener(\"click\",(()=>{this.onClose()})),null==a||a.setAttribute(\"href\",n.generateDeflyWalletAppDeepLink())}}connectedCallback(){const e=window.open(n.generateDeflyWalletAppDeepLink());e&&e.addEventListener(\"load\",(()=>{this.onClose()}))}onClose(){n.removeModalWrapperFromDOM(n.DEFLY_WALLET_REDIRECT_MODAL_ID)}}var T=\".defly-wallet-connect-modal-information-section {\\n  padding: 12px;\\n  display: flex;\\n  align-items: center;\\n  flex-flow: column;\\n  justify-content: center;\\n}\\n.defly-wallet-connect-modal-information-section--mobile {\\n  padding: 0;\\n  margin-top: 20px;\\n}\\n.defly-wallet-connect-modal-information-section--mobile .defly-wallet-connect-modal-information-section__defly-icon {\\n  margin-bottom: 21px;\\n  max-width: 70px;\\n}\\n.defly-wallet-connect-modal-information-section--mobile .defly-wallet-connect-modal-information-section__title {\\n  font-size: 34px;\\n  line-height: 32px;\\n}\\n\\n.defly-wallet-connect-modal-information-section__defly-icon {\\n  margin-bottom: 32px;\\n}\\n\\n.defly-wallet-connect-modal-information-section__title {\\n  margin-top: 0;\\n  margin-bottom: 0;\\n  color: #fff;\\n  font-size: 52px;\\n  line-height: 48px;\\n  font-weight: 900;\\n  white-space: pre-line;\\n  text-align: center;\\n  letter-spacing: 0;\\n  font-family: var(--defly-wallet-connect-modal-headline-family), sans-serif;\\n}\\n\\n.defly-wallet-connect-modal-information-section__download-defly-button {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  margin: 20px auto 0;\\n  padding: 0;\\n  color: #999999;\\n  background-color: transparent;\\n  outline: none;\\n  border: none;\\n  font-weight: 600;\\n  font-size: 13px;\\n  line-height: 20px;\\n  letter-spacing: 0.01px;\\n  cursor: pointer;\\n}\\n.defly-wallet-connect-modal-information-section__download-defly-button:hover {\\n  opacity: 0.8;\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-connect-modal-information-section--desktop {\\n    padding: 0;\\n  }\\n  .defly-wallet-connect-modal-information-section--desktop .defly-wallet-connect-modal-information-section__defly-icon {\\n    max-width: 70px;\\n    margin-bottom: 21px;\\n  }\\n  .defly-wallet-connect-modal-information-section--desktop .defly-wallet-connect-modal-information-section__title {\\n    font-size: 34px;\\n    line-height: 32px;\\n  }\\n  .defly-wallet-connect-modal-information-section__download-defly-button {\\n    display: none;\\n  }\\n}\";i(T);const{logo:W,name:O}=n.getDeflyWalletAppMeta(),H=document.createElement(\"template\"),I=n.isMobile()?\"defly-wallet-connect-modal-information-section defly-wallet-connect-modal-information-section--mobile\":\"defly-wallet-connect-modal-information-section defly-wallet-connect-modal-information-section--desktop\";H.innerHTML=`\\n  <section class=\"${I}\">\\n    <img src=\"${W}\" class=\"defly-wallet-connect-modal-information-section__defly-icon\" alt=\"${O}\" />\\n    <h1 class=\"defly-wallet-connect-modal-information-section__title\">Secure \\n wallet & \\n trading</h1>\\n \\n    <button\\n        id=\"defly-wallet-connect-modal-information-section-download-defly-button\"\\n        class=\"defly-wallet-connect-modal-information-section__download-defly-button\">\\n        <img src=\"data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect x='2' y='2' width='4.66667' height='4.66667' rx='1.2' stroke='%23999999' stroke-width='1.5'/%3e%3crect x='2' y='9.33203' width='4.66667' height='4.66667' rx='1.2' stroke='%23999999' stroke-width='1.5'/%3e%3crect x='9.33325' y='2' width='4.66667' height='4.66667' rx='1.2' stroke='%23999999' stroke-width='1.5'/%3e%3cpath d='M8.70581 9.5293H10.9411' stroke='%23999999' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M13.1765 12.668L14.6667 12.668' stroke='%23999999' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M13.1765 14L14.6667 14' stroke='%23999999' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M11.686 14L13.1762 14' stroke='%23999999' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M12.4314 9.5293H14.6667' stroke='%23999999' stroke-width='1.66667' stroke-linejoin='round'/%3e%3cpath d='M8.70581 10.2754H12.4313' stroke='%23999999' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M10.196 11.7656H11.6862' stroke='%23999999' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M10.196 12.5117H11.6862' stroke='%23999999' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M8.70581 13.2539H10.196' stroke='%23999999' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M8.70581 14H10.196' stroke='%23999999' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M10.196 11.0195H12.4313' stroke='%23999999' stroke-width='1.25' stroke-linejoin='round'/%3e%3c/svg%3e\" alt=\"QR Icon\" />\\n        Download\\n      </button>\\n  </section>\\n`;class V extends HTMLElement{constructor(){var n;if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const e=document.createElement(\"style\");e.textContent=T,this.shadowRoot.append(H.content.cloneNode(!0),e);const t=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById(\"defly-wallet-connect-modal-information-section-download-defly-button\");t&&t.addEventListener(\"click\",(()=>{this.onClickDownload()}))}}onClickDownload(){if(this.shadowRoot){const n=this.shadowRoot.host.parentElement;n&&(n.classList.remove(\"defly-wallet-connect-modal-desktop-mode--default\"),n.classList.add(\"defly-wallet-connect-modal-desktop-mode--download\"))}}}var G='@import url(\"https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600&display=swap\");\\n@font-face {\\n  font-family: \"PP Right Grotesk\";\\n  src: url(\"../asset/fonts/pp-right-grotesk-wide-black.woff2\") format(\"woff2\");\\n  font-weight: 900;\\n  font-style: normal;\\n  font-display: swap;\\n}\\n.defly-wallet-modal {\\n  --defly-wallet-modal-font-family: \"Spline Sans\", sans-serif;\\n  --defly-wallet-connect-modal-headline-family: \"PP Right Grotesk\", sans-serif;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  bottom: 0;\\n  z-index: 999999;\\n  width: 100vw;\\n  height: 100vh;\\n  background-color: rgba(0, 0, 0, 0.7);\\n}\\n.defly-wallet-modal--select-account .defly-wallet-modal__body {\\n  width: 480px;\\n  height: 578px;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body {\\n  top: 40px;\\n  bottom: 0;\\n  left: 20px;\\n  width: calc(100% - 40px);\\n  max-width: unset;\\n  height: calc(100 * var(--vh));\\n  padding: 20px;\\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\\n  border-radius: 20px 20px 0px 0px;\\n  animation: 0.3s DeflyWalletConnectMobileSlideIn ease-out;\\n  overflow-y: auto;\\n  transform: unset;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body::before {\\n  background-image: unset;\\n}\\n.defly-wallet-modal * {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-smooth: antialiased;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.defly-wallet-modal ul,\\n.defly-wallet-modal ol,\\n.defly-wallet-modal li {\\n  list-style-type: none;\\n}\\n\\n.defly-wallet-button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: auto;\\n  height: 48px;\\n  padding: 14px;\\n  border: none;\\n  border-radius: 12px;\\n  outline: none;\\n  cursor: pointer;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-size: 14px;\\n}\\n\\n.defly-wallet-modal__logo img {\\n  display: block;\\n  width: 32px;\\n}\\n\\n.defly-wallet-modal__body {\\n  position: relative;\\n  top: 50%;\\n  left: 50%;\\n  width: 979px;\\n  max-width: calc(100vw - 80px);\\n  padding: 28px;\\n  background-color: #131313;\\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\\n  border-radius: 40px;\\n  animation: 0.3s DeflyWalletConnectSlideIn ease-out;\\n  transform: translate(-50%, -50%);\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-modal--desktop .defly-wallet-modal__body {\\n    width: 100%;\\n    max-width: calc(100vw - 32px);\\n    padding: 24px;\\n  }\\n}\\n@keyframes DeflyWalletConnectSlideIn {\\n  0% {\\n    opacity: 0;\\n    transform: translate(-50%, calc(-50% + 24px));\\n  }\\n  100% {\\n    opacity: 1;\\n    transform: translate(-50%, -50%);\\n  }\\n}\\n@keyframes DeflyWalletConnectMobileSlideIn {\\n  0% {\\n    top: 30%;\\n    opacity: 0;\\n  }\\n  100% {\\n    top: 40px;\\n    opacity: 1;\\n  }\\n}\\n.defly-wallet-connect-modal-pending-message-section {\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  grid-template-rows: auto 48px;\\n  gap: 56px;\\n  height: 100%;\\n  padding: 4px;\\n  padding-bottom: 70px;\\n}\\n\\n.defly-wallet-connect-modal-pending-message {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n  text-align: center;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view {\\n  display: flex;\\n  justify-content: space-between;\\n  flex-direction: column;\\n  height: 100%;\\n  margin-top: 10px;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__image {\\n  margin: 0 auto;\\n  display: block;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__title {\\n  margin: 16px 0 12px;\\n  color: #ffffff;\\n  text-align: center;\\n  font-size: 18px;\\n  font-weight: 500;\\n  line-height: 24px;\\n  letter-spacing: -0.26px;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__description {\\n  color: #999999;\\n  font-size: 14px;\\n  text-align: center;\\n  font-weight: 400;\\n  line-height: 24px;\\n  letter-spacing: -0.01px;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__button {\\n  display: block;\\n  width: 100%;\\n  padding: 14px;\\n  border-radius: 12px;\\n  text-decoration: none;\\n  text-align: center;\\n  font-size: 14px;\\n  line-height: 20px;\\n  letter-spacing: -0.09px;\\n  font-weight: 500;\\n  color: #ffffff;\\n  background-color: #6b46fe;\\n  border: none;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor {\\n  display: flex;\\n  gap: 12px;\\n  margin-bottom: 20px;\\n  padding: 16px;\\n  background: #ffffff;\\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\\n  border-radius: 12px;\\n  text-decoration: none;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__image {\\n  width: 24px;\\n  height: 24px;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title-wrapper {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  margin-bottom: 4px;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title {\\n  margin: 0;\\n  font-size: 14px;\\n  font-weight: 500;\\n  line-height: 20px;\\n  letter-spacing: -0.1px;\\n  color: #3c3c49;\\n}\\n.defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__description {\\n  /* stylelint-disable value-no-vendor-prefix */\\n  /* stylelint-disable  property-no-vendor-prefix */\\n  display: -webkit-box;\\n  max-width: 100%;\\n  -webkit-line-clamp: 2;\\n  /* autoprefixer: ignore next */\\n  -webkit-box-orient: vertical;\\n  overflow: hidden;\\n  /* stylelint-enable value-no-vendor-prefix */\\n  /* stylelint-enable property-no-vendor-prefix */\\n  margin: 0;\\n  font-size: 12px;\\n  font-weight: 400;\\n  line-height: 18px;\\n  letter-spacing: 0.01px;\\n  color: #9d9dae;\\n}\\n\\n.defly-wallet-connect-modal-pending-message__animation-wrapper {\\n  width: 56px;\\n  height: 56px;\\n  background-color: #6b46fe;\\n  border-radius: 50%;\\n}\\n\\n.defly-wallet-connect-modal-pending-message__text {\\n  max-width: 271px;\\n  margin-top: 20px;\\n  color: #ffffff;\\n  font-size: 18px;\\n  font-weight: 500;\\n  line-height: 28px;\\n  letter-spacing: -0.26px;\\n}\\n\\n.defly-wallet-connect-modal-pending-message__cancel-button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: 100%;\\n  padding: 14px;\\n  color: #6a6a81;\\n  background-color: #ffffff;\\n  box-shadow: 0px 0px 1px rgba(12, 26, 75, 0.24), 0px 3px 8px -1px rgba(50, 50, 71, 0.05);\\n  border-radius: 12px;\\n  text-decoration: none;\\n  text-align: center;\\n  font-size: 14px;\\n  line-height: 20px;\\n  letter-spacing: -0.09px;\\n  font-weight: 500;\\n  border: none;\\n}';i(G);const{logo:P}=n.getDeflyWalletAppMeta(),j=document.createElement(\"template\");j.innerHTML=`\\n  <div class=\"defly-wallet-connect-modal-pending-message-section\">\\n    <div class=\"defly-wallet-connect-modal-pending-message\">\\n      <img src=\"${P}\" alt=\"Defly Wallet Logo\" />\\n\\n      <div class=\"defly-wallet-connect-modal-pending-message__text\">\\n        Please wait while we connect you to Defly Wallet...\\n      </div>\\n    </div>\\n\\n    <button\\n      id=\"defly-wallet-connect-modal-pending-message-cancel-button\"\\n      class=\"defly-wallet-button defly-wallet-connect-modal-pending-message__cancel-button\">\\n        Cancel\\n    </button>\\n  </div>\\n\\n  <div id=\"defly-wallet-connect-modal-pending-message-audio-wrapper\"></div>\\n`;const N=`\\n  <div class=\"defly-wallet-connect-modal-pending-message--try-again-view\">\\n    <div>\\n      <img class=\"defly-wallet-connect-modal-pending-message--try-again-view__image\" src=\"${P}\" alt=\"Defly Wallet Logo\" />\\n\\n      <h1 class=\"defly-wallet-connect-modal-pending-message--try-again-view__title\">\\n        Couldnt establish connection\\n      </h1>\\n\\n      <p class=\"defly-wallet-connect-modal-pending-message--try-again-view__description\">\\n        Having issues? Before trying again, make sure to read the support article below and apply the possible solutions.\\n      </p>\\n    </div>\\n\\n    <div>\\n      <a\\n        href=\"https://support.deflywallet.app/en/article/resolving-walletconnect-issues-1tolptm/\"\\n        target=\"_blank\"\\n        rel=\"noopener noreferrer\"\\n        class=\"defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor\">\\n        <img\\n          class=\"defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__image\"\\n          src=\"data:image/svg+xml,%3csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M8 22.3199C7.72 22.3199 7.42998 22.2499 7.16998 22.1099C6.59998 21.8099 6.25 21.2099 6.25 20.5699V19.15C3.23 18.84 1.25 16.6199 1.25 13.4399V7.43994C1.25 3.99994 3.56 1.68994 7 1.68994H17C20.44 1.68994 22.75 3.99994 22.75 7.43994V13.4399C22.75 16.8799 20.44 19.1899 17 19.1899H13.23L8.96997 22.03C8.67997 22.22 8.34 22.3199 8 22.3199ZM7 3.17993C4.42 3.17993 2.75 4.84993 2.75 7.42993V13.43C2.75 16.01 4.42 17.68 7 17.68C7.41 17.68 7.75 18.02 7.75 18.43V20.56C7.75 20.69 7.83 20.75 7.88 20.78C7.93001 20.81 8.03001 20.84 8.14001 20.77L12.59 17.81C12.71 17.73 12.86 17.68 13.01 17.68H17.01C19.59 17.68 21.26 16.01 21.26 13.43V7.42993C21.26 4.84993 19.59 3.17993 17.01 3.17993H7ZM11.9998 12.11C11.5898 12.11 11.2498 11.77 11.2498 11.36V11.15C11.2498 10.0038 12.0798 9.4336 12.4082 9.20798L12.4198 9.20001C12.7898 8.95001 12.9098 8.78002 12.9098 8.52002C12.9098 8.02002 12.4998 7.60999 11.9998 7.60999C11.4998 7.60999 11.0898 8.02002 11.0898 8.52002C11.0898 8.93002 10.7498 9.27002 10.3398 9.27002C9.92984 9.27002 9.58984 8.93002 9.58984 8.52002C9.58984 7.19002 10.6698 6.10999 11.9998 6.10999C13.3298 6.10999 14.4098 7.19002 14.4098 8.52002C14.4098 9.66002 13.5698 10.23 13.2598 10.44C12.8698 10.7 12.7498 10.87 12.7498 11.15V11.36C12.7498 11.78 12.4098 12.11 11.9998 12.11ZM11.25 13.85C11.25 14.26 11.58 14.6 12 14.6C12.42 14.6 12.75 14.26 12.75 13.85C12.75 13.44 12.41 13.1 12 13.1C11.59 13.1 11.25 13.44 11.25 13.85Z' fill='%236B46FE'/%3e%3c/svg%3e\"\\n          alt=\"Help Icon\"\\n        />\\n\\n        <div>\\n          <div\\n            class=\"defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title-wrapper\">\\n            <h1\\n              class=\"defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__title\">\\n                Resolving WalletConnect issues\\n            </h1>\\n\\n            <img src=\"data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.3287 10.0983C10.9574 10.0983 10.6564 9.79734 10.6564 9.42604L10.6564 6.29525L5.14866 11.803C4.88611 12.0655 4.46044 12.0655 4.19789 11.803C3.93534 11.5404 3.93534 11.1147 4.19789 10.8522L9.70561 5.34447L6.57482 5.34447C6.20352 5.34447 5.90252 5.04347 5.90252 4.67218C5.90252 4.30088 6.20352 3.99988 6.57482 3.99988L11.3287 3.99988C11.507 3.99988 11.678 4.07071 11.8041 4.19679C11.9301 4.32287 12.001 4.49387 12.001 4.67218L12.001 9.42604C12.001 9.79734 11.7 10.0983 11.3287 10.0983Z' fill='%239D9DAE'/%3e%3c/svg%3e\" alt=\"Send Icon\"/>\\n          </div>\\n\\n          <p\\n            class=\"defly-wallet-connect-modal-pending-message--try-again-view__resolving-anchor__description\">\\n            Unfortunately there are several known issues related to WalletConnect that our team is working on. Some of these issues are related to the WalletConnect JavaScript implementation on the dApp ...\\n          </p>\\n        </div>\\n      </a>\\n\\n      <button id=\"defly-wallet-connect-modal-pending-message-try-again-button\" class=\"defly-wallet-connect-button defly-wallet-connect-modal-pending-message--try-again-view__button\">\\n        Close & Try Again\\n      </button>\\n    </div>\\n  </div>\\n  `;class Z extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const n=document.createElement(\"style\");n.textContent=G,this.shadowRoot.append(j.content.cloneNode(!0),n)}}connectedCallback(){var n;const e=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById(\"defly-wallet-connect-modal-pending-message-cancel-button\");null==e||e.addEventListener(\"click\",(()=>{this.onClose()})),this.addAudioForConnection(),setTimeout((()=>{var n;if(j.innerHTML=N,this.shadowRoot){const e=document.createElement(\"style\");e.textContent=G,this.shadowRoot.innerHTML=\"\",this.shadowRoot.append(j.content.cloneNode(!0),e);const t=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById(\"defly-wallet-connect-modal-pending-message-try-again-button\");null==t||t.addEventListener(\"click\",(()=>{this.onClose()}))}}),3e4)}onClose(){n.removeModalWrapperFromDOM(n.DEFLY_WALLET_CONNECT_MODAL_ID)}addAudioForConnection(){var e;if(\"true\"===this.getAttribute(\"should-use-sound\")&&n.isIOS()){const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById(\"defly-wallet-connect-modal-pending-message-audio-wrapper\"),t=document.createElement(\"audio\");t.src=\"https://defly-walletconnect.s3.eu-central-1.amazonaws.com/audio.mp3\",t.autoplay=!0,t.loop=!0,null==n||n.appendChild(t)}}}var q={v:\"5.7.1\",fr:25,ip:0,op:100,w:1e3,h:1e3,nm:\"Animation\",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:1,nm:\"Circle\",sr:1,ks:{o:{a:0,k:73,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:18,s:[724,614,0],to:[-35,2.333,0],ti:[35,-2.333,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:25,s:[514,628,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:53,s:[514,628,0],to:[35,-2.333,0],ti:[-35,2.333,0]},{t:62,s:[724,614,0]}],ix:2},a:{a:0,k:[608.861,710.127,0],ix:1},s:{a:0,k:[79,79,100],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:\"a\",pt:{a:0,k:{i:[[27.614,0],[0,-27.614],[-27.614,0],[0,27.614]],o:[[-27.614,0],[0,27.614],[27.614,0],[0,-27.614]],v:[[608,662],[558,712],[608,762],[658,712]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:\"Mask 1\"}],ef:[{ty:21,nm:\"Fill\",np:9,mn:\"ADBE Fill\",ix:1,en:1,ef:[{ty:10,nm:\"Fill Mask\",mn:\"ADBE Fill-0001\",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:\"All Masks\",mn:\"ADBE Fill-0007\",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:\"Color\",mn:\"ADBE Fill-0002\",ix:3,v:{a:0,k:[.748628020287,.656362950802,.86274510622,1],ix:3}},{ty:7,nm:\"Invert\",mn:\"ADBE Fill-0006\",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:\"Horizontal Feather\",mn:\"ADBE Fill-0003\",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:\"Vertical Feather\",mn:\"ADBE Fill-0004\",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:\"Opacity\",mn:\"ADBE Fill-0005\",ix:7,v:{a:0,k:1,ix:7}}]}],sw:1e3,sh:1e3,sc:\"#ffffff\",ip:0,op:754,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:\"Layer 1 Outlines 2\",parent:9,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[511.524,444,0],ix:2},a:{a:0,k:[157.775,147.25,0],ix:1},s:{a:0,k:[46,46,100],ix:6}},ao:0,ef:[{ty:21,nm:\"Fill\",np:9,mn:\"ADBE Fill\",ix:1,en:1,ef:[{ty:10,nm:\"Fill Mask\",mn:\"ADBE Fill-0001\",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:\"All Masks\",mn:\"ADBE Fill-0007\",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:\"Color\",mn:\"ADBE Fill-0002\",ix:3,v:{a:0,k:[.054901964962,.050980396569,.06274510175,1],ix:3}},{ty:7,nm:\"Invert\",mn:\"ADBE Fill-0006\",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:\"Horizontal Feather\",mn:\"ADBE Fill-0003\",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:\"Vertical Feather\",mn:\"ADBE Fill-0004\",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:\"Opacity\",mn:\"ADBE Fill-0005\",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:\"gr\",it:[{ind:0,ty:\"sh\",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[157.525,133.595],[0,-133.596],[-157.525,133.595],[0,42.488]],c:!0},ix:2},nm:\"Path 1\",mn:\"ADBE Vector Shape - Group\",hd:!1},{ty:\"fl\",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:\"Fill 1\",mn:\"ADBE Vector Graphic - Fill\",hd:!1},{ty:\"tr\",p:{a:0,k:[157.775,133.846],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:\"Transform\"}],nm:\"Group 2\",np:2,cix:2,bm:0,ix:1,mn:\"ADBE Vector Group\",hd:!1}],ip:0,op:754,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:\"Layer 1 Outlines\",parent:9,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[511.524,444,0],ix:2},a:{a:0,k:[157.775,147.25,0],ix:1},s:{a:0,k:[46,46,100],ix:6}},ao:0,ef:[{ty:21,nm:\"Fill\",np:9,mn:\"ADBE Fill\",ix:1,en:1,ef:[{ty:10,nm:\"Fill Mask\",mn:\"ADBE Fill-0001\",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:\"All Masks\",mn:\"ADBE Fill-0007\",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:\"Color\",mn:\"ADBE Fill-0002\",ix:3,v:{a:0,k:[.058823533356,.054901964962,.06274510175,1],ix:3}},{ty:7,nm:\"Invert\",mn:\"ADBE Fill-0006\",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:\"Horizontal Feather\",mn:\"ADBE Fill-0003\",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:\"Vertical Feather\",mn:\"ADBE Fill-0004\",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:\"Opacity\",mn:\"ADBE Fill-0005\",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:\"gr\",it:[{ind:0,ty:\"sh\",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.021,34.263],[0,-34.264],[-130.021,34.263],[0,-8.067]],c:!0},ix:2},nm:\"Path 1\",mn:\"ADBE Vector Shape - Group\",hd:!1},{ty:\"fl\",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:\"Fill 1\",mn:\"ADBE Vector Graphic - Fill\",hd:!1},{ty:\"tr\",p:{a:0,k:[157.775,259.986],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:\"Transform\"}],nm:\"Group 1\",np:2,cix:2,bm:0,ix:1,mn:\"ADBE Vector Group\",hd:!1}],ip:0,op:754,st:0,bm:0},{ddd:0,ind:4,ty:1,nm:\"White Solid 2\",parent:9,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[512,508,0],ix:2},a:{a:0,k:[500,500,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:\"a\",pt:{a:0,k:{i:[[11.046,0],[0,0],[0,-11.046],[0,0],[-11.046,0],[0,0],[0,11.046],[0,0]],o:[[0,0],[-11.046,0],[0,0],[0,11.046],[0,0],[11.046,0],[0,0],[0,-11.046]],v:[[648,314],[344,314],[324,334],[324,546],[344,566],[648,566],[668,546],[668,334]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:\"Mask 1\"}],ef:[{ty:22,nm:\"Stroke\",np:13,mn:\"ADBE Stroke\",ix:1,en:1,ef:[{ty:10,nm:\"Path\",mn:\"ADBE Stroke-0001\",ix:1,v:{a:0,k:1,ix:1}},{ty:7,nm:\"All Masks\",mn:\"ADBE Stroke-0010\",ix:2,v:{a:0,k:0,ix:2}},{ty:7,nm:\"Stroke Sequentially\",mn:\"ADBE Stroke-0011\",ix:3,v:{a:0,k:1,ix:3}},{ty:2,nm:\"Color\",mn:\"ADBE Stroke-0002\",ix:4,v:{a:0,k:[.525490224361,.231372565031,.972549080849,1],ix:4}},{ty:0,nm:\"Brush Size\",mn:\"ADBE Stroke-0003\",ix:5,v:{a:0,k:2,ix:5}},{ty:0,nm:\"Brush Hardness\",mn:\"ADBE Stroke-0004\",ix:6,v:{a:0,k:.75,ix:6}},{ty:0,nm:\"Opacity\",mn:\"ADBE Stroke-0005\",ix:7,v:{a:0,k:1,ix:7}},{ty:0,nm:\"Start\",mn:\"ADBE Stroke-0008\",ix:8,v:{a:0,k:0,ix:8}},{ty:0,nm:\"End\",mn:\"ADBE Stroke-0009\",ix:9,v:{a:0,k:100,ix:9}},{ty:7,nm:\"Spacing\",mn:\"ADBE Stroke-0006\",ix:10,v:{a:0,k:15,ix:10}},{ty:7,nm:\"Paint Style\",mn:\"ADBE Stroke-0007\",ix:11,v:{a:0,k:1,ix:11}}]}],sw:1e3,sh:1e3,sc:\"#ffffff\",ip:0,op:754,st:0,bm:0},{ddd:0,ind:5,ty:1,nm:\"White Solid 2\",parent:9,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[512,388,0],ix:2},a:{a:0,k:[500,500,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:\"a\",pt:{a:0,k:{i:[[11.046,0],[0,0],[0,-11.046],[0,0],[-11.046,0],[0,0],[0,11.046],[0,0]],o:[[0,0],[-11.046,0],[0,0],[0,11.046],[0,0],[11.046,0],[0,0],[0,-11.046]],v:[[648,314],[344,314],[324,334],[324,386],[344,406],[648,406],[668,386],[668,334]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:\"Mask 1\"}],ef:[{ty:22,nm:\"Stroke\",np:13,mn:\"ADBE Stroke\",ix:1,en:1,ef:[{ty:10,nm:\"Path\",mn:\"ADBE Stroke-0001\",ix:1,v:{a:0,k:1,ix:1}},{ty:7,nm:\"All Masks\",mn:\"ADBE Stroke-0010\",ix:2,v:{a:0,k:0,ix:2}},{ty:7,nm:\"Stroke Sequentially\",mn:\"ADBE Stroke-0011\",ix:3,v:{a:0,k:1,ix:3}},{ty:2,nm:\"Color\",mn:\"ADBE Stroke-0002\",ix:4,v:{a:0,k:[.525490224361,.231372565031,.972549080849,1],ix:4}},{ty:0,nm:\"Brush Size\",mn:\"ADBE Stroke-0003\",ix:5,v:{a:0,k:2,ix:5}},{ty:0,nm:\"Brush Hardness\",mn:\"ADBE Stroke-0004\",ix:6,v:{a:0,k:.75,ix:6}},{ty:0,nm:\"Opacity\",mn:\"ADBE Stroke-0005\",ix:7,v:{a:0,k:1,ix:7}},{ty:0,nm:\"Start\",mn:\"ADBE Stroke-0008\",ix:8,v:{a:0,k:0,ix:8}},{ty:0,nm:\"End\",mn:\"ADBE Stroke-0009\",ix:9,v:{a:0,k:100,ix:9}},{ty:7,nm:\"Spacing\",mn:\"ADBE Stroke-0006\",ix:10,v:{a:0,k:15,ix:10}},{ty:7,nm:\"Paint Style\",mn:\"ADBE Stroke-0007\",ix:11,v:{a:0,k:1,ix:11}}]}],sw:1e3,sh:1e3,sc:\"#ffffff\",ip:0,op:754,st:0,bm:0},{ddd:0,ind:7,ty:1,nm:\"Button\",parent:9,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[510,736,0],ix:2},a:{a:0,k:[497.468,353.165,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:32,s:[100,100,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:35,s:[79,79,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:\"a\",pt:{a:0,k:{i:[[11.046,0],[0,0],[0,-11.046],[0,0],[-11.046,0],[0,0],[0,11.046],[0,0]],o:[[0,0],[-11.046,0],[0,0],[0,11.046],[0,0],[11.046,0],[0,0],[0,-11.046]],v:[[648,314],[344,314],[324,334],[324,386],[344,406],[648,406],[668,386],[668,334]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:\"Mask 1\"}],ef:[{ty:21,nm:\"Fill\",np:9,mn:\"ADBE Fill\",ix:1,en:1,ef:[{ty:10,nm:\"Fill Mask\",mn:\"ADBE Fill-0001\",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:\"All Masks\",mn:\"ADBE Fill-0007\",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:\"Color\",mn:\"ADBE Fill-0002\",ix:3,v:{a:0,k:[.686274528503,.290196090937,.937254965305,1],ix:3}},{ty:7,nm:\"Invert\",mn:\"ADBE Fill-0006\",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:\"Horizontal Feather\",mn:\"ADBE Fill-0003\",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:\"Vertical Feather\",mn:\"ADBE Fill-0004\",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:\"Opacity\",mn:\"ADBE Fill-0005\",ix:7,v:{a:0,k:1,ix:7}}]}],sw:1e3,sh:1e3,sc:\"#ffffff\",ip:0,op:754,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:\"Shape Layer 1\",parent:9,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[500,493.102,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ef:[{ty:25,nm:\"Drop Shadow\",np:8,mn:\"ADBE Drop Shadow\",ix:1,en:1,ef:[{ty:2,nm:\"Shadow Color\",mn:\"ADBE Drop Shadow-0001\",ix:1,v:{a:0,k:[0,0,0,1],ix:1}},{ty:0,nm:\"Opacity\",mn:\"ADBE Drop Shadow-0002\",ix:2,v:{a:0,k:87.5,ix:2}},{ty:0,nm:\"Direction\",mn:\"ADBE Drop Shadow-0003\",ix:3,v:{a:0,k:173,ix:3}},{ty:0,nm:\"Distance\",mn:\"ADBE Drop Shadow-0004\",ix:4,v:{a:0,k:8,ix:4}},{ty:0,nm:\"Softness\",mn:\"ADBE Drop Shadow-0005\",ix:5,v:{a:0,k:125,ix:5}},{ty:7,nm:\"Shadow Only\",mn:\"ADBE Drop Shadow-0006\",ix:6,v:{a:0,k:0,ix:6}}]}],shapes:[{ty:\"gr\",it:[{ty:\"rc\",d:1,s:{a:0,k:[452,730],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:20,ix:4},nm:\"Rectangle Path 1\",mn:\"ADBE Vector Shape - Rect\",hd:!1},{ty:\"st\",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:\"Stroke 1\",mn:\"ADBE Vector Graphic - Stroke\",hd:!1},{ty:\"fl\",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:\"Fill 1\",mn:\"ADBE Vector Graphic - Fill\",hd:!1},{ty:\"tr\",p:{a:0,k:[6,-7],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:\"Transform\"}],nm:\"Rectangle 1\",np:3,cix:2,bm:0,ix:1,mn:\"ADBE Vector Group\",hd:!1}],ip:0,op:754,st:0,bm:0},{ddd:0,ind:9,ty:1,nm:\"White Solid 1\",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:1,s:[500,562,0],to:[0,-23.333,0],ti:[0,23.333,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:13,s:[500,422,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:1},o:{x:.333,y:0},t:65,s:[500,422,0],to:[0,23.333,0],ti:[0,-23.333,0]},{t:79,s:[500,562,0]}],ix:2},a:{a:0,k:[500,500,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:\"a\",pt:{a:0,k:{i:[[11.046,0],[0,0],[0,-11.046],[0,0],[-11.046,0],[0,0],[0,11.046],[0,0]],o:[[0,0],[-11.046,0],[0,0],[0,11.046],[0,0],[11.046,0],[0,0],[0,-11.046]],v:[[712,122],[302,122],[282,142],[282,830],[302,850],[712,850],[732,830],[732,142]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:\"Mask 1\"}],ef:[{ty:25,nm:\"Drop Shadow\",np:8,mn:\"ADBE Drop Shadow\",ix:1,en:1,ef:[{ty:2,nm:\"Shadow Color\",mn:\"ADBE Drop Shadow-0001\",ix:1,v:{a:0,k:[0,0,0,1],ix:1}},{ty:0,nm:\"Opacity\",mn:\"ADBE Drop Shadow-0002\",ix:2,v:{a:0,k:87.5,ix:2}},{ty:0,nm:\"Direction\",mn:\"ADBE Drop Shadow-0003\",ix:3,v:{a:0,k:173,ix:3}},{ty:0,nm:\"Distance\",mn:\"ADBE Drop Shadow-0004\",ix:4,v:{a:0,k:8,ix:4}},{ty:0,nm:\"Softness\",mn:\"ADBE Drop Shadow-0005\",ix:5,v:{a:0,k:125,ix:5}},{ty:7,nm:\"Shadow Only\",mn:\"ADBE Drop Shadow-0006\",ix:6,v:{a:0,k:0,ix:6}}]}],sw:1e3,sh:1e3,sc:\"#ffffff\",ip:0,op:754,st:0,bm:0}],markers:[]},$='.defly-wallet-sign-txn-toast {\\n  --defly-wallet-sign-txn-toast-width: 422px;\\n  --defly-wallet-sign-txn-toast-height: 134px;\\n  --defly-wallet-sign-txn-toast-font-family: \"Inter\", sans-serif;\\n  position: fixed;\\n  bottom: 28px;\\n  right: 35px;\\n  z-index: 11;\\n  overflow: hidden;\\n  width: var(--defly-wallet-sign-txn-toast-width);\\n  height: var(--defly-wallet-sign-txn-toast-height);\\n  background: #edeffb;\\n  border-radius: 8px;\\n  animation: 0.2s DeflyWalletSignTxnToastSlideIn ease-out;\\n}\\n.defly-wallet-sign-txn-toast * {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n  font-family: var(--defly-wallet-sign-txn-toast-font-family);\\n  font-smooth: antialiased;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.defly-wallet-sign-txn-toast ul,\\n.defly-wallet-sign-txn-toast ol,\\n.defly-wallet-sign-txn-toast li {\\n  list-style-type: none;\\n}\\n\\n.defly-wallet-sign-txn-toast__header__close-button {\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  width: 20px;\\n  height: 20px;\\n  margin: 0;\\n  padding: 0;\\n  background: transparent;\\n  border: none;\\n  cursor: pointer;\\n}\\n\\n.defly-wallet-sign-txn-toast__content__lottie-animation {\\n  position: absolute;\\n  top: -75px;\\n  left: -100px;\\n  width: 368px;\\n  height: 368px;\\n}\\n\\n.defly-wallet-sign-txn-toast__content__description {\\n  position: absolute;\\n  top: 40px;\\n  right: 48px;\\n  max-width: 197px;\\n  color: #3c3c49;\\n  font-size: 14px;\\n  line-height: 22px;\\n  letter-spacing: -0.1px;\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-sign-txn-toast {\\n    display: none;\\n  }\\n}\\n@keyframes DeflyWalletSignTxnToastSlideIn {\\n  0% {\\n    bottom: 12px;\\n    opacity: 0;\\n  }\\n  100% {\\n    bottom: 26px;\\n    opacity: 1;\\n  }\\n}';i($);const U=document.createElement(\"template\");U.innerHTML='\\n  <div class=\"defly-wallet-sign-txn-toast\">\\n    <div class=\"defly-wallet-sign-txn-toast__header\">\\n      <button\\n        id=\"defly-wallet-sign-txn-toast-close-button\"\\n        class=\"defly-wallet-sign-txn-toast__header__close-button\">\\n        <img src=\"data:image/svg+xml,%3csvg width=\\'20\\' height=\\'20\\' viewBox=\\'0 0 20 20\\' fill=\\'none\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3e%3cpath d=\\'M14.4107 4.41074L9.41074 9.41074L10.5893 10.5893L15.5893 5.58926L14.4107 4.41074ZM9.41074 9.41074L4.41074 14.4107L5.58926 15.5893L10.5893 10.5893L9.41074 9.41074ZM15.5893 14.4107L10.5893 9.41074L9.41074 10.5893L14.4107 15.5893L15.5893 14.4107ZM10.5893 9.41074L5.58926 4.41074L4.41074 5.58926L9.41074 10.5893L10.5893 9.41074Z\\' fill=\\'%239099BD\\'/%3e%3c/svg%3e\" />\\n      </button>\\n    </div>\\n    <div class=\"defly-wallet-sign-txn-toast__content\">\\n      <div id=\"defly-wallet-sign-txn-toast-lottie-animation\" style=\"width:368;height:368\" class=\"defly-wallet-sign-txn-toast__content__lottie-animation\"></div>\\n      <p class=\"defly-wallet-sign-txn-toast__content__description\">\\n        Please launch <b>Defly Wallet</b> on your iOS or Android device to sign this transaction.\\n      </p>\\n    </div>\\n  </div>\\n';class Y extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const e=document.createElement(\"style\");e.textContent=$,this.shadowRoot.append(U.content.cloneNode(!0),e);const t=this.shadowRoot.getElementById(\"defly-wallet-sign-txn-toast-close-button\");null==t||t.addEventListener(\"click\",(()=>{n.removeModalWrapperFromDOM(n.DEFLY_WALLET_SIGN_TXN_TOAST_ID)})),this.renderLottieAnimation()}}renderLottieAnimation(){var n;const e=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById(\"defly-wallet-sign-txn-toast-lottie-animation\");e&&a.default.loadAnimation({container:e,renderer:\"svg\",loop:!0,autoplay:!0,animationData:q})}}var Q='@import url(\"https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600&display=swap\");\\n@font-face {\\n  font-family: \"PP Right Grotesk\";\\n  src: url(\"../asset/fonts/pp-right-grotesk-wide-black.woff2\") format(\"woff2\");\\n  font-weight: 900;\\n  font-style: normal;\\n  font-display: swap;\\n}\\n.defly-wallet-modal {\\n  --defly-wallet-modal-font-family: \"Spline Sans\", sans-serif;\\n  --defly-wallet-connect-modal-headline-family: \"PP Right Grotesk\", sans-serif;\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  bottom: 0;\\n  z-index: 999999;\\n  width: 100vw;\\n  height: 100vh;\\n  background-color: rgba(0, 0, 0, 0.7);\\n}\\n.defly-wallet-modal--select-account .defly-wallet-modal__body {\\n  width: 480px;\\n  height: 578px;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body {\\n  top: 40px;\\n  bottom: 0;\\n  left: 20px;\\n  width: calc(100% - 40px);\\n  max-width: unset;\\n  height: calc(100 * var(--vh));\\n  padding: 20px;\\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02), 0 4px 12px rgba(0, 0, 0, 0.03);\\n  border-radius: 20px 20px 0px 0px;\\n  animation: 0.3s DeflyWalletConnectMobileSlideIn ease-out;\\n  overflow-y: auto;\\n  transform: unset;\\n}\\n.defly-wallet-modal--mobile .defly-wallet-modal__body::before {\\n  background-image: unset;\\n}\\n.defly-wallet-modal * {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-smooth: antialiased;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.defly-wallet-modal ul,\\n.defly-wallet-modal ol,\\n.defly-wallet-modal li {\\n  list-style-type: none;\\n}\\n\\n.defly-wallet-button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: auto;\\n  height: 48px;\\n  padding: 14px;\\n  border: none;\\n  border-radius: 12px;\\n  outline: none;\\n  cursor: pointer;\\n  font-family: var(--defly-wallet-modal-font-family);\\n  font-size: 14px;\\n}\\n\\n.defly-wallet-modal__logo img {\\n  display: block;\\n  width: 32px;\\n}\\n\\n.defly-wallet-modal__body {\\n  position: relative;\\n  top: 50%;\\n  left: 50%;\\n  width: 979px;\\n  max-width: calc(100vw - 80px);\\n  padding: 28px;\\n  background-color: #131313;\\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.08);\\n  border-radius: 40px;\\n  animation: 0.3s DeflyWalletConnectSlideIn ease-out;\\n  transform: translate(-50%, -50%);\\n}\\n\\n@media (max-width: 935px) {\\n  .defly-wallet-modal--desktop .defly-wallet-modal__body {\\n    width: 100%;\\n    max-width: calc(100vw - 32px);\\n    padding: 24px;\\n  }\\n}\\n@keyframes DeflyWalletConnectSlideIn {\\n  0% {\\n    opacity: 0;\\n    transform: translate(-50%, calc(-50% + 24px));\\n  }\\n  100% {\\n    opacity: 1;\\n    transform: translate(-50%, -50%);\\n  }\\n}\\n@keyframes DeflyWalletConnectMobileSlideIn {\\n  0% {\\n    top: 30%;\\n    opacity: 0;\\n  }\\n  100% {\\n    top: 40px;\\n    opacity: 1;\\n  }\\n}\\n.defly-wallet-sign-txn-modal.defly-wallet-modal .defly-wallet-modal__body {\\n  width: 480px;\\n  height: 578px;\\n  background-image: unset;\\n  padding: 0;\\n}\\n.defly-wallet-sign-txn-modal.defly-wallet-modal .defly-wallet-modal__body .defly-wallet-sign-txn-modal__body__content {\\n  width: 100%;\\n  height: 100%;\\n}\\n.defly-wallet-sign-txn-modal.defly-wallet-modal .defly-wallet-modal__body #defly-wallet-iframe {\\n  width: 100%;\\n  height: 100%;\\n  border-radius: 16px;\\n  margin: 0 auto;\\n  border: none;\\n}';i(Q);const X=document.createElement(\"template\");X.innerHTML=`\\n  <div class=\"${n.DEFLY_WALLET_MODAL_CLASSNAME} defly-wallet-sign-txn-modal\">\\n    <div class=\"defly-wallet-modal__body\">\\n      <defly-wallet-modal-header modal-id=\"${n.DEFLY_WALLET_SIGN_TXN_MODAL_ID}\"></defly-wallet-modal-header/>\\n\\n      <div class=\"defly-wallet-sign-txn-modal__body__content\" />\\n    </div>\\n  </div>\\n`;class J extends HTMLElement{constructor(){if(super(),this.attachShadow({mode:\"open\"}),this.shadowRoot){const n=document.createElement(\"style\");n.textContent=Q,this.shadowRoot.append(X.content.cloneNode(!0),n)}}}window.addEventListener(\"DOMContentLoaded\",(()=>{c()})),window.addEventListener(\"resize\",(()=>{c()})),window.customElements.define(\"defly-wallet-connect-modal\",B),window.customElements.define(\"defly-wallet-modal-desktop-mode\",v),window.customElements.define(\"defly-wallet-modal-header\",f),window.customElements.define(\"defly-wallet-modal-touch-screen-mode\",L),window.customElements.define(\"defly-wallet-redirect-modal\",z),window.customElements.define(\"defly-wallet-connect-modal-information-section\",V),window.customElements.define(\"defly-wallet-connect-modal-pending-message-section\",Z),window.customElements.define(\"defly-wallet-sign-txn-toast\",Y),window.customElements.define(\"defly-wallet-sign-txn-modal\",J),window.customElements.define(\"defly-wallet-download-qr-code\",y);\n","\"use strict\";var e=require(\"@walletconnect/client\"),t=require(\"@json-rpc-tools/utils/dist/cjs/format\"),n=require(\"algosdk\"),o=require(\"bowser\");function r(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var i=r(e),l=r(n),s=r(o);function c(e,t,n,o){return new(n||(n=Promise))((function(r,i){function l(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}c((o=o.apply(e,t||[])).next())}))}class a extends Error{constructor(e,t,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,a),this.name=\"DeflyWalletConnectError\",this.data=e,this.message=t}}const d=\"defly-wallet-connect-modal-wrapper\",u=\"defly-wallet-redirect-modal-wrapper\",f=\"defly-wallet-sign-txn-toast-wrapper\",h=\"defly-wallet-modal\";function v(e){const t=document.createElement(\"div\");return t.setAttribute(\"id\",e),document.body.appendChild(t),t}function g(e){const t=document.getElementById(e);t&&t.remove()}const m=\"DeflyWallet.Wallet\",p=\"DeflyWallet.WalletConnect\",w=\"DeflyWallet.DeepLink\",y=\"DeflyWallet.AppMeta\",S=\"DeflyWallet.Network\";function D(){return\"undefined\"==typeof localStorage?void 0:localStorage}function I(){var e;const t=null===(e=D())||void 0===e?void 0:e.getItem(m);return t?JSON.parse(t):null}function T(e){const t=e.slice();for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function A(e){return function(e,t={}){return fetch(e,t).then((e=>e.json())).then((e=>e))}(\"https://static.defly.app/wc-bridge-servers.json\",{cache:\"no-store\"})}function _(e){return c(this,void 0,void 0,(function*(){let e={bridgeURL:\"\",shouldUseSound:!0,silent:!1};try{const t=yield A();void 0!==t.use_sound&&(e.shouldUseSound=t.use_sound),void 0!==t.silent&&(e.silent=t.silent),e=Object.assign(Object.assign({},e),{bridgeURL:T(t.servers||[])[0]||\"\"})}catch(e){console.log(e)}return e}))}function b(e){return Uint8Array.from(window.atob(e),(e=>e.charCodeAt(0)))}function L(){return\"undefined\"!=typeof navigator}function E(){return L()&&/Android/i.test(navigator.userAgent)}function x(){return L()&&/iPhone|iPad|iPod/i.test(navigator.userAgent)}function N(){return L()&&/iPhone|iPod|Android/i.test(navigator.userAgent)}function O(){if(!L())return null;const{userAgent:e}=navigator;let t;return t=e.match(/DuckDuckGo/i)?\"DuckDuckGo\":e.match(/OPX/i)?\"Opera GX\":navigator.brave?\"Brave\":s.default.getParser(navigator.userAgent).getBrowserName(),t}const C=E()?\"algorand://\":\"defly-wc://\";function k(e=!0){var t;let n=(null===(t=D())||void 0===t?void 0:t.getItem(w))||C;const o=O();return e&&o&&(n=`${n}?browser=${encodeURIComponent(o)}`),n}function W(){var e;const t=null===(e=D())||void 0===e?void 0:e.getItem(y);return t?JSON.parse(t):{logo:\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='101.962' height='90.114' viewBox='0 0 101.962 90.114'%3e %3cg transform='translate(0.004)'%3e %3cpath d='M244.81%2c107.44%2c193.834%2c26l-50.986%2c81.44%2c50.986-27.77Z' transform='translate(-142.852 -26)' fill='white'/%3e %3cpath d='M254.505%2c273.648l-42.072-22.175-42.076%2c22.175%2c42.076-13.7Z' transform='translate(-161.446 -183.534)' fill='white'/%3e %3c/g%3e%3c/svg%3e\",name:\"Defly Wallet\",main_color:\"#131313\"}}function M({shouldUseSound:e}){return{open:(t={shouldUseSound:e},e=>{if(!document.getElementById(d)){const n=v(d),o=`${e}&algorand=true`,{shouldUseSound:r}=t;n.innerHTML=`<defly-wallet-connect-modal uri=\"${o}\" should-use-sound=\"${r}\"></defly-wallet-connect-modal>`}}),close:()=>g(d)};var t}\"undefined\"!=typeof window&&(window.global=window,window.Buffer=window.Buffer||require(\"buffer\").Buffer,Promise.resolve().then((function(){return require(\"./App-245bc375.js\")}))),exports.DEFLY_DOWNLOAD_URL=\"https://defly.app/\",exports.DEFLY_WALLET_CONNECT_MODAL_ID=d,exports.DEFLY_WALLET_MODAL_CLASSNAME=h,exports.DEFLY_WALLET_REDIRECT_MODAL_ID=u,exports.DEFLY_WALLET_SIGN_TXN_MODAL_ID=\"defly-wallet-sign-txn-modal-wrapper\",exports.DEFLY_WALLET_SIGN_TXN_TOAST_ID=f,exports.DeflyWalletConnect=class{constructor(e){var t,n,o;this.network=function(){var e;return(null===(e=D())||void 0===e?void 0:e.getItem(S))||\"mainnet\"}(),this.bridge=(null==e?void 0:e.bridge)||\"\",(null==e?void 0:e.deep_link)&&(null===(t=D())||void 0===t||t.setItem(w,e.deep_link)),(null==e?void 0:e.app_meta)&&(null===(n=D())||void 0===n||n.setItem(y,JSON.stringify(e.app_meta))),(null==e?void 0:e.network)&&(this.network=e.network),null===(o=D())||void 0===o||o.setItem(S,(null==e?void 0:e.network)||\"mainnet\"),this.connector=null,this.shouldShowSignTxnToast=void 0===(null==e?void 0:e.shouldShowSignTxnToast)||e.shouldShowSignTxnToast,this.chainId=null==e?void 0:e.chainId}get platform(){return function(){const e=I();let t=null;return\"defly-wallet\"===(null==e?void 0:e.type)&&(t=\"mobile\"),t}()}get isConnected(){return\"mobile\"===this.platform&&!!this.connector}connect({network:e}={}){return new Promise(((t,n)=>c(this,void 0,void 0,(function*(){var o,r,l,s,c,u;try{(null===(o=this.connector)||void 0===o?void 0:o.connected)&&(yield this.connector.killSession()),e&&(null===(r=D())||void 0===r||r.setItem(S,e));const{bridgeURL:f,shouldUseSound:v}=yield _(e||this.network);this.connector=new i.default({bridge:this.bridge||f||\"https://bridge.walletconnect.org\",storageId:p,qrcodeModal:M({shouldUseSound:v})}),yield this.connector.createSession({chainId:this.chainId||4160});const w=document.getElementById(d),y=null===(s=null===(l=null==w?void 0:w.querySelector(\"defly-wallet-connect-modal\"))||void 0===l?void 0:l.shadowRoot)||void 0===s?void 0:s.querySelector(`.${h}`),I=null===(u=null===(c=null==y?void 0:y.querySelector(\"defly-wallet-modal-header\"))||void 0===c?void 0:c.shadowRoot)||void 0===u?void 0:u.getElementById(\"defly-wallet-modal-header-close-button\");null==I||I.addEventListener(\"click\",(()=>{n(new a({type:\"CONNECT_MODAL_CLOSED\"},\"Connect modal is closed by user\")),g(d)})),this.connector.on(\"connect\",((e,o)=>{var r,i;e&&n(e),t((null===(r=this.connector)||void 0===r?void 0:r.accounts)||[]),function(e,t){var n;null===(n=D())||void 0===n||n.setItem(m,JSON.stringify({type:t||\"defly-wallet\",accounts:e,selectedAccount:e[0]}))}((null===(i=this.connector)||void 0===i?void 0:i.accounts)||[])}))}catch(e){const{name:t}=W();n(new a({type:\"SESSION_CONNECT\",detail:e},e.message||`There was an error while connecting to ${t}`))}}))))}reconnectSession(){return new Promise(((e,t)=>c(this,void 0,void 0,(function*(){var n,o;try{this.connector&&e(this.connector.accounts||[]),this.bridge=(null===(n=function(){var e;const t=null===(e=D())||void 0===e?void 0:e.getItem(p);return t?JSON.parse(t):null}())||void 0===n?void 0:n.bridge)||\"\",this.bridge&&(this.connector=new i.default({bridge:this.bridge,storageId:p}),e((null===(o=this.connector)||void 0===o?void 0:o.accounts)||[])),this.isConnected||e([])}catch(e){yield this.disconnect();const{name:n}=W();t(new a({type:\"SESSION_RECONNECT\",detail:e},e.message||`There was an error while reconnecting to ${n}`))}}))))}disconnect(){var e;return c(this,void 0,void 0,(function*(){const t=null===(e=this.connector)||void 0===e?void 0:e.killSession();return null==t||t.then((()=>{this.connector=null})),yield new Promise(((e,t)=>{var n,o,r;try{null===(n=D())||void 0===n||n.removeItem(p),null===(o=D())||void 0===o||o.removeItem(m),null===(r=D())||void 0===r||r.removeItem(S),e(void 0)}catch(e){t(e)}})),t}))}signTransactionWithMobile(e){return c(this,void 0,void 0,(function*(){const n=t.formatJsonRpcRequest(\"algo_signTxn\",[e]);try{try{const{silent:e}=yield _(this.network),t=(yield this.connector.sendCustomRequest(n,{forcePushNotification:!e})).filter(Boolean);return\"string\"==typeof t[0]?t.map(b):t.map((e=>Uint8Array.from(e)))}catch(e){return yield Promise.reject(new a({type:\"SIGN_TRANSACTIONS\",detail:e},e.message||\"Failed to sign transaction\"))}}finally{g(u),g(f)}}))}signTransaction(e,t){return c(this,void 0,void 0,(function*(){const n=I();if(\"defly-wallet\"===(null==n?void 0:n.type)&&(N()?v(u).innerHTML=\"<defly-wallet-redirect-modal></defly-wallet-redirect-modal>\":!N()&&this.shouldShowSignTxnToast&&(v(f).innerHTML=\"<defly-wallet-sign-txn-toast></defly-wallet-sign-txn-toast>\"),!this.connector))throw new Error(\"DeflyWalletConnect was not initialized correctly.\");const o=e.flatMap((e=>e.map((e=>{let n;t&&!(e.signers||[]).includes(t)&&(n=[]);const o={txn:(r=e.txn,Buffer.from(l.default.encodeUnsignedTransaction(r)).toString(\"base64\"))};var r;return Array.isArray(n)&&(o.signers=n),e.authAddr&&(o.authAddr=e.authAddr),e.message&&(o.message=e.message),e.msig&&(o.msig=e.msig),o}))));return this.signTransactionWithMobile(o)}))}},exports.closeDeflyWalletSignTxnToast=function(){g(f)},exports.generateDeflyWalletAppDeepLink=k,exports.generateDeflyWalletConnectDeepLink=function(e){let t=k(!1);x()&&!t.includes(\"-wc\")&&(t=t.replace(\"://\",\"-wc://\"));let n=`${t}wc?uri=${encodeURIComponent(e)}`;const o=O();return E()&&(n=e),o&&(n=`${n}&browser=${encodeURIComponent(o)}`),n},exports.getDeflyWalletAppMeta=W,exports.isIOS=x,exports.isMobile=N,exports.removeModalWrapperFromDOM=g;\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"./index-da03add1.js\");require(\"@walletconnect/client\"),require(\"@json-rpc-tools/utils/dist/cjs/format\"),require(\"algosdk\"),require(\"bowser\"),exports.DeflyWalletConnect=e.DeflyWalletConnect,exports.closeDeflyWalletSignTxnToast=e.closeDeflyWalletSignTxnToast;\n","(typeof navigator !== \"undefined\") && (function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n  typeof define === 'function' && define.amd ? define(factory) :\r\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.lottie = factory());\r\n})(this, (function () { 'use strict';\r\n\r\n  var svgNS = 'http://www.w3.org/2000/svg';\r\n  var locationHref = '';\r\n  var _useWebWorker = false;\r\n  var initialDefaultFrame = -999999;\r\n\r\n  var setWebWorker = function setWebWorker(flag) {\r\n    _useWebWorker = !!flag;\r\n  };\r\n\r\n  var getWebWorker = function getWebWorker() {\r\n    return _useWebWorker;\r\n  };\r\n\r\n  var setLocationHref = function setLocationHref(value) {\r\n    locationHref = value;\r\n  };\r\n\r\n  var getLocationHref = function getLocationHref() {\r\n    return locationHref;\r\n  };\r\n\r\n  function createTag(type) {\r\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n    return document.createElement(type);\r\n  }\r\n\r\n  function extendPrototype(sources, destination) {\r\n    var i;\r\n    var len = sources.length;\r\n    var sourcePrototype;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      sourcePrototype = sources[i].prototype;\r\n\r\n      for (var attr in sourcePrototype) {\r\n        if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n      }\r\n    }\r\n  }\r\n\r\n  function getDescriptor(object, prop) {\r\n    return Object.getOwnPropertyDescriptor(object, prop);\r\n  }\r\n\r\n  function createProxyFunction(prototype) {\r\n    function ProxyFunction() {}\r\n\r\n    ProxyFunction.prototype = prototype;\r\n    return ProxyFunction;\r\n  }\r\n\r\n  // import Howl from '../../3rd_party/howler';\r\n  var audioControllerFactory = function () {\r\n    function AudioController(audioFactory) {\r\n      this.audios = [];\r\n      this.audioFactory = audioFactory;\r\n      this._volume = 1;\r\n      this._isMuted = false;\r\n    }\r\n\r\n    AudioController.prototype = {\r\n      addAudio: function addAudio(audio) {\r\n        this.audios.push(audio);\r\n      },\r\n      pause: function pause() {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].pause();\r\n        }\r\n      },\r\n      resume: function resume() {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].resume();\r\n        }\r\n      },\r\n      setRate: function setRate(rateValue) {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].setRate(rateValue);\r\n        }\r\n      },\r\n      createAudio: function createAudio(assetPath) {\r\n        if (this.audioFactory) {\r\n          return this.audioFactory(assetPath);\r\n        }\r\n\r\n        if (window.Howl) {\r\n          return new window.Howl({\r\n            src: [assetPath]\r\n          });\r\n        }\r\n\r\n        return {\r\n          isPlaying: false,\r\n          play: function play() {\r\n            this.isPlaying = true;\r\n          },\r\n          seek: function seek() {\r\n            this.isPlaying = false;\r\n          },\r\n          playing: function playing() {},\r\n          rate: function rate() {},\r\n          setVolume: function setVolume() {}\r\n        };\r\n      },\r\n      setAudioFactory: function setAudioFactory(audioFactory) {\r\n        this.audioFactory = audioFactory;\r\n      },\r\n      setVolume: function setVolume(value) {\r\n        this._volume = value;\r\n\r\n        this._updateVolume();\r\n      },\r\n      mute: function mute() {\r\n        this._isMuted = true;\r\n\r\n        this._updateVolume();\r\n      },\r\n      unmute: function unmute() {\r\n        this._isMuted = false;\r\n\r\n        this._updateVolume();\r\n      },\r\n      getVolume: function getVolume() {\r\n        return this._volume;\r\n      },\r\n      _updateVolume: function _updateVolume() {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\r\n        }\r\n      }\r\n    };\r\n    return function () {\r\n      return new AudioController();\r\n    };\r\n  }();\r\n\r\n  var createTypedArray = function () {\r\n    function createRegularArray(type, len) {\r\n      var i = 0;\r\n      var arr = [];\r\n      var value;\r\n\r\n      switch (type) {\r\n        case 'int16':\r\n        case 'uint8c':\r\n          value = 1;\r\n          break;\r\n\r\n        default:\r\n          value = 1.1;\r\n          break;\r\n      }\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        arr.push(value);\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function createTypedArrayFactory(type, len) {\r\n      if (type === 'float32') {\r\n        return new Float32Array(len);\r\n      }\r\n\r\n      if (type === 'int16') {\r\n        return new Int16Array(len);\r\n      }\r\n\r\n      if (type === 'uint8c') {\r\n        return new Uint8ClampedArray(len);\r\n      }\r\n\r\n      return createRegularArray(type, len);\r\n    }\r\n\r\n    if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n      return createTypedArrayFactory;\r\n    }\r\n\r\n    return createRegularArray;\r\n  }();\r\n\r\n  function createSizedArray(len) {\r\n    return Array.apply(null, {\r\n      length: len\r\n    });\r\n  }\r\n\r\n  function _typeof$6(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$6 = function _typeof(obj) { return typeof obj; }; } else { _typeof$6 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$6(obj); }\r\n  var subframeEnabled = true;\r\n  var expressionsPlugin = null;\r\n  var expressionsInterfaces = null;\r\n  var idPrefix$1 = '';\r\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n  var _shouldRoundValues = false;\r\n  var bmPow = Math.pow;\r\n  var bmSqrt = Math.sqrt;\r\n  var bmFloor = Math.floor;\r\n  var bmMax = Math.max;\r\n  var bmMin = Math.min;\r\n  var BMMath = {};\r\n\r\n  (function () {\r\n    var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\r\n    var i;\r\n    var len = propertyNames.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n  })();\r\n\r\n  function ProjectInterface$1() {\r\n    return {};\r\n  }\r\n\r\n  BMMath.random = Math.random;\r\n\r\n  BMMath.abs = function (val) {\r\n    var tOfVal = _typeof$6(val);\r\n\r\n    if (tOfVal === 'object' && val.length) {\r\n      var absArr = createSizedArray(val.length);\r\n      var i;\r\n      var len = val.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        absArr[i] = Math.abs(val[i]);\r\n      }\r\n\r\n      return absArr;\r\n    }\r\n\r\n    return Math.abs(val);\r\n  };\r\n\r\n  var defaultCurveSegments = 150;\r\n  var degToRads = Math.PI / 180;\r\n  var roundCorner = 0.5519;\r\n\r\n  function roundValues(flag) {\r\n    _shouldRoundValues = !!flag;\r\n  }\r\n\r\n  function bmRnd(value) {\r\n    if (_shouldRoundValues) {\r\n      return Math.round(value);\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  function styleDiv(element) {\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = '0 0';\r\n    element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility = 'visible';\r\n    element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = 'preserve-3d';\r\n    element.style.webkitTransformStyle = 'preserve-3d';\r\n    element.style.mozTransformStyle = 'preserve-3d';\r\n  }\r\n\r\n  function BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\r\n    this.type = type;\r\n    this.currentTime = currentTime;\r\n    this.totalTime = totalTime;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n  }\r\n\r\n  function BMCompleteEvent(type, frameMultiplier) {\r\n    this.type = type;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n  }\r\n\r\n  function BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\r\n    this.type = type;\r\n    this.currentLoop = currentLoop;\r\n    this.totalLoops = totalLoops;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n  }\r\n\r\n  function BMSegmentStartEvent(type, firstFrame, totalFrames) {\r\n    this.type = type;\r\n    this.firstFrame = firstFrame;\r\n    this.totalFrames = totalFrames;\r\n  }\r\n\r\n  function BMDestroyEvent(type, target) {\r\n    this.type = type;\r\n    this.target = target;\r\n  }\r\n\r\n  function BMRenderFrameErrorEvent(nativeError, currentTime) {\r\n    this.type = 'renderFrameError';\r\n    this.nativeError = nativeError;\r\n    this.currentTime = currentTime;\r\n  }\r\n\r\n  function BMConfigErrorEvent(nativeError) {\r\n    this.type = 'configError';\r\n    this.nativeError = nativeError;\r\n  }\r\n\r\n  function BMAnimationConfigErrorEvent(type, nativeError) {\r\n    this.type = type;\r\n    this.nativeError = nativeError;\r\n  }\r\n\r\n  var createElementID = function () {\r\n    var _count = 0;\r\n    return function createID() {\r\n      _count += 1;\r\n      return idPrefix$1 + '__lottie_element_' + _count;\r\n    };\r\n  }();\r\n\r\n  function HSVtoRGB(h, s, v) {\r\n    var r;\r\n    var g;\r\n    var b;\r\n    var i;\r\n    var f;\r\n    var p;\r\n    var q;\r\n    var t;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n\r\n    switch (i % 6) {\r\n      case 0:\r\n        r = v;\r\n        g = t;\r\n        b = p;\r\n        break;\r\n\r\n      case 1:\r\n        r = q;\r\n        g = v;\r\n        b = p;\r\n        break;\r\n\r\n      case 2:\r\n        r = p;\r\n        g = v;\r\n        b = t;\r\n        break;\r\n\r\n      case 3:\r\n        r = p;\r\n        g = q;\r\n        b = v;\r\n        break;\r\n\r\n      case 4:\r\n        r = t;\r\n        g = p;\r\n        b = v;\r\n        break;\r\n\r\n      case 5:\r\n        r = v;\r\n        g = p;\r\n        b = q;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return [r, g, b];\r\n  }\r\n\r\n  function RGBtoHSV(r, g, b) {\r\n    var max = Math.max(r, g, b);\r\n    var min = Math.min(r, g, b);\r\n    var d = max - min;\r\n    var h;\r\n    var s = max === 0 ? 0 : d / max;\r\n    var v = max / 255;\r\n\r\n    switch (max) {\r\n      case min:\r\n        h = 0;\r\n        break;\r\n\r\n      case r:\r\n        h = g - b + d * (g < b ? 6 : 0);\r\n        h /= 6 * d;\r\n        break;\r\n\r\n      case g:\r\n        h = b - r + d * 2;\r\n        h /= 6 * d;\r\n        break;\r\n\r\n      case b:\r\n        h = r - g + d * 4;\r\n        h /= 6 * d;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return [h, s, v];\r\n  }\r\n\r\n  function addSaturationToRGB(color, offset) {\r\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n    hsv[1] += offset;\r\n\r\n    if (hsv[1] > 1) {\r\n      hsv[1] = 1;\r\n    } else if (hsv[1] <= 0) {\r\n      hsv[1] = 0;\r\n    }\r\n\r\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n  }\r\n\r\n  function addBrightnessToRGB(color, offset) {\r\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n    hsv[2] += offset;\r\n\r\n    if (hsv[2] > 1) {\r\n      hsv[2] = 1;\r\n    } else if (hsv[2] < 0) {\r\n      hsv[2] = 0;\r\n    }\r\n\r\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n  }\r\n\r\n  function addHueToRGB(color, offset) {\r\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n    hsv[0] += offset / 360;\r\n\r\n    if (hsv[0] > 1) {\r\n      hsv[0] -= 1;\r\n    } else if (hsv[0] < 0) {\r\n      hsv[0] += 1;\r\n    }\r\n\r\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n  }\r\n\r\n  var rgbToHex = function () {\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n\r\n    for (i = 0; i < 256; i += 1) {\r\n      hex = i.toString(16);\r\n      colorMap[i] = hex.length === 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function (r, g, b) {\r\n      if (r < 0) {\r\n        r = 0;\r\n      }\r\n\r\n      if (g < 0) {\r\n        g = 0;\r\n      }\r\n\r\n      if (b < 0) {\r\n        b = 0;\r\n      }\r\n\r\n      return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n  }();\r\n\r\n  var setSubframeEnabled = function setSubframeEnabled(flag) {\r\n    subframeEnabled = !!flag;\r\n  };\r\n\r\n  var getSubframeEnabled = function getSubframeEnabled() {\r\n    return subframeEnabled;\r\n  };\r\n\r\n  var setExpressionsPlugin = function setExpressionsPlugin(value) {\r\n    expressionsPlugin = value;\r\n  };\r\n\r\n  var getExpressionsPlugin = function getExpressionsPlugin() {\r\n    return expressionsPlugin;\r\n  };\r\n\r\n  var setExpressionInterfaces = function setExpressionInterfaces(value) {\r\n    expressionsInterfaces = value;\r\n  };\r\n\r\n  var getExpressionInterfaces = function getExpressionInterfaces() {\r\n    return expressionsInterfaces;\r\n  };\r\n\r\n  var setDefaultCurveSegments = function setDefaultCurveSegments(value) {\r\n    defaultCurveSegments = value;\r\n  };\r\n\r\n  var getDefaultCurveSegments = function getDefaultCurveSegments() {\r\n    return defaultCurveSegments;\r\n  };\r\n\r\n  var setIdPrefix = function setIdPrefix(value) {\r\n    idPrefix$1 = value;\r\n  };\r\n\r\n  var getIdPrefix = function getIdPrefix() {\r\n    return idPrefix$1;\r\n  };\r\n\r\n  function createNS(type) {\r\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n    return document.createElementNS(svgNS, type);\r\n  }\r\n\r\n  function _typeof$5(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$5 = function _typeof(obj) { return typeof obj; }; } else { _typeof$5 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$5(obj); }\r\n\r\n  var dataManager = function () {\r\n    var _counterId = 1;\r\n    var processes = [];\r\n    var workerFn;\r\n    var workerInstance;\r\n    var workerProxy = {\r\n      onmessage: function onmessage() {},\r\n      postMessage: function postMessage(path) {\r\n        workerFn({\r\n          data: path\r\n        });\r\n      }\r\n    };\r\n    var _workerSelf = {\r\n      postMessage: function postMessage(data) {\r\n        workerProxy.onmessage({\r\n          data: data\r\n        });\r\n      }\r\n    };\r\n\r\n    function createWorker(fn) {\r\n      if (window.Worker && window.Blob && getWebWorker()) {\r\n        var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], {\r\n          type: 'text/javascript'\r\n        }); // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\r\n\r\n        var url = URL.createObjectURL(blob);\r\n        return new Worker(url);\r\n      }\r\n\r\n      workerFn = fn;\r\n      return workerProxy;\r\n    }\r\n\r\n    function setupWorker() {\r\n      if (!workerInstance) {\r\n        workerInstance = createWorker(function workerStart(e) {\r\n          function dataFunctionManager() {\r\n            function completeLayers(layers, comps) {\r\n              var layerData;\r\n              var i;\r\n              var len = layers.length;\r\n              var j;\r\n              var jLen;\r\n              var k;\r\n              var kLen;\r\n\r\n              for (i = 0; i < len; i += 1) {\r\n                layerData = layers[i];\r\n\r\n                if ('ks' in layerData && !layerData.completed) {\r\n                  layerData.completed = true;\r\n\r\n                  if (layerData.hasMask) {\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (maskProps[j].pt.k.i) {\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                      } else {\r\n                        kLen = maskProps[j].pt.k.length;\r\n\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                          if (maskProps[j].pt.k[k].s) {\r\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                          }\r\n\r\n                          if (maskProps[j].pt.k[k].e) {\r\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  if (layerData.ty === 0) {\r\n                    layerData.layers = findCompLayers(layerData.refId, comps);\r\n                    completeLayers(layerData.layers, comps);\r\n                  } else if (layerData.ty === 4) {\r\n                    completeShapes(layerData.shapes);\r\n                  } else if (layerData.ty === 5) {\r\n                    completeText(layerData);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            function completeChars(chars, assets) {\r\n              if (chars) {\r\n                var i = 0;\r\n                var len = chars.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (chars[i].t === 1) {\r\n                    // var compData = findComp(chars[i].data.refId, assets);\r\n                    chars[i].data.layers = findCompLayers(chars[i].data.refId, assets); // chars[i].data.ip = 0;\r\n                    // chars[i].data.op = 99999;\r\n                    // chars[i].data.st = 0;\r\n                    // chars[i].data.sr = 1;\r\n                    // chars[i].w = compData.w;\r\n                    // chars[i].data.ks = {\r\n                    //   a: { k: [0, 0, 0], a: 0 },\r\n                    //   p: { k: [0, -compData.h, 0], a: 0 },\r\n                    //   r: { k: 0, a: 0 },\r\n                    //   s: { k: [100, 100], a: 0 },\r\n                    //   o: { k: 100, a: 0 },\r\n                    // };\r\n\r\n                    completeLayers(chars[i].data.layers, assets);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            function findComp(id, comps) {\r\n              var i = 0;\r\n              var len = comps.length;\r\n\r\n              while (i < len) {\r\n                if (comps[i].id === id) {\r\n                  return comps[i];\r\n                }\r\n\r\n                i += 1;\r\n              }\r\n\r\n              return null;\r\n            }\r\n\r\n            function findCompLayers(id, comps) {\r\n              var comp = findComp(id, comps);\r\n\r\n              if (comp) {\r\n                if (!comp.layers.__used) {\r\n                  comp.layers.__used = true;\r\n                  return comp.layers;\r\n                }\r\n\r\n                return JSON.parse(JSON.stringify(comp.layers));\r\n              }\r\n\r\n              return null;\r\n            }\r\n\r\n            function completeShapes(arr) {\r\n              var i;\r\n              var len = arr.length;\r\n              var j;\r\n              var jLen;\r\n\r\n              for (i = len - 1; i >= 0; i -= 1) {\r\n                if (arr[i].ty === 'sh') {\r\n                  if (arr[i].ks.k.i) {\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                  } else {\r\n                    jLen = arr[i].ks.k.length;\r\n\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (arr[i].ks.k[j].s) {\r\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                      }\r\n\r\n                      if (arr[i].ks.k[j].e) {\r\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                      }\r\n                    }\r\n                  }\r\n                } else if (arr[i].ty === 'gr') {\r\n                  completeShapes(arr[i].it);\r\n                }\r\n              }\r\n            }\r\n\r\n            function convertPathsToAbsoluteValues(path) {\r\n              var i;\r\n              var len = path.i.length;\r\n\r\n              for (i = 0; i < len; i += 1) {\r\n                path.i[i][0] += path.v[i][0];\r\n                path.i[i][1] += path.v[i][1];\r\n                path.o[i][0] += path.v[i][0];\r\n                path.o[i][1] += path.v[i][1];\r\n              }\r\n            }\r\n\r\n            function checkVersion(minimum, animVersionString) {\r\n              var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\r\n\r\n              if (minimum[0] > animVersion[0]) {\r\n                return true;\r\n              }\r\n\r\n              if (animVersion[0] > minimum[0]) {\r\n                return false;\r\n              }\r\n\r\n              if (minimum[1] > animVersion[1]) {\r\n                return true;\r\n              }\r\n\r\n              if (animVersion[1] > minimum[1]) {\r\n                return false;\r\n              }\r\n\r\n              if (minimum[2] > animVersion[2]) {\r\n                return true;\r\n              }\r\n\r\n              if (animVersion[2] > minimum[2]) {\r\n                return false;\r\n              }\r\n\r\n              return null;\r\n            }\r\n\r\n            var checkText = function () {\r\n              var minimumVersion = [4, 4, 14];\r\n\r\n              function updateTextLayer(textLayer) {\r\n                var documentData = textLayer.t.d;\r\n                textLayer.t.d = {\r\n                  k: [{\r\n                    s: documentData,\r\n                    t: 0\r\n                  }]\r\n                };\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var i;\r\n                var len = layers.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (layers[i].ty === 5) {\r\n                    updateTextLayer(layers[i]);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkChars = function () {\r\n              var minimumVersion = [4, 7, 99];\r\n              return function (animationData) {\r\n                if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\r\n                  var i;\r\n                  var len = animationData.chars.length;\r\n\r\n                  for (i = 0; i < len; i += 1) {\r\n                    var charData = animationData.chars[i];\r\n\r\n                    if (charData.data && charData.data.shapes) {\r\n                      completeShapes(charData.data.shapes);\r\n                      charData.data.ip = 0;\r\n                      charData.data.op = 99999;\r\n                      charData.data.st = 0;\r\n                      charData.data.sr = 1;\r\n                      charData.data.ks = {\r\n                        p: {\r\n                          k: [0, 0],\r\n                          a: 0\r\n                        },\r\n                        s: {\r\n                          k: [100, 100],\r\n                          a: 0\r\n                        },\r\n                        a: {\r\n                          k: [0, 0],\r\n                          a: 0\r\n                        },\r\n                        r: {\r\n                          k: 0,\r\n                          a: 0\r\n                        },\r\n                        o: {\r\n                          k: 100,\r\n                          a: 0\r\n                        }\r\n                      };\r\n\r\n                      if (!animationData.chars[i].t) {\r\n                        charData.data.shapes.push({\r\n                          ty: 'no'\r\n                        });\r\n                        charData.data.shapes[0].it.push({\r\n                          p: {\r\n                            k: [0, 0],\r\n                            a: 0\r\n                          },\r\n                          s: {\r\n                            k: [100, 100],\r\n                            a: 0\r\n                          },\r\n                          a: {\r\n                            k: [0, 0],\r\n                            a: 0\r\n                          },\r\n                          r: {\r\n                            k: 0,\r\n                            a: 0\r\n                          },\r\n                          o: {\r\n                            k: 100,\r\n                            a: 0\r\n                          },\r\n                          sk: {\r\n                            k: 0,\r\n                            a: 0\r\n                          },\r\n                          sa: {\r\n                            k: 0,\r\n                            a: 0\r\n                          },\r\n                          ty: 'tr'\r\n                        });\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkPathProperties = function () {\r\n              var minimumVersion = [5, 7, 15];\r\n\r\n              function updateTextLayer(textLayer) {\r\n                var pathData = textLayer.t.p;\r\n\r\n                if (typeof pathData.a === 'number') {\r\n                  pathData.a = {\r\n                    a: 0,\r\n                    k: pathData.a\r\n                  };\r\n                }\r\n\r\n                if (typeof pathData.p === 'number') {\r\n                  pathData.p = {\r\n                    a: 0,\r\n                    k: pathData.p\r\n                  };\r\n                }\r\n\r\n                if (typeof pathData.r === 'number') {\r\n                  pathData.r = {\r\n                    a: 0,\r\n                    k: pathData.r\r\n                  };\r\n                }\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var i;\r\n                var len = layers.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (layers[i].ty === 5) {\r\n                    updateTextLayer(layers[i]);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkColors = function () {\r\n              var minimumVersion = [4, 1, 9];\r\n\r\n              function iterateShapes(shapes) {\r\n                var i;\r\n                var len = shapes.length;\r\n                var j;\r\n                var jLen;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (shapes[i].ty === 'gr') {\r\n                    iterateShapes(shapes[i].it);\r\n                  } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\r\n                    if (shapes[i].c.k && shapes[i].c.k[0].i) {\r\n                      jLen = shapes[i].c.k.length;\r\n\r\n                      for (j = 0; j < jLen; j += 1) {\r\n                        if (shapes[i].c.k[j].s) {\r\n                          shapes[i].c.k[j].s[0] /= 255;\r\n                          shapes[i].c.k[j].s[1] /= 255;\r\n                          shapes[i].c.k[j].s[2] /= 255;\r\n                          shapes[i].c.k[j].s[3] /= 255;\r\n                        }\r\n\r\n                        if (shapes[i].c.k[j].e) {\r\n                          shapes[i].c.k[j].e[0] /= 255;\r\n                          shapes[i].c.k[j].e[1] /= 255;\r\n                          shapes[i].c.k[j].e[2] /= 255;\r\n                          shapes[i].c.k[j].e[3] /= 255;\r\n                        }\r\n                      }\r\n                    } else {\r\n                      shapes[i].c.k[0] /= 255;\r\n                      shapes[i].c.k[1] /= 255;\r\n                      shapes[i].c.k[2] /= 255;\r\n                      shapes[i].c.k[3] /= 255;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var i;\r\n                var len = layers.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (layers[i].ty === 4) {\r\n                    iterateShapes(layers[i].shapes);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkShapes = function () {\r\n              var minimumVersion = [4, 4, 18];\r\n\r\n              function completeClosingShapes(arr) {\r\n                var i;\r\n                var len = arr.length;\r\n                var j;\r\n                var jLen;\r\n\r\n                for (i = len - 1; i >= 0; i -= 1) {\r\n                  if (arr[i].ty === 'sh') {\r\n                    if (arr[i].ks.k.i) {\r\n                      arr[i].ks.k.c = arr[i].closed;\r\n                    } else {\r\n                      jLen = arr[i].ks.k.length;\r\n\r\n                      for (j = 0; j < jLen; j += 1) {\r\n                        if (arr[i].ks.k[j].s) {\r\n                          arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                        }\r\n\r\n                        if (arr[i].ks.k[j].e) {\r\n                          arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                        }\r\n                      }\r\n                    }\r\n                  } else if (arr[i].ty === 'gr') {\r\n                    completeClosingShapes(arr[i].it);\r\n                  }\r\n                }\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var layerData;\r\n                var i;\r\n                var len = layers.length;\r\n                var j;\r\n                var jLen;\r\n                var k;\r\n                var kLen;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  layerData = layers[i];\r\n\r\n                  if (layerData.hasMask) {\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (maskProps[j].pt.k.i) {\r\n                        maskProps[j].pt.k.c = maskProps[j].cl;\r\n                      } else {\r\n                        kLen = maskProps[j].pt.k.length;\r\n\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                          if (maskProps[j].pt.k[k].s) {\r\n                            maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                          }\r\n\r\n                          if (maskProps[j].pt.k[k].e) {\r\n                            maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  if (layerData.ty === 4) {\r\n                    completeClosingShapes(layerData.shapes);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            function completeData(animationData) {\r\n              if (animationData.__complete) {\r\n                return;\r\n              }\r\n\r\n              checkColors(animationData);\r\n              checkText(animationData);\r\n              checkChars(animationData);\r\n              checkPathProperties(animationData);\r\n              checkShapes(animationData);\r\n              completeLayers(animationData.layers, animationData.assets);\r\n              completeChars(animationData.chars, animationData.assets);\r\n              animationData.__complete = true;\r\n            }\r\n\r\n            function completeText(data) {\r\n              if (data.t.a.length === 0 && !('m' in data.t.p)) {// data.singleShape = true;\r\n              }\r\n            }\r\n\r\n            var moduleOb = {};\r\n            moduleOb.completeData = completeData;\r\n            moduleOb.checkColors = checkColors;\r\n            moduleOb.checkChars = checkChars;\r\n            moduleOb.checkPathProperties = checkPathProperties;\r\n            moduleOb.checkShapes = checkShapes;\r\n            moduleOb.completeLayers = completeLayers;\r\n            return moduleOb;\r\n          }\r\n\r\n          if (!_workerSelf.dataManager) {\r\n            _workerSelf.dataManager = dataFunctionManager();\r\n          }\r\n\r\n          if (!_workerSelf.assetLoader) {\r\n            _workerSelf.assetLoader = function () {\r\n              function formatResponse(xhr) {\r\n                // using typeof doubles the time of execution of this method,\r\n                // so if available, it's better to use the header to validate the type\r\n                var contentTypeHeader = xhr.getResponseHeader('content-type');\r\n\r\n                if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\r\n                  return xhr.response;\r\n                }\r\n\r\n                if (xhr.response && _typeof$5(xhr.response) === 'object') {\r\n                  return xhr.response;\r\n                }\r\n\r\n                if (xhr.response && typeof xhr.response === 'string') {\r\n                  return JSON.parse(xhr.response);\r\n                }\r\n\r\n                if (xhr.responseText) {\r\n                  return JSON.parse(xhr.responseText);\r\n                }\r\n\r\n                return null;\r\n              }\r\n\r\n              function loadAsset(path, fullPath, callback, errorCallback) {\r\n                var response;\r\n                var xhr = new XMLHttpRequest(); // set responseType after calling open or IE will break.\r\n\r\n                try {\r\n                  // This crashes on Android WebView prior to KitKat\r\n                  xhr.responseType = 'json';\r\n                } catch (err) {} // eslint-disable-line no-empty\r\n\r\n\r\n                xhr.onreadystatechange = function () {\r\n                  if (xhr.readyState === 4) {\r\n                    if (xhr.status === 200) {\r\n                      response = formatResponse(xhr);\r\n                      callback(response);\r\n                    } else {\r\n                      try {\r\n                        response = formatResponse(xhr);\r\n                        callback(response);\r\n                      } catch (err) {\r\n                        if (errorCallback) {\r\n                          errorCallback(err);\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                };\r\n\r\n                try {\r\n                  // Hack to workaround banner validation\r\n                  xhr.open(['G', 'E', 'T'].join(''), path, true);\r\n                } catch (error) {\r\n                  // Hack to workaround banner validation\r\n                  xhr.open(['G', 'E', 'T'].join(''), fullPath + '/' + path, true);\r\n                }\r\n\r\n                xhr.send();\r\n              }\r\n\r\n              return {\r\n                load: loadAsset\r\n              };\r\n            }();\r\n          }\r\n\r\n          if (e.data.type === 'loadAnimation') {\r\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\r\n              _workerSelf.dataManager.completeData(data);\r\n\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success'\r\n              });\r\n            }, function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error'\r\n              });\r\n            });\r\n          } else if (e.data.type === 'complete') {\r\n            var animation = e.data.animation;\r\n\r\n            _workerSelf.dataManager.completeData(animation);\r\n\r\n            _workerSelf.postMessage({\r\n              id: e.data.id,\r\n              payload: animation,\r\n              status: 'success'\r\n            });\r\n          } else if (e.data.type === 'loadData') {\r\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success'\r\n              });\r\n            }, function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error'\r\n              });\r\n            });\r\n          }\r\n        });\r\n\r\n        workerInstance.onmessage = function (event) {\r\n          var data = event.data;\r\n          var id = data.id;\r\n          var process = processes[id];\r\n          processes[id] = null;\r\n\r\n          if (data.status === 'success') {\r\n            process.onComplete(data.payload);\r\n          } else if (process.onError) {\r\n            process.onError();\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\n    function createProcess(onComplete, onError) {\r\n      _counterId += 1;\r\n      var id = 'processId_' + _counterId;\r\n      processes[id] = {\r\n        onComplete: onComplete,\r\n        onError: onError\r\n      };\r\n      return id;\r\n    }\r\n\r\n    function loadAnimation(path, onComplete, onError) {\r\n      setupWorker();\r\n      var processId = createProcess(onComplete, onError);\r\n      workerInstance.postMessage({\r\n        type: 'loadAnimation',\r\n        path: path,\r\n        fullPath: window.location.origin + window.location.pathname,\r\n        id: processId\r\n      });\r\n    }\r\n\r\n    function loadData(path, onComplete, onError) {\r\n      setupWorker();\r\n      var processId = createProcess(onComplete, onError);\r\n      workerInstance.postMessage({\r\n        type: 'loadData',\r\n        path: path,\r\n        fullPath: window.location.origin + window.location.pathname,\r\n        id: processId\r\n      });\r\n    }\r\n\r\n    function completeAnimation(anim, onComplete, onError) {\r\n      setupWorker();\r\n      var processId = createProcess(onComplete, onError);\r\n      workerInstance.postMessage({\r\n        type: 'complete',\r\n        animation: anim,\r\n        id: processId\r\n      });\r\n    }\r\n\r\n    return {\r\n      loadAnimation: loadAnimation,\r\n      loadData: loadData,\r\n      completeAnimation: completeAnimation\r\n    };\r\n  }();\r\n\r\n  var ImagePreloader = function () {\r\n    var proxyImage = function () {\r\n      var canvas = createTag('canvas');\r\n      canvas.width = 1;\r\n      canvas.height = 1;\r\n      var ctx = canvas.getContext('2d');\r\n      ctx.fillStyle = 'rgba(0,0,0,0)';\r\n      ctx.fillRect(0, 0, 1, 1);\r\n      return canvas;\r\n    }();\r\n\r\n    function imageLoaded() {\r\n      this.loadedAssets += 1;\r\n\r\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n        if (this.imagesLoadedCb) {\r\n          this.imagesLoadedCb(null);\r\n        }\r\n      }\r\n    }\r\n\r\n    function footageLoaded() {\r\n      this.loadedFootagesCount += 1;\r\n\r\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n        if (this.imagesLoadedCb) {\r\n          this.imagesLoadedCb(null);\r\n        }\r\n      }\r\n    }\r\n\r\n    function getAssetsPath(assetData, assetsPath, originalPath) {\r\n      var path = '';\r\n\r\n      if (assetData.e) {\r\n        path = assetData.p;\r\n      } else if (assetsPath) {\r\n        var imagePath = assetData.p;\r\n\r\n        if (imagePath.indexOf('images/') !== -1) {\r\n          imagePath = imagePath.split('/')[1];\r\n        }\r\n\r\n        path = assetsPath + imagePath;\r\n      } else {\r\n        path = originalPath;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n      }\r\n\r\n      return path;\r\n    }\r\n\r\n    function testImageLoaded(img) {\r\n      var _count = 0;\r\n      var intervalId = setInterval(function () {\r\n        var box = img.getBBox();\r\n\r\n        if (box.width || _count > 500) {\r\n          this._imageLoaded();\r\n\r\n          clearInterval(intervalId);\r\n        }\r\n\r\n        _count += 1;\r\n      }.bind(this), 50);\r\n    }\r\n\r\n    function createImageData(assetData) {\r\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n      var img = createNS('image');\r\n\r\n      if (isSafari) {\r\n        this.testImageLoaded(img);\r\n      } else {\r\n        img.addEventListener('load', this._imageLoaded, false);\r\n      }\r\n\r\n      img.addEventListener('error', function () {\r\n        ob.img = proxyImage;\r\n\r\n        this._imageLoaded();\r\n      }.bind(this), false);\r\n      img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\r\n\r\n      if (this._elementHelper.append) {\r\n        this._elementHelper.append(img);\r\n      } else {\r\n        this._elementHelper.appendChild(img);\r\n      }\r\n\r\n      var ob = {\r\n        img: img,\r\n        assetData: assetData\r\n      };\r\n      return ob;\r\n    }\r\n\r\n    function createImgData(assetData) {\r\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n      var img = createTag('img');\r\n      img.crossOrigin = 'anonymous';\r\n      img.addEventListener('load', this._imageLoaded, false);\r\n      img.addEventListener('error', function () {\r\n        ob.img = proxyImage;\r\n\r\n        this._imageLoaded();\r\n      }.bind(this), false);\r\n      img.src = path;\r\n      var ob = {\r\n        img: img,\r\n        assetData: assetData\r\n      };\r\n      return ob;\r\n    }\r\n\r\n    function createFootageData(data) {\r\n      var ob = {\r\n        assetData: data\r\n      };\r\n      var path = getAssetsPath(data, this.assetsPath, this.path);\r\n      dataManager.loadData(path, function (footageData) {\r\n        ob.img = footageData;\r\n\r\n        this._footageLoaded();\r\n      }.bind(this), function () {\r\n        ob.img = {};\r\n\r\n        this._footageLoaded();\r\n      }.bind(this));\r\n      return ob;\r\n    }\r\n\r\n    function loadAssets(assets, cb) {\r\n      this.imagesLoadedCb = cb;\r\n      var i;\r\n      var len = assets.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (!assets[i].layers) {\r\n          if (!assets[i].t || assets[i].t === 'seq') {\r\n            this.totalImages += 1;\r\n            this.images.push(this._createImageData(assets[i]));\r\n          } else if (assets[i].t === 3) {\r\n            this.totalFootages += 1;\r\n            this.images.push(this.createFootageData(assets[i]));\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function setPath(path) {\r\n      this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path) {\r\n      this.assetsPath = path || '';\r\n    }\r\n\r\n    function getAsset(assetData) {\r\n      var i = 0;\r\n      var len = this.images.length;\r\n\r\n      while (i < len) {\r\n        if (this.images[i].assetData === assetData) {\r\n          return this.images[i].img;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    function destroy() {\r\n      this.imagesLoadedCb = null;\r\n      this.images.length = 0;\r\n    }\r\n\r\n    function loadedImages() {\r\n      return this.totalImages === this.loadedAssets;\r\n    }\r\n\r\n    function loadedFootages() {\r\n      return this.totalFootages === this.loadedFootagesCount;\r\n    }\r\n\r\n    function setCacheType(type, elementHelper) {\r\n      if (type === 'svg') {\r\n        this._elementHelper = elementHelper;\r\n        this._createImageData = this.createImageData.bind(this);\r\n      } else {\r\n        this._createImageData = this.createImgData.bind(this);\r\n      }\r\n    }\r\n\r\n    function ImagePreloaderFactory() {\r\n      this._imageLoaded = imageLoaded.bind(this);\r\n      this._footageLoaded = footageLoaded.bind(this);\r\n      this.testImageLoaded = testImageLoaded.bind(this);\r\n      this.createFootageData = createFootageData.bind(this);\r\n      this.assetsPath = '';\r\n      this.path = '';\r\n      this.totalImages = 0;\r\n      this.totalFootages = 0;\r\n      this.loadedAssets = 0;\r\n      this.loadedFootagesCount = 0;\r\n      this.imagesLoadedCb = null;\r\n      this.images = [];\r\n    }\r\n\r\n    ImagePreloaderFactory.prototype = {\r\n      loadAssets: loadAssets,\r\n      setAssetsPath: setAssetsPath,\r\n      setPath: setPath,\r\n      loadedImages: loadedImages,\r\n      loadedFootages: loadedFootages,\r\n      destroy: destroy,\r\n      getAsset: getAsset,\r\n      createImgData: createImgData,\r\n      createImageData: createImageData,\r\n      imageLoaded: imageLoaded,\r\n      footageLoaded: footageLoaded,\r\n      setCacheType: setCacheType\r\n    };\r\n    return ImagePreloaderFactory;\r\n  }();\r\n\r\n  function BaseEvent() {}\r\n\r\n  BaseEvent.prototype = {\r\n    triggerEvent: function triggerEvent(eventName, args) {\r\n      if (this._cbs[eventName]) {\r\n        var callbacks = this._cbs[eventName];\r\n\r\n        for (var i = 0; i < callbacks.length; i += 1) {\r\n          callbacks[i](args);\r\n        }\r\n      }\r\n    },\r\n    addEventListener: function addEventListener(eventName, callback) {\r\n      if (!this._cbs[eventName]) {\r\n        this._cbs[eventName] = [];\r\n      }\r\n\r\n      this._cbs[eventName].push(callback);\r\n\r\n      return function () {\r\n        this.removeEventListener(eventName, callback);\r\n      }.bind(this);\r\n    },\r\n    removeEventListener: function removeEventListener(eventName, callback) {\r\n      if (!callback) {\r\n        this._cbs[eventName] = null;\r\n      } else if (this._cbs[eventName]) {\r\n        var i = 0;\r\n        var len = this._cbs[eventName].length;\r\n\r\n        while (i < len) {\r\n          if (this._cbs[eventName][i] === callback) {\r\n            this._cbs[eventName].splice(i, 1);\r\n\r\n            i -= 1;\r\n            len -= 1;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (!this._cbs[eventName].length) {\r\n          this._cbs[eventName] = null;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  var markerParser = function () {\r\n    function parsePayloadLines(payload) {\r\n      var lines = payload.split('\\r\\n');\r\n      var keys = {};\r\n      var line;\r\n      var keysCount = 0;\r\n\r\n      for (var i = 0; i < lines.length; i += 1) {\r\n        line = lines[i].split(':');\r\n\r\n        if (line.length === 2) {\r\n          keys[line[0]] = line[1].trim();\r\n          keysCount += 1;\r\n        }\r\n      }\r\n\r\n      if (keysCount === 0) {\r\n        throw new Error();\r\n      }\r\n\r\n      return keys;\r\n    }\r\n\r\n    return function (_markers) {\r\n      var markers = [];\r\n\r\n      for (var i = 0; i < _markers.length; i += 1) {\r\n        var _marker = _markers[i];\r\n        var markerData = {\r\n          time: _marker.tm,\r\n          duration: _marker.dr\r\n        };\r\n\r\n        try {\r\n          markerData.payload = JSON.parse(_markers[i].cm);\r\n        } catch (_) {\r\n          try {\r\n            markerData.payload = parsePayloadLines(_markers[i].cm);\r\n          } catch (__) {\r\n            markerData.payload = {\r\n              name: _markers[i].cm\r\n            };\r\n          }\r\n        }\r\n\r\n        markers.push(markerData);\r\n      }\r\n\r\n      return markers;\r\n    };\r\n  }();\r\n\r\n  var ProjectInterface = function () {\r\n    function registerComposition(comp) {\r\n      this.compositions.push(comp);\r\n    }\r\n\r\n    return function () {\r\n      function _thisProjectFunction(name) {\r\n        var i = 0;\r\n        var len = this.compositions.length;\r\n\r\n        while (i < len) {\r\n          if (this.compositions[i].data && this.compositions[i].data.nm === name) {\r\n            if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n              this.compositions[i].prepareFrame(this.currentFrame);\r\n            }\r\n\r\n            return this.compositions[i].compInterface;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      _thisProjectFunction.compositions = [];\r\n      _thisProjectFunction.currentFrame = 0;\r\n      _thisProjectFunction.registerComposition = registerComposition;\r\n      return _thisProjectFunction;\r\n    };\r\n  }();\r\n\r\n  var renderers = {};\r\n\r\n  var registerRenderer = function registerRenderer(key, value) {\r\n    renderers[key] = value;\r\n  };\r\n\r\n  function getRenderer(key) {\r\n    return renderers[key];\r\n  }\r\n\r\n  function _typeof$4(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$4 = function _typeof(obj) { return typeof obj; }; } else { _typeof$4 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$4(obj); }\r\n\r\n  var AnimationItem = function AnimationItem() {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.firstFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.playCount = 0;\r\n    this.animationData = {};\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = createElementID();\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.isSubframeEnabled = getSubframeEnabled();\r\n    this.segments = [];\r\n    this._idle = true;\r\n    this._completedLoop = false;\r\n    this.projectInterface = ProjectInterface();\r\n    this.imagePreloader = new ImagePreloader();\r\n    this.audioController = audioControllerFactory();\r\n    this.markers = [];\r\n    this.configAnimation = this.configAnimation.bind(this);\r\n    this.onSetupError = this.onSetupError.bind(this);\r\n    this.onSegmentComplete = this.onSegmentComplete.bind(this);\r\n    this.drawnFrameEvent = new BMEnterFrameEvent('drawnFrame', 0, 0, 0);\r\n  };\r\n\r\n  extendPrototype([BaseEvent], AnimationItem);\r\n\r\n  AnimationItem.prototype.setParams = function (params) {\r\n    if (params.wrapper || params.container) {\r\n      this.wrapper = params.wrapper || params.container;\r\n    }\r\n\r\n    var animType = 'svg';\r\n\r\n    if (params.animType) {\r\n      animType = params.animType;\r\n    } else if (params.renderer) {\r\n      animType = params.renderer;\r\n    }\r\n\r\n    var RendererClass = getRenderer(animType);\r\n    this.renderer = new RendererClass(this, params.rendererSettings);\r\n    this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if (params.loop === '' || params.loop === null || params.loop === undefined || params.loop === true) {\r\n      this.loop = true;\r\n    } else if (params.loop === false) {\r\n      this.loop = false;\r\n    } else {\r\n      this.loop = parseInt(params.loop, 10);\r\n    }\r\n\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name : '';\r\n    this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\r\n    this.assetsPath = params.assetsPath;\r\n    this.initialSegment = params.initialSegment;\r\n\r\n    if (params.audioFactory) {\r\n      this.audioController.setAudioFactory(params.audioFactory);\r\n    }\r\n\r\n    if (params.animationData) {\r\n      this.setupAnimation(params.animationData);\r\n    } else if (params.path) {\r\n      if (params.path.lastIndexOf('\\\\') !== -1) {\r\n        this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\r\n      } else {\r\n        this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\r\n      }\r\n\r\n      this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\r\n      this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\r\n      dataManager.loadAnimation(params.path, this.configAnimation, this.onSetupError);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.onSetupError = function () {\r\n    this.trigger('data_failed');\r\n  };\r\n\r\n  AnimationItem.prototype.setupAnimation = function (data) {\r\n    dataManager.completeAnimation(data, this.configAnimation);\r\n  };\r\n\r\n  AnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    if (animationData) {\r\n      if (_typeof$4(animationData) !== 'object') {\r\n        animationData = JSON.parse(animationData);\r\n      }\r\n    }\r\n\r\n    var params = {\r\n      wrapper: wrapper,\r\n      animationData: animationData\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-path').value : wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('bm-type').value : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-loop').value : wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n\r\n    if (loop === 'false') {\r\n      params.loop = false;\r\n    } else if (loop === 'true') {\r\n      params.loop = true;\r\n    } else if (loop !== '') {\r\n      params.loop = parseInt(loop, 10);\r\n    }\r\n\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-autoplay').value : wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== 'false';\r\n    params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-name').value : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value : '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-prerender').value : wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if (prerender === 'false') {\r\n      params.prerender = false;\r\n    }\r\n\r\n    this.setParams(params);\r\n  };\r\n\r\n  AnimationItem.prototype.includeLayers = function (data) {\r\n    if (data.op > this.animationData.op) {\r\n      this.animationData.op = data.op;\r\n      this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n    }\r\n\r\n    var layers = this.animationData.layers;\r\n    var i;\r\n    var len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j;\r\n    var jLen = newLayers.length;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      i = 0;\r\n\r\n      while (i < len) {\r\n        if (layers[i].id === newLayers[j].id) {\r\n          layers[i] = newLayers[j];\r\n          break;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n    }\r\n\r\n    if (data.chars || data.fonts) {\r\n      this.renderer.globalData.fontManager.addChars(data.chars);\r\n      this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n\r\n    if (data.assets) {\r\n      len = data.assets.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.animationData.assets.push(data.assets[i]);\r\n      }\r\n    }\r\n\r\n    this.animationData.__complete = false;\r\n    dataManager.completeAnimation(this.animationData, this.onSegmentComplete);\r\n  };\r\n\r\n  AnimationItem.prototype.onSegmentComplete = function (data) {\r\n    this.animationData = data;\r\n    var expressionsPlugin = getExpressionsPlugin();\r\n\r\n    if (expressionsPlugin) {\r\n      expressionsPlugin.initExpressions(this);\r\n    }\r\n\r\n    this.loadNextSegment();\r\n  };\r\n\r\n  AnimationItem.prototype.loadNextSegment = function () {\r\n    var segments = this.animationData.segments;\r\n\r\n    if (!segments || segments.length === 0 || !this.autoloadSegments) {\r\n      this.trigger('data_ready');\r\n      this.timeCompleted = this.totalFrames;\r\n      return;\r\n    }\r\n\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\r\n      this.trigger('data_failed');\r\n    }.bind(this));\r\n  };\r\n\r\n  AnimationItem.prototype.loadSegments = function () {\r\n    var segments = this.animationData.segments;\r\n\r\n    if (!segments) {\r\n      this.timeCompleted = this.totalFrames;\r\n    }\r\n\r\n    this.loadNextSegment();\r\n  };\r\n\r\n  AnimationItem.prototype.imagesLoaded = function () {\r\n    this.trigger('loaded_images');\r\n    this.checkLoaded();\r\n  };\r\n\r\n  AnimationItem.prototype.preloadImages = function () {\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n  };\r\n\r\n  AnimationItem.prototype.configAnimation = function (animData) {\r\n    if (!this.renderer) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.animationData = animData;\r\n\r\n      if (this.initialSegment) {\r\n        this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\r\n        this.firstFrame = Math.round(this.initialSegment[0]);\r\n      } else {\r\n        this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n        this.firstFrame = Math.round(this.animationData.ip);\r\n      }\r\n\r\n      this.renderer.configAnimation(animData);\r\n\r\n      if (!animData.assets) {\r\n        animData.assets = [];\r\n      }\r\n\r\n      this.assets = this.animationData.assets;\r\n      this.frameRate = this.animationData.fr;\r\n      this.frameMult = this.animationData.fr / 1000;\r\n      this.renderer.searchExtraCompositions(animData.assets);\r\n      this.markers = markerParser(animData.markers || []);\r\n      this.trigger('config_ready');\r\n      this.preloadImages();\r\n      this.loadSegments();\r\n      this.updaFrameModifier();\r\n      this.waitForFontsLoaded();\r\n\r\n      if (this.isPaused) {\r\n        this.audioController.pause();\r\n      }\r\n    } catch (error) {\r\n      this.triggerConfigError(error);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.waitForFontsLoaded = function () {\r\n    if (!this.renderer) {\r\n      return;\r\n    }\r\n\r\n    if (this.renderer.globalData.fontManager.isLoaded) {\r\n      this.checkLoaded();\r\n    } else {\r\n      setTimeout(this.waitForFontsLoaded.bind(this), 20);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.checkLoaded = function () {\r\n    if (!this.isLoaded && this.renderer.globalData.fontManager.isLoaded && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas') && this.imagePreloader.loadedFootages()) {\r\n      this.isLoaded = true;\r\n      var expressionsPlugin = getExpressionsPlugin();\r\n\r\n      if (expressionsPlugin) {\r\n        expressionsPlugin.initExpressions(this);\r\n      }\r\n\r\n      this.renderer.initItems();\r\n      setTimeout(function () {\r\n        this.trigger('DOMLoaded');\r\n      }.bind(this), 0);\r\n      this.gotoFrame();\r\n\r\n      if (this.autoplay) {\r\n        this.play();\r\n      }\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.resize = function (width, height) {\r\n    // Adding this validation for backwards compatibility in case an event object was being passed down\r\n    var _width = typeof width === 'number' ? width : undefined;\r\n\r\n    var _height = typeof height === 'number' ? height : undefined;\r\n\r\n    this.renderer.updateContainerSize(_width, _height);\r\n  };\r\n\r\n  AnimationItem.prototype.setSubframe = function (flag) {\r\n    this.isSubframeEnabled = !!flag;\r\n  };\r\n\r\n  AnimationItem.prototype.gotoFrame = function () {\r\n    this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\r\n\r\n    if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\r\n      this.currentFrame = this.timeCompleted;\r\n    }\r\n\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n    this.trigger('drawnFrame');\r\n  };\r\n\r\n  AnimationItem.prototype.renderFrame = function () {\r\n    if (this.isLoaded === false || !this.renderer) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n    } catch (error) {\r\n      this.triggerRenderFrameError(error);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.play = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    if (this.isPaused === true) {\r\n      this.isPaused = false;\r\n      this.trigger('_pause');\r\n      this.audioController.resume();\r\n\r\n      if (this._idle) {\r\n        this._idle = false;\r\n        this.trigger('_active');\r\n      }\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.pause = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    if (this.isPaused === false) {\r\n      this.isPaused = true;\r\n      this.trigger('_play');\r\n      this._idle = true;\r\n      this.trigger('_idle');\r\n      this.audioController.pause();\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.togglePause = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    if (this.isPaused === true) {\r\n      this.play();\r\n    } else {\r\n      this.pause();\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.stop = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.pause();\r\n    this.playCount = 0;\r\n    this._completedLoop = false;\r\n    this.setCurrentRawFrameValue(0);\r\n  };\r\n\r\n  AnimationItem.prototype.getMarkerData = function (markerName) {\r\n    var marker;\r\n\r\n    for (var i = 0; i < this.markers.length; i += 1) {\r\n      marker = this.markers[i];\r\n\r\n      if (marker.payload && marker.payload.name === markerName) {\r\n        return marker;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  AnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    var numValue = Number(value);\r\n\r\n    if (isNaN(numValue)) {\r\n      var marker = this.getMarkerData(value);\r\n\r\n      if (marker) {\r\n        this.goToAndStop(marker.time, true);\r\n      }\r\n    } else if (isFrame) {\r\n      this.setCurrentRawFrameValue(value);\r\n    } else {\r\n      this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n\r\n    this.pause();\r\n  };\r\n\r\n  AnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    var numValue = Number(value);\r\n\r\n    if (isNaN(numValue)) {\r\n      var marker = this.getMarkerData(value);\r\n\r\n      if (marker) {\r\n        if (!marker.duration) {\r\n          this.goToAndStop(marker.time, true);\r\n        } else {\r\n          this.playSegments([marker.time, marker.time + marker.duration], true);\r\n        }\r\n      }\r\n    } else {\r\n      this.goToAndStop(numValue, isFrame, name);\r\n    }\r\n\r\n    this.play();\r\n  };\r\n\r\n  AnimationItem.prototype.advanceTime = function (value) {\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n      return;\r\n    }\r\n\r\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n    var _isComplete = false; // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n\r\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n      if (!this.loop || this.playCount === this.loop) {\r\n        if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n          _isComplete = true;\r\n          nextValue = this.totalFrames - 1;\r\n        }\r\n      } else if (nextValue >= this.totalFrames) {\r\n        this.playCount += 1;\r\n\r\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n          this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n          this._completedLoop = true;\r\n          this.trigger('loopComplete');\r\n        }\r\n      } else {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n      }\r\n    } else if (nextValue < 0) {\r\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n        if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\r\n          // eslint-disable-line no-plusplus\r\n          this.setCurrentRawFrameValue(this.totalFrames + nextValue % this.totalFrames);\r\n\r\n          if (!this._completedLoop) {\r\n            this._completedLoop = true;\r\n          } else {\r\n            this.trigger('loopComplete');\r\n          }\r\n        } else {\r\n          _isComplete = true;\r\n          nextValue = 0;\r\n        }\r\n      }\r\n    } else {\r\n      this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n\r\n    if (_isComplete) {\r\n      this.setCurrentRawFrameValue(nextValue);\r\n      this.pause();\r\n      this.trigger('complete');\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.adjustSegment = function (arr, offset) {\r\n    this.playCount = 0;\r\n\r\n    if (arr[1] < arr[0]) {\r\n      if (this.frameModifier > 0) {\r\n        if (this.playSpeed < 0) {\r\n          this.setSpeed(-this.playSpeed);\r\n        } else {\r\n          this.setDirection(-1);\r\n        }\r\n      }\r\n\r\n      this.totalFrames = arr[0] - arr[1];\r\n      this.timeCompleted = this.totalFrames;\r\n      this.firstFrame = arr[1];\r\n      this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n    } else if (arr[1] > arr[0]) {\r\n      if (this.frameModifier < 0) {\r\n        if (this.playSpeed < 0) {\r\n          this.setSpeed(-this.playSpeed);\r\n        } else {\r\n          this.setDirection(1);\r\n        }\r\n      }\r\n\r\n      this.totalFrames = arr[1] - arr[0];\r\n      this.timeCompleted = this.totalFrames;\r\n      this.firstFrame = arr[0];\r\n      this.setCurrentRawFrameValue(0.001 + offset);\r\n    }\r\n\r\n    this.trigger('segmentStart');\r\n  };\r\n\r\n  AnimationItem.prototype.setSegment = function (init, end) {\r\n    var pendingFrame = -1;\r\n\r\n    if (this.isPaused) {\r\n      if (this.currentRawFrame + this.firstFrame < init) {\r\n        pendingFrame = init;\r\n      } else if (this.currentRawFrame + this.firstFrame > end) {\r\n        pendingFrame = end - init;\r\n      }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.totalFrames = end - init;\r\n    this.timeCompleted = this.totalFrames;\r\n\r\n    if (pendingFrame !== -1) {\r\n      this.goToAndStop(pendingFrame, true);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n    if (forceFlag) {\r\n      this.segments.length = 0;\r\n    }\r\n\r\n    if (_typeof$4(arr[0]) === 'object') {\r\n      var i;\r\n      var len = arr.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.segments.push(arr[i]);\r\n      }\r\n    } else {\r\n      this.segments.push(arr);\r\n    }\r\n\r\n    if (this.segments.length && forceFlag) {\r\n      this.adjustSegment(this.segments.shift(), 0);\r\n    }\r\n\r\n    if (this.isPaused) {\r\n      this.play();\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip, this.animationData.op]);\r\n\r\n    if (forceFlag) {\r\n      this.checkSegments(0);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.checkSegments = function (offset) {\r\n    if (this.segments.length) {\r\n      this.adjustSegment(this.segments.shift(), offset);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  AnimationItem.prototype.destroy = function (name) {\r\n    if (name && this.name !== name || !this.renderer) {\r\n      return;\r\n    }\r\n\r\n    this.renderer.destroy();\r\n    this.imagePreloader.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = null;\r\n    this.onLoopComplete = null;\r\n    this.onComplete = null;\r\n    this.onSegmentStart = null;\r\n    this.onDestroy = null;\r\n    this.renderer = null;\r\n    this.renderer = null;\r\n    this.imagePreloader = null;\r\n    this.projectInterface = null;\r\n  };\r\n\r\n  AnimationItem.prototype.setCurrentRawFrameValue = function (value) {\r\n    this.currentRawFrame = value;\r\n    this.gotoFrame();\r\n  };\r\n\r\n  AnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n  };\r\n\r\n  AnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n  };\r\n\r\n  AnimationItem.prototype.setVolume = function (val, name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.audioController.setVolume(val);\r\n  };\r\n\r\n  AnimationItem.prototype.getVolume = function () {\r\n    return this.audioController.getVolume();\r\n  };\r\n\r\n  AnimationItem.prototype.mute = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.audioController.mute();\r\n  };\r\n\r\n  AnimationItem.prototype.unmute = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.audioController.unmute();\r\n  };\r\n\r\n  AnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n    this.audioController.setRate(this.playSpeed * this.playDirection);\r\n  };\r\n\r\n  AnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n  };\r\n\r\n  AnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n\r\n    if (assetData.e) {\r\n      path = assetData.p;\r\n    } else if (this.assetsPath) {\r\n      var imagePath = assetData.p;\r\n\r\n      if (imagePath.indexOf('images/') !== -1) {\r\n        imagePath = imagePath.split('/')[1];\r\n      }\r\n\r\n      path = this.assetsPath + imagePath;\r\n    } else {\r\n      path = this.path;\r\n      path += assetData.u ? assetData.u : '';\r\n      path += assetData.p;\r\n    }\r\n\r\n    return path;\r\n  };\r\n\r\n  AnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0;\r\n    var len = this.assets.length;\r\n\r\n    while (i < len) {\r\n      if (id === this.assets[i].id) {\r\n        return this.assets[i];\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  AnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n  };\r\n\r\n  AnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n  };\r\n\r\n  AnimationItem.prototype.getDuration = function (isFrame) {\r\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n  };\r\n\r\n  AnimationItem.prototype.updateDocumentData = function (path, documentData, index) {\r\n    try {\r\n      var element = this.renderer.getElementByPath(path);\r\n      element.updateDocumentData(documentData, index);\r\n    } catch (error) {// TODO: decide how to handle catch case\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.trigger = function (name) {\r\n    if (this._cbs && this._cbs[name]) {\r\n      switch (name) {\r\n        case 'enterFrame':\r\n          this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\r\n          break;\r\n\r\n        case 'drawnFrame':\r\n          this.drawnFrameEvent.currentTime = this.currentFrame;\r\n          this.drawnFrameEvent.totalTime = this.totalFrames;\r\n          this.drawnFrameEvent.direction = this.frameModifier;\r\n          this.triggerEvent(name, this.drawnFrameEvent);\r\n          break;\r\n\r\n        case 'loopComplete':\r\n          this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n          break;\r\n\r\n        case 'complete':\r\n          this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\r\n          break;\r\n\r\n        case 'segmentStart':\r\n          this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n          break;\r\n\r\n        case 'destroy':\r\n          this.triggerEvent(name, new BMDestroyEvent(name, this));\r\n          break;\r\n\r\n        default:\r\n          this.triggerEvent(name);\r\n      }\r\n    }\r\n\r\n    if (name === 'enterFrame' && this.onEnterFrame) {\r\n      this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\r\n    }\r\n\r\n    if (name === 'loopComplete' && this.onLoopComplete) {\r\n      this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n    }\r\n\r\n    if (name === 'complete' && this.onComplete) {\r\n      this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\r\n    }\r\n\r\n    if (name === 'segmentStart' && this.onSegmentStart) {\r\n      this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n    }\r\n\r\n    if (name === 'destroy' && this.onDestroy) {\r\n      this.onDestroy.call(this, new BMDestroyEvent(name, this));\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\r\n    var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n      this.onError.call(this, error);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.triggerConfigError = function (nativeError) {\r\n    var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n      this.onError.call(this, error);\r\n    }\r\n  };\r\n\r\n  var animationManager = function () {\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var playingAnimationsNum = 0;\r\n    var _stopped = true;\r\n    var _isFrozen = false;\r\n\r\n    function removeElement(ev) {\r\n      var i = 0;\r\n      var animItem = ev.target;\r\n\r\n      while (i < len) {\r\n        if (registeredAnimations[i].animation === animItem) {\r\n          registeredAnimations.splice(i, 1);\r\n          i -= 1;\r\n          len -= 1;\r\n\r\n          if (!animItem.isPaused) {\r\n            subtractPlayingCount();\r\n          }\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n    }\r\n\r\n    function registerAnimation(element, animationData) {\r\n      if (!element) {\r\n        return null;\r\n      }\r\n\r\n      var i = 0;\r\n\r\n      while (i < len) {\r\n        if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\r\n          return registeredAnimations[i].animation;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      var animItem = new AnimationItem();\r\n      setupAnimation(animItem, element);\r\n      animItem.setData(element, animationData);\r\n      return animItem;\r\n    }\r\n\r\n    function getRegisteredAnimations() {\r\n      var i;\r\n      var lenAnims = registeredAnimations.length;\r\n      var animations = [];\r\n\r\n      for (i = 0; i < lenAnims; i += 1) {\r\n        animations.push(registeredAnimations[i].animation);\r\n      }\r\n\r\n      return animations;\r\n    }\r\n\r\n    function addPlayingCount() {\r\n      playingAnimationsNum += 1;\r\n      activate();\r\n    }\r\n\r\n    function subtractPlayingCount() {\r\n      playingAnimationsNum -= 1;\r\n    }\r\n\r\n    function setupAnimation(animItem, element) {\r\n      animItem.addEventListener('destroy', removeElement);\r\n      animItem.addEventListener('_active', addPlayingCount);\r\n      animItem.addEventListener('_idle', subtractPlayingCount);\r\n      registeredAnimations.push({\r\n        elem: element,\r\n        animation: animItem\r\n      });\r\n      len += 1;\r\n    }\r\n\r\n    function loadAnimation(params) {\r\n      var animItem = new AnimationItem();\r\n      setupAnimation(animItem, null);\r\n      animItem.setParams(params);\r\n      return animItem;\r\n    }\r\n\r\n    function setSpeed(val, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.setSpeed(val, animation);\r\n      }\r\n    }\r\n\r\n    function setDirection(val, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.setDirection(val, animation);\r\n      }\r\n    }\r\n\r\n    function play(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.play(animation);\r\n      }\r\n    }\r\n\r\n    function resume(nowTime) {\r\n      var elapsedTime = nowTime - initTime;\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n      }\r\n\r\n      initTime = nowTime;\r\n\r\n      if (playingAnimationsNum && !_isFrozen) {\r\n        window.requestAnimationFrame(resume);\r\n      } else {\r\n        _stopped = true;\r\n      }\r\n    }\r\n\r\n    function first(nowTime) {\r\n      initTime = nowTime;\r\n      window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.pause(animation);\r\n      }\r\n    }\r\n\r\n    function goToAndStop(value, isFrame, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\r\n      }\r\n    }\r\n\r\n    function stop(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.stop(animation);\r\n      }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.togglePause(animation);\r\n      }\r\n    }\r\n\r\n    function destroy(animation) {\r\n      var i;\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        registeredAnimations[i].animation.destroy(animation);\r\n      }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer) {\r\n      var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')), [].slice.call(document.getElementsByClassName('bodymovin')));\r\n      var i;\r\n      var lenAnims = animElements.length;\r\n\r\n      for (i = 0; i < lenAnims; i += 1) {\r\n        if (renderer) {\r\n          animElements[i].setAttribute('data-bm-type', renderer);\r\n        }\r\n\r\n        registerAnimation(animElements[i], animationData);\r\n      }\r\n\r\n      if (standalone && lenAnims === 0) {\r\n        if (!renderer) {\r\n          renderer = 'svg';\r\n        }\r\n\r\n        var body = document.getElementsByTagName('body')[0];\r\n        body.innerText = '';\r\n        var div = createTag('div');\r\n        div.style.width = '100%';\r\n        div.style.height = '100%';\r\n        div.setAttribute('data-bm-type', renderer);\r\n        body.appendChild(div);\r\n        registerAnimation(div, animationData);\r\n      }\r\n    }\r\n\r\n    function resize() {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.resize();\r\n      }\r\n    }\r\n\r\n    function activate() {\r\n      if (!_isFrozen && playingAnimationsNum) {\r\n        if (_stopped) {\r\n          window.requestAnimationFrame(first);\r\n          _stopped = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    function freeze() {\r\n      _isFrozen = true;\r\n    }\r\n\r\n    function unfreeze() {\r\n      _isFrozen = false;\r\n      activate();\r\n    }\r\n\r\n    function setVolume(val, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.setVolume(val, animation);\r\n      }\r\n    }\r\n\r\n    function mute(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.mute(animation);\r\n      }\r\n    }\r\n\r\n    function unmute(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.unmute(animation);\r\n      }\r\n    }\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize; // moduleOb.start = start;\r\n\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    moduleOb.freeze = freeze;\r\n    moduleOb.unfreeze = unfreeze;\r\n    moduleOb.setVolume = setVolume;\r\n    moduleOb.mute = mute;\r\n    moduleOb.unmute = unmute;\r\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n    return moduleOb;\r\n  }();\r\n\r\n  /* eslint-disable */\r\n  var BezierFactory = function () {\r\n    /**\r\n       * BezierEasing - use bezier curve for transition easing function\r\n       * by Gatan Renaudeau 2014 - 2015  MIT License\r\n       *\r\n       * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n       * Usage:\r\n       * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n       * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n       *\r\n       */\r\n    var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a, b, c, d, nm) {\r\n      var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\r\n\r\n      if (beziers[str]) {\r\n        return beziers[str];\r\n      }\r\n\r\n      var bezEasing = new BezierEasing([a, b, c, d]);\r\n      beziers[str] = bezEasing;\r\n      return bezEasing;\r\n    } // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n\r\n\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n    var float32ArraySupported = typeof Float32Array === 'function';\r\n\r\n    function A(aA1, aA2) {\r\n      return 1.0 - 3.0 * aA2 + 3.0 * aA1;\r\n    }\r\n\r\n    function B(aA1, aA2) {\r\n      return 3.0 * aA2 - 6.0 * aA1;\r\n    }\r\n\r\n    function C(aA1) {\r\n      return 3.0 * aA1;\r\n    } // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n\r\n\r\n    function calcBezier(aT, aA1, aA2) {\r\n      return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\r\n    } // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n\r\n\r\n    function getSlope(aT, aA1, aA2) {\r\n      return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide(aX, aA, aB, mX1, mX2) {\r\n      var currentX,\r\n          currentT,\r\n          i = 0;\r\n\r\n      do {\r\n        currentT = aA + (aB - aA) / 2.0;\r\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n\r\n        if (currentX > 0.0) {\r\n          aB = currentT;\r\n        } else {\r\n          aA = currentT;\r\n        }\r\n      } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n\r\n      return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\r\n      for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n        if (currentSlope === 0.0) return aGuessT;\r\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n        aGuessT -= currentX / currentSlope;\r\n      }\r\n\r\n      return aGuessT;\r\n    }\r\n    /**\r\n       * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n       */\r\n\r\n\r\n    function BezierEasing(points) {\r\n      this._p = points;\r\n      this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n      this._precomputed = false;\r\n      this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n      get: function get(x) {\r\n        var mX1 = this._p[0],\r\n            mY1 = this._p[1],\r\n            mX2 = this._p[2],\r\n            mY2 = this._p[3];\r\n        if (!this._precomputed) this._precompute();\r\n        if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n        // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n\r\n        if (x === 0) return 0;\r\n        if (x === 1) return 1;\r\n        return calcBezier(this._getTForX(x), mY1, mY2);\r\n      },\r\n      // Private part\r\n      _precompute: function _precompute() {\r\n        var mX1 = this._p[0],\r\n            mY1 = this._p[1],\r\n            mX2 = this._p[2],\r\n            mY2 = this._p[3];\r\n        this._precomputed = true;\r\n\r\n        if (mX1 !== mY1 || mX2 !== mY2) {\r\n          this._calcSampleValues();\r\n        }\r\n      },\r\n      _calcSampleValues: function _calcSampleValues() {\r\n        var mX1 = this._p[0],\r\n            mX2 = this._p[2];\r\n\r\n        for (var i = 0; i < kSplineTableSize; ++i) {\r\n          this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n        }\r\n      },\r\n\r\n      /**\r\n           * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n           */\r\n      _getTForX: function _getTForX(aX) {\r\n        var mX1 = this._p[0],\r\n            mX2 = this._p[2],\r\n            mSampleValues = this._mSampleValues;\r\n        var intervalStart = 0.0;\r\n        var currentSample = 1;\r\n        var lastSample = kSplineTableSize - 1;\r\n\r\n        for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n          intervalStart += kSampleStepSize;\r\n        }\r\n\r\n        --currentSample; // Interpolate to provide an initial guess for t\r\n\r\n        var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\r\n        var guessForT = intervalStart + dist * kSampleStepSize;\r\n        var initialSlope = getSlope(guessForT, mX1, mX2);\r\n\r\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n        }\r\n\r\n        if (initialSlope === 0.0) {\r\n          return guessForT;\r\n        }\r\n\r\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n      }\r\n    };\r\n    return ob;\r\n  }();\r\n\r\n  var pooling = function () {\r\n    function _double(arr) {\r\n      return arr.concat(createSizedArray(arr.length));\r\n    }\r\n\r\n    return {\r\n      \"double\": _double\r\n    };\r\n  }();\r\n\r\n  var poolFactory = function () {\r\n    return function (initialLength, _create, _release) {\r\n      var _length = 0;\r\n      var _maxLength = initialLength;\r\n      var pool = createSizedArray(_maxLength);\r\n      var ob = {\r\n        newElement: newElement,\r\n        release: release\r\n      };\r\n\r\n      function newElement() {\r\n        var element;\r\n\r\n        if (_length) {\r\n          _length -= 1;\r\n          element = pool[_length];\r\n        } else {\r\n          element = _create();\r\n        }\r\n\r\n        return element;\r\n      }\r\n\r\n      function release(element) {\r\n        if (_length === _maxLength) {\r\n          pool = pooling[\"double\"](pool);\r\n          _maxLength *= 2;\r\n        }\r\n\r\n        if (_release) {\r\n          _release(element);\r\n        }\r\n\r\n        pool[_length] = element;\r\n        _length += 1;\r\n      }\r\n\r\n      return ob;\r\n    };\r\n  }();\r\n\r\n  var bezierLengthPool = function () {\r\n    function create() {\r\n      return {\r\n        addedLength: 0,\r\n        percents: createTypedArray('float32', getDefaultCurveSegments()),\r\n        lengths: createTypedArray('float32', getDefaultCurveSegments())\r\n      };\r\n    }\r\n\r\n    return poolFactory(8, create);\r\n  }();\r\n\r\n  var segmentsLengthPool = function () {\r\n    function create() {\r\n      return {\r\n        lengths: [],\r\n        totalLength: 0\r\n      };\r\n    }\r\n\r\n    function release(element) {\r\n      var i;\r\n      var len = element.lengths.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        bezierLengthPool.release(element.lengths[i]);\r\n      }\r\n\r\n      element.lengths.length = 0;\r\n    }\r\n\r\n    return poolFactory(8, create, release);\r\n  }();\r\n\r\n  function bezFunction() {\r\n    var math = Math;\r\n\r\n    function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\r\n      var det1 = x1 * y2 + y1 * x3 + x2 * y3 - x3 * y2 - y3 * x1 - x2 * y1;\r\n      return det1 > -0.001 && det1 < 0.001;\r\n    }\r\n\r\n    function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\r\n      if (z1 === 0 && z2 === 0 && z3 === 0) {\r\n        return pointOnLine2D(x1, y1, x2, y2, x3, y3);\r\n      }\r\n\r\n      var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\r\n      var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\r\n      var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\r\n      var diffDist;\r\n\r\n      if (dist1 > dist2) {\r\n        if (dist1 > dist3) {\r\n          diffDist = dist1 - dist2 - dist3;\r\n        } else {\r\n          diffDist = dist3 - dist2 - dist1;\r\n        }\r\n      } else if (dist3 > dist2) {\r\n        diffDist = dist3 - dist2 - dist1;\r\n      } else {\r\n        diffDist = dist2 - dist1 - dist3;\r\n      }\r\n\r\n      return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    var getBezierLength = function () {\r\n      return function (pt1, pt2, pt3, pt4) {\r\n        var curveSegments = getDefaultCurveSegments();\r\n        var k;\r\n        var i;\r\n        var len;\r\n        var ptCoord;\r\n        var perc;\r\n        var addedLength = 0;\r\n        var ptDistance;\r\n        var point = [];\r\n        var lastPoint = [];\r\n        var lengthData = bezierLengthPool.newElement();\r\n        len = pt3.length;\r\n\r\n        for (k = 0; k < curveSegments; k += 1) {\r\n          perc = k / (curveSegments - 1);\r\n          ptDistance = 0;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\r\n            point[i] = ptCoord;\r\n\r\n            if (lastPoint[i] !== null) {\r\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n            }\r\n\r\n            lastPoint[i] = point[i];\r\n          }\r\n\r\n          if (ptDistance) {\r\n            ptDistance = bmSqrt(ptDistance);\r\n            addedLength += ptDistance;\r\n          }\r\n\r\n          lengthData.percents[k] = perc;\r\n          lengthData.lengths[k] = addedLength;\r\n        }\r\n\r\n        lengthData.addedLength = addedLength;\r\n        return lengthData;\r\n      };\r\n    }();\r\n\r\n    function getSegmentsLength(shapeData) {\r\n      var segmentsLength = segmentsLengthPool.newElement();\r\n      var closed = shapeData.c;\r\n      var pathV = shapeData.v;\r\n      var pathO = shapeData.o;\r\n      var pathI = shapeData.i;\r\n      var i;\r\n      var len = shapeData._length;\r\n      var lengths = segmentsLength.lengths;\r\n      var totalLength = 0;\r\n\r\n      for (i = 0; i < len - 1; i += 1) {\r\n        lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\r\n        totalLength += lengths[i].addedLength;\r\n      }\r\n\r\n      if (closed && len) {\r\n        lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\r\n        totalLength += lengths[i].addedLength;\r\n      }\r\n\r\n      segmentsLength.totalLength = totalLength;\r\n      return segmentsLength;\r\n    }\r\n\r\n    function BezierData(length) {\r\n      this.segmentLength = 0;\r\n      this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial, point) {\r\n      this.partialLength = partial;\r\n      this.point = point;\r\n    }\r\n\r\n    var buildBezierData = function () {\r\n      var storedData = {};\r\n      return function (pt1, pt2, pt3, pt4) {\r\n        var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\r\n\r\n        if (!storedData[bezierName]) {\r\n          var curveSegments = getDefaultCurveSegments();\r\n          var k;\r\n          var i;\r\n          var len;\r\n          var ptCoord;\r\n          var perc;\r\n          var addedLength = 0;\r\n          var ptDistance;\r\n          var point;\r\n          var lastPoint = null;\r\n\r\n          if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\r\n            curveSegments = 2;\r\n          }\r\n\r\n          var bezierData = new BezierData(curveSegments);\r\n          len = pt3.length;\r\n\r\n          for (k = 0; k < curveSegments; k += 1) {\r\n            point = createSizedArray(len);\r\n            perc = k / (curveSegments - 1);\r\n            ptDistance = 0;\r\n\r\n            for (i = 0; i < len; i += 1) {\r\n              ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\r\n              point[i] = ptCoord;\r\n\r\n              if (lastPoint !== null) {\r\n                ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n              }\r\n            }\r\n\r\n            ptDistance = bmSqrt(ptDistance);\r\n            addedLength += ptDistance;\r\n            bezierData.points[k] = new PointData(ptDistance, point);\r\n            lastPoint = point;\r\n          }\r\n\r\n          bezierData.segmentLength = addedLength;\r\n          storedData[bezierName] = bezierData;\r\n        }\r\n\r\n        return storedData[bezierName];\r\n      };\r\n    }();\r\n\r\n    function getDistancePerc(perc, bezierData) {\r\n      var percents = bezierData.percents;\r\n      var lengths = bezierData.lengths;\r\n      var len = percents.length;\r\n      var initPos = bmFloor((len - 1) * perc);\r\n      var lengthPos = perc * bezierData.addedLength;\r\n      var lPerc = 0;\r\n\r\n      if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\r\n        return percents[initPos];\r\n      }\r\n\r\n      var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n      var flag = true;\r\n\r\n      while (flag) {\r\n        if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\r\n          lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\r\n          flag = false;\r\n        } else {\r\n          initPos += dir;\r\n        }\r\n\r\n        if (initPos < 0 || initPos >= len - 1) {\r\n          // FIX for TypedArrays that don't store floating point values with enough accuracy\r\n          if (initPos === len - 1) {\r\n            return percents[initPos];\r\n          }\r\n\r\n          flag = false;\r\n        }\r\n      }\r\n\r\n      return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n      var t1 = getDistancePerc(percent, bezierData);\r\n      var u1 = 1 - t1;\r\n      var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\r\n      var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\r\n      return [ptX, ptY];\r\n    }\r\n\r\n    var bezierSegmentPoints = createTypedArray('float32', 8);\r\n\r\n    function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\r\n      if (startPerc < 0) {\r\n        startPerc = 0;\r\n      } else if (startPerc > 1) {\r\n        startPerc = 1;\r\n      }\r\n\r\n      var t0 = getDistancePerc(startPerc, bezierData);\r\n      endPerc = endPerc > 1 ? 1 : endPerc;\r\n      var t1 = getDistancePerc(endPerc, bezierData);\r\n      var i;\r\n      var len = pt1.length;\r\n      var u0 = 1 - t0;\r\n      var u1 = 1 - t1;\r\n      var u0u0u0 = u0 * u0 * u0;\r\n      var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\r\n\r\n      var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\r\n\r\n      var t0t0t0 = t0 * t0 * t0; //\r\n\r\n      var u0u0u1 = u0 * u0 * u1;\r\n      var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t0t1 = t0 * t0 * t1; //\r\n\r\n      var u0u1u1 = u0 * u1 * u1;\r\n      var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t1t1 = t0 * t1 * t1; //\r\n\r\n      var u1u1u1 = u1 * u1 * u1;\r\n      var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t1t1t1 = t1 * t1 * t1;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n\r\n        bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n\r\n        bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n\r\n        bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      }\r\n\r\n      return bezierSegmentPoints;\r\n    }\r\n\r\n    return {\r\n      getSegmentsLength: getSegmentsLength,\r\n      getNewSegment: getNewSegment,\r\n      getPointInSegment: getPointInSegment,\r\n      buildBezierData: buildBezierData,\r\n      pointOnLine2D: pointOnLine2D,\r\n      pointOnLine3D: pointOnLine3D\r\n    };\r\n  }\r\n\r\n  var bez = bezFunction();\r\n\r\n  var PropertyFactory = function () {\r\n    var initFrame = initialDefaultFrame;\r\n    var mathAbs = Math.abs;\r\n\r\n    function interpolateValue(frameNum, caching) {\r\n      var offsetTime = this.offsetTime;\r\n      var newValue;\r\n\r\n      if (this.propType === 'multidimensional') {\r\n        newValue = createTypedArray('float32', this.pv.length);\r\n      }\r\n\r\n      var iterationIndex = caching.lastIndex;\r\n      var i = iterationIndex;\r\n      var len = this.keyframes.length - 1;\r\n      var flag = true;\r\n      var keyData;\r\n      var nextKeyData;\r\n      var keyframeMetadata;\r\n\r\n      while (flag) {\r\n        keyData = this.keyframes[i];\r\n        nextKeyData = this.keyframes[i + 1];\r\n\r\n        if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\r\n          if (keyData.h) {\r\n            keyData = nextKeyData;\r\n          }\r\n\r\n          iterationIndex = 0;\r\n          break;\r\n        }\r\n\r\n        if (nextKeyData.t - offsetTime > frameNum) {\r\n          iterationIndex = i;\r\n          break;\r\n        }\r\n\r\n        if (i < len - 1) {\r\n          i += 1;\r\n        } else {\r\n          iterationIndex = 0;\r\n          flag = false;\r\n        }\r\n      }\r\n\r\n      keyframeMetadata = this.keyframesMetadata[i] || {};\r\n      var k;\r\n      var kLen;\r\n      var perc;\r\n      var jLen;\r\n      var j;\r\n      var fnc;\r\n      var nextKeyTime = nextKeyData.t - offsetTime;\r\n      var keyTime = keyData.t - offsetTime;\r\n      var endValue;\r\n\r\n      if (keyData.to) {\r\n        if (!keyframeMetadata.bezierData) {\r\n          keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n        }\r\n\r\n        var bezierData = keyframeMetadata.bezierData;\r\n\r\n        if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n          var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n          kLen = bezierData.points[ind].point.length;\r\n\r\n          for (k = 0; k < kLen; k += 1) {\r\n            newValue[k] = bezierData.points[ind].point[k];\r\n          } // caching._lastKeyframeIndex = -1;\r\n\r\n        } else {\r\n          if (keyframeMetadata.__fnct) {\r\n            fnc = keyframeMetadata.__fnct;\r\n          } else {\r\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n            keyframeMetadata.__fnct = fnc;\r\n          }\r\n\r\n          perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n          var distanceInLine = bezierData.segmentLength * perc;\r\n          var segmentPerc;\r\n          var addedLength = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastAddedLength : 0;\r\n          j = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastPoint : 0;\r\n          flag = true;\r\n          jLen = bezierData.points.length;\r\n\r\n          while (flag) {\r\n            addedLength += bezierData.points[j].partialLength;\r\n\r\n            if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n              kLen = bezierData.points[j].point.length;\r\n\r\n              for (k = 0; k < kLen; k += 1) {\r\n                newValue[k] = bezierData.points[j].point[k];\r\n              }\r\n\r\n              break;\r\n            } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n              segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n              kLen = bezierData.points[j].point.length;\r\n\r\n              for (k = 0; k < kLen; k += 1) {\r\n                newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n              }\r\n\r\n              break;\r\n            }\r\n\r\n            if (j < jLen - 1) {\r\n              j += 1;\r\n            } else {\r\n              flag = false;\r\n            }\r\n          }\r\n\r\n          caching._lastPoint = j;\r\n          caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n          caching._lastKeyframeIndex = i;\r\n        }\r\n      } else {\r\n        var outX;\r\n        var outY;\r\n        var inX;\r\n        var inY;\r\n        var keyValue;\r\n        len = keyData.s.length;\r\n        endValue = nextKeyData.s || keyData.e;\r\n\r\n        if (this.sh && keyData.h !== 1) {\r\n          if (frameNum >= nextKeyTime) {\r\n            newValue[0] = endValue[0];\r\n            newValue[1] = endValue[1];\r\n            newValue[2] = endValue[2];\r\n          } else if (frameNum <= keyTime) {\r\n            newValue[0] = keyData.s[0];\r\n            newValue[1] = keyData.s[1];\r\n            newValue[2] = keyData.s[2];\r\n          } else {\r\n            var quatStart = createQuaternion(keyData.s);\r\n            var quatEnd = createQuaternion(endValue);\r\n            var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n            quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n          }\r\n        } else {\r\n          for (i = 0; i < len; i += 1) {\r\n            if (keyData.h !== 1) {\r\n              if (frameNum >= nextKeyTime) {\r\n                perc = 1;\r\n              } else if (frameNum < keyTime) {\r\n                perc = 0;\r\n              } else {\r\n                if (keyData.o.x.constructor === Array) {\r\n                  if (!keyframeMetadata.__fnct) {\r\n                    keyframeMetadata.__fnct = [];\r\n                  }\r\n\r\n                  if (!keyframeMetadata.__fnct[i]) {\r\n                    outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\r\n                    outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\r\n                    inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\r\n                    inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\r\n                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                    keyframeMetadata.__fnct[i] = fnc;\r\n                  } else {\r\n                    fnc = keyframeMetadata.__fnct[i];\r\n                  }\r\n                } else if (!keyframeMetadata.__fnct) {\r\n                  outX = keyData.o.x;\r\n                  outY = keyData.o.y;\r\n                  inX = keyData.i.x;\r\n                  inY = keyData.i.y;\r\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                  keyData.keyframeMetadata = fnc;\r\n                } else {\r\n                  fnc = keyframeMetadata.__fnct;\r\n                }\r\n\r\n                perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n              }\r\n            }\r\n\r\n            endValue = nextKeyData.s || keyData.e;\r\n            keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n            if (this.propType === 'multidimensional') {\r\n              newValue[i] = keyValue;\r\n            } else {\r\n              newValue = keyValue;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      caching.lastIndex = iterationIndex;\r\n      return newValue;\r\n    } // based on @Toji's https://github.com/toji/gl-matrix/\r\n\r\n\r\n    function slerp(a, b, t) {\r\n      var out = [];\r\n      var ax = a[0];\r\n      var ay = a[1];\r\n      var az = a[2];\r\n      var aw = a[3];\r\n      var bx = b[0];\r\n      var by = b[1];\r\n      var bz = b[2];\r\n      var bw = b[3];\r\n      var omega;\r\n      var cosom;\r\n      var sinom;\r\n      var scale0;\r\n      var scale1;\r\n      cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n\r\n      if (cosom < 0.0) {\r\n        cosom = -cosom;\r\n        bx = -bx;\r\n        by = -by;\r\n        bz = -bz;\r\n        bw = -bw;\r\n      }\r\n\r\n      if (1.0 - cosom > 0.000001) {\r\n        omega = Math.acos(cosom);\r\n        sinom = Math.sin(omega);\r\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n        scale1 = Math.sin(t * omega) / sinom;\r\n      } else {\r\n        scale0 = 1.0 - t;\r\n        scale1 = t;\r\n      }\r\n\r\n      out[0] = scale0 * ax + scale1 * bx;\r\n      out[1] = scale0 * ay + scale1 * by;\r\n      out[2] = scale0 * az + scale1 * bz;\r\n      out[3] = scale0 * aw + scale1 * bw;\r\n      return out;\r\n    }\r\n\r\n    function quaternionToEuler(out, quat) {\r\n      var qx = quat[0];\r\n      var qy = quat[1];\r\n      var qz = quat[2];\r\n      var qw = quat[3];\r\n      var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\r\n      var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\r\n      var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\r\n      out[0] = heading / degToRads;\r\n      out[1] = attitude / degToRads;\r\n      out[2] = bank / degToRads;\r\n    }\r\n\r\n    function createQuaternion(values) {\r\n      var heading = values[0] * degToRads;\r\n      var attitude = values[1] * degToRads;\r\n      var bank = values[2] * degToRads;\r\n      var c1 = Math.cos(heading / 2);\r\n      var c2 = Math.cos(attitude / 2);\r\n      var c3 = Math.cos(bank / 2);\r\n      var s1 = Math.sin(heading / 2);\r\n      var s2 = Math.sin(attitude / 2);\r\n      var s3 = Math.sin(bank / 2);\r\n      var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n      var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n      var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n      var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n      return [x, y, z, w];\r\n    }\r\n\r\n    function getValueAtCurrentTime() {\r\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n      var initTime = this.keyframes[0].t - this.offsetTime;\r\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n\r\n      if (!(frameNum === this._caching.lastFrame || this._caching.lastFrame !== initFrame && (this._caching.lastFrame >= endTime && frameNum >= endTime || this._caching.lastFrame < initTime && frameNum < initTime))) {\r\n        if (this._caching.lastFrame >= frameNum) {\r\n          this._caching._lastKeyframeIndex = -1;\r\n          this._caching.lastIndex = 0;\r\n        }\r\n\r\n        var renderResult = this.interpolateValue(frameNum, this._caching);\r\n        this.pv = renderResult;\r\n      }\r\n\r\n      this._caching.lastFrame = frameNum;\r\n      return this.pv;\r\n    }\r\n\r\n    function setVValue(val) {\r\n      var multipliedValue;\r\n\r\n      if (this.propType === 'unidimensional') {\r\n        multipliedValue = val * this.mult;\r\n\r\n        if (mathAbs(this.v - multipliedValue) > 0.00001) {\r\n          this.v = multipliedValue;\r\n          this._mdf = true;\r\n        }\r\n      } else {\r\n        var i = 0;\r\n        var len = this.v.length;\r\n\r\n        while (i < len) {\r\n          multipliedValue = val[i] * this.mult;\r\n\r\n          if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\r\n            this.v[i] = multipliedValue;\r\n            this._mdf = true;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n      if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n        return;\r\n      }\r\n\r\n      if (this.lock) {\r\n        this.setVValue(this.pv);\r\n        return;\r\n      }\r\n\r\n      this.lock = true;\r\n      this._mdf = this._isFirstFrame;\r\n      var i;\r\n      var len = this.effectsSequence.length;\r\n      var finalValue = this.kf ? this.pv : this.data.k;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        finalValue = this.effectsSequence[i](finalValue);\r\n      }\r\n\r\n      this.setVValue(finalValue);\r\n      this._isFirstFrame = false;\r\n      this.lock = false;\r\n      this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n      this.effectsSequence.push(effectFunction);\r\n      this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    function ValueProperty(elem, data, mult, container) {\r\n      this.propType = 'unidimensional';\r\n      this.mult = mult || 1;\r\n      this.data = data;\r\n      this.v = mult ? data.k * mult : data.k;\r\n      this.pv = data.k;\r\n      this._mdf = false;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.k = false;\r\n      this.kf = false;\r\n      this.vel = 0;\r\n      this.effectsSequence = [];\r\n      this._isFirstFrame = true;\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem, data, mult, container) {\r\n      this.propType = 'multidimensional';\r\n      this.mult = mult || 1;\r\n      this.data = data;\r\n      this._mdf = false;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.k = false;\r\n      this.kf = false;\r\n      this.frameId = -1;\r\n      var i;\r\n      var len = data.k.length;\r\n      this.v = createTypedArray('float32', len);\r\n      this.pv = createTypedArray('float32', len);\r\n      this.vel = createTypedArray('float32', len);\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.v[i] = data.k[i] * this.mult;\r\n        this.pv[i] = data.k[i];\r\n      }\r\n\r\n      this._isFirstFrame = true;\r\n      this.effectsSequence = [];\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult, container) {\r\n      this.propType = 'unidimensional';\r\n      this.keyframes = data.k;\r\n      this.keyframesMetadata = [];\r\n      this.offsetTime = elem.data.st;\r\n      this.frameId = -1;\r\n      this._caching = {\r\n        lastFrame: initFrame,\r\n        lastIndex: 0,\r\n        value: 0,\r\n        _lastKeyframeIndex: -1\r\n      };\r\n      this.k = true;\r\n      this.kf = true;\r\n      this.data = data;\r\n      this.mult = mult || 1;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.v = initFrame;\r\n      this.pv = initFrame;\r\n      this._isFirstFrame = true;\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.interpolateValue = interpolateValue;\r\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult, container) {\r\n      this.propType = 'multidimensional';\r\n      var i;\r\n      var len = data.k.length;\r\n      var s;\r\n      var e;\r\n      var to;\r\n      var ti;\r\n\r\n      for (i = 0; i < len - 1; i += 1) {\r\n        if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\r\n          s = data.k[i].s;\r\n          e = data.k[i + 1].s;\r\n          to = data.k[i].to;\r\n          ti = data.k[i].ti;\r\n\r\n          if (s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1]) || s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2])) {\r\n            data.k[i].to = null;\r\n            data.k[i].ti = null;\r\n          }\r\n\r\n          if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n            if (s.length === 2 || s[2] === e[2] && to[2] === 0 && ti[2] === 0) {\r\n              data.k[i].to = null;\r\n              data.k[i].ti = null;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n      this.data = data;\r\n      this.keyframes = data.k;\r\n      this.keyframesMetadata = [];\r\n      this.offsetTime = elem.data.st;\r\n      this.k = true;\r\n      this.kf = true;\r\n      this._isFirstFrame = true;\r\n      this.mult = mult || 1;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.interpolateValue = interpolateValue;\r\n      this.frameId = -1;\r\n      var arrLen = data.k[0].s.length;\r\n      this.v = createTypedArray('float32', arrLen);\r\n      this.pv = createTypedArray('float32', arrLen);\r\n\r\n      for (i = 0; i < arrLen; i += 1) {\r\n        this.v[i] = initFrame;\r\n        this.pv[i] = initFrame;\r\n      }\r\n\r\n      this._caching = {\r\n        lastFrame: initFrame,\r\n        lastIndex: 0,\r\n        value: createTypedArray('float32', arrLen)\r\n      };\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function getProp(elem, data, type, mult, container) {\r\n      var p;\r\n\r\n      if (!data.k.length) {\r\n        p = new ValueProperty(elem, data, mult, container);\r\n      } else if (typeof data.k[0] === 'number') {\r\n        p = new MultiDimensionalProperty(elem, data, mult, container);\r\n      } else {\r\n        switch (type) {\r\n          case 0:\r\n            p = new KeyframedValueProperty(elem, data, mult, container);\r\n            break;\r\n\r\n          case 1:\r\n            p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n\r\n      if (p.effectsSequence.length) {\r\n        container.addDynamicProperty(p);\r\n      }\r\n\r\n      return p;\r\n    }\r\n\r\n    var ob = {\r\n      getProp: getProp\r\n    };\r\n    return ob;\r\n  }();\r\n\r\n  function DynamicPropertyContainer() {}\r\n\r\n  DynamicPropertyContainer.prototype = {\r\n    addDynamicProperty: function addDynamicProperty(prop) {\r\n      if (this.dynamicProperties.indexOf(prop) === -1) {\r\n        this.dynamicProperties.push(prop);\r\n        this.container.addDynamicProperty(this);\r\n        this._isAnimated = true;\r\n      }\r\n    },\r\n    iterateDynamicProperties: function iterateDynamicProperties() {\r\n      this._mdf = false;\r\n      var i;\r\n      var len = this.dynamicProperties.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n\r\n        if (this.dynamicProperties[i]._mdf) {\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    },\r\n    initDynamicPropertyContainer: function initDynamicPropertyContainer(container) {\r\n      this.container = container;\r\n      this.dynamicProperties = [];\r\n      this._mdf = false;\r\n      this._isAnimated = false;\r\n    }\r\n  };\r\n\r\n  var pointPool = function () {\r\n    function create() {\r\n      return createTypedArray('float32', 2);\r\n    }\r\n\r\n    return poolFactory(8, create);\r\n  }();\r\n\r\n  function ShapePath() {\r\n    this.c = false;\r\n    this._length = 0;\r\n    this._maxLength = 8;\r\n    this.v = createSizedArray(this._maxLength);\r\n    this.o = createSizedArray(this._maxLength);\r\n    this.i = createSizedArray(this._maxLength);\r\n  }\r\n\r\n  ShapePath.prototype.setPathData = function (closed, len) {\r\n    this.c = closed;\r\n    this.setLength(len);\r\n    var i = 0;\r\n\r\n    while (i < len) {\r\n      this.v[i] = pointPool.newElement();\r\n      this.o[i] = pointPool.newElement();\r\n      this.i[i] = pointPool.newElement();\r\n      i += 1;\r\n    }\r\n  };\r\n\r\n  ShapePath.prototype.setLength = function (len) {\r\n    while (this._maxLength < len) {\r\n      this.doubleArrayLength();\r\n    }\r\n\r\n    this._length = len;\r\n  };\r\n\r\n  ShapePath.prototype.doubleArrayLength = function () {\r\n    this.v = this.v.concat(createSizedArray(this._maxLength));\r\n    this.i = this.i.concat(createSizedArray(this._maxLength));\r\n    this.o = this.o.concat(createSizedArray(this._maxLength));\r\n    this._maxLength *= 2;\r\n  };\r\n\r\n  ShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\r\n    var arr;\r\n    this._length = Math.max(this._length, pos + 1);\r\n\r\n    if (this._length >= this._maxLength) {\r\n      this.doubleArrayLength();\r\n    }\r\n\r\n    switch (type) {\r\n      case 'v':\r\n        arr = this.v;\r\n        break;\r\n\r\n      case 'i':\r\n        arr = this.i;\r\n        break;\r\n\r\n      case 'o':\r\n        arr = this.o;\r\n        break;\r\n\r\n      default:\r\n        arr = [];\r\n        break;\r\n    }\r\n\r\n    if (!arr[pos] || arr[pos] && !replace) {\r\n      arr[pos] = pointPool.newElement();\r\n    }\r\n\r\n    arr[pos][0] = x;\r\n    arr[pos][1] = y;\r\n  };\r\n\r\n  ShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\r\n    this.setXYAt(vX, vY, 'v', pos, replace);\r\n    this.setXYAt(oX, oY, 'o', pos, replace);\r\n    this.setXYAt(iX, iY, 'i', pos, replace);\r\n  };\r\n\r\n  ShapePath.prototype.reverse = function () {\r\n    var newPath = new ShapePath();\r\n    newPath.setPathData(this.c, this._length);\r\n    var vertices = this.v;\r\n    var outPoints = this.o;\r\n    var inPoints = this.i;\r\n    var init = 0;\r\n\r\n    if (this.c) {\r\n      newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n      init = 1;\r\n    }\r\n\r\n    var cnt = this._length - 1;\r\n    var len = this._length;\r\n    var i;\r\n\r\n    for (i = init; i < len; i += 1) {\r\n      newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n      cnt -= 1;\r\n    }\r\n\r\n    return newPath;\r\n  };\r\n\r\n  ShapePath.prototype.length = function () {\r\n    return this._length;\r\n  };\r\n\r\n  var shapePool = function () {\r\n    function create() {\r\n      return new ShapePath();\r\n    }\r\n\r\n    function release(shapePath) {\r\n      var len = shapePath._length;\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        pointPool.release(shapePath.v[i]);\r\n        pointPool.release(shapePath.i[i]);\r\n        pointPool.release(shapePath.o[i]);\r\n        shapePath.v[i] = null;\r\n        shapePath.i[i] = null;\r\n        shapePath.o[i] = null;\r\n      }\r\n\r\n      shapePath._length = 0;\r\n      shapePath.c = false;\r\n    }\r\n\r\n    function clone(shape) {\r\n      var cloned = factory.newElement();\r\n      var i;\r\n      var len = shape._length === undefined ? shape.v.length : shape._length;\r\n      cloned.setLength(len);\r\n      cloned.c = shape.c;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\r\n      }\r\n\r\n      return cloned;\r\n    }\r\n\r\n    var factory = poolFactory(4, create, release);\r\n    factory.clone = clone;\r\n    return factory;\r\n  }();\r\n\r\n  function ShapeCollection() {\r\n    this._length = 0;\r\n    this._maxLength = 4;\r\n    this.shapes = createSizedArray(this._maxLength);\r\n  }\r\n\r\n  ShapeCollection.prototype.addShape = function (shapeData) {\r\n    if (this._length === this._maxLength) {\r\n      this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n      this._maxLength *= 2;\r\n    }\r\n\r\n    this.shapes[this._length] = shapeData;\r\n    this._length += 1;\r\n  };\r\n\r\n  ShapeCollection.prototype.releaseShapes = function () {\r\n    var i;\r\n\r\n    for (i = 0; i < this._length; i += 1) {\r\n      shapePool.release(this.shapes[i]);\r\n    }\r\n\r\n    this._length = 0;\r\n  };\r\n\r\n  var shapeCollectionPool = function () {\r\n    var ob = {\r\n      newShapeCollection: newShapeCollection,\r\n      release: release\r\n    };\r\n    var _length = 0;\r\n    var _maxLength = 4;\r\n    var pool = createSizedArray(_maxLength);\r\n\r\n    function newShapeCollection() {\r\n      var shapeCollection;\r\n\r\n      if (_length) {\r\n        _length -= 1;\r\n        shapeCollection = pool[_length];\r\n      } else {\r\n        shapeCollection = new ShapeCollection();\r\n      }\r\n\r\n      return shapeCollection;\r\n    }\r\n\r\n    function release(shapeCollection) {\r\n      var i;\r\n      var len = shapeCollection._length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapePool.release(shapeCollection.shapes[i]);\r\n      }\r\n\r\n      shapeCollection._length = 0;\r\n\r\n      if (_length === _maxLength) {\r\n        pool = pooling[\"double\"](pool);\r\n        _maxLength *= 2;\r\n      }\r\n\r\n      pool[_length] = shapeCollection;\r\n      _length += 1;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var ShapePropertyFactory = function () {\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, previousValue, caching) {\r\n      var iterationIndex = caching.lastIndex;\r\n      var keyPropS;\r\n      var keyPropE;\r\n      var isHold;\r\n      var j;\r\n      var k;\r\n      var jLen;\r\n      var kLen;\r\n      var perc;\r\n      var vertexValue;\r\n      var kf = this.keyframes;\r\n\r\n      if (frameNum < kf[0].t - this.offsetTime) {\r\n        keyPropS = kf[0].s[0];\r\n        isHold = true;\r\n        iterationIndex = 0;\r\n      } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\r\n        keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n        /* if(kf[kf.length - 1].s){\r\n                  keyPropS = kf[kf.length - 1].s[0];\r\n              }else{\r\n                  keyPropS = kf[kf.length - 2].e[0];\r\n              } */\r\n\r\n        isHold = true;\r\n      } else {\r\n        var i = iterationIndex;\r\n        var len = kf.length - 1;\r\n        var flag = true;\r\n        var keyData;\r\n        var nextKeyData;\r\n        var keyframeMetadata;\r\n\r\n        while (flag) {\r\n          keyData = kf[i];\r\n          nextKeyData = kf[i + 1];\r\n\r\n          if (nextKeyData.t - this.offsetTime > frameNum) {\r\n            break;\r\n          }\r\n\r\n          if (i < len - 1) {\r\n            i += 1;\r\n          } else {\r\n            flag = false;\r\n          }\r\n        }\r\n\r\n        keyframeMetadata = this.keyframesMetadata[i] || {};\r\n        isHold = keyData.h === 1;\r\n        iterationIndex = i;\r\n\r\n        if (!isHold) {\r\n          if (frameNum >= nextKeyData.t - this.offsetTime) {\r\n            perc = 1;\r\n          } else if (frameNum < keyData.t - this.offsetTime) {\r\n            perc = 0;\r\n          } else {\r\n            var fnc;\r\n\r\n            if (keyframeMetadata.__fnct) {\r\n              fnc = keyframeMetadata.__fnct;\r\n            } else {\r\n              fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\r\n              keyframeMetadata.__fnct = fnc;\r\n            }\r\n\r\n            perc = fnc((frameNum - (keyData.t - this.offsetTime)) / (nextKeyData.t - this.offsetTime - (keyData.t - this.offsetTime)));\r\n          }\r\n\r\n          keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n        }\r\n\r\n        keyPropS = keyData.s[0];\r\n      }\r\n\r\n      jLen = previousValue._length;\r\n      kLen = keyPropS.i[0].length;\r\n      caching.lastIndex = iterationIndex;\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        for (k = 0; k < kLen; k += 1) {\r\n          vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\r\n          previousValue.i[j][k] = vertexValue;\r\n          vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\r\n          previousValue.o[j][k] = vertexValue;\r\n          vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\r\n          previousValue.v[j][k] = vertexValue;\r\n        }\r\n      }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime() {\r\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n      var initTime = this.keyframes[0].t - this.offsetTime;\r\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n      var lastFrame = this._caching.lastFrame;\r\n\r\n      if (!(lastFrame !== initFrame && (lastFrame < initTime && frameNum < initTime || lastFrame > endTime && frameNum > endTime))) {\r\n        /// /\r\n        this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n        this.interpolateShape(frameNum, this.pv, this._caching); /// /\r\n      }\r\n\r\n      this._caching.lastFrame = frameNum;\r\n      return this.pv;\r\n    }\r\n\r\n    function resetShape() {\r\n      this.paths = this.localShapeCollection;\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n      if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\r\n        return false;\r\n      }\r\n\r\n      var i;\r\n      var len = shape1._length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    function setVValue(newPath) {\r\n      if (!shapesEqual(this.v, newPath)) {\r\n        this.v = shapePool.clone(newPath);\r\n        this.localShapeCollection.releaseShapes();\r\n        this.localShapeCollection.addShape(this.v);\r\n        this._mdf = true;\r\n        this.paths = this.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n      if (this.elem.globalData.frameId === this.frameId) {\r\n        return;\r\n      }\r\n\r\n      if (!this.effectsSequence.length) {\r\n        this._mdf = false;\r\n        return;\r\n      }\r\n\r\n      if (this.lock) {\r\n        this.setVValue(this.pv);\r\n        return;\r\n      }\r\n\r\n      this.lock = true;\r\n      this._mdf = false;\r\n      var finalValue;\r\n\r\n      if (this.kf) {\r\n        finalValue = this.pv;\r\n      } else if (this.data.ks) {\r\n        finalValue = this.data.ks.k;\r\n      } else {\r\n        finalValue = this.data.pt.k;\r\n      }\r\n\r\n      var i;\r\n      var len = this.effectsSequence.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        finalValue = this.effectsSequence[i](finalValue);\r\n      }\r\n\r\n      this.setVValue(finalValue);\r\n      this.lock = false;\r\n      this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function ShapeProperty(elem, data, type) {\r\n      this.propType = 'shape';\r\n      this.comp = elem.comp;\r\n      this.container = elem;\r\n      this.elem = elem;\r\n      this.data = data;\r\n      this.k = false;\r\n      this.kf = false;\r\n      this._mdf = false;\r\n      var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n      this.v = shapePool.clone(pathData);\r\n      this.pv = shapePool.clone(this.v);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.paths = this.localShapeCollection;\r\n      this.paths.addShape(this.v);\r\n      this.reset = resetShape;\r\n      this.effectsSequence = [];\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n      this.effectsSequence.push(effectFunction);\r\n      this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.setVValue = setVValue;\r\n    ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    function KeyframedShapeProperty(elem, data, type) {\r\n      this.propType = 'shape';\r\n      this.comp = elem.comp;\r\n      this.elem = elem;\r\n      this.container = elem;\r\n      this.offsetTime = elem.data.st;\r\n      this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n      this.keyframesMetadata = [];\r\n      this.k = true;\r\n      this.kf = true;\r\n      var len = this.keyframes[0].s[0].i.length;\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n      this.pv = shapePool.clone(this.v);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.paths = this.localShapeCollection;\r\n      this.paths.addShape(this.v);\r\n      this.lastFrame = initFrame;\r\n      this.reset = resetShape;\r\n      this._caching = {\r\n        lastFrame: initFrame,\r\n        lastIndex: 0\r\n      };\r\n      this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n    }\r\n\r\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    var EllShapeProperty = function () {\r\n      var cPoint = roundCorner;\r\n\r\n      function EllShapePropertyFactory(elem, data) {\r\n        this.v = shapePool.newElement();\r\n        this.v.setPathData(true, 4);\r\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.localShapeCollection.addShape(this.v);\r\n        this.d = data.d;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.frameId = -1;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n\r\n        if (this.dynamicProperties.length) {\r\n          this.k = true;\r\n        } else {\r\n          this.k = false;\r\n          this.convertEllToPath();\r\n        }\r\n      }\r\n\r\n      EllShapePropertyFactory.prototype = {\r\n        reset: resetShape,\r\n        getValue: function getValue() {\r\n          if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n          }\r\n\r\n          this.frameId = this.elem.globalData.frameId;\r\n          this.iterateDynamicProperties();\r\n\r\n          if (this._mdf) {\r\n            this.convertEllToPath();\r\n          }\r\n        },\r\n        convertEllToPath: function convertEllToPath() {\r\n          var p0 = this.p.v[0];\r\n          var p1 = this.p.v[1];\r\n          var s0 = this.s.v[0] / 2;\r\n          var s1 = this.s.v[1] / 2;\r\n\r\n          var _cw = this.d !== 3;\r\n\r\n          var _v = this.v;\r\n          _v.v[0][0] = p0;\r\n          _v.v[0][1] = p1 - s1;\r\n          _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n          _v.v[1][1] = p1;\r\n          _v.v[2][0] = p0;\r\n          _v.v[2][1] = p1 + s1;\r\n          _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n          _v.v[3][1] = p1;\r\n          _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n          _v.i[0][1] = p1 - s1;\r\n          _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n          _v.i[1][1] = p1 - s1 * cPoint;\r\n          _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n          _v.i[2][1] = p1 + s1;\r\n          _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n          _v.i[3][1] = p1 + s1 * cPoint;\r\n          _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n          _v.o[0][1] = p1 - s1;\r\n          _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n          _v.o[1][1] = p1 + s1 * cPoint;\r\n          _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n          _v.o[2][1] = p1 + s1;\r\n          _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n          _v.o[3][1] = p1 - s1 * cPoint;\r\n        }\r\n      };\r\n      extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\r\n      return EllShapePropertyFactory;\r\n    }();\r\n\r\n    var StarShapeProperty = function () {\r\n      function StarShapePropertyFactory(elem, data) {\r\n        this.v = shapePool.newElement();\r\n        this.v.setPathData(true, 0);\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.data = data;\r\n        this.frameId = -1;\r\n        this.d = data.d;\r\n        this.initDynamicPropertyContainer(elem);\r\n\r\n        if (data.sy === 1) {\r\n          this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\r\n          this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\r\n          this.convertToPath = this.convertStarToPath;\r\n        } else {\r\n          this.convertToPath = this.convertPolygonToPath;\r\n        }\r\n\r\n        this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\r\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n        this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\r\n        this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\r\n        this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\r\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n        this.localShapeCollection.addShape(this.v);\r\n        this.paths = this.localShapeCollection;\r\n\r\n        if (this.dynamicProperties.length) {\r\n          this.k = true;\r\n        } else {\r\n          this.k = false;\r\n          this.convertToPath();\r\n        }\r\n      }\r\n\r\n      StarShapePropertyFactory.prototype = {\r\n        reset: resetShape,\r\n        getValue: function getValue() {\r\n          if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n          }\r\n\r\n          this.frameId = this.elem.globalData.frameId;\r\n          this.iterateDynamicProperties();\r\n\r\n          if (this._mdf) {\r\n            this.convertToPath();\r\n          }\r\n        },\r\n        convertStarToPath: function convertStarToPath() {\r\n          var numPts = Math.floor(this.pt.v) * 2;\r\n          var angle = Math.PI * 2 / numPts;\r\n          /* this.v.v.length = numPts;\r\n                  this.v.i.length = numPts;\r\n                  this.v.o.length = numPts; */\r\n\r\n          var longFlag = true;\r\n          var longRad = this.or.v;\r\n          var shortRad = this.ir.v;\r\n          var longRound = this.os.v;\r\n          var shortRound = this.is.v;\r\n          var longPerimSegment = 2 * Math.PI * longRad / (numPts * 2);\r\n          var shortPerimSegment = 2 * Math.PI * shortRad / (numPts * 2);\r\n          var i;\r\n          var rad;\r\n          var roundness;\r\n          var perimSegment;\r\n          var currentAng = -Math.PI / 2;\r\n          currentAng += this.r.v;\r\n          var dir = this.data.d === 3 ? -1 : 1;\r\n          this.v._length = 0;\r\n\r\n          for (i = 0; i < numPts; i += 1) {\r\n            rad = longFlag ? longRad : shortRad;\r\n            roundness = longFlag ? longRound : shortRound;\r\n            perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n            var x = rad * Math.cos(currentAng);\r\n            var y = rad * Math.sin(currentAng);\r\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n            x += +this.p.v[0];\r\n            y += +this.p.v[1];\r\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n            /* this.v.v[i] = [x,y];\r\n                      this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                      this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                      this.v._length = numPts; */\r\n\r\n            longFlag = !longFlag;\r\n            currentAng += angle * dir;\r\n          }\r\n        },\r\n        convertPolygonToPath: function convertPolygonToPath() {\r\n          var numPts = Math.floor(this.pt.v);\r\n          var angle = Math.PI * 2 / numPts;\r\n          var rad = this.or.v;\r\n          var roundness = this.os.v;\r\n          var perimSegment = 2 * Math.PI * rad / (numPts * 4);\r\n          var i;\r\n          var currentAng = -Math.PI * 0.5;\r\n          var dir = this.data.d === 3 ? -1 : 1;\r\n          currentAng += this.r.v;\r\n          this.v._length = 0;\r\n\r\n          for (i = 0; i < numPts; i += 1) {\r\n            var x = rad * Math.cos(currentAng);\r\n            var y = rad * Math.sin(currentAng);\r\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n            x += +this.p.v[0];\r\n            y += +this.p.v[1];\r\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n            currentAng += angle * dir;\r\n          }\r\n\r\n          this.paths.length = 0;\r\n          this.paths[0] = this.v;\r\n        }\r\n      };\r\n      extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\r\n      return StarShapePropertyFactory;\r\n    }();\r\n\r\n    var RectShapeProperty = function () {\r\n      function RectShapePropertyFactory(elem, data) {\r\n        this.v = shapePool.newElement();\r\n        this.v.c = true;\r\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n        this.localShapeCollection.addShape(this.v);\r\n        this.paths = this.localShapeCollection;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.frameId = -1;\r\n        this.d = data.d;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n        this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\r\n\r\n        if (this.dynamicProperties.length) {\r\n          this.k = true;\r\n        } else {\r\n          this.k = false;\r\n          this.convertRectToPath();\r\n        }\r\n      }\r\n\r\n      RectShapePropertyFactory.prototype = {\r\n        convertRectToPath: function convertRectToPath() {\r\n          var p0 = this.p.v[0];\r\n          var p1 = this.p.v[1];\r\n          var v0 = this.s.v[0] / 2;\r\n          var v1 = this.s.v[1] / 2;\r\n          var round = bmMin(v0, v1, this.r.v);\r\n          var cPoint = round * (1 - roundCorner);\r\n          this.v._length = 0;\r\n\r\n          if (this.d === 2 || this.d === 1) {\r\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\r\n\r\n            if (round !== 0) {\r\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\r\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\r\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\r\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\r\n            } else {\r\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\r\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\r\n            }\r\n          } else {\r\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\r\n\r\n            if (round !== 0) {\r\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\r\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\r\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\r\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\r\n              this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\r\n            } else {\r\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\r\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\r\n              this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\r\n            }\r\n          }\r\n        },\r\n        getValue: function getValue() {\r\n          if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n          }\r\n\r\n          this.frameId = this.elem.globalData.frameId;\r\n          this.iterateDynamicProperties();\r\n\r\n          if (this._mdf) {\r\n            this.convertRectToPath();\r\n          }\r\n        },\r\n        reset: resetShape\r\n      };\r\n      extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\r\n      return RectShapePropertyFactory;\r\n    }();\r\n\r\n    function getShapeProp(elem, data, type) {\r\n      var prop;\r\n\r\n      if (type === 3 || type === 4) {\r\n        var dataProp = type === 3 ? data.pt : data.ks;\r\n        var keys = dataProp.k;\r\n\r\n        if (keys.length) {\r\n          prop = new KeyframedShapeProperty(elem, data, type);\r\n        } else {\r\n          prop = new ShapeProperty(elem, data, type);\r\n        }\r\n      } else if (type === 5) {\r\n        prop = new RectShapeProperty(elem, data);\r\n      } else if (type === 6) {\r\n        prop = new EllShapeProperty(elem, data);\r\n      } else if (type === 7) {\r\n        prop = new StarShapeProperty(elem, data);\r\n      }\r\n\r\n      if (prop.k) {\r\n        elem.addDynamicProperty(prop);\r\n      }\r\n\r\n      return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n      return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n      return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n  }();\r\n\r\n  /*!\r\n   Transformation Matrix v2.0\r\n   (c) Epistemex 2014-2015\r\n   www.epistemex.com\r\n   By Ken Fyrstenberg\r\n   Contributions by leeoniya.\r\n   License: MIT, header required.\r\n   */\r\n\r\n  /**\r\n   * 2D transformation matrix object initialized with identity matrix.\r\n   *\r\n   * The matrix can synchronize a canvas context by supplying the context\r\n   * as an argument, or later apply current absolute transform to an\r\n   * existing context.\r\n   *\r\n   * All values are handled as floating point values.\r\n   *\r\n   * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n   * @prop {number} a - scale x\r\n   * @prop {number} b - shear y\r\n   * @prop {number} c - shear x\r\n   * @prop {number} d - scale y\r\n   * @prop {number} e - translate x\r\n   * @prop {number} f - translate y\r\n   * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n   * @constructor\r\n   */\r\n\r\n  var Matrix = function () {\r\n    var _cos = Math.cos;\r\n    var _sin = Math.sin;\r\n    var _tan = Math.tan;\r\n    var _rnd = Math.round;\r\n\r\n    function reset() {\r\n      this.props[0] = 1;\r\n      this.props[1] = 0;\r\n      this.props[2] = 0;\r\n      this.props[3] = 0;\r\n      this.props[4] = 0;\r\n      this.props[5] = 1;\r\n      this.props[6] = 0;\r\n      this.props[7] = 0;\r\n      this.props[8] = 0;\r\n      this.props[9] = 0;\r\n      this.props[10] = 1;\r\n      this.props[11] = 0;\r\n      this.props[12] = 0;\r\n      this.props[13] = 0;\r\n      this.props[14] = 0;\r\n      this.props[15] = 1;\r\n      return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx, sy) {\r\n      return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay) {\r\n      return this.shear(_tan(ax), _tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle) {\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n      if (!sz && sz !== 0) {\r\n        sz = 1;\r\n      }\r\n\r\n      if (sx === 1 && sy === 1 && sz === 1) {\r\n        return this;\r\n      }\r\n\r\n      return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n      this.props[0] = a;\r\n      this.props[1] = b;\r\n      this.props[2] = c;\r\n      this.props[3] = d;\r\n      this.props[4] = e;\r\n      this.props[5] = f;\r\n      this.props[6] = g;\r\n      this.props[7] = h;\r\n      this.props[8] = i;\r\n      this.props[9] = j;\r\n      this.props[10] = k;\r\n      this.props[11] = l;\r\n      this.props[12] = m;\r\n      this.props[13] = n;\r\n      this.props[14] = o;\r\n      this.props[15] = p;\r\n      return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n      tz = tz || 0;\r\n\r\n      if (tx !== 0 || ty !== 0 || tz !== 0) {\r\n        return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n      var _p = this.props;\r\n\r\n      if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\r\n        // NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n        // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n        _p[12] = _p[12] * a2 + _p[15] * m2;\r\n        _p[13] = _p[13] * f2 + _p[15] * n2;\r\n        _p[14] = _p[14] * k2 + _p[15] * o2;\r\n        _p[15] *= p2; // }\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n      }\r\n\r\n      var a1 = _p[0];\r\n      var b1 = _p[1];\r\n      var c1 = _p[2];\r\n      var d1 = _p[3];\r\n      var e1 = _p[4];\r\n      var f1 = _p[5];\r\n      var g1 = _p[6];\r\n      var h1 = _p[7];\r\n      var i1 = _p[8];\r\n      var j1 = _p[9];\r\n      var k1 = _p[10];\r\n      var l1 = _p[11];\r\n      var m1 = _p[12];\r\n      var n1 = _p[13];\r\n      var o1 = _p[14];\r\n      var p1 = _p[15];\r\n      /* matrix order (canvas compatible):\r\n           * ace\r\n           * bdf\r\n           * 001\r\n           */\r\n\r\n      _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n      _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\r\n      _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\r\n      _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\r\n      _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\r\n      _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\r\n      _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\r\n      _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\r\n      _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\r\n      _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\r\n      _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\r\n      _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\r\n      _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\r\n      _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\r\n      _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\r\n      _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\r\n      this._identityCalculated = false;\r\n      return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n      if (!this._identityCalculated) {\r\n        this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n        this._identityCalculated = true;\r\n      }\r\n\r\n      return this._identity;\r\n    }\r\n\r\n    function equals(matr) {\r\n      var i = 0;\r\n\r\n      while (i < 16) {\r\n        if (matr.props[i] !== this.props[i]) {\r\n          return false;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    function clone(matr) {\r\n      var i;\r\n\r\n      for (i = 0; i < 16; i += 1) {\r\n        matr.props[i] = this.props[i];\r\n      }\r\n\r\n      return matr;\r\n    }\r\n\r\n    function cloneFromProps(props) {\r\n      var i;\r\n\r\n      for (i = 0; i < 16; i += 1) {\r\n        this.props[i] = props[i];\r\n      }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n      return {\r\n        x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n        y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n        z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n      };\r\n      /* return {\r\n           x: x * me.a + y * me.c + me.e,\r\n           y: x * me.b + y * me.d + me.f\r\n           }; */\r\n    }\r\n\r\n    function applyToX(x, y, z) {\r\n      return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n\r\n    function applyToY(x, y, z) {\r\n      return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n\r\n    function applyToZ(x, y, z) {\r\n      return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function getInverseMatrix() {\r\n      var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n      var a = this.props[5] / determinant;\r\n      var b = -this.props[1] / determinant;\r\n      var c = -this.props[4] / determinant;\r\n      var d = this.props[0] / determinant;\r\n      var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\r\n      var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\r\n      var inverseMatrix = new Matrix();\r\n      inverseMatrix.props[0] = a;\r\n      inverseMatrix.props[1] = b;\r\n      inverseMatrix.props[4] = c;\r\n      inverseMatrix.props[5] = d;\r\n      inverseMatrix.props[12] = e;\r\n      inverseMatrix.props[13] = f;\r\n      return inverseMatrix;\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n      var inverseMatrix = this.getInverseMatrix();\r\n      return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\r\n    }\r\n\r\n    function inversePoints(pts) {\r\n      var i;\r\n      var len = pts.length;\r\n      var retPts = [];\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        retPts[i] = inversePoint(pts[i]);\r\n      }\r\n\r\n      return retPts;\r\n    }\r\n\r\n    function applyToTriplePoints(pt1, pt2, pt3) {\r\n      var arr = createTypedArray('float32', 6);\r\n\r\n      if (this.isIdentity()) {\r\n        arr[0] = pt1[0];\r\n        arr[1] = pt1[1];\r\n        arr[2] = pt2[0];\r\n        arr[3] = pt2[1];\r\n        arr[4] = pt3[0];\r\n        arr[5] = pt3[1];\r\n      } else {\r\n        var p0 = this.props[0];\r\n        var p1 = this.props[1];\r\n        var p4 = this.props[4];\r\n        var p5 = this.props[5];\r\n        var p12 = this.props[12];\r\n        var p13 = this.props[13];\r\n        arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n        arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n        arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n        arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n        arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n        arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function applyToPointArray(x, y, z) {\r\n      var arr;\r\n\r\n      if (this.isIdentity()) {\r\n        arr = [x, y, z];\r\n      } else {\r\n        arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12], x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13], x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function applyToPointStringified(x, y) {\r\n      if (this.isIdentity()) {\r\n        return x + ',' + y;\r\n      }\r\n\r\n      var _p = this.props;\r\n      return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n    }\r\n\r\n    function toCSS() {\r\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n\r\n      /* if(this.isIdentity()) {\r\n              return '';\r\n          } */\r\n      var i = 0;\r\n      var props = this.props;\r\n      var cssValue = 'matrix3d(';\r\n      var v = 10000;\r\n\r\n      while (i < 16) {\r\n        cssValue += _rnd(props[i] * v) / v;\r\n        cssValue += i === 15 ? ')' : ',';\r\n        i += 1;\r\n      }\r\n\r\n      return cssValue;\r\n    }\r\n\r\n    function roundMatrixProperty(val) {\r\n      var v = 10000;\r\n\r\n      if (val < 0.000001 && val > 0 || val > -0.000001 && val < 0) {\r\n        return _rnd(val * v) / v;\r\n      }\r\n\r\n      return val;\r\n    }\r\n\r\n    function to2dCSS() {\r\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n\r\n      /* if(this.isIdentity()) {\r\n              return '';\r\n          } */\r\n      var props = this.props;\r\n\r\n      var _a = roundMatrixProperty(props[0]);\r\n\r\n      var _b = roundMatrixProperty(props[1]);\r\n\r\n      var _c = roundMatrixProperty(props[4]);\r\n\r\n      var _d = roundMatrixProperty(props[5]);\r\n\r\n      var _e = roundMatrixProperty(props[12]);\r\n\r\n      var _f = roundMatrixProperty(props[13]);\r\n\r\n      return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\r\n    }\r\n\r\n    return function () {\r\n      this.reset = reset;\r\n      this.rotate = rotate;\r\n      this.rotateX = rotateX;\r\n      this.rotateY = rotateY;\r\n      this.rotateZ = rotateZ;\r\n      this.skew = skew;\r\n      this.skewFromAxis = skewFromAxis;\r\n      this.shear = shear;\r\n      this.scale = scale;\r\n      this.setTransform = setTransform;\r\n      this.translate = translate;\r\n      this.transform = transform;\r\n      this.applyToPoint = applyToPoint;\r\n      this.applyToX = applyToX;\r\n      this.applyToY = applyToY;\r\n      this.applyToZ = applyToZ;\r\n      this.applyToPointArray = applyToPointArray;\r\n      this.applyToTriplePoints = applyToTriplePoints;\r\n      this.applyToPointStringified = applyToPointStringified;\r\n      this.toCSS = toCSS;\r\n      this.to2dCSS = to2dCSS;\r\n      this.clone = clone;\r\n      this.cloneFromProps = cloneFromProps;\r\n      this.equals = equals;\r\n      this.inversePoints = inversePoints;\r\n      this.inversePoint = inversePoint;\r\n      this.getInverseMatrix = getInverseMatrix;\r\n      this._t = this.transform;\r\n      this.isIdentity = isIdentity;\r\n      this._identity = true;\r\n      this._identityCalculated = false;\r\n      this.props = createTypedArray('float32', 16);\r\n      this.reset();\r\n    };\r\n  }();\r\n\r\n  function _typeof$3(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$3 = function _typeof(obj) { return typeof obj; }; } else { _typeof$3 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$3(obj); }\r\n  var lottie = {};\r\n  var standalone = '__[STANDALONE]__';\r\n  var animationData = '__[ANIMATIONDATA]__';\r\n  var renderer = '';\r\n\r\n  function setLocation(href) {\r\n    setLocationHref(href);\r\n  }\r\n\r\n  function searchAnimations() {\r\n    if (standalone === true) {\r\n      animationManager.searchAnimations(animationData, standalone, renderer);\r\n    } else {\r\n      animationManager.searchAnimations();\r\n    }\r\n  }\r\n\r\n  function setSubframeRendering(flag) {\r\n    setSubframeEnabled(flag);\r\n  }\r\n\r\n  function setPrefix(prefix) {\r\n    setIdPrefix(prefix);\r\n  }\r\n\r\n  function loadAnimation(params) {\r\n    if (standalone === true) {\r\n      params.animationData = JSON.parse(animationData);\r\n    }\r\n\r\n    return animationManager.loadAnimation(params);\r\n  }\r\n\r\n  function setQuality(value) {\r\n    if (typeof value === 'string') {\r\n      switch (value) {\r\n        case 'high':\r\n          setDefaultCurveSegments(200);\r\n          break;\r\n\r\n        default:\r\n        case 'medium':\r\n          setDefaultCurveSegments(50);\r\n          break;\r\n\r\n        case 'low':\r\n          setDefaultCurveSegments(10);\r\n          break;\r\n      }\r\n    } else if (!isNaN(value) && value > 1) {\r\n      setDefaultCurveSegments(value);\r\n    }\r\n\r\n    if (getDefaultCurveSegments() >= 50) {\r\n      roundValues(false);\r\n    } else {\r\n      roundValues(true);\r\n    }\r\n  }\r\n\r\n  function inBrowser() {\r\n    return typeof navigator !== 'undefined';\r\n  }\r\n\r\n  function installPlugin(type, plugin) {\r\n    if (type === 'expressions') {\r\n      setExpressionsPlugin(plugin);\r\n    }\r\n  }\r\n\r\n  function getFactory(name) {\r\n    switch (name) {\r\n      case 'propertyFactory':\r\n        return PropertyFactory;\r\n\r\n      case 'shapePropertyFactory':\r\n        return ShapePropertyFactory;\r\n\r\n      case 'matrix':\r\n        return Matrix;\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  lottie.play = animationManager.play;\r\n  lottie.pause = animationManager.pause;\r\n  lottie.setLocationHref = setLocation;\r\n  lottie.togglePause = animationManager.togglePause;\r\n  lottie.setSpeed = animationManager.setSpeed;\r\n  lottie.setDirection = animationManager.setDirection;\r\n  lottie.stop = animationManager.stop;\r\n  lottie.searchAnimations = searchAnimations;\r\n  lottie.registerAnimation = animationManager.registerAnimation;\r\n  lottie.loadAnimation = loadAnimation;\r\n  lottie.setSubframeRendering = setSubframeRendering;\r\n  lottie.resize = animationManager.resize; // lottie.start = start;\r\n\r\n  lottie.goToAndStop = animationManager.goToAndStop;\r\n  lottie.destroy = animationManager.destroy;\r\n  lottie.setQuality = setQuality;\r\n  lottie.inBrowser = inBrowser;\r\n  lottie.installPlugin = installPlugin;\r\n  lottie.freeze = animationManager.freeze;\r\n  lottie.unfreeze = animationManager.unfreeze;\r\n  lottie.setVolume = animationManager.setVolume;\r\n  lottie.mute = animationManager.mute;\r\n  lottie.unmute = animationManager.unmute;\r\n  lottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\n  lottie.useWebWorker = setWebWorker;\r\n  lottie.setIDPrefix = setPrefix;\r\n  lottie.__getFactory = getFactory;\r\n  lottie.version = '5.10.0';\r\n\r\n  function checkReady() {\r\n    if (document.readyState === 'complete') {\r\n      clearInterval(readyStateCheckInterval);\r\n      searchAnimations();\r\n    }\r\n  }\r\n\r\n  function getQueryVariable(variable) {\r\n    var vars = queryString.split('&');\r\n\r\n    for (var i = 0; i < vars.length; i += 1) {\r\n      var pair = vars[i].split('=');\r\n\r\n      if (decodeURIComponent(pair[0]) == variable) {\r\n        // eslint-disable-line eqeqeq\r\n        return decodeURIComponent(pair[1]);\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  var queryString = '';\r\n\r\n  if (standalone) {\r\n    var scripts = document.getElementsByTagName('script');\r\n    var index = scripts.length - 1;\r\n    var myScript = scripts[index] || {\r\n      src: ''\r\n    };\r\n    queryString = myScript.src ? myScript.src.replace(/^[^\\?]+\\??/, '') : ''; // eslint-disable-line no-useless-escape\r\n\r\n    renderer = getQueryVariable('renderer');\r\n  }\r\n\r\n  var readyStateCheckInterval = setInterval(checkReady, 100); // this adds bodymovin to the window object for backwards compatibility\r\n\r\n  try {\r\n    if (!((typeof exports === \"undefined\" ? \"undefined\" : _typeof$3(exports)) === 'object' && typeof module !== 'undefined') && !(typeof define === 'function' && define.amd) // eslint-disable-line no-undef\r\n    ) {\r\n      window.bodymovin = lottie;\r\n    }\r\n  } catch (err) {//\r\n  }\r\n\r\n  var ShapeModifiers = function () {\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm, factory) {\r\n      if (!modifiers[nm]) {\r\n        modifiers[nm] = factory;\r\n      }\r\n    }\r\n\r\n    function getModifier(nm, elem, data) {\r\n      return new modifiers[nm](elem, data);\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  function ShapeModifier() {}\r\n\r\n  ShapeModifier.prototype.initModifierProperties = function () {};\r\n\r\n  ShapeModifier.prototype.addShapeToModifier = function () {};\r\n\r\n  ShapeModifier.prototype.addShape = function (data) {\r\n    if (!this.closed) {\r\n      // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n      data.sh.container.addDynamicProperty(data.sh);\r\n      var shapeData = {\r\n        shape: data.sh,\r\n        data: data,\r\n        localShapeCollection: shapeCollectionPool.newShapeCollection()\r\n      };\r\n      this.shapes.push(shapeData);\r\n      this.addShapeToModifier(shapeData);\r\n\r\n      if (this._isAnimated) {\r\n        data.setAsAnimated();\r\n      }\r\n    }\r\n  };\r\n\r\n  ShapeModifier.prototype.init = function (elem, data) {\r\n    this.shapes = [];\r\n    this.elem = elem;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem, data);\r\n    this.frameId = initialDefaultFrame;\r\n    this.closed = false;\r\n    this.k = false;\r\n\r\n    if (this.dynamicProperties.length) {\r\n      this.k = true;\r\n    } else {\r\n      this.getValue(true);\r\n    }\r\n  };\r\n\r\n  ShapeModifier.prototype.processKeys = function () {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    }\r\n\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], ShapeModifier);\r\n\r\n  function TrimModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], TrimModifier);\r\n\r\n  TrimModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.m = data.m;\r\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n  };\r\n\r\n  TrimModifier.prototype.addShapeToModifier = function (shapeData) {\r\n    shapeData.pathsData = [];\r\n  };\r\n\r\n  TrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = [];\r\n\r\n    if (e <= 1) {\r\n      segments.push({\r\n        s: s,\r\n        e: e\r\n      });\r\n    } else if (s >= 1) {\r\n      segments.push({\r\n        s: s - 1,\r\n        e: e - 1\r\n      });\r\n    } else {\r\n      segments.push({\r\n        s: s,\r\n        e: 1\r\n      });\r\n      segments.push({\r\n        s: 0,\r\n        e: e - 1\r\n      });\r\n    }\r\n\r\n    var shapeSegments = [];\r\n    var i;\r\n    var len = segments.length;\r\n    var segmentOb;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      segmentOb = segments[i];\r\n\r\n      if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\r\n        var shapeS;\r\n        var shapeE;\r\n\r\n        if (segmentOb.s * totalModifierLength <= addedLength) {\r\n          shapeS = 0;\r\n        } else {\r\n          shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n        }\r\n\r\n        if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n          shapeE = 1;\r\n        } else {\r\n          shapeE = (segmentOb.e * totalModifierLength - addedLength) / shapeLength;\r\n        }\r\n\r\n        shapeSegments.push([shapeS, shapeE]);\r\n      }\r\n    }\r\n\r\n    if (!shapeSegments.length) {\r\n      shapeSegments.push([0, 0]);\r\n    }\r\n\r\n    return shapeSegments;\r\n  };\r\n\r\n  TrimModifier.prototype.releasePathsData = function (pathsData) {\r\n    var i;\r\n    var len = pathsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      segmentsLengthPool.release(pathsData[i]);\r\n    }\r\n\r\n    pathsData.length = 0;\r\n    return pathsData;\r\n  };\r\n\r\n  TrimModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var s;\r\n    var e;\r\n\r\n    if (this._mdf || _isFirstFrame) {\r\n      var o = this.o.v % 360 / 360;\r\n\r\n      if (o < 0) {\r\n        o += 1;\r\n      }\r\n\r\n      if (this.s.v > 1) {\r\n        s = 1 + o;\r\n      } else if (this.s.v < 0) {\r\n        s = 0 + o;\r\n      } else {\r\n        s = this.s.v + o;\r\n      }\r\n\r\n      if (this.e.v > 1) {\r\n        e = 1 + o;\r\n      } else if (this.e.v < 0) {\r\n        e = 0 + o;\r\n      } else {\r\n        e = this.e.v + o;\r\n      }\r\n\r\n      if (s > e) {\r\n        var _s = s;\r\n        s = e;\r\n        e = _s;\r\n      }\r\n\r\n      s = Math.round(s * 10000) * 0.0001;\r\n      e = Math.round(e * 10000) * 0.0001;\r\n      this.sValue = s;\r\n      this.eValue = e;\r\n    } else {\r\n      s = this.sValue;\r\n      e = this.eValue;\r\n    }\r\n\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var pathsData;\r\n    var pathData;\r\n    var totalShapeLength;\r\n    var totalModifierLength = 0;\r\n\r\n    if (e === s) {\r\n      for (i = 0; i < len; i += 1) {\r\n        this.shapes[i].localShapeCollection.releaseShapes();\r\n        this.shapes[i].shape._mdf = true;\r\n        this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n\r\n        if (this._mdf) {\r\n          this.shapes[i].pathsData.length = 0;\r\n        }\r\n      }\r\n    } else if (!(e === 1 && s === 0 || e === 0 && s === 1)) {\r\n      var segments = [];\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i]; // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n\r\n        if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n          shapeData.shape.paths = shapeData.localShapeCollection;\r\n        } else {\r\n          shapePaths = shapeData.shape.paths;\r\n          jLen = shapePaths._length;\r\n          totalShapeLength = 0;\r\n\r\n          if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n            totalShapeLength = shapeData.totalShapeLength;\r\n          } else {\r\n            pathsData = this.releasePathsData(shapeData.pathsData);\r\n\r\n            for (j = 0; j < jLen; j += 1) {\r\n              pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n              pathsData.push(pathData);\r\n              totalShapeLength += pathData.totalLength;\r\n            }\r\n\r\n            shapeData.totalShapeLength = totalShapeLength;\r\n            shapeData.pathsData = pathsData;\r\n          }\r\n\r\n          totalModifierLength += totalShapeLength;\r\n          shapeData.shape._mdf = true;\r\n        }\r\n      }\r\n\r\n      var shapeS = s;\r\n      var shapeE = e;\r\n      var addedLength = 0;\r\n      var edges;\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        shapeData = this.shapes[i];\r\n\r\n        if (shapeData.shape._mdf) {\r\n          localShapeCollection = shapeData.localShapeCollection;\r\n          localShapeCollection.releaseShapes(); // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n\r\n          if (this.m === 2 && len > 1) {\r\n            edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n            addedLength += shapeData.totalShapeLength;\r\n          } else {\r\n            edges = [[shapeS, shapeE]];\r\n          }\r\n\r\n          jLen = edges.length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            shapeS = edges[j][0];\r\n            shapeE = edges[j][1];\r\n            segments.length = 0;\r\n\r\n            if (shapeE <= 1) {\r\n              segments.push({\r\n                s: shapeData.totalShapeLength * shapeS,\r\n                e: shapeData.totalShapeLength * shapeE\r\n              });\r\n            } else if (shapeS >= 1) {\r\n              segments.push({\r\n                s: shapeData.totalShapeLength * (shapeS - 1),\r\n                e: shapeData.totalShapeLength * (shapeE - 1)\r\n              });\r\n            } else {\r\n              segments.push({\r\n                s: shapeData.totalShapeLength * shapeS,\r\n                e: shapeData.totalShapeLength\r\n              });\r\n              segments.push({\r\n                s: 0,\r\n                e: shapeData.totalShapeLength * (shapeE - 1)\r\n              });\r\n            }\r\n\r\n            var newShapesData = this.addShapes(shapeData, segments[0]);\r\n\r\n            if (segments[0].s !== segments[0].e) {\r\n              if (segments.length > 1) {\r\n                var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n\r\n                if (lastShapeInCollection.c) {\r\n                  var lastShape = newShapesData.pop();\r\n                  this.addPaths(newShapesData, localShapeCollection);\r\n                  newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n                } else {\r\n                  this.addPaths(newShapesData, localShapeCollection);\r\n                  newShapesData = this.addShapes(shapeData, segments[1]);\r\n                }\r\n              }\r\n\r\n              this.addPaths(newShapesData, localShapeCollection);\r\n            }\r\n          }\r\n\r\n          shapeData.shape.paths = localShapeCollection;\r\n        }\r\n      }\r\n    } else if (this._mdf) {\r\n      for (i = 0; i < len; i += 1) {\r\n        // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n        // Don't remove this even if it's losing cached info.\r\n        this.shapes[i].pathsData.length = 0;\r\n        this.shapes[i].shape._mdf = true;\r\n      }\r\n    }\r\n  };\r\n\r\n  TrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\r\n    var i;\r\n    var len = newPaths.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      localShapeCollection.addShape(newPaths[i]);\r\n    }\r\n  };\r\n\r\n  TrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n\r\n    if (newShape) {\r\n      shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n    }\r\n\r\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n  };\r\n\r\n  TrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n\r\n    if (newShape) {\r\n      shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n    }\r\n\r\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n  };\r\n\r\n  TrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i;\r\n    var len = shapeData.shape.paths._length;\r\n    var j;\r\n    var jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData;\r\n    var segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n\r\n    if (!shapePath) {\r\n      shapePath = shapePool.newElement();\r\n      segmentCount = 0;\r\n      initPos = 0;\r\n    } else {\r\n      segmentCount = shapePath._length;\r\n      initPos = shapePath._length;\r\n    }\r\n\r\n    shapes.push(shapePath);\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      lengths = pathsData[i].lengths;\r\n      shapePath.c = shapePaths[i].c;\r\n      jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n\r\n      for (j = 1; j < jLen; j += 1) {\r\n        currentLengthData = lengths[j - 1];\r\n\r\n        if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n          addedLength += currentLengthData.addedLength;\r\n          shapePath.c = false;\r\n        } else if (addedLength > shapeSegment.e) {\r\n          shapePath.c = false;\r\n          break;\r\n        } else {\r\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n            newShape = false;\r\n          } else {\r\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\r\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n\r\n            newShape = false;\r\n            shapePath.c = false;\r\n          }\r\n\r\n          addedLength += currentLengthData.addedLength;\r\n          segmentCount += 1;\r\n        }\r\n      }\r\n\r\n      if (shapePaths[i].c && lengths.length) {\r\n        currentLengthData = lengths[j - 1];\r\n\r\n        if (addedLength <= shapeSegment.e) {\r\n          var segmentLength = lengths[j - 1].addedLength;\r\n\r\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n            newShape = false;\r\n          } else {\r\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n\r\n            newShape = false;\r\n            shapePath.c = false;\r\n          }\r\n        } else {\r\n          shapePath.c = false;\r\n        }\r\n\r\n        addedLength += currentLengthData.addedLength;\r\n        segmentCount += 1;\r\n      }\r\n\r\n      if (shapePath._length) {\r\n        shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n        shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\r\n      }\r\n\r\n      if (addedLength > shapeSegment.e) {\r\n        break;\r\n      }\r\n\r\n      if (i < len - 1) {\r\n        shapePath = shapePool.newElement();\r\n        newShape = true;\r\n        shapes.push(shapePath);\r\n        segmentCount = 0;\r\n      }\r\n    }\r\n\r\n    return shapes;\r\n  };\r\n\r\n  function PuckerAndBloatModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], PuckerAndBloatModifier);\r\n\r\n  PuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n    this._isAnimated = !!this.amount.effectsSequence.length;\r\n  };\r\n\r\n  PuckerAndBloatModifier.prototype.processPath = function (path, amount) {\r\n    var percent = amount / 100;\r\n    var centerPoint = [0, 0];\r\n    var pathLength = path._length;\r\n    var i = 0;\r\n\r\n    for (i = 0; i < pathLength; i += 1) {\r\n      centerPoint[0] += path.v[i][0];\r\n      centerPoint[1] += path.v[i][1];\r\n    }\r\n\r\n    centerPoint[0] /= pathLength;\r\n    centerPoint[1] /= pathLength;\r\n    var clonedPath = shapePool.newElement();\r\n    clonedPath.c = path.c;\r\n    var vX;\r\n    var vY;\r\n    var oX;\r\n    var oY;\r\n    var iX;\r\n    var iY;\r\n\r\n    for (i = 0; i < pathLength; i += 1) {\r\n      vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\r\n      vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\r\n      oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\r\n      oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\r\n      iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\r\n      iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\r\n      clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\r\n    }\r\n\r\n    return clonedPath;\r\n  };\r\n\r\n  PuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var amount = this.amount.v;\r\n\r\n    if (amount !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  var TransformPropertyFactory = function () {\r\n    var defaultVector = [0, 0];\r\n\r\n    function applyToMatrix(mat) {\r\n      var _mdf = this._mdf;\r\n      this.iterateDynamicProperties();\r\n      this._mdf = this._mdf || _mdf;\r\n\r\n      if (this.a) {\r\n        mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      }\r\n\r\n      if (this.s) {\r\n        mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      }\r\n\r\n      if (this.sk) {\r\n        mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n      }\r\n\r\n      if (this.r) {\r\n        mat.rotate(-this.r.v);\r\n      } else {\r\n        mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n      }\r\n\r\n      if (this.data.p.s) {\r\n        if (this.data.p.z) {\r\n          mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n        } else {\r\n          mat.translate(this.px.v, this.py.v, 0);\r\n        }\r\n      } else {\r\n        mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n      }\r\n    }\r\n\r\n    function processKeys(forceRender) {\r\n      if (this.elem.globalData.frameId === this.frameId) {\r\n        return;\r\n      }\r\n\r\n      if (this._isDirty) {\r\n        this.precalculateMatrix();\r\n        this._isDirty = false;\r\n      }\r\n\r\n      this.iterateDynamicProperties();\r\n\r\n      if (this._mdf || forceRender) {\r\n        var frameRate;\r\n        this.v.cloneFromProps(this.pre.props);\r\n\r\n        if (this.appliedTransformations < 1) {\r\n          this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        }\r\n\r\n        if (this.appliedTransformations < 2) {\r\n          this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        }\r\n\r\n        if (this.sk && this.appliedTransformations < 3) {\r\n          this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n        }\r\n\r\n        if (this.r && this.appliedTransformations < 4) {\r\n          this.v.rotate(-this.r.v);\r\n        } else if (!this.r && this.appliedTransformations < 4) {\r\n          this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        }\r\n\r\n        if (this.autoOriented) {\r\n          var v1;\r\n          var v2;\r\n          frameRate = this.elem.globalData.frameRate;\r\n\r\n          if (this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n            if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\r\n              v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\r\n              v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n            } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n              v1 = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / frameRate, 0);\r\n              v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\r\n            } else {\r\n              v1 = this.p.pv;\r\n              v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n            }\r\n          } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n            v1 = [];\r\n            v2 = [];\r\n            var px = this.px;\r\n            var py = this.py;\r\n\r\n            if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\r\n              v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\r\n              v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\r\n              v2[0] = px.getValueAtTime(px.keyframes[0].t / frameRate, 0);\r\n              v2[1] = py.getValueAtTime(py.keyframes[0].t / frameRate, 0);\r\n            } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n              v1[0] = px.getValueAtTime(px.keyframes[px.keyframes.length - 1].t / frameRate, 0);\r\n              v1[1] = py.getValueAtTime(py.keyframes[py.keyframes.length - 1].t / frameRate, 0);\r\n              v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n              v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n            } else {\r\n              v1 = [px.pv, py.pv];\r\n              v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\r\n              v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\r\n            }\r\n          } else {\r\n            v2 = defaultVector;\r\n            v1 = v2;\r\n          }\r\n\r\n          this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n        }\r\n\r\n        if (this.data.p && this.data.p.s) {\r\n          if (this.data.p.z) {\r\n            this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n          } else {\r\n            this.v.translate(this.px.v, this.py.v, 0);\r\n          }\r\n        } else {\r\n          this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n        }\r\n      }\r\n\r\n      this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function precalculateMatrix() {\r\n      if (!this.a.k) {\r\n        this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        this.appliedTransformations = 1;\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      if (!this.s.effectsSequence.length) {\r\n        this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        this.appliedTransformations = 2;\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      if (this.sk) {\r\n        if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n          this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n          this.appliedTransformations = 3;\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (this.r) {\r\n        if (!this.r.effectsSequence.length) {\r\n          this.pre.rotate(-this.r.v);\r\n          this.appliedTransformations = 4;\r\n        }\r\n      } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n        this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        this.appliedTransformations = 4;\r\n      }\r\n    }\r\n\r\n    function autoOrient() {//\r\n      // var prevP = this.getValueAtTime();\r\n    }\r\n\r\n    function addDynamicProperty(prop) {\r\n      this._addDynamicProperty(prop);\r\n\r\n      this.elem.addDynamicProperty(prop);\r\n      this._isDirty = true;\r\n    }\r\n\r\n    function TransformProperty(elem, data, container) {\r\n      this.elem = elem;\r\n      this.frameId = -1;\r\n      this.propType = 'transform';\r\n      this.data = data;\r\n      this.v = new Matrix(); // Precalculated matrix with non animated properties\r\n\r\n      this.pre = new Matrix();\r\n      this.appliedTransformations = 0;\r\n      this.initDynamicPropertyContainer(container || elem);\r\n\r\n      if (data.p && data.p.s) {\r\n        this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\r\n        this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\r\n\r\n        if (data.p.z) {\r\n          this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\r\n        }\r\n      } else {\r\n        this.p = PropertyFactory.getProp(elem, data.p || {\r\n          k: [0, 0, 0]\r\n        }, 1, 0, this);\r\n      }\r\n\r\n      if (data.rx) {\r\n        this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n        this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n        this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n\r\n        if (data.or.k[0].ti) {\r\n          var i;\r\n          var len = data.or.k.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            data.or.k[i].to = null;\r\n            data.or.k[i].ti = null;\r\n          }\r\n        }\r\n\r\n        this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this); // sh Indicates it needs to be capped between -180 and 180\r\n\r\n        this.or.sh = true;\r\n      } else {\r\n        this.r = PropertyFactory.getProp(elem, data.r || {\r\n          k: 0\r\n        }, 0, degToRads, this);\r\n      }\r\n\r\n      if (data.sk) {\r\n        this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n        this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n      }\r\n\r\n      this.a = PropertyFactory.getProp(elem, data.a || {\r\n        k: [0, 0, 0]\r\n      }, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s || {\r\n        k: [100, 100, 100]\r\n      }, 1, 0.01, this); // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n\r\n      if (data.o) {\r\n        this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\r\n      } else {\r\n        this.o = {\r\n          _mdf: false,\r\n          v: 1\r\n        };\r\n      }\r\n\r\n      this._isDirty = true;\r\n\r\n      if (!this.dynamicProperties.length) {\r\n        this.getValue(true);\r\n      }\r\n    }\r\n\r\n    TransformProperty.prototype = {\r\n      applyToMatrix: applyToMatrix,\r\n      getValue: processKeys,\r\n      precalculateMatrix: precalculateMatrix,\r\n      autoOrient: autoOrient\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n    function getTransformProperty(elem, data, container) {\r\n      return new TransformProperty(elem, data, container);\r\n    }\r\n\r\n    return {\r\n      getTransformProperty: getTransformProperty\r\n    };\r\n  }();\r\n\r\n  function RepeaterModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\n  RepeaterModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\r\n    this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\r\n    this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\r\n    this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\r\n    this.data = data;\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue(true);\r\n    }\r\n\r\n    this._isAnimated = !!this.dynamicProperties.length;\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n  };\r\n\r\n  RepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n  };\r\n\r\n  RepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\r\n    this.elem = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.frameId = -1;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem, arr[pos]);\r\n\r\n    while (pos > 0) {\r\n      pos -= 1; // this._elements.unshift(arr.splice(pos,1)[0]);\r\n\r\n      this._elements.unshift(arr[pos]);\r\n    }\r\n\r\n    if (this.dynamicProperties.length) {\r\n      this.k = true;\r\n    } else {\r\n      this.getValue(true);\r\n    }\r\n  };\r\n\r\n  RepeaterModifier.prototype.resetElements = function (elements) {\r\n    var i;\r\n    var len = elements.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      elements[i]._processed = false;\r\n\r\n      if (elements[i].ty === 'gr') {\r\n        this.resetElements(elements[i].it);\r\n      }\r\n    }\r\n  };\r\n\r\n  RepeaterModifier.prototype.cloneElements = function (elements) {\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n  };\r\n\r\n  RepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\r\n    var i;\r\n    var len = elements.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      elements[i]._render = renderFlag;\r\n\r\n      if (elements[i].ty === 'gr') {\r\n        this.changeGroupRender(elements[i].it, renderFlag);\r\n      }\r\n    }\r\n  };\r\n\r\n  RepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var items;\r\n    var itemsTransform;\r\n    var i;\r\n    var dir;\r\n    var cont;\r\n    var hasReloaded = false;\r\n\r\n    if (this._mdf || _isFirstFrame) {\r\n      var copies = Math.ceil(this.c.v);\r\n\r\n      if (this._groups.length < copies) {\r\n        while (this._groups.length < copies) {\r\n          var group = {\r\n            it: this.cloneElements(this._elements),\r\n            ty: 'gr'\r\n          };\r\n          group.it.push({\r\n            a: {\r\n              a: 0,\r\n              ix: 1,\r\n              k: [0, 0]\r\n            },\r\n            nm: 'Transform',\r\n            o: {\r\n              a: 0,\r\n              ix: 7,\r\n              k: 100\r\n            },\r\n            p: {\r\n              a: 0,\r\n              ix: 2,\r\n              k: [0, 0]\r\n            },\r\n            r: {\r\n              a: 1,\r\n              ix: 6,\r\n              k: [{\r\n                s: 0,\r\n                e: 0,\r\n                t: 0\r\n              }, {\r\n                s: 0,\r\n                e: 0,\r\n                t: 1\r\n              }]\r\n            },\r\n            s: {\r\n              a: 0,\r\n              ix: 3,\r\n              k: [100, 100]\r\n            },\r\n            sa: {\r\n              a: 0,\r\n              ix: 5,\r\n              k: 0\r\n            },\r\n            sk: {\r\n              a: 0,\r\n              ix: 4,\r\n              k: 0\r\n            },\r\n            ty: 'tr'\r\n          });\r\n          this.arr.splice(0, 0, group);\r\n\r\n          this._groups.splice(0, 0, group);\r\n\r\n          this._currentCopies += 1;\r\n        }\r\n\r\n        this.elem.reloadShapes();\r\n        hasReloaded = true;\r\n      }\r\n\r\n      cont = 0;\r\n      var renderFlag;\r\n\r\n      for (i = 0; i <= this._groups.length - 1; i += 1) {\r\n        renderFlag = cont < copies;\r\n        this._groups[i]._render = renderFlag;\r\n        this.changeGroupRender(this._groups[i].it, renderFlag);\r\n\r\n        if (!renderFlag) {\r\n          var elems = this.elemsData[i].it;\r\n          var transformData = elems[elems.length - 1];\r\n\r\n          if (transformData.transform.op.v !== 0) {\r\n            transformData.transform.op._mdf = true;\r\n            transformData.transform.op.v = 0;\r\n          } else {\r\n            transformData.transform.op._mdf = false;\r\n          }\r\n        }\r\n\r\n        cont += 1;\r\n      }\r\n\r\n      this._currentCopies = copies; /// /\r\n\r\n      var offset = this.o.v;\r\n      var offsetModulo = offset % 1;\r\n      var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n      var pProps = this.pMatrix.props;\r\n      var rProps = this.rMatrix.props;\r\n      var sProps = this.sMatrix.props;\r\n      this.pMatrix.reset();\r\n      this.rMatrix.reset();\r\n      this.sMatrix.reset();\r\n      this.tMatrix.reset();\r\n      this.matrix.reset();\r\n      var iteration = 0;\r\n\r\n      if (offset > 0) {\r\n        while (iteration < roundOffset) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n          iteration += 1;\r\n        }\r\n\r\n        if (offsetModulo) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n          iteration += offsetModulo;\r\n        }\r\n      } else if (offset < 0) {\r\n        while (iteration > roundOffset) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n          iteration -= 1;\r\n        }\r\n\r\n        if (offsetModulo) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\r\n          iteration -= offsetModulo;\r\n        }\r\n      }\r\n\r\n      i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n      dir = this.data.m === 1 ? 1 : -1;\r\n      cont = this._currentCopies;\r\n      var j;\r\n      var jLen;\r\n\r\n      while (cont) {\r\n        items = this.elemsData[i].it;\r\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n        jLen = itemsTransform.length;\r\n        items[items.length - 1].transform.mProps._mdf = true;\r\n        items[items.length - 1].transform.op._mdf = true;\r\n        items[items.length - 1].transform.op.v = this._currentCopies === 1 ? this.so.v : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n\r\n        if (iteration !== 0) {\r\n          if (i !== 0 && dir === 1 || i !== this._currentCopies - 1 && dir === -1) {\r\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n          }\r\n\r\n          this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\r\n          this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\r\n          this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsTransform[j] = this.matrix.props[j];\r\n          }\r\n\r\n          this.matrix.reset();\r\n        } else {\r\n          this.matrix.reset();\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsTransform[j] = this.matrix.props[j];\r\n          }\r\n        }\r\n\r\n        iteration += 1;\r\n        cont -= 1;\r\n        i += dir;\r\n      }\r\n    } else {\r\n      cont = this._currentCopies;\r\n      i = 0;\r\n      dir = 1;\r\n\r\n      while (cont) {\r\n        items = this.elemsData[i].it;\r\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n        items[items.length - 1].transform.mProps._mdf = false;\r\n        items[items.length - 1].transform.op._mdf = false;\r\n        cont -= 1;\r\n        i += dir;\r\n      }\r\n    }\r\n\r\n    return hasReloaded;\r\n  };\r\n\r\n  RepeaterModifier.prototype.addShape = function () {};\r\n\r\n  function RoundCornersModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], RoundCornersModifier);\r\n\r\n  RoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n    this._isAnimated = !!this.rd.effectsSequence.length;\r\n  };\r\n\r\n  RoundCornersModifier.prototype.processPath = function (path, round) {\r\n    var clonedPath = shapePool.newElement();\r\n    clonedPath.c = path.c;\r\n    var i;\r\n    var len = path._length;\r\n    var currentV;\r\n    var currentI;\r\n    var currentO;\r\n    var closerV;\r\n    var distance;\r\n    var newPosPerc;\r\n    var index = 0;\r\n    var vX;\r\n    var vY;\r\n    var oX;\r\n    var oY;\r\n    var iX;\r\n    var iY;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      currentV = path.v[i];\r\n      currentO = path.o[i];\r\n      currentI = path.i[i];\r\n\r\n      if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\r\n        if ((i === 0 || i === len - 1) && !path.c) {\r\n          clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\r\n          /* clonedPath.v[index] = currentV;\r\n                  clonedPath.o[index] = currentO;\r\n                  clonedPath.i[index] = currentI; */\r\n\r\n          index += 1;\r\n        } else {\r\n          if (i === 0) {\r\n            closerV = path.v[len - 1];\r\n          } else {\r\n            closerV = path.v[i - 1];\r\n          }\r\n\r\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n          iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n          vX = iX;\r\n          iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\r\n          vY = iY;\r\n          oX = vX - (vX - currentV[0]) * roundCorner;\r\n          oY = vY - (vY - currentV[1]) * roundCorner;\r\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n          index += 1;\r\n\r\n          if (i === len - 1) {\r\n            closerV = path.v[0];\r\n          } else {\r\n            closerV = path.v[i + 1];\r\n          }\r\n\r\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n          oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n          vX = oX;\r\n          oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\r\n          vY = oY;\r\n          iX = vX - (vX - currentV[0]) * roundCorner;\r\n          iY = vY - (vY - currentV[1]) * roundCorner;\r\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n          index += 1;\r\n        }\r\n      } else {\r\n        clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\r\n        index += 1;\r\n      }\r\n    }\r\n\r\n    return clonedPath;\r\n  };\r\n\r\n  RoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if (rd !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  function floatEqual(a, b) {\r\n    return Math.abs(a - b) * 100000 <= Math.min(Math.abs(a), Math.abs(b));\r\n  }\r\n\r\n  function floatZero(f) {\r\n    return Math.abs(f) <= 0.00001;\r\n  }\r\n\r\n  function lerp(p0, p1, amount) {\r\n    return p0 * (1 - amount) + p1 * amount;\r\n  }\r\n\r\n  function lerpPoint(p0, p1, amount) {\r\n    return [lerp(p0[0], p1[0], amount), lerp(p0[1], p1[1], amount)];\r\n  }\r\n\r\n  function quadRoots(a, b, c) {\r\n    // no root\r\n    if (a === 0) return [];\r\n    var s = b * b - 4 * a * c; // Complex roots\r\n\r\n    if (s < 0) return [];\r\n    var singleRoot = -b / (2 * a); // 1 root\r\n\r\n    if (s === 0) return [singleRoot];\r\n    var delta = Math.sqrt(s) / (2 * a); // 2 roots\r\n\r\n    return [singleRoot - delta, singleRoot + delta];\r\n  }\r\n\r\n  function polynomialCoefficients(p0, p1, p2, p3) {\r\n    return [-p0 + 3 * p1 - 3 * p2 + p3, 3 * p0 - 6 * p1 + 3 * p2, -3 * p0 + 3 * p1, p0];\r\n  }\r\n\r\n  function singlePoint(p) {\r\n    return new PolynomialBezier(p, p, p, p, false);\r\n  }\r\n\r\n  function PolynomialBezier(p0, p1, p2, p3, linearize) {\r\n    if (linearize && pointEqual(p0, p1)) {\r\n      p1 = lerpPoint(p0, p3, 1 / 3);\r\n    }\r\n\r\n    if (linearize && pointEqual(p2, p3)) {\r\n      p2 = lerpPoint(p0, p3, 2 / 3);\r\n    }\r\n\r\n    var coeffx = polynomialCoefficients(p0[0], p1[0], p2[0], p3[0]);\r\n    var coeffy = polynomialCoefficients(p0[1], p1[1], p2[1], p3[1]);\r\n    this.a = [coeffx[0], coeffy[0]];\r\n    this.b = [coeffx[1], coeffy[1]];\r\n    this.c = [coeffx[2], coeffy[2]];\r\n    this.d = [coeffx[3], coeffy[3]];\r\n    this.points = [p0, p1, p2, p3];\r\n  }\r\n\r\n  PolynomialBezier.prototype.point = function (t) {\r\n    return [((this.a[0] * t + this.b[0]) * t + this.c[0]) * t + this.d[0], ((this.a[1] * t + this.b[1]) * t + this.c[1]) * t + this.d[1]];\r\n  };\r\n\r\n  PolynomialBezier.prototype.derivative = function (t) {\r\n    return [(3 * t * this.a[0] + 2 * this.b[0]) * t + this.c[0], (3 * t * this.a[1] + 2 * this.b[1]) * t + this.c[1]];\r\n  };\r\n\r\n  PolynomialBezier.prototype.tangentAngle = function (t) {\r\n    var p = this.derivative(t);\r\n    return Math.atan2(p[1], p[0]);\r\n  };\r\n\r\n  PolynomialBezier.prototype.normalAngle = function (t) {\r\n    var p = this.derivative(t);\r\n    return Math.atan2(p[0], p[1]);\r\n  };\r\n\r\n  PolynomialBezier.prototype.inflectionPoints = function () {\r\n    var denom = this.a[1] * this.b[0] - this.a[0] * this.b[1];\r\n    if (floatZero(denom)) return [];\r\n    var tcusp = -0.5 * (this.a[1] * this.c[0] - this.a[0] * this.c[1]) / denom;\r\n    var square = tcusp * tcusp - 1 / 3 * (this.b[1] * this.c[0] - this.b[0] * this.c[1]) / denom;\r\n    if (square < 0) return [];\r\n    var root = Math.sqrt(square);\r\n\r\n    if (floatZero(root)) {\r\n      if (root > 0 && root < 1) return [tcusp];\r\n      return [];\r\n    }\r\n\r\n    return [tcusp - root, tcusp + root].filter(function (r) {\r\n      return r > 0 && r < 1;\r\n    });\r\n  };\r\n\r\n  PolynomialBezier.prototype.split = function (t) {\r\n    if (t <= 0) return [singlePoint(this.points[0]), this];\r\n    if (t >= 1) return [this, singlePoint(this.points[this.points.length - 1])];\r\n    var p10 = lerpPoint(this.points[0], this.points[1], t);\r\n    var p11 = lerpPoint(this.points[1], this.points[2], t);\r\n    var p12 = lerpPoint(this.points[2], this.points[3], t);\r\n    var p20 = lerpPoint(p10, p11, t);\r\n    var p21 = lerpPoint(p11, p12, t);\r\n    var p3 = lerpPoint(p20, p21, t);\r\n    return [new PolynomialBezier(this.points[0], p10, p20, p3, true), new PolynomialBezier(p3, p21, p12, this.points[3], true)];\r\n  };\r\n\r\n  function extrema(bez, comp) {\r\n    var min = bez.points[0][comp];\r\n    var max = bez.points[bez.points.length - 1][comp];\r\n\r\n    if (min > max) {\r\n      var e = max;\r\n      max = min;\r\n      min = e;\r\n    } // Derivative roots to find min/max\r\n\r\n\r\n    var f = quadRoots(3 * bez.a[comp], 2 * bez.b[comp], bez.c[comp]);\r\n\r\n    for (var i = 0; i < f.length; i += 1) {\r\n      if (f[i] > 0 && f[i] < 1) {\r\n        var val = bez.point(f[i])[comp];\r\n        if (val < min) min = val;else if (val > max) max = val;\r\n      }\r\n    }\r\n\r\n    return {\r\n      min: min,\r\n      max: max\r\n    };\r\n  }\r\n\r\n  PolynomialBezier.prototype.bounds = function () {\r\n    return {\r\n      x: extrema(this, 0),\r\n      y: extrema(this, 1)\r\n    };\r\n  };\r\n\r\n  PolynomialBezier.prototype.boundingBox = function () {\r\n    var bounds = this.bounds();\r\n    return {\r\n      left: bounds.x.min,\r\n      right: bounds.x.max,\r\n      top: bounds.y.min,\r\n      bottom: bounds.y.max,\r\n      width: bounds.x.max - bounds.x.min,\r\n      height: bounds.y.max - bounds.y.min,\r\n      cx: (bounds.x.max + bounds.x.min) / 2,\r\n      cy: (bounds.y.max + bounds.y.min) / 2\r\n    };\r\n  };\r\n\r\n  function intersectData(bez, t1, t2) {\r\n    var box = bez.boundingBox();\r\n    return {\r\n      cx: box.cx,\r\n      cy: box.cy,\r\n      width: box.width,\r\n      height: box.height,\r\n      bez: bez,\r\n      t: (t1 + t2) / 2,\r\n      t1: t1,\r\n      t2: t2\r\n    };\r\n  }\r\n\r\n  function splitData(data) {\r\n    var split = data.bez.split(0.5);\r\n    return [intersectData(split[0], data.t1, data.t), intersectData(split[1], data.t, data.t2)];\r\n  }\r\n\r\n  function boxIntersect(b1, b2) {\r\n    return Math.abs(b1.cx - b2.cx) * 2 < b1.width + b2.width && Math.abs(b1.cy - b2.cy) * 2 < b1.height + b2.height;\r\n  }\r\n\r\n  function intersectsImpl(d1, d2, depth, tolerance, intersections, maxRecursion) {\r\n    if (!boxIntersect(d1, d2)) return;\r\n\r\n    if (depth >= maxRecursion || d1.width <= tolerance && d1.height <= tolerance && d2.width <= tolerance && d2.height <= tolerance) {\r\n      intersections.push([d1.t, d2.t]);\r\n      return;\r\n    }\r\n\r\n    var d1s = splitData(d1);\r\n    var d2s = splitData(d2);\r\n    intersectsImpl(d1s[0], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\r\n    intersectsImpl(d1s[0], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\r\n    intersectsImpl(d1s[1], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\r\n    intersectsImpl(d1s[1], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\r\n  }\r\n\r\n  PolynomialBezier.prototype.intersections = function (other, tolerance, maxRecursion) {\r\n    if (tolerance === undefined) tolerance = 2;\r\n    if (maxRecursion === undefined) maxRecursion = 7;\r\n    var intersections = [];\r\n    intersectsImpl(intersectData(this, 0, 1), intersectData(other, 0, 1), 0, tolerance, intersections, maxRecursion);\r\n    return intersections;\r\n  };\r\n\r\n  PolynomialBezier.shapeSegment = function (shapePath, index) {\r\n    var nextIndex = (index + 1) % shapePath.length();\r\n    return new PolynomialBezier(shapePath.v[index], shapePath.o[index], shapePath.i[nextIndex], shapePath.v[nextIndex], true);\r\n  };\r\n\r\n  PolynomialBezier.shapeSegmentInverted = function (shapePath, index) {\r\n    var nextIndex = (index + 1) % shapePath.length();\r\n    return new PolynomialBezier(shapePath.v[nextIndex], shapePath.i[nextIndex], shapePath.o[index], shapePath.v[index], true);\r\n  };\r\n\r\n  function crossProduct(a, b) {\r\n    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\r\n  }\r\n\r\n  function lineIntersection(start1, end1, start2, end2) {\r\n    var v1 = [start1[0], start1[1], 1];\r\n    var v2 = [end1[0], end1[1], 1];\r\n    var v3 = [start2[0], start2[1], 1];\r\n    var v4 = [end2[0], end2[1], 1];\r\n    var r = crossProduct(crossProduct(v1, v2), crossProduct(v3, v4));\r\n    if (floatZero(r[2])) return null;\r\n    return [r[0] / r[2], r[1] / r[2]];\r\n  }\r\n\r\n  function polarOffset(p, angle, length) {\r\n    return [p[0] + Math.cos(angle) * length, p[1] - Math.sin(angle) * length];\r\n  }\r\n\r\n  function pointDistance(p1, p2) {\r\n    return Math.hypot(p1[0] - p2[0], p1[1] - p2[1]);\r\n  }\r\n\r\n  function pointEqual(p1, p2) {\r\n    return floatEqual(p1[0], p2[0]) && floatEqual(p1[1], p2[1]);\r\n  }\r\n\r\n  function ZigZagModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], ZigZagModifier);\r\n\r\n  ZigZagModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.amplitude = PropertyFactory.getProp(elem, data.s, 0, null, this);\r\n    this.frequency = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n    this.pointsType = PropertyFactory.getProp(elem, data.pt, 0, null, this);\r\n    this._isAnimated = this.amplitude.effectsSequence.length !== 0 || this.frequency.effectsSequence.length !== 0 || this.pointsType.effectsSequence.length !== 0;\r\n  };\r\n\r\n  function setPoint(outputBezier, point, angle, direction, amplitude, outAmplitude, inAmplitude) {\r\n    var angO = angle - Math.PI / 2;\r\n    var angI = angle + Math.PI / 2;\r\n    var px = point[0] + Math.cos(angle) * direction * amplitude;\r\n    var py = point[1] - Math.sin(angle) * direction * amplitude;\r\n    outputBezier.setTripleAt(px, py, px + Math.cos(angO) * outAmplitude, py - Math.sin(angO) * outAmplitude, px + Math.cos(angI) * inAmplitude, py - Math.sin(angI) * inAmplitude, outputBezier.length());\r\n  }\r\n\r\n  function getPerpendicularVector(pt1, pt2) {\r\n    var vector = [pt2[0] - pt1[0], pt2[1] - pt1[1]];\r\n    var rot = -Math.PI * 0.5;\r\n    var rotatedVector = [Math.cos(rot) * vector[0] - Math.sin(rot) * vector[1], Math.sin(rot) * vector[0] + Math.cos(rot) * vector[1]];\r\n    return rotatedVector;\r\n  }\r\n\r\n  function getProjectingAngle(path, cur) {\r\n    var prevIndex = cur === 0 ? path.length() - 1 : cur - 1;\r\n    var nextIndex = (cur + 1) % path.length();\r\n    var prevPoint = path.v[prevIndex];\r\n    var nextPoint = path.v[nextIndex];\r\n    var pVector = getPerpendicularVector(prevPoint, nextPoint);\r\n    return Math.atan2(0, 1) - Math.atan2(pVector[1], pVector[0]);\r\n  }\r\n\r\n  function zigZagCorner(outputBezier, path, cur, amplitude, frequency, pointType, direction) {\r\n    var angle = getProjectingAngle(path, cur);\r\n    var point = path.v[cur % path._length];\r\n    var prevPoint = path.v[cur === 0 ? path._length - 1 : cur - 1];\r\n    var nextPoint = path.v[(cur + 1) % path._length];\r\n    var prevDist = pointType === 2 ? Math.sqrt(Math.pow(point[0] - prevPoint[0], 2) + Math.pow(point[1] - prevPoint[1], 2)) : 0;\r\n    var nextDist = pointType === 2 ? Math.sqrt(Math.pow(point[0] - nextPoint[0], 2) + Math.pow(point[1] - nextPoint[1], 2)) : 0;\r\n    setPoint(outputBezier, path.v[cur % path._length], angle, direction, amplitude, nextDist / ((frequency + 1) * 2), prevDist / ((frequency + 1) * 2), pointType);\r\n  }\r\n\r\n  function zigZagSegment(outputBezier, segment, amplitude, frequency, pointType, direction) {\r\n    for (var i = 0; i < frequency; i += 1) {\r\n      var t = (i + 1) / (frequency + 1);\r\n      var dist = pointType === 2 ? Math.sqrt(Math.pow(segment.points[3][0] - segment.points[0][0], 2) + Math.pow(segment.points[3][1] - segment.points[0][1], 2)) : 0;\r\n      var angle = segment.normalAngle(t);\r\n      var point = segment.point(t);\r\n      setPoint(outputBezier, point, angle, direction, amplitude, dist / ((frequency + 1) * 2), dist / ((frequency + 1) * 2), pointType);\r\n      direction = -direction;\r\n    }\r\n\r\n    return direction;\r\n  }\r\n\r\n  ZigZagModifier.prototype.processPath = function (path, amplitude, frequency, pointType) {\r\n    var count = path._length;\r\n    var clonedPath = shapePool.newElement();\r\n    clonedPath.c = path.c;\r\n\r\n    if (!path.c) {\r\n      count -= 1;\r\n    }\r\n\r\n    if (count === 0) return clonedPath;\r\n    var direction = -1;\r\n    var segment = PolynomialBezier.shapeSegment(path, 0);\r\n    zigZagCorner(clonedPath, path, 0, amplitude, frequency, pointType, direction);\r\n\r\n    for (var i = 0; i < count; i += 1) {\r\n      direction = zigZagSegment(clonedPath, segment, amplitude, frequency, pointType, -direction);\r\n\r\n      if (i === count - 1 && !path.c) {\r\n        segment = null;\r\n      } else {\r\n        segment = PolynomialBezier.shapeSegment(path, (i + 1) % count);\r\n      }\r\n\r\n      zigZagCorner(clonedPath, path, i + 1, amplitude, frequency, pointType, direction);\r\n    }\r\n\r\n    return clonedPath;\r\n  };\r\n\r\n  ZigZagModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var amplitude = this.amplitude.v;\r\n    var frequency = Math.max(0, Math.round(this.frequency.v));\r\n    var pointType = this.pointsType.v;\r\n\r\n    if (amplitude !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amplitude, frequency, pointType));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  function linearOffset(p1, p2, amount) {\r\n    var angle = Math.atan2(p2[0] - p1[0], p2[1] - p1[1]);\r\n    return [polarOffset(p1, angle, amount), polarOffset(p2, angle, amount)];\r\n  }\r\n\r\n  function offsetSegment(segment, amount) {\r\n    var p0;\r\n    var p1a;\r\n    var p1b;\r\n    var p2b;\r\n    var p2a;\r\n    var p3;\r\n    var e;\r\n    e = linearOffset(segment.points[0], segment.points[1], amount);\r\n    p0 = e[0];\r\n    p1a = e[1];\r\n    e = linearOffset(segment.points[1], segment.points[2], amount);\r\n    p1b = e[0];\r\n    p2b = e[1];\r\n    e = linearOffset(segment.points[2], segment.points[3], amount);\r\n    p2a = e[0];\r\n    p3 = e[1];\r\n    var p1 = lineIntersection(p0, p1a, p1b, p2b);\r\n    if (p1 === null) p1 = p1a;\r\n    var p2 = lineIntersection(p2a, p3, p1b, p2b);\r\n    if (p2 === null) p2 = p2a;\r\n    return new PolynomialBezier(p0, p1, p2, p3);\r\n  }\r\n\r\n  function joinLines(outputBezier, seg1, seg2, lineJoin, miterLimit) {\r\n    var p0 = seg1.points[3];\r\n    var p1 = seg2.points[0]; // Bevel\r\n\r\n    if (lineJoin === 3) return p0; // Connected, they don't need a joint\r\n\r\n    if (pointEqual(p0, p1)) return p0; // Round\r\n\r\n    if (lineJoin === 2) {\r\n      var angleOut = -seg1.tangentAngle(1);\r\n      var angleIn = -seg2.tangentAngle(0) + Math.PI;\r\n      var center = lineIntersection(p0, polarOffset(p0, angleOut + Math.PI / 2, 100), p1, polarOffset(p1, angleOut + Math.PI / 2, 100));\r\n      var radius = center ? pointDistance(center, p0) : pointDistance(p0, p1) / 2;\r\n      var tan = polarOffset(p0, angleOut, 2 * radius * roundCorner);\r\n      outputBezier.setXYAt(tan[0], tan[1], 'o', outputBezier.length() - 1);\r\n      tan = polarOffset(p1, angleIn, 2 * radius * roundCorner);\r\n      outputBezier.setTripleAt(p1[0], p1[1], p1[0], p1[1], tan[0], tan[1], outputBezier.length());\r\n      return p1;\r\n    } // Miter\r\n\r\n\r\n    var t0 = pointEqual(p0, seg1.points[2]) ? seg1.points[0] : seg1.points[2];\r\n    var t1 = pointEqual(p1, seg2.points[1]) ? seg2.points[3] : seg2.points[1];\r\n    var intersection = lineIntersection(t0, p0, p1, t1);\r\n\r\n    if (intersection && pointDistance(intersection, p0) < miterLimit) {\r\n      outputBezier.setTripleAt(intersection[0], intersection[1], intersection[0], intersection[1], intersection[0], intersection[1], outputBezier.length());\r\n      return intersection;\r\n    }\r\n\r\n    return p0;\r\n  }\r\n\r\n  function getIntersection(a, b) {\r\n    var intersect = a.intersections(b);\r\n    if (intersect.length && floatEqual(intersect[0][0], 1)) intersect.shift();\r\n    if (intersect.length) return intersect[0];\r\n    return null;\r\n  }\r\n\r\n  function pruneSegmentIntersection(a, b) {\r\n    var outa = a.slice();\r\n    var outb = b.slice();\r\n    var intersect = getIntersection(a[a.length - 1], b[0]);\r\n\r\n    if (intersect) {\r\n      outa[a.length - 1] = a[a.length - 1].split(intersect[0])[0];\r\n      outb[0] = b[0].split(intersect[1])[1];\r\n    }\r\n\r\n    if (a.length > 1 && b.length > 1) {\r\n      intersect = getIntersection(a[0], b[b.length - 1]);\r\n\r\n      if (intersect) {\r\n        return [[a[0].split(intersect[0])[0]], [b[b.length - 1].split(intersect[1])[1]]];\r\n      }\r\n    }\r\n\r\n    return [outa, outb];\r\n  }\r\n\r\n  function pruneIntersections(segments) {\r\n    var e;\r\n\r\n    for (var i = 1; i < segments.length; i += 1) {\r\n      e = pruneSegmentIntersection(segments[i - 1], segments[i]);\r\n      segments[i - 1] = e[0];\r\n      segments[i] = e[1];\r\n    }\r\n\r\n    if (segments.length > 1) {\r\n      e = pruneSegmentIntersection(segments[segments.length - 1], segments[0]);\r\n      segments[segments.length - 1] = e[0];\r\n      segments[0] = e[1];\r\n    }\r\n\r\n    return segments;\r\n  }\r\n\r\n  function offsetSegmentSplit(segment, amount) {\r\n    /*\r\n      We split each bezier segment into smaller pieces based\r\n      on inflection points, this ensures the control point\r\n      polygon is convex.\r\n        (A cubic bezier can have none, one, or two inflection points)\r\n    */\r\n    var flex = segment.inflectionPoints();\r\n    var left;\r\n    var right;\r\n    var split;\r\n    var mid;\r\n\r\n    if (flex.length === 0) {\r\n      return [offsetSegment(segment, amount)];\r\n    }\r\n\r\n    if (flex.length === 1 || floatEqual(flex[1], 1)) {\r\n      split = segment.split(flex[0]);\r\n      left = split[0];\r\n      right = split[1];\r\n      return [offsetSegment(left, amount), offsetSegment(right, amount)];\r\n    }\r\n\r\n    split = segment.split(flex[0]);\r\n    left = split[0];\r\n    var t = (flex[1] - flex[0]) / (1 - flex[0]);\r\n    split = split[1].split(t);\r\n    mid = split[0];\r\n    right = split[1];\r\n    return [offsetSegment(left, amount), offsetSegment(mid, amount), offsetSegment(right, amount)];\r\n  }\r\n\r\n  function OffsetPathModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], OffsetPathModifier);\r\n\r\n  OffsetPathModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n    this.miterLimit = PropertyFactory.getProp(elem, data.ml, 0, null, this);\r\n    this.lineJoin = data.lj;\r\n    this._isAnimated = this.amount.effectsSequence.length !== 0;\r\n  };\r\n\r\n  OffsetPathModifier.prototype.processPath = function (inputBezier, amount, lineJoin, miterLimit) {\r\n    var outputBezier = shapePool.newElement();\r\n    outputBezier.c = inputBezier.c;\r\n    var count = inputBezier.length();\r\n\r\n    if (!inputBezier.c) {\r\n      count -= 1;\r\n    }\r\n\r\n    var i;\r\n    var j;\r\n    var segment;\r\n    var multiSegments = [];\r\n\r\n    for (i = 0; i < count; i += 1) {\r\n      segment = PolynomialBezier.shapeSegment(inputBezier, i);\r\n      multiSegments.push(offsetSegmentSplit(segment, amount));\r\n    }\r\n\r\n    if (!inputBezier.c) {\r\n      for (i = count - 1; i >= 0; i -= 1) {\r\n        segment = PolynomialBezier.shapeSegmentInverted(inputBezier, i);\r\n        multiSegments.push(offsetSegmentSplit(segment, amount));\r\n      }\r\n    }\r\n\r\n    multiSegments = pruneIntersections(multiSegments); // Add bezier segments to the output and apply line joints\r\n\r\n    var lastPoint = null;\r\n    var lastSeg = null;\r\n\r\n    for (i = 0; i < multiSegments.length; i += 1) {\r\n      var multiSegment = multiSegments[i];\r\n      if (lastSeg) lastPoint = joinLines(outputBezier, lastSeg, multiSegment[0], lineJoin, miterLimit);\r\n      lastSeg = multiSegment[multiSegment.length - 1];\r\n\r\n      for (j = 0; j < multiSegment.length; j += 1) {\r\n        segment = multiSegment[j];\r\n\r\n        if (lastPoint && pointEqual(segment.points[0], lastPoint)) {\r\n          outputBezier.setXYAt(segment.points[1][0], segment.points[1][1], 'o', outputBezier.length() - 1);\r\n        } else {\r\n          outputBezier.setTripleAt(segment.points[0][0], segment.points[0][1], segment.points[1][0], segment.points[1][1], segment.points[0][0], segment.points[0][1], outputBezier.length());\r\n        }\r\n\r\n        outputBezier.setTripleAt(segment.points[3][0], segment.points[3][1], segment.points[3][0], segment.points[3][1], segment.points[2][0], segment.points[2][1], outputBezier.length());\r\n        lastPoint = segment.points[3];\r\n      }\r\n    }\r\n\r\n    if (multiSegments.length) joinLines(outputBezier, lastSeg, multiSegments[0][0], lineJoin, miterLimit);\r\n    return outputBezier;\r\n  };\r\n\r\n  OffsetPathModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var amount = this.amount.v;\r\n    var miterLimit = this.miterLimit.v;\r\n    var lineJoin = this.lineJoin;\r\n\r\n    if (amount !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount, lineJoin, miterLimit));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  function getFontProperties(fontData) {\r\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n    var fWeight = 'normal';\r\n    var fStyle = 'normal';\r\n    var len = styles.length;\r\n    var styleName;\r\n\r\n    for (var i = 0; i < len; i += 1) {\r\n      styleName = styles[i].toLowerCase();\r\n\r\n      switch (styleName) {\r\n        case 'italic':\r\n          fStyle = 'italic';\r\n          break;\r\n\r\n        case 'bold':\r\n          fWeight = '700';\r\n          break;\r\n\r\n        case 'black':\r\n          fWeight = '900';\r\n          break;\r\n\r\n        case 'medium':\r\n          fWeight = '500';\r\n          break;\r\n\r\n        case 'regular':\r\n        case 'normal':\r\n          fWeight = '400';\r\n          break;\r\n\r\n        case 'light':\r\n        case 'thin':\r\n          fWeight = '200';\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    return {\r\n      style: fStyle,\r\n      weight: fontData.fWeight || fWeight\r\n    };\r\n  }\r\n\r\n  var FontManager = function () {\r\n    var maxWaitingTime = 5000;\r\n    var emptyChar = {\r\n      w: 0,\r\n      size: 0,\r\n      shapes: [],\r\n      data: {\r\n        shapes: []\r\n      }\r\n    };\r\n    var combinedCharacters = []; // Hindi characters\r\n\r\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n    var surrogateModifiers = ['d83cdffb', 'd83cdffc', 'd83cdffd', 'd83cdffe', 'd83cdfff'];\r\n    var zeroWidthJoiner = [65039, 8205];\r\n\r\n    function trimFontOptions(font) {\r\n      var familyArray = font.split(',');\r\n      var i;\r\n      var len = familyArray.length;\r\n      var enabledFamilies = [];\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\r\n          enabledFamilies.push(familyArray[i]);\r\n        }\r\n      }\r\n\r\n      return enabledFamilies.join(',');\r\n    }\r\n\r\n    function setUpNode(font, family) {\r\n      var parentNode = createTag('span'); // Node is invisible to screen readers.\r\n\r\n      parentNode.setAttribute('aria-hidden', true);\r\n      parentNode.style.fontFamily = family;\r\n      var node = createTag('span'); // Characters that vary significantly among different fonts\r\n\r\n      node.innerText = 'giItT1WQy@!-/#'; // Visible - so we can measure it - but not on the screen\r\n\r\n      parentNode.style.position = 'absolute';\r\n      parentNode.style.left = '-10000px';\r\n      parentNode.style.top = '-10000px'; // Large font size makes even subtle changes obvious\r\n\r\n      parentNode.style.fontSize = '300px'; // Reset any font properties\r\n\r\n      parentNode.style.fontVariant = 'normal';\r\n      parentNode.style.fontStyle = 'normal';\r\n      parentNode.style.fontWeight = 'normal';\r\n      parentNode.style.letterSpacing = '0';\r\n      parentNode.appendChild(node);\r\n      document.body.appendChild(parentNode); // Remember width with no applied web font\r\n\r\n      var width = node.offsetWidth;\r\n      node.style.fontFamily = trimFontOptions(font) + ', ' + family;\r\n      return {\r\n        node: node,\r\n        w: width,\r\n        parent: parentNode\r\n      };\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n      var i;\r\n      var len = this.fonts.length;\r\n      var node;\r\n      var w;\r\n      var loadedCount = len;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.fonts[i].loaded) {\r\n          loadedCount -= 1;\r\n        } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\r\n          this.fonts[i].loaded = true;\r\n        } else {\r\n          node = this.fonts[i].monoCase.node;\r\n          w = this.fonts[i].monoCase.w;\r\n\r\n          if (node.offsetWidth !== w) {\r\n            loadedCount -= 1;\r\n            this.fonts[i].loaded = true;\r\n          } else {\r\n            node = this.fonts[i].sansCase.node;\r\n            w = this.fonts[i].sansCase.w;\r\n\r\n            if (node.offsetWidth !== w) {\r\n              loadedCount -= 1;\r\n              this.fonts[i].loaded = true;\r\n            }\r\n          }\r\n\r\n          if (this.fonts[i].loaded) {\r\n            this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n            this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\r\n        setTimeout(this.checkLoadedFontsBinded, 20);\r\n      } else {\r\n        setTimeout(this.setIsLoadedBinded, 10);\r\n      }\r\n    }\r\n\r\n    function createHelper(fontData, def) {\r\n      var engine = document.body && def ? 'svg' : 'canvas';\r\n      var helper;\r\n      var fontProps = getFontProperties(fontData);\r\n\r\n      if (engine === 'svg') {\r\n        var tHelper = createNS('text');\r\n        tHelper.style.fontSize = '100px'; // tHelper.style.fontFamily = fontData.fFamily;\r\n\r\n        tHelper.setAttribute('font-family', fontData.fFamily);\r\n        tHelper.setAttribute('font-style', fontProps.style);\r\n        tHelper.setAttribute('font-weight', fontProps.weight);\r\n        tHelper.textContent = '1';\r\n\r\n        if (fontData.fClass) {\r\n          tHelper.style.fontFamily = 'inherit';\r\n          tHelper.setAttribute('class', fontData.fClass);\r\n        } else {\r\n          tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n\r\n        def.appendChild(tHelper);\r\n        helper = tHelper;\r\n      } else {\r\n        var tCanvasHelper = new OffscreenCanvas(500, 500).getContext('2d');\r\n        tCanvasHelper.font = fontProps.style + ' ' + fontProps.weight + ' 100px ' + fontData.fFamily;\r\n        helper = tCanvasHelper;\r\n      }\r\n\r\n      function measure(text) {\r\n        if (engine === 'svg') {\r\n          helper.textContent = text;\r\n          return helper.getComputedTextLength();\r\n        }\r\n\r\n        return helper.measureText(text).width;\r\n      }\r\n\r\n      return {\r\n        measureText: measure\r\n      };\r\n    }\r\n\r\n    function addFonts(fontData, defs) {\r\n      if (!fontData) {\r\n        this.isLoaded = true;\r\n        return;\r\n      }\r\n\r\n      if (this.chars) {\r\n        this.isLoaded = true;\r\n        this.fonts = fontData.list;\r\n        return;\r\n      }\r\n\r\n      if (!document.body) {\r\n        this.isLoaded = true;\r\n        fontData.list.forEach(function (data) {\r\n          data.helper = createHelper(data);\r\n          data.cache = {};\r\n        });\r\n        this.fonts = fontData.list;\r\n        return;\r\n      }\r\n\r\n      var fontArr = fontData.list;\r\n      var i;\r\n      var len = fontArr.length;\r\n      var _pendingFonts = len;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        var shouldLoadFont = true;\r\n        var loadedSelector;\r\n        var j;\r\n        fontArr[i].loaded = false;\r\n        fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\r\n        fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\r\n\r\n        if (!fontArr[i].fPath) {\r\n          fontArr[i].loaded = true;\r\n          _pendingFonts -= 1;\r\n        } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\r\n          loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\r\n\r\n          if (loadedSelector.length > 0) {\r\n            shouldLoadFont = false;\r\n          }\r\n\r\n          if (shouldLoadFont) {\r\n            var s = createTag('style');\r\n            s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n            s.setAttribute('f-origin', fontArr[i].origin);\r\n            s.setAttribute('f-family', fontArr[i].fFamily);\r\n            s.type = 'text/css';\r\n            s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\r\n            defs.appendChild(s);\r\n          }\r\n        } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\r\n          loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n          for (j = 0; j < loadedSelector.length; j += 1) {\r\n            if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n              // Font is already loaded\r\n              shouldLoadFont = false;\r\n            }\r\n          }\r\n\r\n          if (shouldLoadFont) {\r\n            var l = createTag('link');\r\n            l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n            l.setAttribute('f-origin', fontArr[i].origin);\r\n            l.type = 'text/css';\r\n            l.rel = 'stylesheet';\r\n            l.href = fontArr[i].fPath;\r\n            document.body.appendChild(l);\r\n          }\r\n        } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\r\n          loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n          for (j = 0; j < loadedSelector.length; j += 1) {\r\n            if (fontArr[i].fPath === loadedSelector[j].src) {\r\n              // Font is already loaded\r\n              shouldLoadFont = false;\r\n            }\r\n          }\r\n\r\n          if (shouldLoadFont) {\r\n            var sc = createTag('link');\r\n            sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n            sc.setAttribute('f-origin', fontArr[i].origin);\r\n            sc.setAttribute('rel', 'stylesheet');\r\n            sc.setAttribute('href', fontArr[i].fPath);\r\n            defs.appendChild(sc);\r\n          }\r\n        }\r\n\r\n        fontArr[i].helper = createHelper(fontArr[i], defs);\r\n        fontArr[i].cache = {};\r\n        this.fonts.push(fontArr[i]);\r\n      }\r\n\r\n      if (_pendingFonts === 0) {\r\n        this.isLoaded = true;\r\n      } else {\r\n        // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n        // Adding this timeout seems to fix it\r\n        setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n      }\r\n    }\r\n\r\n    function addChars(chars) {\r\n      if (!chars) {\r\n        return;\r\n      }\r\n\r\n      if (!this.chars) {\r\n        this.chars = [];\r\n      }\r\n\r\n      var i;\r\n      var len = chars.length;\r\n      var j;\r\n      var jLen = this.chars.length;\r\n      var found;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        j = 0;\r\n        found = false;\r\n\r\n        while (j < jLen) {\r\n          if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\r\n            found = true;\r\n          }\r\n\r\n          j += 1;\r\n        }\r\n\r\n        if (!found) {\r\n          this.chars.push(chars[i]);\r\n          jLen += 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    function getCharData(_char, style, font) {\r\n      var i = 0;\r\n      var len = this.chars.length;\r\n\r\n      while (i < len) {\r\n        if (this.chars[i].ch === _char && this.chars[i].style === style && this.chars[i].fFamily === font) {\r\n          return this.chars[i];\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      if ((typeof _char === 'string' && _char.charCodeAt(0) !== 13 || !_char) && console && console.warn // eslint-disable-line no-console\r\n      && !this._warned) {\r\n        this._warned = true;\r\n        console.warn('Missing character from exported characters list: ', _char, style, font); // eslint-disable-line no-console\r\n      }\r\n\r\n      return emptyChar;\r\n    }\r\n\r\n    function measureText(_char2, fontName, size) {\r\n      var fontData = this.getFontByName(fontName);\r\n\r\n      var index = _char2.charCodeAt(0);\r\n\r\n      if (!fontData.cache[index + 1]) {\r\n        var tHelper = fontData.helper;\r\n\r\n        if (_char2 === ' ') {\r\n          var doubleSize = tHelper.measureText('|' + _char2 + '|');\r\n          var singleSize = tHelper.measureText('||');\r\n          fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\r\n        } else {\r\n          fontData.cache[index + 1] = tHelper.measureText(_char2) / 100;\r\n        }\r\n      }\r\n\r\n      return fontData.cache[index + 1] * size;\r\n    }\r\n\r\n    function getFontByName(name) {\r\n      var i = 0;\r\n      var len = this.fonts.length;\r\n\r\n      while (i < len) {\r\n        if (this.fonts[i].fName === name) {\r\n          return this.fonts[i];\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return this.fonts[0];\r\n    }\r\n\r\n    function isModifier(firstCharCode, secondCharCode) {\r\n      var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\r\n      return surrogateModifiers.indexOf(sum) !== -1;\r\n    }\r\n\r\n    function isZeroWidthJoiner(firstCharCode, secondCharCode) {\r\n      if (!secondCharCode) {\r\n        return firstCharCode === zeroWidthJoiner[1];\r\n      }\r\n\r\n      return firstCharCode === zeroWidthJoiner[0] && secondCharCode === zeroWidthJoiner[1];\r\n    }\r\n\r\n    function isCombinedCharacter(_char3) {\r\n      return combinedCharacters.indexOf(_char3) !== -1;\r\n    }\r\n\r\n    function setIsLoaded() {\r\n      this.isLoaded = true;\r\n    }\r\n\r\n    var Font = function Font() {\r\n      this.fonts = [];\r\n      this.chars = null;\r\n      this.typekitLoaded = 0;\r\n      this.isLoaded = false;\r\n      this._warned = false;\r\n      this.initTime = Date.now();\r\n      this.setIsLoadedBinded = this.setIsLoaded.bind(this);\r\n      this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\r\n    };\r\n\r\n    Font.isModifier = isModifier;\r\n    Font.isZeroWidthJoiner = isZeroWidthJoiner;\r\n    Font.isCombinedCharacter = isCombinedCharacter;\r\n    var fontPrototype = {\r\n      addChars: addChars,\r\n      addFonts: addFonts,\r\n      getCharData: getCharData,\r\n      getFontByName: getFontByName,\r\n      measureText: measureText,\r\n      checkLoadedFonts: checkLoadedFonts,\r\n      setIsLoaded: setIsLoaded\r\n    };\r\n    Font.prototype = fontPrototype;\r\n    return Font;\r\n  }();\r\n\r\n  function RenderableElement() {}\r\n\r\n  RenderableElement.prototype = {\r\n    initRenderable: function initRenderable() {\r\n      // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n      this.isInRange = false; // layer's display state\r\n\r\n      this.hidden = false; // If layer's transparency equals 0, it can be hidden\r\n\r\n      this.isTransparent = false; // list of animated components\r\n\r\n      this.renderableComponents = [];\r\n    },\r\n    addRenderableComponent: function addRenderableComponent(component) {\r\n      if (this.renderableComponents.indexOf(component) === -1) {\r\n        this.renderableComponents.push(component);\r\n      }\r\n    },\r\n    removeRenderableComponent: function removeRenderableComponent(component) {\r\n      if (this.renderableComponents.indexOf(component) !== -1) {\r\n        this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n      }\r\n    },\r\n    prepareRenderableFrame: function prepareRenderableFrame(num) {\r\n      this.checkLayerLimits(num);\r\n    },\r\n    checkTransparency: function checkTransparency() {\r\n      if (this.finalTransform.mProp.o.v <= 0) {\r\n        if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\r\n          this.isTransparent = true;\r\n          this.hide();\r\n        }\r\n      } else if (this.isTransparent) {\r\n        this.isTransparent = false;\r\n        this.show();\r\n      }\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Initializes frame related properties.\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       *\r\n       */\r\n    checkLayerLimits: function checkLayerLimits(num) {\r\n      if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\r\n        if (this.isInRange !== true) {\r\n          this.globalData._mdf = true;\r\n          this._mdf = true;\r\n          this.isInRange = true;\r\n          this.show();\r\n        }\r\n      } else if (this.isInRange !== false) {\r\n        this.globalData._mdf = true;\r\n        this.isInRange = false;\r\n        this.hide();\r\n      }\r\n    },\r\n    renderRenderable: function renderRenderable() {\r\n      var i;\r\n      var len = this.renderableComponents.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n      }\r\n      /* this.maskManager.renderFrame(this.finalTransform.mat);\r\n          this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\r\n\r\n    },\r\n    sourceRectAtTime: function sourceRectAtTime() {\r\n      return {\r\n        top: 0,\r\n        left: 0,\r\n        width: 100,\r\n        height: 100\r\n      };\r\n    },\r\n    getLayerSize: function getLayerSize() {\r\n      if (this.data.ty === 5) {\r\n        return {\r\n          w: this.data.textData.width,\r\n          h: this.data.textData.height\r\n        };\r\n      }\r\n\r\n      return {\r\n        w: this.data.width,\r\n        h: this.data.height\r\n      };\r\n    }\r\n  };\r\n\r\n  var getBlendMode = function () {\r\n    var blendModeEnums = {\r\n      0: 'source-over',\r\n      1: 'multiply',\r\n      2: 'screen',\r\n      3: 'overlay',\r\n      4: 'darken',\r\n      5: 'lighten',\r\n      6: 'color-dodge',\r\n      7: 'color-burn',\r\n      8: 'hard-light',\r\n      9: 'soft-light',\r\n      10: 'difference',\r\n      11: 'exclusion',\r\n      12: 'hue',\r\n      13: 'saturation',\r\n      14: 'color',\r\n      15: 'luminosity'\r\n    };\r\n    return function (mode) {\r\n      return blendModeEnums[mode] || '';\r\n    };\r\n  }();\r\n\r\n  function SliderEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function AngleEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function ColorEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n  }\r\n\r\n  function PointEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n  }\r\n\r\n  function LayerIndexEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function MaskIndexEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function CheckboxEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function NoValueEffect() {\r\n    this.p = {};\r\n  }\r\n\r\n  function EffectsManager(data, element) {\r\n    var effects = data.ef || [];\r\n    this.effectElements = [];\r\n    var i;\r\n    var len = effects.length;\r\n    var effectItem;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      effectItem = new GroupEffect(effects[i], element);\r\n      this.effectElements.push(effectItem);\r\n    }\r\n  }\r\n\r\n  function GroupEffect(data, element) {\r\n    this.init(data, element);\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], GroupEffect);\r\n  GroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\n  GroupEffect.prototype.init = function (data, element) {\r\n    this.data = data;\r\n    this.effectElements = [];\r\n    this.initDynamicPropertyContainer(element);\r\n    var i;\r\n    var len = this.data.ef.length;\r\n    var eff;\r\n    var effects = this.data.ef;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      eff = null;\r\n\r\n      switch (effects[i].ty) {\r\n        case 0:\r\n          eff = new SliderEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 1:\r\n          eff = new AngleEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 2:\r\n          eff = new ColorEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 3:\r\n          eff = new PointEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 4:\r\n        case 7:\r\n          eff = new CheckboxEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 10:\r\n          eff = new LayerIndexEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 11:\r\n          eff = new MaskIndexEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 5:\r\n          eff = new EffectsManager(effects[i], element, this);\r\n          break;\r\n        // case 6:\r\n\r\n        default:\r\n          eff = new NoValueEffect(effects[i], element, this);\r\n          break;\r\n      }\r\n\r\n      if (eff) {\r\n        this.effectElements.push(eff);\r\n      }\r\n    }\r\n  };\r\n\r\n  function BaseElement() {}\r\n\r\n  BaseElement.prototype = {\r\n    checkMasks: function checkMasks() {\r\n      if (!this.data.hasMask) {\r\n        return false;\r\n      }\r\n\r\n      var i = 0;\r\n      var len = this.data.masksProperties.length;\r\n\r\n      while (i < len) {\r\n        if (this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false) {\r\n          return true;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return false;\r\n    },\r\n    initExpressions: function initExpressions() {\r\n      var expressionsInterfaces = getExpressionInterfaces();\r\n\r\n      if (!expressionsInterfaces) {\r\n        return;\r\n      }\r\n\r\n      var LayerExpressionInterface = expressionsInterfaces('layer');\r\n      var EffectsExpressionInterface = expressionsInterfaces('effects');\r\n      var ShapeExpressionInterface = expressionsInterfaces('shape');\r\n      var TextExpressionInterface = expressionsInterfaces('text');\r\n      var CompExpressionInterface = expressionsInterfaces('comp');\r\n      this.layerInterface = LayerExpressionInterface(this);\r\n\r\n      if (this.data.hasMask && this.maskManager) {\r\n        this.layerInterface.registerMaskInterface(this.maskManager);\r\n      }\r\n\r\n      var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\r\n      this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n      if (this.data.ty === 0 || this.data.xt) {\r\n        this.compInterface = CompExpressionInterface(this);\r\n      } else if (this.data.ty === 4) {\r\n        this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\r\n        this.layerInterface.content = this.layerInterface.shapeInterface;\r\n      } else if (this.data.ty === 5) {\r\n        this.layerInterface.textInterface = TextExpressionInterface(this);\r\n        this.layerInterface.text = this.layerInterface.textInterface;\r\n      }\r\n    },\r\n    setBlendMode: function setBlendMode() {\r\n      var blendModeValue = getBlendMode(this.data.bm);\r\n      var elem = this.baseElement || this.layerElement;\r\n      elem.style['mix-blend-mode'] = blendModeValue;\r\n    },\r\n    initBaseData: function initBaseData(data, globalData, comp) {\r\n      this.globalData = globalData;\r\n      this.comp = comp;\r\n      this.data = data;\r\n      this.layerId = createElementID(); // Stretch factor for old animations missing this property.\r\n\r\n      if (!this.data.sr) {\r\n        this.data.sr = 1;\r\n      } // effects manager\r\n\r\n\r\n      this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\r\n    },\r\n    getType: function getType() {\r\n      return this.type;\r\n    },\r\n    sourceRectAtTime: function sourceRectAtTime() {}\r\n  };\r\n\r\n  /**\r\n   * @file\r\n   * Handles element's layer frame update.\r\n   * Checks layer in point and out point\r\n   *\r\n   */\r\n  function FrameElement() {}\r\n\r\n  FrameElement.prototype = {\r\n    /**\r\n       * @function\r\n       * Initializes frame related properties.\r\n       *\r\n       */\r\n    initFrame: function initFrame() {\r\n      // set to true when inpoint is rendered\r\n      this._isFirstFrame = false; // list of animated properties\r\n\r\n      this.dynamicProperties = []; // If layer has been modified in current tick this will be true\r\n\r\n      this._mdf = false;\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Calculates all dynamic values\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       * @param {boolean} isVisible\r\n       * if layers is currently in range\r\n       *\r\n       */\r\n    prepareProperties: function prepareProperties(num, isVisible) {\r\n      var i;\r\n      var len = this.dynamicProperties.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (isVisible || this._isParent && this.dynamicProperties[i].propType === 'transform') {\r\n          this.dynamicProperties[i].getValue();\r\n\r\n          if (this.dynamicProperties[i]._mdf) {\r\n            this.globalData._mdf = true;\r\n            this._mdf = true;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    addDynamicProperty: function addDynamicProperty(prop) {\r\n      if (this.dynamicProperties.indexOf(prop) === -1) {\r\n        this.dynamicProperties.push(prop);\r\n      }\r\n    }\r\n  };\r\n\r\n  function FootageElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initRenderable();\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.footageData = globalData.imageLoader.getAsset(this.assetData);\r\n    this.initBaseData(data, globalData, comp);\r\n  }\r\n\r\n  FootageElement.prototype.prepareFrame = function () {};\r\n\r\n  extendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\r\n\r\n  FootageElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  FootageElement.prototype.renderFrame = function () {};\r\n\r\n  FootageElement.prototype.destroy = function () {};\r\n\r\n  FootageElement.prototype.initExpressions = function () {\r\n    var expressionsInterfaces = getExpressionInterfaces();\r\n\r\n    if (!expressionsInterfaces) {\r\n      return;\r\n    }\r\n\r\n    var FootageInterface = expressionsInterfaces('footage');\r\n    this.layerInterface = FootageInterface(this);\r\n  };\r\n\r\n  FootageElement.prototype.getFootageData = function () {\r\n    return this.footageData;\r\n  };\r\n\r\n  function AudioElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initRenderable();\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initBaseData(data, globalData, comp);\r\n    this._isPlaying = false;\r\n    this._canPlay = false;\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    this.audio = this.globalData.audioController.createAudio(assetPath);\r\n    this._currentTime = 0;\r\n    this.globalData.audioController.addAudio(this);\r\n    this._volumeMultiplier = 1;\r\n    this._volume = 1;\r\n    this._previousVolume = null;\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n    this.lv = PropertyFactory.getProp(this, data.au && data.au.lv ? data.au.lv : {\r\n      k: [100]\r\n    }, 1, 0.01, this);\r\n  }\r\n\r\n  AudioElement.prototype.prepareFrame = function (num) {\r\n    this.prepareRenderableFrame(num, true);\r\n    this.prepareProperties(num, true);\r\n\r\n    if (!this.tm._placeholder) {\r\n      var timeRemapped = this.tm.v;\r\n      this._currentTime = timeRemapped;\r\n    } else {\r\n      this._currentTime = num / this.data.sr;\r\n    }\r\n\r\n    this._volume = this.lv.v[0];\r\n    var totalVolume = this._volume * this._volumeMultiplier;\r\n\r\n    if (this._previousVolume !== totalVolume) {\r\n      this._previousVolume = totalVolume;\r\n      this.audio.volume(totalVolume);\r\n    }\r\n  };\r\n\r\n  extendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\r\n\r\n  AudioElement.prototype.renderFrame = function () {\r\n    if (this.isInRange && this._canPlay) {\r\n      if (!this._isPlaying) {\r\n        this.audio.play();\r\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n        this._isPlaying = true;\r\n      } else if (!this.audio.playing() || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1) {\r\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n      }\r\n    }\r\n  };\r\n\r\n  AudioElement.prototype.show = function () {// this.audio.play()\r\n  };\r\n\r\n  AudioElement.prototype.hide = function () {\r\n    this.audio.pause();\r\n    this._isPlaying = false;\r\n  };\r\n\r\n  AudioElement.prototype.pause = function () {\r\n    this.audio.pause();\r\n    this._isPlaying = false;\r\n    this._canPlay = false;\r\n  };\r\n\r\n  AudioElement.prototype.resume = function () {\r\n    this._canPlay = true;\r\n  };\r\n\r\n  AudioElement.prototype.setRate = function (rateValue) {\r\n    this.audio.rate(rateValue);\r\n  };\r\n\r\n  AudioElement.prototype.volume = function (volumeValue) {\r\n    this._volumeMultiplier = volumeValue;\r\n    this._previousVolume = volumeValue * this._volume;\r\n    this.audio.volume(this._previousVolume);\r\n  };\r\n\r\n  AudioElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  AudioElement.prototype.destroy = function () {};\r\n\r\n  AudioElement.prototype.sourceRectAtTime = function () {};\r\n\r\n  AudioElement.prototype.initExpressions = function () {};\r\n\r\n  function BaseRenderer() {}\r\n\r\n  BaseRenderer.prototype.checkLayers = function (num) {\r\n    var i;\r\n    var len = this.layers.length;\r\n    var data;\r\n    this.completeLayers = true;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (!this.elements[i]) {\r\n        data = this.layers[i];\r\n\r\n        if (data.ip - data.st <= num - this.layers[i].st && data.op - data.st > num - this.layers[i].st) {\r\n          this.buildItem(i);\r\n        }\r\n      }\r\n\r\n      this.completeLayers = this.elements[i] ? this.completeLayers : false;\r\n    }\r\n\r\n    this.checkPendingElements();\r\n  };\r\n\r\n  BaseRenderer.prototype.createItem = function (layer) {\r\n    switch (layer.ty) {\r\n      case 2:\r\n        return this.createImage(layer);\r\n\r\n      case 0:\r\n        return this.createComp(layer);\r\n\r\n      case 1:\r\n        return this.createSolid(layer);\r\n\r\n      case 3:\r\n        return this.createNull(layer);\r\n\r\n      case 4:\r\n        return this.createShape(layer);\r\n\r\n      case 5:\r\n        return this.createText(layer);\r\n\r\n      case 6:\r\n        return this.createAudio(layer);\r\n\r\n      case 13:\r\n        return this.createCamera(layer);\r\n\r\n      case 15:\r\n        return this.createFootage(layer);\r\n\r\n      default:\r\n        return this.createNull(layer);\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.createCamera = function () {\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n  };\r\n\r\n  BaseRenderer.prototype.createAudio = function (data) {\r\n    return new AudioElement(data, this.globalData, this);\r\n  };\r\n\r\n  BaseRenderer.prototype.createFootage = function (data) {\r\n    return new FootageElement(data, this.globalData, this);\r\n  };\r\n\r\n  BaseRenderer.prototype.buildAllItems = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.buildItem(i);\r\n    }\r\n\r\n    this.checkPendingElements();\r\n  };\r\n\r\n  BaseRenderer.prototype.includeLayers = function (newLayers) {\r\n    this.completeLayers = false;\r\n    var i;\r\n    var len = newLayers.length;\r\n    var j;\r\n    var jLen = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      j = 0;\r\n\r\n      while (j < jLen) {\r\n        if (this.layers[j].id === newLayers[i].id) {\r\n          this.layers[j] = newLayers[i];\r\n          break;\r\n        }\r\n\r\n        j += 1;\r\n      }\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.setProjectInterface = function (pInterface) {\r\n    this.globalData.projectInterface = pInterface;\r\n  };\r\n\r\n  BaseRenderer.prototype.initItems = function () {\r\n    if (!this.globalData.progressiveLoad) {\r\n      this.buildAllItems();\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i = 0;\r\n    var len = layers.length;\r\n\r\n    while (i < len) {\r\n      if (layers[i].ind == parentName) {\r\n        // eslint-disable-line eqeqeq\r\n        if (!elements[i] || elements[i] === true) {\r\n          this.buildItem(i);\r\n          this.addPendingElement(element);\r\n        } else {\r\n          hierarchy.push(elements[i]);\r\n          elements[i].setAsParent();\r\n\r\n          if (layers[i].parent !== undefined) {\r\n            this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n          } else {\r\n            element.setHierarchy(hierarchy);\r\n          }\r\n        }\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.addPendingElement = function (element) {\r\n    this.pendingElements.push(element);\r\n  };\r\n\r\n  BaseRenderer.prototype.searchExtraCompositions = function (assets) {\r\n    var i;\r\n    var len = assets.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (assets[i].xt) {\r\n        var comp = this.createComp(assets[i]);\r\n        comp.initExpressions();\r\n        this.globalData.projectInterface.registerComposition(comp);\r\n      }\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.getElementByPath = function (path) {\r\n    var pathValue = path.shift();\r\n    var element;\r\n\r\n    if (typeof pathValue === 'number') {\r\n      element = this.elements[pathValue];\r\n    } else {\r\n      var i;\r\n      var len = this.elements.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.elements[i].data.nm === pathValue) {\r\n          element = this.elements[i];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (path.length === 0) {\r\n      return element;\r\n    }\r\n\r\n    return element.getElementByPath(path);\r\n  };\r\n\r\n  BaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n    this.globalData.audioController = this.animationItem.audioController;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize = {\r\n      w: animData.w,\r\n      h: animData.h\r\n    };\r\n  };\r\n\r\n  function TransformElement() {}\r\n\r\n  TransformElement.prototype = {\r\n    initTransform: function initTransform() {\r\n      this.finalTransform = {\r\n        mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {\r\n          o: 0\r\n        },\r\n        _matMdf: false,\r\n        _opMdf: false,\r\n        mat: new Matrix()\r\n      };\r\n\r\n      if (this.data.ao) {\r\n        this.finalTransform.mProp.autoOriented = true;\r\n      } // TODO: check TYPE 11: Guided elements\r\n\r\n\r\n      if (this.data.ty !== 11) {// this.createElements();\r\n      }\r\n    },\r\n    renderTransform: function renderTransform() {\r\n      this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n      this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n      if (this.hierarchy) {\r\n        var mat;\r\n        var finalMat = this.finalTransform.mat;\r\n        var i = 0;\r\n        var len = this.hierarchy.length; // Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n\r\n        if (!this.finalTransform._matMdf) {\r\n          while (i < len) {\r\n            if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n              this.finalTransform._matMdf = true;\r\n              break;\r\n            }\r\n\r\n            i += 1;\r\n          }\r\n        }\r\n\r\n        if (this.finalTransform._matMdf) {\r\n          mat = this.finalTransform.mProp.v.props;\r\n          finalMat.cloneFromProps(mat);\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n            finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    globalToLocal: function globalToLocal(pt) {\r\n      var transforms = [];\r\n      transforms.push(this.finalTransform);\r\n      var flag = true;\r\n      var comp = this.comp;\r\n\r\n      while (flag) {\r\n        if (comp.finalTransform) {\r\n          if (comp.data.hasMask) {\r\n            transforms.splice(0, 0, comp.finalTransform);\r\n          }\r\n\r\n          comp = comp.comp;\r\n        } else {\r\n          flag = false;\r\n        }\r\n      }\r\n\r\n      var i;\r\n      var len = transforms.length;\r\n      var ptNew;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        ptNew = transforms[i].mat.applyToPointArray(0, 0, 0); // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n\r\n        pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n      }\r\n\r\n      return pt;\r\n    },\r\n    mHelper: new Matrix()\r\n  };\r\n\r\n  function MaskElement(data, element, globalData) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.maskElement = null;\r\n    var defs = this.globalData.defs;\r\n    var i;\r\n    var len = this.masksProperties ? this.masksProperties.length : 0;\r\n    this.viewData = createSizedArray(len);\r\n    this.solidPath = '';\r\n    var path;\r\n    var properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j;\r\n    var jLen;\r\n    var layerId = createElementID();\r\n    var rect;\r\n    var expansor;\r\n    var feMorph;\r\n    var x;\r\n    var maskType = 'clipPath';\r\n    var maskRef = 'clip-path';\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (properties[i].mode !== 'a' && properties[i].mode !== 'n' || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\r\n        maskType = 'mask';\r\n        maskRef = 'mask';\r\n      }\r\n\r\n      if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\r\n        rect = createNS('rect');\r\n        rect.setAttribute('fill', '#ffffff');\r\n        rect.setAttribute('width', this.element.comp.data.w || 0);\r\n        rect.setAttribute('height', this.element.comp.data.h || 0);\r\n        currentMasks.push(rect);\r\n      } else {\r\n        rect = null;\r\n      }\r\n\r\n      path = createNS('path');\r\n\r\n      if (properties[i].mode === 'n') {\r\n        // TODO move this to a factory or to a constructor\r\n        this.viewData[i] = {\r\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n          elem: path,\r\n          lastPath: ''\r\n        };\r\n        defs.appendChild(path);\r\n      } else {\r\n        count += 1;\r\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n        path.setAttribute('clip-rule', 'nonzero');\r\n        var filterID;\r\n\r\n        if (properties[i].x.k !== 0) {\r\n          maskType = 'mask';\r\n          maskRef = 'mask';\r\n          x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\r\n          filterID = createElementID();\r\n          expansor = createNS('filter');\r\n          expansor.setAttribute('id', filterID);\r\n          feMorph = createNS('feMorphology');\r\n          feMorph.setAttribute('operator', 'erode');\r\n          feMorph.setAttribute('in', 'SourceGraphic');\r\n          feMorph.setAttribute('radius', '0');\r\n          expansor.appendChild(feMorph);\r\n          defs.appendChild(expansor);\r\n          path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n        } else {\r\n          feMorph = null;\r\n          x = null;\r\n        } // TODO move this to a factory or to a constructor\r\n\r\n\r\n        this.storedData[i] = {\r\n          elem: path,\r\n          x: x,\r\n          expan: feMorph,\r\n          lastPath: '',\r\n          lastOperator: '',\r\n          filterId: filterID,\r\n          lastRadius: 0\r\n        };\r\n\r\n        if (properties[i].mode === 'i') {\r\n          jLen = currentMasks.length;\r\n          var g = createNS('g');\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            g.appendChild(currentMasks[j]);\r\n          }\r\n\r\n          var mask = createNS('mask');\r\n          mask.setAttribute('mask-type', 'alpha');\r\n          mask.setAttribute('id', layerId + '_' + count);\r\n          mask.appendChild(path);\r\n          defs.appendChild(mask);\r\n          g.setAttribute('mask', 'url(' + getLocationHref() + '#' + layerId + '_' + count + ')');\r\n          currentMasks.length = 0;\r\n          currentMasks.push(g);\r\n        } else {\r\n          currentMasks.push(path);\r\n        }\r\n\r\n        if (properties[i].inv && !this.solidPath) {\r\n          this.solidPath = this.createLayerSolidPath();\r\n        } // TODO move this to a factory or to a constructor\r\n\r\n\r\n        this.viewData[i] = {\r\n          elem: path,\r\n          lastPath: '',\r\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n          invRect: rect\r\n        };\r\n\r\n        if (!this.viewData[i].prop.k) {\r\n          this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.maskElement = createNS(maskType);\r\n    len = currentMasks.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    if (count > 0) {\r\n      this.maskElement.setAttribute('id', layerId);\r\n      this.element.maskedElement.setAttribute(maskRef, 'url(' + getLocationHref() + '#' + layerId + ')');\r\n      defs.appendChild(this.maskElement);\r\n    }\r\n\r\n    if (this.viewData.length) {\r\n      this.element.addRenderableComponent(this);\r\n    }\r\n  }\r\n\r\n  MaskElement.prototype.getMaskProperty = function (pos) {\r\n    return this.viewData[pos].prop;\r\n  };\r\n\r\n  MaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n    var finalMat = this.element.finalTransform.mat;\r\n    var i;\r\n    var len = this.masksProperties.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.viewData[i].prop._mdf || isFirstFrame) {\r\n        this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n      }\r\n\r\n      if (this.viewData[i].op._mdf || isFirstFrame) {\r\n        this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\r\n      }\r\n\r\n      if (this.masksProperties[i].mode !== 'n') {\r\n        if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\r\n          this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\r\n        }\r\n\r\n        if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\r\n          var feMorph = this.storedData[i].expan;\r\n\r\n          if (this.storedData[i].x.v < 0) {\r\n            if (this.storedData[i].lastOperator !== 'erode') {\r\n              this.storedData[i].lastOperator = 'erode';\r\n              this.storedData[i].elem.setAttribute('filter', 'url(' + getLocationHref() + '#' + this.storedData[i].filterId + ')');\r\n            }\r\n\r\n            feMorph.setAttribute('radius', -this.storedData[i].x.v);\r\n          } else {\r\n            if (this.storedData[i].lastOperator !== 'dilate') {\r\n              this.storedData[i].lastOperator = 'dilate';\r\n              this.storedData[i].elem.setAttribute('filter', null);\r\n            }\r\n\r\n            this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  MaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n  };\r\n\r\n  MaskElement.prototype.createLayerSolidPath = function () {\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w;\r\n    path += ' v' + this.globalData.compSize.h;\r\n    path += ' h-' + this.globalData.compSize.w;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n  };\r\n\r\n  MaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\r\n    var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n    var i;\r\n    var len;\r\n    len = pathNodes._length;\r\n\r\n    for (i = 1; i < len; i += 1) {\r\n      // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\r\n    } // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n\r\n\r\n    if (pathNodes.c && len > 1) {\r\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n    } // pathNodes.__renderedString = pathString;\r\n\r\n\r\n    if (viewData.lastPath !== pathString) {\r\n      var pathShapeValue = '';\r\n\r\n      if (viewData.elem) {\r\n        if (pathNodes.c) {\r\n          pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n        }\r\n\r\n        viewData.elem.setAttribute('d', pathShapeValue);\r\n      }\r\n\r\n      viewData.lastPath = pathString;\r\n    }\r\n  };\r\n\r\n  MaskElement.prototype.destroy = function () {\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n  };\r\n\r\n  var filtersFactory = function () {\r\n    var ob = {};\r\n    ob.createFilter = createFilter;\r\n    ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n    function createFilter(filId, skipCoordinates) {\r\n      var fil = createNS('filter');\r\n      fil.setAttribute('id', filId);\r\n\r\n      if (skipCoordinates !== true) {\r\n        fil.setAttribute('filterUnits', 'objectBoundingBox');\r\n        fil.setAttribute('x', '0%');\r\n        fil.setAttribute('y', '0%');\r\n        fil.setAttribute('width', '100%');\r\n        fil.setAttribute('height', '100%');\r\n      }\r\n\r\n      return fil;\r\n    }\r\n\r\n    function createAlphaToLuminanceFilter() {\r\n      var feColorMatrix = createNS('feColorMatrix');\r\n      feColorMatrix.setAttribute('type', 'matrix');\r\n      feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n      feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n      return feColorMatrix;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var featureSupport = function () {\r\n    var ob = {\r\n      maskType: true\r\n    };\r\n\r\n    if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n      ob.maskType = false;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var registeredEffects = {};\r\n  var idPrefix = 'filter_result_';\r\n\r\n  function SVGEffects(elem) {\r\n    var i;\r\n    var source = 'SourceGraphic';\r\n    var len = elem.data.ef ? elem.data.ef.length : 0;\r\n    var filId = createElementID();\r\n    var fil = filtersFactory.createFilter(filId, true);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      filterManager = null;\r\n      var type = elem.data.ef[i].ty;\r\n\r\n      if (registeredEffects[type]) {\r\n        var Effect = registeredEffects[type].effect;\r\n        filterManager = new Effect(fil, elem.effectsManager.effectElements[i], elem, idPrefix + count, source);\r\n        source = idPrefix + count;\r\n\r\n        if (registeredEffects[type].countsAsEffect) {\r\n          count += 1;\r\n        }\r\n      }\r\n\r\n      if (filterManager) {\r\n        this.filters.push(filterManager);\r\n      }\r\n    }\r\n\r\n    if (count) {\r\n      elem.globalData.defs.appendChild(fil);\r\n      elem.layerElement.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n    }\r\n\r\n    if (this.filters.length) {\r\n      elem.addRenderableComponent(this);\r\n    }\r\n  }\r\n\r\n  SVGEffects.prototype.renderFrame = function (_isFirstFrame) {\r\n    var i;\r\n    var len = this.filters.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.filters[i].renderFrame(_isFirstFrame);\r\n    }\r\n  };\r\n\r\n  function registerEffect(id, effect, countsAsEffect) {\r\n    registeredEffects[id] = {\r\n      effect: effect,\r\n      countsAsEffect: countsAsEffect\r\n    };\r\n  }\r\n\r\n  function SVGBaseElement() {}\r\n\r\n  SVGBaseElement.prototype = {\r\n    initRendererElement: function initRendererElement() {\r\n      this.layerElement = createNS('g');\r\n    },\r\n    createContainerElements: function createContainerElements() {\r\n      this.matteElement = createNS('g');\r\n      this.transformedElement = this.layerElement;\r\n      this.maskedElement = this.layerElement;\r\n      this._sizeChanged = false;\r\n      var layerElementParent = null; // If this layer acts as a mask for the following layer\r\n\r\n      if (this.data.td) {\r\n        this.matteMasks = {};\r\n        var symbolElement = createNS('symbol');\r\n        symbolElement.setAttribute('id', this.layerId);\r\n        var gg = createNS('g');\r\n        gg.appendChild(this.layerElement);\r\n        symbolElement.appendChild(gg);\r\n        layerElementParent = gg;\r\n        this.globalData.defs.appendChild(symbolElement);\r\n      } else if (this.data.tt) {\r\n        this.matteElement.appendChild(this.layerElement);\r\n        layerElementParent = this.matteElement;\r\n        this.baseElement = this.matteElement;\r\n      } else {\r\n        this.baseElement = this.layerElement;\r\n      }\r\n\r\n      if (this.data.ln) {\r\n        this.layerElement.setAttribute('id', this.data.ln);\r\n      }\r\n\r\n      if (this.data.cl) {\r\n        this.layerElement.setAttribute('class', this.data.cl);\r\n      } // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n\r\n\r\n      if (this.data.ty === 0 && !this.data.hd) {\r\n        var cp = createNS('clipPath');\r\n        var pt = createNS('path');\r\n        pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n        var clipId = createElementID();\r\n        cp.setAttribute('id', clipId);\r\n        cp.appendChild(pt);\r\n        this.globalData.defs.appendChild(cp);\r\n\r\n        if (this.checkMasks()) {\r\n          var cpGroup = createNS('g');\r\n          cpGroup.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\r\n          cpGroup.appendChild(this.layerElement);\r\n          this.transformedElement = cpGroup;\r\n\r\n          if (layerElementParent) {\r\n            layerElementParent.appendChild(this.transformedElement);\r\n          } else {\r\n            this.baseElement = this.transformedElement;\r\n          }\r\n        } else {\r\n          this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\r\n        }\r\n      }\r\n\r\n      if (this.data.bm !== 0) {\r\n        this.setBlendMode();\r\n      }\r\n    },\r\n    renderElement: function renderElement() {\r\n      if (this.finalTransform._matMdf) {\r\n        this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n      }\r\n\r\n      if (this.finalTransform._opMdf) {\r\n        this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n      }\r\n    },\r\n    destroyBaseElement: function destroyBaseElement() {\r\n      this.layerElement = null;\r\n      this.matteElement = null;\r\n      this.maskManager.destroy();\r\n    },\r\n    getBaseElement: function getBaseElement() {\r\n      if (this.data.hd) {\r\n        return null;\r\n      }\r\n\r\n      return this.baseElement;\r\n    },\r\n    createRenderableComponents: function createRenderableComponents() {\r\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n      this.renderableEffectsManager = new SVGEffects(this);\r\n    },\r\n    getMatte: function getMatte(matteType) {\r\n      if (!this.matteMasks[matteType]) {\r\n        var id = this.layerId + '_' + matteType;\r\n        var filId;\r\n        var fil;\r\n        var useElement;\r\n        var gg;\r\n\r\n        if (matteType === 1 || matteType === 3) {\r\n          var masker = createNS('mask');\r\n          masker.setAttribute('id', id);\r\n          masker.setAttribute('mask-type', matteType === 3 ? 'luminance' : 'alpha');\r\n          useElement = createNS('use');\r\n          useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\r\n          masker.appendChild(useElement);\r\n          this.globalData.defs.appendChild(masker);\r\n\r\n          if (!featureSupport.maskType && matteType === 1) {\r\n            masker.setAttribute('mask-type', 'luminance');\r\n            filId = createElementID();\r\n            fil = filtersFactory.createFilter(filId);\r\n            this.globalData.defs.appendChild(fil);\r\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n            gg = createNS('g');\r\n            gg.appendChild(useElement);\r\n            masker.appendChild(gg);\r\n            gg.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n          }\r\n        } else if (matteType === 2) {\r\n          var maskGroup = createNS('mask');\r\n          maskGroup.setAttribute('id', id);\r\n          maskGroup.setAttribute('mask-type', 'alpha');\r\n          var maskGrouper = createNS('g');\r\n          maskGroup.appendChild(maskGrouper);\r\n          filId = createElementID();\r\n          fil = filtersFactory.createFilter(filId); /// /\r\n\r\n          var feCTr = createNS('feComponentTransfer');\r\n          feCTr.setAttribute('in', 'SourceGraphic');\r\n          fil.appendChild(feCTr);\r\n          var feFunc = createNS('feFuncA');\r\n          feFunc.setAttribute('type', 'table');\r\n          feFunc.setAttribute('tableValues', '1.0 0.0');\r\n          feCTr.appendChild(feFunc); /// /\r\n\r\n          this.globalData.defs.appendChild(fil);\r\n          var alphaRect = createNS('rect');\r\n          alphaRect.setAttribute('width', this.comp.data.w);\r\n          alphaRect.setAttribute('height', this.comp.data.h);\r\n          alphaRect.setAttribute('x', '0');\r\n          alphaRect.setAttribute('y', '0');\r\n          alphaRect.setAttribute('fill', '#ffffff');\r\n          alphaRect.setAttribute('opacity', '0');\r\n          maskGrouper.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n          maskGrouper.appendChild(alphaRect);\r\n          useElement = createNS('use');\r\n          useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\r\n          maskGrouper.appendChild(useElement);\r\n\r\n          if (!featureSupport.maskType) {\r\n            maskGroup.setAttribute('mask-type', 'luminance');\r\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n            gg = createNS('g');\r\n            maskGrouper.appendChild(alphaRect);\r\n            gg.appendChild(this.layerElement);\r\n            maskGrouper.appendChild(gg);\r\n          }\r\n\r\n          this.globalData.defs.appendChild(maskGroup);\r\n        }\r\n\r\n        this.matteMasks[matteType] = id;\r\n      }\r\n\r\n      return this.matteMasks[matteType];\r\n    },\r\n    setMatte: function setMatte(id) {\r\n      if (!this.matteElement) {\r\n        return;\r\n      }\r\n\r\n      this.matteElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @file\r\n   * Handles AE's layer parenting property.\r\n   *\r\n   */\r\n  function HierarchyElement() {}\r\n\r\n  HierarchyElement.prototype = {\r\n    /**\r\n       * @function\r\n       * Initializes hierarchy properties\r\n       *\r\n       */\r\n    initHierarchy: function initHierarchy() {\r\n      // element's parent list\r\n      this.hierarchy = []; // if element is parent of another layer _isParent will be true\r\n\r\n      this._isParent = false;\r\n      this.checkParenting();\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Sets layer's hierarchy.\r\n       * @param {array} hierarch\r\n       * layer's parent list\r\n       *\r\n       */\r\n    setHierarchy: function setHierarchy(hierarchy) {\r\n      this.hierarchy = hierarchy;\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Sets layer as parent.\r\n       *\r\n       */\r\n    setAsParent: function setAsParent() {\r\n      this._isParent = true;\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Searches layer's parenting chain\r\n       *\r\n       */\r\n    checkParenting: function checkParenting() {\r\n      if (this.data.parent !== undefined) {\r\n        this.comp.buildElementParenting(this, this.data.parent, []);\r\n      }\r\n    }\r\n  };\r\n\r\n  function RenderableDOMElement() {}\r\n\r\n  (function () {\r\n    var _prototype = {\r\n      initElement: function initElement(data, globalData, comp) {\r\n        this.initFrame();\r\n        this.initBaseData(data, globalData, comp);\r\n        this.initTransform(data, globalData, comp);\r\n        this.initHierarchy();\r\n        this.initRenderable();\r\n        this.initRendererElement();\r\n        this.createContainerElements();\r\n        this.createRenderableComponents();\r\n        this.createContent();\r\n        this.hide();\r\n      },\r\n      hide: function hide() {\r\n        // console.log('HIDE', this);\r\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n          var elem = this.baseElement || this.layerElement;\r\n          elem.style.display = 'none';\r\n          this.hidden = true;\r\n        }\r\n      },\r\n      show: function show() {\r\n        // console.log('SHOW', this);\r\n        if (this.isInRange && !this.isTransparent) {\r\n          if (!this.data.hd) {\r\n            var elem = this.baseElement || this.layerElement;\r\n            elem.style.display = 'block';\r\n          }\r\n\r\n          this.hidden = false;\r\n          this._isFirstFrame = true;\r\n        }\r\n      },\r\n      renderFrame: function renderFrame() {\r\n        // If it is exported as hidden (data.hd === true) no need to render\r\n        // If it is not visible no need to render\r\n        if (this.data.hd || this.hidden) {\r\n          return;\r\n        }\r\n\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.renderElement();\r\n        this.renderInnerContent();\r\n\r\n        if (this._isFirstFrame) {\r\n          this._isFirstFrame = false;\r\n        }\r\n      },\r\n      renderInnerContent: function renderInnerContent() {},\r\n      prepareFrame: function prepareFrame(num) {\r\n        this._mdf = false;\r\n        this.prepareRenderableFrame(num);\r\n        this.prepareProperties(num, this.isInRange);\r\n        this.checkTransparency();\r\n      },\r\n      destroy: function destroy() {\r\n        this.innerElem = null;\r\n        this.destroyBaseElement();\r\n      }\r\n    };\r\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n  })();\r\n\r\n  function IImageElement(data, globalData, comp) {\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data, globalData, comp);\r\n    this.sourceRect = {\r\n      top: 0,\r\n      left: 0,\r\n      width: this.assetData.w,\r\n      height: this.assetData.h\r\n    };\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\r\n\r\n  IImageElement.prototype.createContent = function () {\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    this.innerElem = createNS('image');\r\n    this.innerElem.setAttribute('width', this.assetData.w + 'px');\r\n    this.innerElem.setAttribute('height', this.assetData.h + 'px');\r\n    this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n    this.layerElement.appendChild(this.innerElem);\r\n  };\r\n\r\n  IImageElement.prototype.sourceRectAtTime = function () {\r\n    return this.sourceRect;\r\n  };\r\n\r\n  function ProcessedElement(element, position) {\r\n    this.elem = element;\r\n    this.pos = position;\r\n  }\r\n\r\n  function IShapeElement() {}\r\n\r\n  IShapeElement.prototype = {\r\n    addShapeToModifiers: function addShapeToModifiers(data) {\r\n      var i;\r\n      var len = this.shapeModifiers.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.shapeModifiers[i].addShape(data);\r\n      }\r\n    },\r\n    isShapeInAnimatedModifiers: function isShapeInAnimatedModifiers(data) {\r\n      var i = 0;\r\n      var len = this.shapeModifiers.length;\r\n\r\n      while (i < len) {\r\n        if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    },\r\n    renderModifiers: function renderModifiers() {\r\n      if (!this.shapeModifiers.length) {\r\n        return;\r\n      }\r\n\r\n      var i;\r\n      var len = this.shapes.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.shapes[i].sh.reset();\r\n      }\r\n\r\n      len = this.shapeModifiers.length;\r\n      var shouldBreakProcess;\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame); // workaround to fix cases where a repeater resets the shape so the following processes get called twice\r\n        // TODO: find a better solution for this\r\n\r\n        if (shouldBreakProcess) {\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    searchProcessedElement: function searchProcessedElement(elem) {\r\n      var elements = this.processedElements;\r\n      var i = 0;\r\n      var len = elements.length;\r\n\r\n      while (i < len) {\r\n        if (elements[i].elem === elem) {\r\n          return elements[i].pos;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return 0;\r\n    },\r\n    addProcessedElement: function addProcessedElement(elem, pos) {\r\n      var elements = this.processedElements;\r\n      var i = elements.length;\r\n\r\n      while (i) {\r\n        i -= 1;\r\n\r\n        if (elements[i].elem === elem) {\r\n          elements[i].pos = pos;\r\n          return;\r\n        }\r\n      }\r\n\r\n      elements.push(new ProcessedElement(elem, pos));\r\n    },\r\n    prepareFrame: function prepareFrame(num) {\r\n      this.prepareRenderableFrame(num);\r\n      this.prepareProperties(num, this.isInRange);\r\n    }\r\n  };\r\n\r\n  var lineCapEnum = {\r\n    1: 'butt',\r\n    2: 'round',\r\n    3: 'square'\r\n  };\r\n  var lineJoinEnum = {\r\n    1: 'miter',\r\n    2: 'round',\r\n    3: 'bevel'\r\n  };\r\n\r\n  function SVGShapeData(transformers, level, shape) {\r\n    this.caches = [];\r\n    this.styles = [];\r\n    this.transformers = transformers;\r\n    this.lStr = '';\r\n    this.sh = shape;\r\n    this.lvl = level; // TODO find if there are some cases where _isAnimated can be false.\r\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n\r\n    this._isAnimated = !!shape.k; // TODO: commenting this for now since all shapes are animated\r\n\r\n    var i = 0;\r\n    var len = transformers.length;\r\n\r\n    while (i < len) {\r\n      if (transformers[i].mProps.dynamicProperties.length) {\r\n        this._isAnimated = true;\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n  }\r\n\r\n  SVGShapeData.prototype.setAsAnimated = function () {\r\n    this._isAnimated = true;\r\n  };\r\n\r\n  function SVGStyleData(data, level) {\r\n    this.data = data;\r\n    this.type = data.ty;\r\n    this.d = '';\r\n    this.lvl = level;\r\n    this._mdf = false;\r\n    this.closed = data.hd === true;\r\n    this.pElem = createNS('path');\r\n    this.msElem = null;\r\n  }\r\n\r\n  SVGStyleData.prototype.reset = function () {\r\n    this.d = '';\r\n    this._mdf = false;\r\n  };\r\n\r\n  function DashProperty(elem, data, renderer, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.dataProps = createSizedArray(data.length);\r\n    this.renderer = renderer;\r\n    this.k = false;\r\n    this.dashStr = '';\r\n    this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\r\n    this.dashoffset = createTypedArray('float32', 1);\r\n    this.initDynamicPropertyContainer(container);\r\n    var i;\r\n    var len = data.length || 0;\r\n    var prop;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\r\n      this.k = prop.k || this.k;\r\n      this.dataProps[i] = {\r\n        n: data[i].n,\r\n        p: prop\r\n      };\r\n    }\r\n\r\n    if (!this.k) {\r\n      this.getValue(true);\r\n    }\r\n\r\n    this._isAnimated = this.k;\r\n  }\r\n\r\n  DashProperty.prototype.getValue = function (forceRender) {\r\n    if (this.elem.globalData.frameId === this.frameId && !forceRender) {\r\n      return;\r\n    }\r\n\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || forceRender;\r\n\r\n    if (this._mdf) {\r\n      var i = 0;\r\n      var len = this.dataProps.length;\r\n\r\n      if (this.renderer === 'svg') {\r\n        this.dashStr = '';\r\n      }\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.dataProps[i].n !== 'o') {\r\n          if (this.renderer === 'svg') {\r\n            this.dashStr += ' ' + this.dataProps[i].p.v;\r\n          } else {\r\n            this.dashArray[i] = this.dataProps[i].p.v;\r\n          }\r\n        } else {\r\n          this.dashoffset[0] = this.dataProps[i].p.v;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], DashProperty);\r\n\r\n  function SVGStrokeStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n    this.style = styleOb;\r\n    this._isAnimated = !!this._isAnimated;\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\r\n\r\n  function SVGFillStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n    this.style = styleOb;\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGFillStyleData);\r\n\r\n  function SVGNoStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.style = styleOb;\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGNoStyleData);\r\n\r\n  function GradientProperty(elem, data, container) {\r\n    this.data = data;\r\n    this.c = createTypedArray('uint8c', data.p * 4);\r\n    var cLength = data.k.k[0].s ? data.k.k[0].s.length - data.p * 4 : data.k.k.length - data.p * 4;\r\n    this.o = createTypedArray('float32', cLength);\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    this._collapsable = this.checkCollapsable();\r\n    this._hasOpacity = cLength;\r\n    this.initDynamicPropertyContainer(container);\r\n    this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\r\n    this.k = this.prop.k;\r\n    this.getValue(true);\r\n  }\r\n\r\n  GradientProperty.prototype.comparePoints = function (values, points) {\r\n    var i = 0;\r\n    var len = this.o.length / 2;\r\n    var diff;\r\n\r\n    while (i < len) {\r\n      diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\r\n\r\n      if (diff > 0.01) {\r\n        return false;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  GradientProperty.prototype.checkCollapsable = function () {\r\n    if (this.o.length / 2 !== this.c.length / 4) {\r\n      return false;\r\n    }\r\n\r\n    if (this.data.k.k[0].s) {\r\n      var i = 0;\r\n      var len = this.data.k.k.length;\r\n\r\n      while (i < len) {\r\n        if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n          return false;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n    } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  GradientProperty.prototype.getValue = function (forceRender) {\r\n    this.prop.getValue();\r\n    this._mdf = false;\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n\r\n    if (this.prop._mdf || forceRender) {\r\n      var i;\r\n      var len = this.data.p * 4;\r\n      var mult;\r\n      var val;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        mult = i % 4 === 0 ? 100 : 255;\r\n        val = Math.round(this.prop.v[i] * mult);\r\n\r\n        if (this.c[i] !== val) {\r\n          this.c[i] = val;\r\n          this._cmdf = !forceRender;\r\n        }\r\n      }\r\n\r\n      if (this.o.length) {\r\n        len = this.prop.v.length;\r\n\r\n        for (i = this.data.p * 4; i < len; i += 1) {\r\n          mult = i % 2 === 0 ? 100 : 1;\r\n          val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\r\n\r\n          if (this.o[i - this.data.p * 4] !== val) {\r\n            this.o[i - this.data.p * 4] = val;\r\n            this._omdf = !forceRender;\r\n          }\r\n        }\r\n      }\r\n\r\n      this._mdf = !forceRender;\r\n    }\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], GradientProperty);\r\n\r\n  function SVGGradientFillStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.initGradientData(elem, data, styleOb);\r\n  }\r\n\r\n  SVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n    this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\r\n    this.h = PropertyFactory.getProp(elem, data.h || {\r\n      k: 0\r\n    }, 0, 0.01, this);\r\n    this.a = PropertyFactory.getProp(elem, data.a || {\r\n      k: 0\r\n    }, 0, degToRads, this);\r\n    this.g = new GradientProperty(elem, data.g, this);\r\n    this.style = styleOb;\r\n    this.stops = [];\r\n    this.setGradientData(styleOb.pElem, data);\r\n    this.setGradientOpacity(data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n  };\r\n\r\n  SVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\r\n    var gradientId = createElementID();\r\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    gfill.setAttribute('id', gradientId);\r\n    gfill.setAttribute('spreadMethod', 'pad');\r\n    gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n    var stops = [];\r\n    var stop;\r\n    var j;\r\n    var jLen;\r\n    jLen = data.g.p * 4;\r\n\r\n    for (j = 0; j < jLen; j += 4) {\r\n      stop = createNS('stop');\r\n      gfill.appendChild(stop);\r\n      stops.push(stop);\r\n    }\r\n\r\n    pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + gradientId + ')');\r\n    this.gf = gfill;\r\n    this.cst = stops;\r\n  };\r\n\r\n  SVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\r\n    if (this.g._hasOpacity && !this.g._collapsable) {\r\n      var stop;\r\n      var j;\r\n      var jLen;\r\n      var mask = createNS('mask');\r\n      var maskElement = createNS('path');\r\n      mask.appendChild(maskElement);\r\n      var opacityId = createElementID();\r\n      var maskId = createElementID();\r\n      mask.setAttribute('id', maskId);\r\n      var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n      opFill.setAttribute('id', opacityId);\r\n      opFill.setAttribute('spreadMethod', 'pad');\r\n      opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n      jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n      var stops = this.stops;\r\n\r\n      for (j = data.g.p * 4; j < jLen; j += 2) {\r\n        stop = createNS('stop');\r\n        stop.setAttribute('stop-color', 'rgb(255,255,255)');\r\n        opFill.appendChild(stop);\r\n        stops.push(stop);\r\n      }\r\n\r\n      maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + opacityId + ')');\r\n\r\n      if (data.ty === 'gs') {\r\n        maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n        maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n\r\n        if (data.lj === 1) {\r\n          maskElement.setAttribute('stroke-miterlimit', data.ml);\r\n        }\r\n      }\r\n\r\n      this.of = opFill;\r\n      this.ms = mask;\r\n      this.ost = stops;\r\n      this.maskId = maskId;\r\n      styleOb.msElem = maskElement;\r\n    }\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\r\n\r\n  function SVGGradientStrokeStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n    this.initGradientData(elem, data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n  }\r\n\r\n  extendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\r\n\r\n  function ShapeGroupData() {\r\n    this.it = [];\r\n    this.prevViewData = [];\r\n    this.gr = createNS('g');\r\n  }\r\n\r\n  function SVGTransformData(mProps, op, container) {\r\n    this.transform = {\r\n      mProps: mProps,\r\n      op: op,\r\n      container: container\r\n    };\r\n    this.elements = [];\r\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n  }\r\n\r\n  var buildShapeString = function buildShapeString(pathNodes, length, closed, mat) {\r\n    if (length === 0) {\r\n      return '';\r\n    }\r\n\r\n    var _o = pathNodes.o;\r\n    var _i = pathNodes.i;\r\n    var _v = pathNodes.v;\r\n    var i;\r\n    var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n\r\n    for (i = 1; i < length; i += 1) {\r\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n    }\r\n\r\n    if (closed && length) {\r\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n      shapeString += 'z';\r\n    }\r\n\r\n    return shapeString;\r\n  };\r\n\r\n  var SVGElementsRenderer = function () {\r\n    var _identityMatrix = new Matrix();\r\n\r\n    var _matrixHelper = new Matrix();\r\n\r\n    var ob = {\r\n      createRenderFunction: createRenderFunction\r\n    };\r\n\r\n    function createRenderFunction(data) {\r\n      switch (data.ty) {\r\n        case 'fl':\r\n          return renderFill;\r\n\r\n        case 'gf':\r\n          return renderGradient;\r\n\r\n        case 'gs':\r\n          return renderGradientStroke;\r\n\r\n        case 'st':\r\n          return renderStroke;\r\n\r\n        case 'sh':\r\n        case 'el':\r\n        case 'rc':\r\n        case 'sr':\r\n          return renderPath;\r\n\r\n        case 'tr':\r\n          return renderContentTransform;\r\n\r\n        case 'no':\r\n          return renderNoop;\r\n\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n\r\n    function renderContentTransform(styleData, itemData, isFirstFrame) {\r\n      if (isFirstFrame || itemData.transform.op._mdf) {\r\n        itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\r\n      }\r\n\r\n      if (isFirstFrame || itemData.transform.mProps._mdf) {\r\n        itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\r\n      }\r\n    }\r\n\r\n    function renderNoop() {}\r\n\r\n    function renderPath(styleData, itemData, isFirstFrame) {\r\n      var j;\r\n      var jLen;\r\n      var pathStringTransformed;\r\n      var redraw;\r\n      var pathNodes;\r\n      var l;\r\n      var lLen = itemData.styles.length;\r\n      var lvl = itemData.lvl;\r\n      var paths;\r\n      var mat;\r\n      var props;\r\n      var iterations;\r\n      var k;\r\n\r\n      for (l = 0; l < lLen; l += 1) {\r\n        redraw = itemData.sh._mdf || isFirstFrame;\r\n\r\n        if (itemData.styles[l].lvl < lvl) {\r\n          mat = _matrixHelper.reset();\r\n          iterations = lvl - itemData.styles[l].lvl;\r\n          k = itemData.transformers.length - 1;\r\n\r\n          while (!redraw && iterations > 0) {\r\n            redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n            iterations -= 1;\r\n            k -= 1;\r\n          }\r\n\r\n          if (redraw) {\r\n            iterations = lvl - itemData.styles[l].lvl;\r\n            k = itemData.transformers.length - 1;\r\n\r\n            while (iterations > 0) {\r\n              props = itemData.transformers[k].mProps.v.props;\r\n              mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n              iterations -= 1;\r\n              k -= 1;\r\n            }\r\n          }\r\n        } else {\r\n          mat = _identityMatrix;\r\n        }\r\n\r\n        paths = itemData.sh.paths;\r\n        jLen = paths._length;\r\n\r\n        if (redraw) {\r\n          pathStringTransformed = '';\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathNodes = paths.shapes[j];\r\n\r\n            if (pathNodes && pathNodes._length) {\r\n              pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n            }\r\n          }\r\n\r\n          itemData.caches[l] = pathStringTransformed;\r\n        } else {\r\n          pathStringTransformed = itemData.caches[l];\r\n        }\r\n\r\n        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n      }\r\n    }\r\n\r\n    function renderFill(styleData, itemData, isFirstFrame) {\r\n      var styleElem = itemData.style;\r\n\r\n      if (itemData.c._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n      }\r\n\r\n      if (itemData.o._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\r\n      }\r\n    }\r\n\r\n    function renderGradientStroke(styleData, itemData, isFirstFrame) {\r\n      renderGradient(styleData, itemData, isFirstFrame);\r\n      renderStroke(styleData, itemData, isFirstFrame);\r\n    }\r\n\r\n    function renderGradient(styleData, itemData, isFirstFrame) {\r\n      var gfill = itemData.gf;\r\n      var hasOpacity = itemData.g._hasOpacity;\r\n      var pt1 = itemData.s.v;\r\n      var pt2 = itemData.e.v;\r\n\r\n      if (itemData.o._mdf || isFirstFrame) {\r\n        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n        itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n      }\r\n\r\n      if (itemData.s._mdf || isFirstFrame) {\r\n        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n        gfill.setAttribute(attr1, pt1[0]);\r\n        gfill.setAttribute(attr2, pt1[1]);\r\n\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute(attr1, pt1[0]);\r\n          itemData.of.setAttribute(attr2, pt1[1]);\r\n        }\r\n      }\r\n\r\n      var stops;\r\n      var i;\r\n      var len;\r\n      var stop;\r\n\r\n      if (itemData.g._cmdf || isFirstFrame) {\r\n        stops = itemData.cst;\r\n        var cValues = itemData.g.c;\r\n        len = stops.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          stop = stops[i];\r\n          stop.setAttribute('offset', cValues[i * 4] + '%');\r\n          stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\r\n        }\r\n      }\r\n\r\n      if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n        var oValues = itemData.g.o;\r\n\r\n        if (itemData.g._collapsable) {\r\n          stops = itemData.cst;\r\n        } else {\r\n          stops = itemData.ost;\r\n        }\r\n\r\n        len = stops.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          stop = stops[i];\r\n\r\n          if (!itemData.g._collapsable) {\r\n            stop.setAttribute('offset', oValues[i * 2] + '%');\r\n          }\r\n\r\n          stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n        }\r\n      }\r\n\r\n      if (styleData.t === 1) {\r\n        if (itemData.e._mdf || isFirstFrame) {\r\n          gfill.setAttribute('x2', pt2[0]);\r\n          gfill.setAttribute('y2', pt2[1]);\r\n\r\n          if (hasOpacity && !itemData.g._collapsable) {\r\n            itemData.of.setAttribute('x2', pt2[0]);\r\n            itemData.of.setAttribute('y2', pt2[1]);\r\n          }\r\n        }\r\n      } else {\r\n        var rad;\r\n\r\n        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n          gfill.setAttribute('r', rad);\r\n\r\n          if (hasOpacity && !itemData.g._collapsable) {\r\n            itemData.of.setAttribute('r', rad);\r\n          }\r\n        }\r\n\r\n        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n          if (!rad) {\r\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n          }\r\n\r\n          var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n          var percent = itemData.h.v;\r\n\r\n          if (percent >= 1) {\r\n            percent = 0.99;\r\n          } else if (percent <= -1) {\r\n            percent = -0.99;\r\n          }\r\n\r\n          var dist = rad * percent;\r\n          var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n          var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n          gfill.setAttribute('fx', x);\r\n          gfill.setAttribute('fy', y);\r\n\r\n          if (hasOpacity && !itemData.g._collapsable) {\r\n            itemData.of.setAttribute('fx', x);\r\n            itemData.of.setAttribute('fy', y);\r\n          }\r\n        } // gfill.setAttribute('fy','200');\r\n\r\n      }\r\n    }\r\n\r\n    function renderStroke(styleData, itemData, isFirstFrame) {\r\n      var styleElem = itemData.style;\r\n      var d = itemData.d;\r\n\r\n      if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n      }\r\n\r\n      if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\r\n        styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n      }\r\n\r\n      if (itemData.o._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n      }\r\n\r\n      if (itemData.w._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n\r\n        if (styleElem.msElem) {\r\n          styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n        }\r\n      }\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  function SVGShapeElement(data, globalData, comp) {\r\n    // List of drawable elements\r\n    this.shapes = []; // Full shape data\r\n\r\n    this.shapesData = data.shapes; // List of styles that will be applied to shapes\r\n\r\n    this.stylesList = []; // List of modifiers that will be applied to shapes\r\n\r\n    this.shapeModifiers = []; // List of items in shape tree\r\n\r\n    this.itemsData = []; // List of items in previous shape tree\r\n\r\n    this.processedElements = []; // List of animated components\r\n\r\n    this.animatedContents = [];\r\n    this.initElement(data, globalData, comp); // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n\r\n    this.prevViewData = []; // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\r\n\r\n  SVGShapeElement.prototype.initSecondaryElement = function () {};\r\n\r\n  SVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\n  SVGShapeElement.prototype.buildExpressionInterface = function () {};\r\n\r\n  SVGShapeElement.prototype.createContent = function () {\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n  };\r\n  /*\r\n  This method searches for multiple shapes that affect a single element and one of them is animated\r\n  */\r\n\r\n\r\n  SVGShapeElement.prototype.filterUniqueShapes = function () {\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var shape;\r\n    var j;\r\n    var jLen = this.stylesList.length;\r\n    var style;\r\n    var tempShapes = [];\r\n    var areAnimated = false;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      style = this.stylesList[j];\r\n      areAnimated = false;\r\n      tempShapes.length = 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shape = this.shapes[i];\r\n\r\n        if (shape.styles.indexOf(style) !== -1) {\r\n          tempShapes.push(shape);\r\n          areAnimated = shape._isAnimated || areAnimated;\r\n        }\r\n      }\r\n\r\n      if (tempShapes.length > 1 && areAnimated) {\r\n        this.setShapesAsAnimated(tempShapes);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\r\n    var i;\r\n    var len = shapes.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      shapes[i].setAsAnimated();\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.createStyleElement = function (data, level) {\r\n    // TODO: prevent drawing of hidden styles\r\n    var elementData;\r\n    var styleOb = new SVGStyleData(data, level);\r\n    var pathElement = styleOb.pElem;\r\n\r\n    if (data.ty === 'st') {\r\n      elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n    } else if (data.ty === 'fl') {\r\n      elementData = new SVGFillStyleData(this, data, styleOb);\r\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n      var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n      elementData = new GradientConstructor(this, data, styleOb);\r\n      this.globalData.defs.appendChild(elementData.gf);\r\n\r\n      if (elementData.maskId) {\r\n        this.globalData.defs.appendChild(elementData.ms);\r\n        this.globalData.defs.appendChild(elementData.of);\r\n        pathElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + elementData.maskId + ')');\r\n      }\r\n    } else if (data.ty === 'no') {\r\n      elementData = new SVGNoStyleData(this, data, styleOb);\r\n    }\r\n\r\n    if (data.ty === 'st' || data.ty === 'gs') {\r\n      pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n      pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n      pathElement.setAttribute('fill-opacity', '0');\r\n\r\n      if (data.lj === 1) {\r\n        pathElement.setAttribute('stroke-miterlimit', data.ml);\r\n      }\r\n    }\r\n\r\n    if (data.r === 2) {\r\n      pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if (data.ln) {\r\n      pathElement.setAttribute('id', data.ln);\r\n    }\r\n\r\n    if (data.cl) {\r\n      pathElement.setAttribute('class', data.cl);\r\n    }\r\n\r\n    if (data.bm) {\r\n      pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n\r\n    this.stylesList.push(styleOb);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.createGroupElement = function (data) {\r\n    var elementData = new ShapeGroupData();\r\n\r\n    if (data.ln) {\r\n      elementData.gr.setAttribute('id', data.ln);\r\n    }\r\n\r\n    if (data.cl) {\r\n      elementData.gr.setAttribute('class', data.cl);\r\n    }\r\n\r\n    if (data.bm) {\r\n      elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.createTransformElement = function (data, container) {\r\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\r\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\r\n    var ty = 4;\r\n\r\n    if (data.ty === 'rc') {\r\n      ty = 5;\r\n    } else if (data.ty === 'el') {\r\n      ty = 6;\r\n    } else if (data.ty === 'sr') {\r\n      ty = 7;\r\n    }\r\n\r\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\r\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\r\n    var i = 0;\r\n    var len = this.animatedContents.length;\r\n\r\n    while (i < len) {\r\n      if (this.animatedContents[i].element === element) {\r\n        return;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    this.animatedContents.push({\r\n      fn: SVGElementsRenderer.createRenderFunction(data),\r\n      element: element,\r\n      data: data\r\n    });\r\n  };\r\n\r\n  SVGShapeElement.prototype.setElementStyles = function (elementData) {\r\n    var arr = elementData.styles;\r\n    var j;\r\n    var jLen = this.stylesList.length;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      if (!this.stylesList[j].closed) {\r\n        arr.push(this.stylesList[j]);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.reloadShapes = function () {\r\n    this._isFirstFrame = true;\r\n    var i;\r\n    var len = this.itemsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    len = this.dynamicProperties.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.dynamicProperties[i].getValue();\r\n    }\r\n\r\n    this.renderModifiers();\r\n  };\r\n\r\n  SVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\r\n    var ownTransformers = [].concat(transformers);\r\n    var i;\r\n    var len = arr.length - 1;\r\n    var j;\r\n    var jLen;\r\n    var ownStyles = [];\r\n    var ownModifiers = [];\r\n    var currentTransform;\r\n    var modifier;\r\n    var processedPos;\r\n\r\n    for (i = len; i >= 0; i -= 1) {\r\n      processedPos = this.searchProcessedElement(arr[i]);\r\n\r\n      if (!processedPos) {\r\n        arr[i]._render = render;\r\n      } else {\r\n        itemsData[i] = prevViewData[processedPos - 1];\r\n      }\r\n\r\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs' || arr[i].ty === 'no') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createStyleElement(arr[i], level);\r\n        } else {\r\n          itemsData[i].style.closed = false;\r\n        }\r\n\r\n        if (arr[i]._render) {\r\n          if (itemsData[i].style.pElem.parentNode !== container) {\r\n            container.appendChild(itemsData[i].style.pElem);\r\n          }\r\n        }\r\n\r\n        ownStyles.push(itemsData[i].style);\r\n      } else if (arr[i].ty === 'gr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createGroupElement(arr[i]);\r\n        } else {\r\n          jLen = itemsData[i].it.length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n          }\r\n        }\r\n\r\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\r\n\r\n        if (arr[i]._render) {\r\n          if (itemsData[i].gr.parentNode !== container) {\r\n            container.appendChild(itemsData[i].gr);\r\n          }\r\n        }\r\n      } else if (arr[i].ty === 'tr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createTransformElement(arr[i], container);\r\n        }\r\n\r\n        currentTransform = itemsData[i].transform;\r\n        ownTransformers.push(currentTransform);\r\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n        }\r\n\r\n        this.setElementStyles(itemsData[i]);\r\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          modifier.init(this, arr[i]);\r\n          itemsData[i] = modifier;\r\n          this.shapeModifiers.push(modifier);\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = false;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      } else if (arr[i].ty === 'rp') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          itemsData[i] = modifier;\r\n          modifier.init(this, arr, i, itemsData);\r\n          this.shapeModifiers.push(modifier);\r\n          render = false;\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = true;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      }\r\n\r\n      this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n\r\n    len = ownStyles.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      ownStyles[i].closed = true;\r\n    }\r\n\r\n    len = ownModifiers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      ownModifiers[i].closed = true;\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.renderInnerContent = function () {\r\n    this.renderModifiers();\r\n    var i;\r\n    var len = this.stylesList.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.stylesList[i].reset();\r\n    }\r\n\r\n    this.renderShape();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n        if (this.stylesList[i].msElem) {\r\n          this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d); // Adding M0 0 fixes same mask bug on all browsers\r\n\r\n          this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n        }\r\n\r\n        this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.renderShape = function () {\r\n    var i;\r\n    var len = this.animatedContents.length;\r\n    var animatedContent;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      animatedContent = this.animatedContents[i];\r\n\r\n      if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n        animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.destroy = function () {\r\n    this.destroyBaseElement();\r\n    this.shapesData = null;\r\n    this.itemsData = null;\r\n  };\r\n\r\n  function LetterProps(o, sw, sc, fc, m, p) {\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this._mdf = {\r\n      o: true,\r\n      sw: !!sw,\r\n      sc: !!sc,\r\n      fc: !!fc,\r\n      m: true,\r\n      p: true\r\n    };\r\n  }\r\n\r\n  LetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\r\n    this._mdf.o = false;\r\n    this._mdf.sw = false;\r\n    this._mdf.sc = false;\r\n    this._mdf.fc = false;\r\n    this._mdf.m = false;\r\n    this._mdf.p = false;\r\n    var updated = false;\r\n\r\n    if (this.o !== o) {\r\n      this.o = o;\r\n      this._mdf.o = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.sw !== sw) {\r\n      this.sw = sw;\r\n      this._mdf.sw = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.sc !== sc) {\r\n      this.sc = sc;\r\n      this._mdf.sc = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.fc !== fc) {\r\n      this.fc = fc;\r\n      this._mdf.fc = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.m !== m) {\r\n      this.m = m;\r\n      this._mdf.m = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n      this.p = p;\r\n      this._mdf.p = true;\r\n      updated = true;\r\n    }\r\n\r\n    return updated;\r\n  };\r\n\r\n  function TextProperty(elem, data) {\r\n    this._frameId = initialDefaultFrame;\r\n    this.pv = '';\r\n    this.v = '';\r\n    this.kf = false;\r\n    this._isFirstFrame = true;\r\n    this._mdf = false;\r\n    this.data = data;\r\n    this.elem = elem;\r\n    this.comp = this.elem.comp;\r\n    this.keysIndex = 0;\r\n    this.canResize = false;\r\n    this.minimumFontSize = 1;\r\n    this.effectsSequence = [];\r\n    this.currentData = {\r\n      ascent: 0,\r\n      boxWidth: this.defaultBoxWidth,\r\n      f: '',\r\n      fStyle: '',\r\n      fWeight: '',\r\n      fc: '',\r\n      j: '',\r\n      justifyOffset: '',\r\n      l: [],\r\n      lh: 0,\r\n      lineWidths: [],\r\n      ls: '',\r\n      of: '',\r\n      s: '',\r\n      sc: '',\r\n      sw: 0,\r\n      t: 0,\r\n      tr: 0,\r\n      sz: 0,\r\n      ps: null,\r\n      fillColorAnim: false,\r\n      strokeColorAnim: false,\r\n      strokeWidthAnim: false,\r\n      yOffset: 0,\r\n      finalSize: 0,\r\n      finalText: [],\r\n      finalLineHeight: 0,\r\n      __complete: false\r\n    };\r\n    this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n    if (!this.searchProperty()) {\r\n      this.completeTextData(this.currentData);\r\n    }\r\n  }\r\n\r\n  TextProperty.prototype.defaultBoxWidth = [0, 0];\r\n\r\n  TextProperty.prototype.copyData = function (obj, data) {\r\n    for (var s in data) {\r\n      if (Object.prototype.hasOwnProperty.call(data, s)) {\r\n        obj[s] = data[s];\r\n      }\r\n    }\r\n\r\n    return obj;\r\n  };\r\n\r\n  TextProperty.prototype.setCurrentData = function (data) {\r\n    if (!data.__complete) {\r\n      this.completeTextData(data);\r\n    }\r\n\r\n    this.currentData = data;\r\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n    this._mdf = true;\r\n  };\r\n\r\n  TextProperty.prototype.searchProperty = function () {\r\n    return this.searchKeyframes();\r\n  };\r\n\r\n  TextProperty.prototype.searchKeyframes = function () {\r\n    this.kf = this.data.d.k.length > 1;\r\n\r\n    if (this.kf) {\r\n      this.addEffect(this.getKeyframeValue.bind(this));\r\n    }\r\n\r\n    return this.kf;\r\n  };\r\n\r\n  TextProperty.prototype.addEffect = function (effectFunction) {\r\n    this.effectsSequence.push(effectFunction);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  TextProperty.prototype.getValue = function (_finalValue) {\r\n    if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n      return;\r\n    }\r\n\r\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n    var currentValue = this.currentData;\r\n    var currentIndex = this.keysIndex;\r\n\r\n    if (this.lock) {\r\n      this.setCurrentData(this.currentData);\r\n      return;\r\n    }\r\n\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var i;\r\n    var len = this.effectsSequence.length;\r\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      // Checking if index changed to prevent creating a new object every time the expression updates.\r\n      if (currentIndex !== this.keysIndex) {\r\n        finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n      } else {\r\n        finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n      }\r\n    }\r\n\r\n    if (currentValue !== finalValue) {\r\n      this.setCurrentData(finalValue);\r\n    }\r\n\r\n    this.v = this.currentData;\r\n    this.pv = this.v;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n  };\r\n\r\n  TextProperty.prototype.getKeyframeValue = function () {\r\n    var textKeys = this.data.d.k;\r\n    var frameNum = this.elem.comp.renderedFrame;\r\n    var i = 0;\r\n    var len = textKeys.length;\r\n\r\n    while (i <= len - 1) {\r\n      if (i === len - 1 || textKeys[i + 1].t > frameNum) {\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    if (this.keysIndex !== i) {\r\n      this.keysIndex = i;\r\n    }\r\n\r\n    return this.data.d.k[this.keysIndex].s;\r\n  };\r\n\r\n  TextProperty.prototype.buildFinalText = function (text) {\r\n    var charactersArray = [];\r\n    var i = 0;\r\n    var len = text.length;\r\n    var charCode;\r\n    var secondCharCode;\r\n    var shouldCombine = false;\r\n\r\n    while (i < len) {\r\n      charCode = text.charCodeAt(i);\r\n\r\n      if (FontManager.isCombinedCharacter(charCode)) {\r\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n      } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n        secondCharCode = text.charCodeAt(i + 1);\r\n\r\n        if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\r\n          if (shouldCombine || FontManager.isModifier(charCode, secondCharCode)) {\r\n            charactersArray[charactersArray.length - 1] += text.substr(i, 2);\r\n            shouldCombine = false;\r\n          } else {\r\n            charactersArray.push(text.substr(i, 2));\r\n          }\r\n\r\n          i += 1;\r\n        } else {\r\n          charactersArray.push(text.charAt(i));\r\n        }\r\n      } else if (charCode > 0xDBFF) {\r\n        secondCharCode = text.charCodeAt(i + 1);\r\n\r\n        if (FontManager.isZeroWidthJoiner(charCode, secondCharCode)) {\r\n          shouldCombine = true;\r\n          charactersArray[charactersArray.length - 1] += text.substr(i, 2);\r\n          i += 1;\r\n        } else {\r\n          charactersArray.push(text.charAt(i));\r\n        }\r\n      } else if (FontManager.isZeroWidthJoiner(charCode)) {\r\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n        shouldCombine = true;\r\n      } else {\r\n        charactersArray.push(text.charAt(i));\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return charactersArray;\r\n  };\r\n\r\n  TextProperty.prototype.completeTextData = function (documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i;\r\n    var len;\r\n    var newLineFlag;\r\n    var index = 0;\r\n    var val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0;\r\n    var currentPos = 0;\r\n    var currentLine = 0;\r\n    var lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j;\r\n    var jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData;\r\n    var cLength = 0;\r\n    var fontProps = getFontProperties(fontData);\r\n    documentData.fWeight = fontProps.weight;\r\n    documentData.fStyle = fontProps.style;\r\n    documentData.finalSize = documentData.s;\r\n    documentData.finalText = this.buildFinalText(documentData.t);\r\n    len = documentData.finalText.length;\r\n    documentData.finalLineHeight = documentData.lh;\r\n    var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\r\n    var charCode;\r\n\r\n    if (documentData.sz) {\r\n      var flag = true;\r\n      var boxWidth = documentData.sz[0];\r\n      var boxHeight = documentData.sz[1];\r\n      var currentHeight;\r\n      var finalText;\r\n\r\n      while (flag) {\r\n        finalText = this.buildFinalText(documentData.t);\r\n        currentHeight = 0;\r\n        lineWidth = 0;\r\n        len = finalText.length;\r\n        trackingOffset = documentData.tr / 1000 * documentData.finalSize;\r\n        var lastSpaceIndex = -1;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          charCode = finalText[i].charCodeAt(0);\r\n          newLineFlag = false;\r\n\r\n          if (finalText[i] === ' ') {\r\n            lastSpaceIndex = i;\r\n          } else if (charCode === 13 || charCode === 3) {\r\n            lineWidth = 0;\r\n            newLineFlag = true;\r\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n          }\r\n\r\n          if (fontManager.chars) {\r\n            charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\r\n          } else {\r\n            // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n            cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n          }\r\n\r\n          if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\r\n            if (lastSpaceIndex === -1) {\r\n              len += 1;\r\n            } else {\r\n              i = lastSpaceIndex;\r\n            }\r\n\r\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n            finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r'); // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n\r\n            lastSpaceIndex = -1;\r\n            lineWidth = 0;\r\n          } else {\r\n            lineWidth += cLength;\r\n            lineWidth += trackingOffset;\r\n          }\r\n        }\r\n\r\n        currentHeight += fontData.ascent * documentData.finalSize / 100;\r\n\r\n        if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n          documentData.finalSize -= 1;\r\n          documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\r\n        } else {\r\n          documentData.finalText = finalText;\r\n          len = documentData.finalText.length;\r\n          flag = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    lineWidth = -trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      newLineFlag = false;\r\n      currentChar = documentData.finalText[i];\r\n      charCode = currentChar.charCodeAt(0);\r\n\r\n      if (charCode === 13 || charCode === 3) {\r\n        uncollapsedSpaces = 0;\r\n        lineWidths.push(lineWidth);\r\n        maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n        lineWidth = -2 * trackingOffset;\r\n        val = '';\r\n        newLineFlag = true;\r\n        currentLine += 1;\r\n      } else {\r\n        val = currentChar;\r\n      }\r\n\r\n      if (fontManager.chars) {\r\n        charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n        cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\r\n      } else {\r\n        // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n        // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n        cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n      } //\r\n\r\n\r\n      if (currentChar === ' ') {\r\n        uncollapsedSpaces += cLength + trackingOffset;\r\n      } else {\r\n        lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n        uncollapsedSpaces = 0;\r\n      }\r\n\r\n      letters.push({\r\n        l: cLength,\r\n        an: cLength,\r\n        add: currentSize,\r\n        n: newLineFlag,\r\n        anIndexes: [],\r\n        val: val,\r\n        line: currentLine,\r\n        animatorJustifyOffset: 0\r\n      });\r\n\r\n      if (anchorGrouping == 2) {\r\n        // eslint-disable-line eqeqeq\r\n        currentSize += cLength;\r\n\r\n        if (val === '' || val === ' ' || i === len - 1) {\r\n          if (val === '' || val === ' ') {\r\n            currentSize -= cLength;\r\n          }\r\n\r\n          while (currentPos <= i) {\r\n            letters[currentPos].an = currentSize;\r\n            letters[currentPos].ind = index;\r\n            letters[currentPos].extra = cLength;\r\n            currentPos += 1;\r\n          }\r\n\r\n          index += 1;\r\n          currentSize = 0;\r\n        }\r\n      } else if (anchorGrouping == 3) {\r\n        // eslint-disable-line eqeqeq\r\n        currentSize += cLength;\r\n\r\n        if (val === '' || i === len - 1) {\r\n          if (val === '') {\r\n            currentSize -= cLength;\r\n          }\r\n\r\n          while (currentPos <= i) {\r\n            letters[currentPos].an = currentSize;\r\n            letters[currentPos].ind = index;\r\n            letters[currentPos].extra = cLength;\r\n            currentPos += 1;\r\n          }\r\n\r\n          currentSize = 0;\r\n          index += 1;\r\n        }\r\n      } else {\r\n        letters[index].ind = index;\r\n        letters[index].extra = 0;\r\n        index += 1;\r\n      }\r\n    }\r\n\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n\r\n    if (documentData.sz) {\r\n      documentData.boxWidth = documentData.sz[0];\r\n      documentData.justifyOffset = 0;\r\n    } else {\r\n      documentData.boxWidth = maxLineWidth;\r\n\r\n      switch (documentData.j) {\r\n        case 1:\r\n          documentData.justifyOffset = -documentData.boxWidth;\r\n          break;\r\n\r\n        case 2:\r\n          documentData.justifyOffset = -documentData.boxWidth / 2;\r\n          break;\r\n\r\n        default:\r\n          documentData.justifyOffset = 0;\r\n      }\r\n    }\r\n\r\n    documentData.lineWidths = lineWidths;\r\n    var animators = data.a;\r\n    var animatorData;\r\n    var letterData;\r\n    jLen = animators.length;\r\n    var based;\r\n    var ind;\r\n    var indexes = [];\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      animatorData = animators[j];\r\n\r\n      if (animatorData.a.sc) {\r\n        documentData.strokeColorAnim = true;\r\n      }\r\n\r\n      if (animatorData.a.sw) {\r\n        documentData.strokeWidthAnim = true;\r\n      }\r\n\r\n      if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\r\n        documentData.fillColorAnim = true;\r\n      }\r\n\r\n      ind = 0;\r\n      based = animatorData.s.b;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        letterData = letters[i];\r\n        letterData.anIndexes[j] = ind;\r\n\r\n        if (based == 1 && letterData.val !== '' || based == 2 && letterData.val !== '' && letterData.val !== ' ' || based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1) || based == 4 && (letterData.n || i == len - 1)) {\r\n          // eslint-disable-line eqeqeq\r\n          if (animatorData.s.rn === 1) {\r\n            indexes.push(ind);\r\n          }\r\n\r\n          ind += 1;\r\n        }\r\n      }\r\n\r\n      data.a[j].s.totalChars = ind;\r\n      var currentInd = -1;\r\n      var newInd;\r\n\r\n      if (animatorData.s.rn === 1) {\r\n        for (i = 0; i < len; i += 1) {\r\n          letterData = letters[i];\r\n\r\n          if (currentInd != letterData.anIndexes[j]) {\r\n            // eslint-disable-line eqeqeq\r\n            currentInd = letterData.anIndexes[j];\r\n            newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\r\n          }\r\n\r\n          letterData.anIndexes[j] = newInd;\r\n        }\r\n      }\r\n    }\r\n\r\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent * documentData.finalSize / 100;\r\n  };\r\n\r\n  TextProperty.prototype.updateDocumentData = function (newData, index) {\r\n    index = index === undefined ? this.keysIndex : index;\r\n    var dData = this.copyData({}, this.data.d.k[index].s);\r\n    dData = this.copyData(dData, newData);\r\n    this.data.d.k[index].s = dData;\r\n    this.recalculate(index);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  TextProperty.prototype.recalculate = function (index) {\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    this.keysIndex = 0;\r\n    this._isFirstFrame = true;\r\n    this.getValue(dData);\r\n  };\r\n\r\n  TextProperty.prototype.canResizeFont = function (_canResize) {\r\n    this.canResize = _canResize;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  TextProperty.prototype.setMinimumFontSize = function (_fontValue) {\r\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  var TextSelectorProp = function () {\r\n    var max = Math.max;\r\n    var min = Math.min;\r\n    var floor = Math.floor;\r\n\r\n    function TextSelectorPropFactory(elem, data) {\r\n      this._currentTextLength = -1;\r\n      this.k = false;\r\n      this.data = data;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.finalS = 0;\r\n      this.finalE = 0;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.s = PropertyFactory.getProp(elem, data.s || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n\r\n      if ('e' in data) {\r\n        this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\r\n      } else {\r\n        this.e = {\r\n          v: 100\r\n        };\r\n      }\r\n\r\n      this.o = PropertyFactory.getProp(elem, data.o || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n      this.xe = PropertyFactory.getProp(elem, data.xe || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n      this.ne = PropertyFactory.getProp(elem, data.ne || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n      this.sm = PropertyFactory.getProp(elem, data.sm || {\r\n        k: 100\r\n      }, 0, 0, this);\r\n      this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\r\n\r\n      if (!this.dynamicProperties.length) {\r\n        this.getValue();\r\n      }\r\n    }\r\n\r\n    TextSelectorPropFactory.prototype = {\r\n      getMult: function getMult(ind) {\r\n        if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n          this.getValue();\r\n        }\r\n\r\n        var x1 = 0;\r\n        var y1 = 0;\r\n        var x2 = 1;\r\n        var y2 = 1;\r\n\r\n        if (this.ne.v > 0) {\r\n          x1 = this.ne.v / 100.0;\r\n        } else {\r\n          y1 = -this.ne.v / 100.0;\r\n        }\r\n\r\n        if (this.xe.v > 0) {\r\n          x2 = 1.0 - this.xe.v / 100.0;\r\n        } else {\r\n          y2 = 1.0 + this.xe.v / 100.0;\r\n        }\r\n\r\n        var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\r\n        var mult = 0;\r\n        var s = this.finalS;\r\n        var e = this.finalE;\r\n        var type = this.data.sh;\r\n\r\n        if (type === 2) {\r\n          if (e === s) {\r\n            mult = ind >= e ? 1 : 0;\r\n          } else {\r\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 3) {\r\n          if (e === s) {\r\n            mult = ind >= e ? 0 : 1;\r\n          } else {\r\n            mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 4) {\r\n          if (e === s) {\r\n            mult = 0;\r\n          } else {\r\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n\r\n            if (mult < 0.5) {\r\n              mult *= 2;\r\n            } else {\r\n              mult = 1 - 2 * (mult - 0.5);\r\n            }\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 5) {\r\n          if (e === s) {\r\n            mult = 0;\r\n          } else {\r\n            var tot = e - s;\r\n            /* ind += 0.5;\r\n                      mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\r\n\r\n            ind = min(max(0, ind + 0.5 - s), e - s);\r\n            var x = -tot / 2 + ind;\r\n            var a = tot / 2;\r\n            mult = Math.sqrt(1 - x * x / (a * a));\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 6) {\r\n          if (e === s) {\r\n            mult = 0;\r\n          } else {\r\n            ind = min(max(0, ind + 0.5 - s), e - s);\r\n            mult = (1 + Math.cos(Math.PI + Math.PI * 2 * ind / (e - s))) / 2; // eslint-disable-line\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else {\r\n          if (ind >= floor(s)) {\r\n            if (ind - s < 0) {\r\n              mult = max(0, min(min(e, 1) - (s - ind), 1));\r\n            } else {\r\n              mult = max(0, min(e - ind, 1));\r\n            }\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } // Smoothness implementation.\r\n        // The smoothness represents a reduced range of the original [0; 1] range.\r\n        // if smoothness is 25%, the new range will be [0.375; 0.625]\r\n        // Steps are:\r\n        // - find the lower value of the new range (threshold)\r\n        // - if multiplier is smaller than that value, floor it to 0\r\n        // - if it is larger,\r\n        //     - subtract the threshold\r\n        //     - divide it by the smoothness (this will return the range to [0; 1])\r\n        // Note: If it doesn't work on some scenarios, consider applying it before the easer.\r\n\r\n\r\n        if (this.sm.v !== 100) {\r\n          var smoothness = this.sm.v * 0.01;\r\n\r\n          if (smoothness === 0) {\r\n            smoothness = 0.00000001;\r\n          }\r\n\r\n          var threshold = 0.5 - smoothness * 0.5;\r\n\r\n          if (mult < threshold) {\r\n            mult = 0;\r\n          } else {\r\n            mult = (mult - threshold) / smoothness;\r\n\r\n            if (mult > 1) {\r\n              mult = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        return mult * this.a.v;\r\n      },\r\n      getValue: function getValue(newCharsFlag) {\r\n        this.iterateDynamicProperties();\r\n        this._mdf = newCharsFlag || this._mdf;\r\n        this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n\r\n        if (newCharsFlag && this.data.r === 2) {\r\n          this.e.v = this._currentTextLength;\r\n        }\r\n\r\n        var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n        var o = this.o.v / divisor;\r\n        var s = this.s.v / divisor + o;\r\n        var e = this.e.v / divisor + o;\r\n\r\n        if (s > e) {\r\n          var _s = s;\r\n          s = e;\r\n          e = _s;\r\n        }\r\n\r\n        this.finalS = s;\r\n        this.finalE = e;\r\n      }\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\r\n\r\n    function getTextSelectorProp(elem, data, arr) {\r\n      return new TextSelectorPropFactory(elem, data, arr);\r\n    }\r\n\r\n    return {\r\n      getTextSelectorProp: getTextSelectorProp\r\n    };\r\n  }();\r\n\r\n  function TextAnimatorDataProperty(elem, animatorProps, container) {\r\n    var defaultData = {\r\n      propType: false\r\n    };\r\n    var getProp = PropertyFactory.getProp;\r\n    var textAnimatorAnimatables = animatorProps.a;\r\n    this.a = {\r\n      r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\r\n      rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\r\n      ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\r\n      sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\r\n      sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\r\n      s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\r\n      a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\r\n      o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\r\n      p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\r\n      sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\r\n      sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\r\n      fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\r\n      fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\r\n      fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\r\n      fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\r\n      t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData\r\n    };\r\n    this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\r\n    this.s.t = animatorProps.s.t;\r\n  }\r\n\r\n  function TextAnimatorProperty(textData, renderType, elem) {\r\n    this._isFirstFrame = true;\r\n    this._hasMaskedPath = false;\r\n    this._frameId = -1;\r\n    this._textData = textData;\r\n    this._renderType = renderType;\r\n    this._elem = elem;\r\n    this._animatorsData = createSizedArray(this._textData.a.length);\r\n    this._pathData = {};\r\n    this._moreOptions = {\r\n      alignment: {}\r\n    };\r\n    this.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n    this.initDynamicPropertyContainer(elem);\r\n  }\r\n\r\n  TextAnimatorProperty.prototype.searchProperties = function () {\r\n    var i;\r\n    var len = this._textData.a.length;\r\n    var animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      animatorProps = this._textData.a[i];\r\n      this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n    }\r\n\r\n    if (this._textData.p && 'm' in this._textData.p) {\r\n      this._pathData = {\r\n        a: getProp(this._elem, this._textData.p.a, 0, 0, this),\r\n        f: getProp(this._elem, this._textData.p.f, 0, 0, this),\r\n        l: getProp(this._elem, this._textData.p.l, 0, 0, this),\r\n        r: getProp(this._elem, this._textData.p.r, 0, 0, this),\r\n        p: getProp(this._elem, this._textData.p.p, 0, 0, this),\r\n        m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n      };\r\n      this._hasMaskedPath = true;\r\n    } else {\r\n      this._hasMaskedPath = false;\r\n    }\r\n\r\n    this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\r\n  };\r\n\r\n  TextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n\r\n    if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n      return;\r\n    }\r\n\r\n    this._isFirstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var xPos;\r\n    var yPos;\r\n    var i;\r\n    var len;\r\n    var letters = documentData.l;\r\n    var pathInfo;\r\n    var currentLength;\r\n    var currentPoint;\r\n    var segmentLength;\r\n    var flag;\r\n    var pointInd;\r\n    var segmentInd;\r\n    var prevPoint;\r\n    var points;\r\n    var segments;\r\n    var partialLength;\r\n    var totalLength;\r\n    var perc;\r\n    var tanAngle;\r\n    var mask;\r\n\r\n    if (this._hasMaskedPath) {\r\n      mask = this._pathData.m;\r\n\r\n      if (!this._pathData.n || this._pathData._mdf) {\r\n        var paths = mask.v;\r\n\r\n        if (this._pathData.r.v) {\r\n          paths = paths.reverse();\r\n        } // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n\r\n\r\n        pathInfo = {\r\n          tLength: 0,\r\n          segments: []\r\n        };\r\n        len = paths._length - 1;\r\n        var bezierData;\r\n        totalLength = 0;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[i + 1], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n          pathInfo.tLength += bezierData.segmentLength;\r\n          pathInfo.segments.push(bezierData);\r\n          totalLength += bezierData.segmentLength;\r\n        }\r\n\r\n        i = len;\r\n\r\n        if (mask.v.c) {\r\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[0], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n          pathInfo.tLength += bezierData.segmentLength;\r\n          pathInfo.segments.push(bezierData);\r\n          totalLength += bezierData.segmentLength;\r\n        }\r\n\r\n        this._pathData.pi = pathInfo;\r\n      }\r\n\r\n      pathInfo = this._pathData.pi;\r\n      currentLength = this._pathData.f.v;\r\n      segmentInd = 0;\r\n      pointInd = 1;\r\n      segmentLength = 0;\r\n      flag = true;\r\n      segments = pathInfo.segments;\r\n\r\n      if (currentLength < 0 && mask.v.c) {\r\n        if (pathInfo.tLength < Math.abs(currentLength)) {\r\n          currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n        }\r\n\r\n        segmentInd = segments.length - 1;\r\n        points = segments[segmentInd].points;\r\n        pointInd = points.length - 1;\r\n\r\n        while (currentLength < 0) {\r\n          currentLength += points[pointInd].partialLength;\r\n          pointInd -= 1;\r\n\r\n          if (pointInd < 0) {\r\n            segmentInd -= 1;\r\n            points = segments[segmentInd].points;\r\n            pointInd = points.length - 1;\r\n          }\r\n        }\r\n      }\r\n\r\n      points = segments[segmentInd].points;\r\n      prevPoint = points[pointInd - 1];\r\n      currentPoint = points[pointInd];\r\n      partialLength = currentPoint.partialLength;\r\n    }\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.finalSize * 1.2 * 0.714;\r\n    var firstLine = true;\r\n    var animatorProps;\r\n    var animatorSelector;\r\n    var j;\r\n    var jLen;\r\n    var letterValue;\r\n    jLen = animators.length;\r\n    var mult;\r\n    var ind = -1;\r\n    var offf;\r\n    var xPathPos;\r\n    var yPathPos;\r\n    var initPathPos = currentLength;\r\n    var initSegmentInd = segmentInd;\r\n    var initPointInd = pointInd;\r\n    var currentLine = -1;\r\n    var elemOpacity;\r\n    var sc;\r\n    var sw;\r\n    var fc;\r\n    var k;\r\n    var letterSw;\r\n    var letterSc;\r\n    var letterFc;\r\n    var letterM = '';\r\n    var letterP = this.defaultPropsArray;\r\n    var letterO; //\r\n\r\n    if (documentData.j === 2 || documentData.j === 1) {\r\n      var animatorJustifyOffset = 0;\r\n      var animatorFirstCharOffset = 0;\r\n      var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n      var lastIndex = 0;\r\n      var isNewLine = true;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (letters[i].n) {\r\n          if (animatorJustifyOffset) {\r\n            animatorJustifyOffset += animatorFirstCharOffset;\r\n          }\r\n\r\n          while (lastIndex < i) {\r\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n            lastIndex += 1;\r\n          }\r\n\r\n          animatorJustifyOffset = 0;\r\n          isNewLine = true;\r\n        } else {\r\n          for (j = 0; j < jLen; j += 1) {\r\n            animatorProps = animators[j].a;\r\n\r\n            if (animatorProps.t.propType) {\r\n              if (isNewLine && documentData.j === 2) {\r\n                animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n              }\r\n\r\n              animatorSelector = animators[j].s;\r\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n              if (mult.length) {\r\n                animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\r\n              } else {\r\n                animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\r\n              }\r\n            }\r\n          }\r\n\r\n          isNewLine = false;\r\n        }\r\n      }\r\n\r\n      if (animatorJustifyOffset) {\r\n        animatorJustifyOffset += animatorFirstCharOffset;\r\n      }\r\n\r\n      while (lastIndex < i) {\r\n        letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n        lastIndex += 1;\r\n      }\r\n    } //\r\n\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      matrixHelper.reset();\r\n      elemOpacity = 1;\r\n\r\n      if (letters[i].n) {\r\n        xPos = 0;\r\n        yPos += documentData.yOffset;\r\n        yPos += firstLine ? 1 : 0;\r\n        currentLength = initPathPos;\r\n        firstLine = false;\r\n\r\n        if (this._hasMaskedPath) {\r\n          segmentInd = initSegmentInd;\r\n          pointInd = initPointInd;\r\n          points = segments[segmentInd].points;\r\n          prevPoint = points[pointInd - 1];\r\n          currentPoint = points[pointInd];\r\n          partialLength = currentPoint.partialLength;\r\n          segmentLength = 0;\r\n        }\r\n\r\n        letterM = '';\r\n        letterFc = '';\r\n        letterSw = '';\r\n        letterO = '';\r\n        letterP = this.defaultPropsArray;\r\n      } else {\r\n        if (this._hasMaskedPath) {\r\n          if (currentLine !== letters[i].line) {\r\n            switch (documentData.j) {\r\n              case 1:\r\n                currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                break;\r\n\r\n              case 2:\r\n                currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\r\n                break;\r\n\r\n              default:\r\n                break;\r\n            }\r\n\r\n            currentLine = letters[i].line;\r\n          }\r\n\r\n          if (ind !== letters[i].ind) {\r\n            if (letters[ind]) {\r\n              currentLength += letters[ind].extra;\r\n            }\r\n\r\n            currentLength += letters[i].an / 2;\r\n            ind = letters[i].ind;\r\n          }\r\n\r\n          currentLength += alignment[0] * letters[i].an * 0.005;\r\n          var animatorOffset = 0;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            animatorProps = animators[j].a;\r\n\r\n            if (animatorProps.p.propType) {\r\n              animatorSelector = animators[j].s;\r\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n              if (mult.length) {\r\n                animatorOffset += animatorProps.p.v[0] * mult[0];\r\n              } else {\r\n                animatorOffset += animatorProps.p.v[0] * mult;\r\n              }\r\n            }\r\n\r\n            if (animatorProps.a.propType) {\r\n              animatorSelector = animators[j].s;\r\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n              if (mult.length) {\r\n                animatorOffset += animatorProps.a.v[0] * mult[0];\r\n              } else {\r\n                animatorOffset += animatorProps.a.v[0] * mult;\r\n              }\r\n            }\r\n          }\r\n\r\n          flag = true; // Force alignment only works with a single line for now\r\n\r\n          if (this._pathData.a.v) {\r\n            currentLength = letters[0].an * 0.5 + (totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind / (len - 1);\r\n            currentLength += this._pathData.f.v;\r\n          }\r\n\r\n          while (flag) {\r\n            if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n              perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n              xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n              yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n              matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -(alignment[1] * yOff) * 0.01);\r\n              flag = false;\r\n            } else if (points) {\r\n              segmentLength += currentPoint.partialLength;\r\n              pointInd += 1;\r\n\r\n              if (pointInd >= points.length) {\r\n                pointInd = 0;\r\n                segmentInd += 1;\r\n\r\n                if (!segments[segmentInd]) {\r\n                  if (mask.v.c) {\r\n                    pointInd = 0;\r\n                    segmentInd = 0;\r\n                    points = segments[segmentInd].points;\r\n                  } else {\r\n                    segmentLength -= currentPoint.partialLength;\r\n                    points = null;\r\n                  }\r\n                } else {\r\n                  points = segments[segmentInd].points;\r\n                }\r\n              }\r\n\r\n              if (points) {\r\n                prevPoint = currentPoint;\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n              }\r\n            }\r\n          }\r\n\r\n          offf = letters[i].an / 2 - letters[i].add;\r\n          matrixHelper.translate(-offf, 0, 0);\r\n        } else {\r\n          offf = letters[i].an / 2 - letters[i].add;\r\n          matrixHelper.translate(-offf, 0, 0); // Grouping alignment\r\n\r\n          matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -alignment[1] * yOff * 0.01, 0);\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.t.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars); // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n\r\n            if (xPos !== 0 || documentData.j !== 0) {\r\n              if (this._hasMaskedPath) {\r\n                if (mult.length) {\r\n                  currentLength += animatorProps.t.v * mult[0];\r\n                } else {\r\n                  currentLength += animatorProps.t.v * mult;\r\n                }\r\n              } else if (mult.length) {\r\n                xPos += animatorProps.t.v * mult[0];\r\n              } else {\r\n                xPos += animatorProps.t.v * mult;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        if (documentData.strokeWidthAnim) {\r\n          sw = documentData.sw || 0;\r\n        }\r\n\r\n        if (documentData.strokeColorAnim) {\r\n          if (documentData.sc) {\r\n            sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n          } else {\r\n            sc = [0, 0, 0];\r\n          }\r\n        }\r\n\r\n        if (documentData.fillColorAnim && documentData.fc) {\r\n          fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.a.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n            if (mult.length) {\r\n              matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\r\n            } else {\r\n              matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\r\n            }\r\n          }\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.s.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n            if (mult.length) {\r\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult[0], 1 + (animatorProps.s.v[1] - 1) * mult[1], 1);\r\n            } else {\r\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult, 1 + (animatorProps.s.v[1] - 1) * mult, 1);\r\n            }\r\n          }\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n          if (animatorProps.sk.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n            } else {\r\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.r.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n            } else {\r\n              matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.ry.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\r\n            } else {\r\n              matrixHelper.rotateY(animatorProps.ry.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.rx.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\r\n            } else {\r\n              matrixHelper.rotateX(animatorProps.rx.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.o.propType) {\r\n            if (mult.length) {\r\n              elemOpacity += (animatorProps.o.v * mult[0] - elemOpacity) * mult[0];\r\n            } else {\r\n              elemOpacity += (animatorProps.o.v * mult - elemOpacity) * mult;\r\n            }\r\n          }\r\n\r\n          if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n            if (mult.length) {\r\n              sw += animatorProps.sw.v * mult[0];\r\n            } else {\r\n              sw += animatorProps.sw.v * mult;\r\n            }\r\n          }\r\n\r\n          if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n            for (k = 0; k < 3; k += 1) {\r\n              if (mult.length) {\r\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\r\n              } else {\r\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (documentData.fillColorAnim && documentData.fc) {\r\n            if (animatorProps.fc.propType) {\r\n              for (k = 0; k < 3; k += 1) {\r\n                if (mult.length) {\r\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\r\n                } else {\r\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (animatorProps.fh.propType) {\r\n              if (mult.length) {\r\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\r\n              } else {\r\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult);\r\n              }\r\n            }\r\n\r\n            if (animatorProps.fs.propType) {\r\n              if (mult.length) {\r\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\r\n              } else {\r\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\r\n              }\r\n            }\r\n\r\n            if (animatorProps.fb.propType) {\r\n              if (mult.length) {\r\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\r\n              } else {\r\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.p.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n            if (this._hasMaskedPath) {\r\n              if (mult.length) {\r\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n              } else {\r\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n              }\r\n            } else if (mult.length) {\r\n              matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n            } else {\r\n              matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (documentData.strokeWidthAnim) {\r\n          letterSw = sw < 0 ? 0 : sw;\r\n        }\r\n\r\n        if (documentData.strokeColorAnim) {\r\n          letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\r\n        }\r\n\r\n        if (documentData.fillColorAnim && documentData.fc) {\r\n          letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\r\n        }\r\n\r\n        if (this._hasMaskedPath) {\r\n          matrixHelper.translate(0, -documentData.ls);\r\n          matrixHelper.translate(0, alignment[1] * yOff * 0.01 + yPos, 0);\r\n\r\n          if (this._pathData.p.v) {\r\n            tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n            var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n\r\n            if (currentPoint.point[0] < prevPoint.point[0]) {\r\n              rot += 180;\r\n            }\r\n\r\n            matrixHelper.rotate(-rot * Math.PI / 180);\r\n          }\r\n\r\n          matrixHelper.translate(xPathPos, yPathPos, 0);\r\n          currentLength -= alignment[0] * letters[i].an * 0.005;\r\n\r\n          if (letters[i + 1] && ind !== letters[i + 1].ind) {\r\n            currentLength += letters[i].an / 2;\r\n            currentLength += documentData.tr * 0.001 * documentData.finalSize;\r\n          }\r\n        } else {\r\n          matrixHelper.translate(xPos, yPos, 0);\r\n\r\n          if (documentData.ps) {\r\n            // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n            matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n          }\r\n\r\n          switch (documentData.j) {\r\n            case 1:\r\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\r\n              break;\r\n\r\n            case 2:\r\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\r\n              break;\r\n\r\n            default:\r\n              break;\r\n          }\r\n\r\n          matrixHelper.translate(0, -documentData.ls);\r\n          matrixHelper.translate(offf, 0, 0);\r\n          matrixHelper.translate(alignment[0] * letters[i].an * 0.005, alignment[1] * yOff * 0.01, 0);\r\n          xPos += letters[i].l + documentData.tr * 0.001 * documentData.finalSize;\r\n        }\r\n\r\n        if (renderType === 'html') {\r\n          letterM = matrixHelper.toCSS();\r\n        } else if (renderType === 'svg') {\r\n          letterM = matrixHelper.to2dCSS();\r\n        } else {\r\n          letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\r\n        }\r\n\r\n        letterO = elemOpacity;\r\n      }\r\n\r\n      if (renderedLettersCount <= i) {\r\n        letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\r\n        this.renderedLetters.push(letterValue);\r\n        renderedLettersCount += 1;\r\n        this.lettersChangedFlag = true;\r\n      } else {\r\n        letterValue = this.renderedLetters[i];\r\n        this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n      }\r\n    }\r\n  };\r\n\r\n  TextAnimatorProperty.prototype.getValue = function () {\r\n    if (this._elem.globalData.frameId === this._frameId) {\r\n      return;\r\n    }\r\n\r\n    this._frameId = this._elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n  };\r\n\r\n  TextAnimatorProperty.prototype.mHelper = new Matrix();\r\n  TextAnimatorProperty.prototype.defaultPropsArray = [];\r\n  extendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\r\n\r\n  function ITextElement() {}\r\n\r\n  ITextElement.prototype.initElement = function (data, globalData, comp) {\r\n    this.lettersChangedFlag = true;\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n    this.initRenderable();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    this.createContent();\r\n    this.hide();\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n  };\r\n\r\n  ITextElement.prototype.prepareFrame = function (num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n\r\n    if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n      this.buildNewText();\r\n      this.textProperty._isFirstFrame = false;\r\n      this.textProperty._mdf = false;\r\n    }\r\n  };\r\n\r\n  ITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\r\n    var j;\r\n    var jLen = shapes.length;\r\n    var pathNodes;\r\n    var shapeStr = '';\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      if (shapes[j].ty === 'sh') {\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n      }\r\n    }\r\n\r\n    return shapeStr;\r\n  };\r\n\r\n  ITextElement.prototype.updateDocumentData = function (newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n  };\r\n\r\n  ITextElement.prototype.canResizeFont = function (_canResize) {\r\n    this.textProperty.canResizeFont(_canResize);\r\n  };\r\n\r\n  ITextElement.prototype.setMinimumFontSize = function (_fontSize) {\r\n    this.textProperty.setMinimumFontSize(_fontSize);\r\n  };\r\n\r\n  ITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if (documentData.ps) {\r\n      matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n    }\r\n\r\n    matrixHelper.translate(0, -documentData.ls, 0);\r\n\r\n    switch (documentData.j) {\r\n      case 1:\r\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\r\n        break;\r\n\r\n      case 2:\r\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n  };\r\n\r\n  ITextElement.prototype.buildColor = function (colorData) {\r\n    return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\r\n  };\r\n\r\n  ITextElement.prototype.emptyProp = new LetterProps();\r\n\r\n  ITextElement.prototype.destroy = function () {};\r\n\r\n  var emptyShapeData = {\r\n    shapes: []\r\n  };\r\n\r\n  function SVGTextLottieElement(data, globalData, comp) {\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\r\n\r\n  SVGTextLottieElement.prototype.createContent = function () {\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n      this.textContainer = createNS('text');\r\n    }\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.buildTextContents = function (textArray) {\r\n    var i = 0;\r\n    var len = textArray.length;\r\n    var textContents = [];\r\n    var currentTextContent = '';\r\n\r\n    while (i < len) {\r\n      if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n        textContents.push(currentTextContent);\r\n        currentTextContent = '';\r\n      } else {\r\n        currentTextContent += textArray[i];\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    textContents.push(currentTextContent);\r\n    return textContents;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.buildShapeData = function (data, scale) {\r\n    // data should probably be cloned to apply scale separately to each instance of a text on different layers\r\n    // but since text internal content gets only rendered once and then it's never rerendered,\r\n    // it's probably safe not to clone data and reuse always the same instance even if the object is mutated.\r\n    // Avoiding cloning is preferred since cloning each character shape data is expensive\r\n    if (data.shapes && data.shapes.length) {\r\n      var shape = data.shapes[0];\r\n\r\n      if (shape.it) {\r\n        var shapeItem = shape.it[shape.it.length - 1];\r\n\r\n        if (shapeItem.s) {\r\n          shapeItem.s.k[0] = scale;\r\n          shapeItem.s.k[1] = scale;\r\n        }\r\n      }\r\n    }\r\n\r\n    return data;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.buildNewText = function () {\r\n    this.addDynamicProperty(this);\r\n    var i;\r\n    var len;\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n\r\n    if (documentData.fc) {\r\n      this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    } else {\r\n      this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n\r\n    if (documentData.sc) {\r\n      this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n      this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n\r\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n\r\n    if (fontData.fClass) {\r\n      this.layerElement.setAttribute('class', fontData.fClass);\r\n    } else {\r\n      this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n      var fWeight = documentData.fWeight;\r\n      var fStyle = documentData.fStyle;\r\n      this.layerElement.setAttribute('font-style', fStyle);\r\n      this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n\r\n    this.layerElement.setAttribute('aria-label', documentData.t);\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = !!this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapeStr = '';\r\n    var singleShape = this.data.singleShape;\r\n    var xPos = 0;\r\n    var yPos = 0;\r\n    var firstLine = true;\r\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n\r\n    if (singleShape && !usesGlyphs && !documentData.sz) {\r\n      var tElement = this.textContainer;\r\n      var justify = 'start';\r\n\r\n      switch (documentData.j) {\r\n        case 1:\r\n          justify = 'end';\r\n          break;\r\n\r\n        case 2:\r\n          justify = 'middle';\r\n          break;\r\n\r\n        default:\r\n          justify = 'start';\r\n          break;\r\n      }\r\n\r\n      tElement.setAttribute('text-anchor', justify);\r\n      tElement.setAttribute('letter-spacing', trackingOffset);\r\n      var textContent = this.buildTextContents(documentData.finalText);\r\n      len = textContent.length;\r\n      yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        tSpan = this.textSpans[i].span || createNS('tspan');\r\n        tSpan.textContent = textContent[i];\r\n        tSpan.setAttribute('x', 0);\r\n        tSpan.setAttribute('y', yPos);\r\n        tSpan.style.display = 'inherit';\r\n        tElement.appendChild(tSpan);\r\n\r\n        if (!this.textSpans[i]) {\r\n          this.textSpans[i] = {\r\n            span: null,\r\n            glyph: null\r\n          };\r\n        }\r\n\r\n        this.textSpans[i].span = tSpan;\r\n        yPos += documentData.finalLineHeight;\r\n      }\r\n\r\n      this.layerElement.appendChild(tElement);\r\n    } else {\r\n      var cachedSpansLength = this.textSpans.length;\r\n      var charData;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (!this.textSpans[i]) {\r\n          this.textSpans[i] = {\r\n            span: null,\r\n            childSpan: null,\r\n            glyph: null\r\n          };\r\n        }\r\n\r\n        if (!usesGlyphs || !singleShape || i === 0) {\r\n          tSpan = cachedSpansLength > i ? this.textSpans[i].span : createNS(usesGlyphs ? 'g' : 'text');\r\n\r\n          if (cachedSpansLength <= i) {\r\n            tSpan.setAttribute('stroke-linecap', 'butt');\r\n            tSpan.setAttribute('stroke-linejoin', 'round');\r\n            tSpan.setAttribute('stroke-miterlimit', '4');\r\n            this.textSpans[i].span = tSpan;\r\n\r\n            if (usesGlyphs) {\r\n              var childSpan = createNS('g');\r\n              tSpan.appendChild(childSpan);\r\n              this.textSpans[i].childSpan = childSpan;\r\n            }\r\n\r\n            this.textSpans[i].span = tSpan;\r\n            this.layerElement.appendChild(tSpan);\r\n          }\r\n\r\n          tSpan.style.display = 'inherit';\r\n        }\r\n\r\n        matrixHelper.reset();\r\n\r\n        if (singleShape) {\r\n          if (letters[i].n) {\r\n            xPos = -trackingOffset;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            firstLine = false;\r\n          }\r\n\r\n          this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n          xPos += letters[i].l || 0; // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n\r\n          xPos += trackingOffset;\r\n        }\r\n\r\n        if (usesGlyphs) {\r\n          charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n          var glyphElement; // t === 1 means the character has been replaced with an animated shaped\r\n\r\n          if (charData.t === 1) {\r\n            glyphElement = new SVGCompElement(charData.data, this.globalData, this);\r\n          } else {\r\n            var data = emptyShapeData;\r\n\r\n            if (charData.data && charData.data.shapes) {\r\n              data = this.buildShapeData(charData.data, documentData.finalSize);\r\n            }\r\n\r\n            glyphElement = new SVGShapeElement(data, this.globalData, this);\r\n          }\r\n\r\n          if (this.textSpans[i].glyph) {\r\n            var glyph = this.textSpans[i].glyph;\r\n            this.textSpans[i].childSpan.removeChild(glyph.layerElement);\r\n            glyph.destroy();\r\n          }\r\n\r\n          this.textSpans[i].glyph = glyphElement;\r\n          glyphElement._debug = true;\r\n          glyphElement.prepareFrame(0);\r\n          glyphElement.renderFrame();\r\n          this.textSpans[i].childSpan.appendChild(glyphElement.layerElement); // when using animated shapes, the layer will be scaled instead of replacing the internal scale\r\n          // this might have issues with strokes and might need a different solution\r\n\r\n          if (charData.t === 1) {\r\n            this.textSpans[i].childSpan.setAttribute('transform', 'scale(' + documentData.finalSize / 100 + ',' + documentData.finalSize / 100 + ')');\r\n          }\r\n        } else {\r\n          if (singleShape) {\r\n            tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\r\n          }\r\n\r\n          tSpan.textContent = letters[i].val;\r\n          tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n        } //\r\n\r\n      }\r\n\r\n      if (singleShape && tSpan) {\r\n        tSpan.setAttribute('d', shapeStr);\r\n      }\r\n    }\r\n\r\n    while (i < this.textSpans.length) {\r\n      this.textSpans[i].span.style.display = 'none';\r\n      i += 1;\r\n    }\r\n\r\n    this._sizeChanged = true;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.sourceRectAtTime = function () {\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderInnerContent();\r\n\r\n    if (this._sizeChanged) {\r\n      this._sizeChanged = false;\r\n      var textBox = this.layerElement.getBBox();\r\n      this.bbox = {\r\n        top: textBox.y,\r\n        left: textBox.x,\r\n        width: textBox.width,\r\n        height: textBox.height\r\n      };\r\n    }\r\n\r\n    return this.bbox;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.getValue = function () {\r\n    var i;\r\n    var len = this.textSpans.length;\r\n    var glyphElement;\r\n    this.renderedFrame = this.comp.renderedFrame;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      glyphElement = this.textSpans[i].glyph;\r\n\r\n      if (glyphElement) {\r\n        glyphElement.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n\r\n        if (glyphElement._mdf) {\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.renderInnerContent = function () {\r\n    if (!this.data.singleShape || this._mdf) {\r\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n\r\n      if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\r\n        this._sizeChanged = true;\r\n        var i;\r\n        var len;\r\n        var renderedLetters = this.textAnimator.renderedLetters;\r\n        var letters = this.textProperty.currentData.l;\r\n        len = letters.length;\r\n        var renderedLetter;\r\n        var textSpan;\r\n        var glyphElement;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          if (!letters[i].n) {\r\n            renderedLetter = renderedLetters[i];\r\n            textSpan = this.textSpans[i].span;\r\n            glyphElement = this.textSpans[i].glyph;\r\n\r\n            if (glyphElement) {\r\n              glyphElement.renderFrame();\r\n            }\r\n\r\n            if (renderedLetter._mdf.m) {\r\n              textSpan.setAttribute('transform', renderedLetter.m);\r\n            }\r\n\r\n            if (renderedLetter._mdf.o) {\r\n              textSpan.setAttribute('opacity', renderedLetter.o);\r\n            }\r\n\r\n            if (renderedLetter._mdf.sw) {\r\n              textSpan.setAttribute('stroke-width', renderedLetter.sw);\r\n            }\r\n\r\n            if (renderedLetter._mdf.sc) {\r\n              textSpan.setAttribute('stroke', renderedLetter.sc);\r\n            }\r\n\r\n            if (renderedLetter._mdf.fc) {\r\n              textSpan.setAttribute('fill', renderedLetter.fc);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  function ISolidElement(data, globalData, comp) {\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([IImageElement], ISolidElement);\r\n\r\n  ISolidElement.prototype.createContent = function () {\r\n    var rect = createNS('rect'); /// /rect.style.width = this.data.sw;\r\n    /// /rect.style.height = this.data.sh;\r\n    /// /rect.style.fill = this.data.sc;\r\n\r\n    rect.setAttribute('width', this.data.sw);\r\n    rect.setAttribute('height', this.data.sh);\r\n    rect.setAttribute('fill', this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n  };\r\n\r\n  function NullElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initFrame();\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n  }\r\n\r\n  NullElement.prototype.prepareFrame = function (num) {\r\n    this.prepareProperties(num, true);\r\n  };\r\n\r\n  NullElement.prototype.renderFrame = function () {};\r\n\r\n  NullElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  NullElement.prototype.destroy = function () {};\r\n\r\n  NullElement.prototype.sourceRectAtTime = function () {};\r\n\r\n  NullElement.prototype.hide = function () {};\r\n\r\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\r\n\r\n  function SVGRendererBase() {}\r\n\r\n  extendPrototype([BaseRenderer], SVGRendererBase);\r\n\r\n  SVGRendererBase.prototype.createNull = function (data) {\r\n    return new NullElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createShape = function (data) {\r\n    return new SVGShapeElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createText = function (data) {\r\n    return new SVGTextLottieElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createImage = function (data) {\r\n    return new IImageElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.configAnimation = function (animData) {\r\n    this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n    this.svgElement.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');\r\n\r\n    if (this.renderConfig.viewBoxSize) {\r\n      this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\r\n    } else {\r\n      this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\r\n    }\r\n\r\n    if (!this.renderConfig.viewBoxOnly) {\r\n      this.svgElement.setAttribute('width', animData.w);\r\n      this.svgElement.setAttribute('height', animData.h);\r\n      this.svgElement.style.width = '100%';\r\n      this.svgElement.style.height = '100%';\r\n      this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n      this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\r\n    }\r\n\r\n    if (this.renderConfig.width) {\r\n      this.svgElement.setAttribute('width', this.renderConfig.width);\r\n    }\r\n\r\n    if (this.renderConfig.height) {\r\n      this.svgElement.setAttribute('height', this.renderConfig.height);\r\n    }\r\n\r\n    if (this.renderConfig.className) {\r\n      this.svgElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n\r\n    if (this.renderConfig.id) {\r\n      this.svgElement.setAttribute('id', this.renderConfig.id);\r\n    }\r\n\r\n    if (this.renderConfig.focusable !== undefined) {\r\n      this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\r\n    }\r\n\r\n    this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio); // this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n\r\n    this.animationItem.wrapper.appendChild(this.svgElement); // Mask animation\r\n\r\n    var defs = this.globalData.defs;\r\n    this.setupGlobalData(animData, defs);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.data = animData;\r\n    var maskElement = createNS('clipPath');\r\n    var rect = createNS('rect');\r\n    rect.setAttribute('width', animData.w);\r\n    rect.setAttribute('height', animData.h);\r\n    rect.setAttribute('x', 0);\r\n    rect.setAttribute('y', 0);\r\n    var maskId = createElementID();\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + maskId + ')');\r\n    defs.appendChild(maskElement);\r\n    this.layers = animData.layers;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n  };\r\n\r\n  SVGRendererBase.prototype.destroy = function () {\r\n    if (this.animationItem.wrapper) {\r\n      this.animationItem.wrapper.innerText = '';\r\n    }\r\n\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i;\r\n    var len = this.layers ? this.layers.length : 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n  };\r\n\r\n  SVGRendererBase.prototype.updateContainerSize = function () {};\r\n\r\n  SVGRendererBase.prototype.findIndexByInd = function (ind) {\r\n    var i = 0;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.layers[i].ind === ind) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  };\r\n\r\n  SVGRendererBase.prototype.buildItem = function (pos) {\r\n    var elements = this.elements;\r\n\r\n    if (elements[pos] || this.layers[pos].ty === 99) {\r\n      return;\r\n    }\r\n\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n    elements[pos] = element;\r\n\r\n    if (getExpressionsPlugin()) {\r\n      if (this.layers[pos].ty === 0) {\r\n        this.globalData.projectInterface.registerComposition(element);\r\n      }\r\n\r\n      element.initExpressions();\r\n    }\r\n\r\n    this.appendElementInPos(element, pos);\r\n\r\n    if (this.layers[pos].tt) {\r\n      var elementIndex = 'tp' in this.layers[pos] ? this.findIndexByInd(this.layers[pos].tp) : pos - 1;\r\n\r\n      if (elementIndex === -1) {\r\n        return;\r\n      }\r\n\r\n      if (!this.elements[elementIndex] || this.elements[elementIndex] === true) {\r\n        this.buildItem(elementIndex);\r\n        this.addPendingElement(element);\r\n      } else {\r\n        var matteElement = elements[elementIndex];\r\n        var matteMask = matteElement.getMatte(this.layers[pos].tt);\r\n        element.setMatte(matteMask);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.checkPendingElements = function () {\r\n    while (this.pendingElements.length) {\r\n      var element = this.pendingElements.pop();\r\n      element.checkParenting();\r\n\r\n      if (element.data.tt) {\r\n        var i = 0;\r\n        var len = this.elements.length;\r\n\r\n        while (i < len) {\r\n          if (this.elements[i] === element) {\r\n            var elementIndex = 'tp' in element.data ? this.findIndexByInd(element.data.tp) : i - 1;\r\n            var matteElement = this.elements[elementIndex];\r\n            var matteMask = matteElement.getMatte(this.layers[i].tt);\r\n            element.setMatte(matteMask);\r\n            break;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.renderFrame = function (num) {\r\n    if (this.renderedFrame === num || this.destroyed) {\r\n      return;\r\n    }\r\n\r\n    if (num === null) {\r\n      num = this.renderedFrame;\r\n    } else {\r\n      this.renderedFrame = num;\r\n    } // console.log('-------');\r\n    // console.log('FRAME ',num);\r\n\r\n\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    this.globalData._mdf = false;\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    if (!this.completeLayers) {\r\n      this.checkLayers(num);\r\n    }\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].prepareFrame(num - this.layers[i].st);\r\n      }\r\n    }\r\n\r\n    if (this.globalData._mdf) {\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.completeLayers || this.elements[i]) {\r\n          this.elements[i].renderFrame();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.appendElementInPos = function (element, pos) {\r\n    var newElement = element.getBaseElement();\r\n\r\n    if (!newElement) {\r\n      return;\r\n    }\r\n\r\n    var i = 0;\r\n    var nextElement;\r\n\r\n    while (i < pos) {\r\n      if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\r\n        nextElement = this.elements[i].getBaseElement();\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    if (nextElement) {\r\n      this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n      this.layerElement.appendChild(newElement);\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.hide = function () {\r\n    this.layerElement.style.display = 'none';\r\n  };\r\n\r\n  SVGRendererBase.prototype.show = function () {\r\n    this.layerElement.style.display = 'block';\r\n  };\r\n\r\n  function ICompElement() {}\r\n\r\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\n  ICompElement.prototype.initElement = function (data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initRenderable();\r\n    this.initHierarchy();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n\r\n    if (this.data.xt || !globalData.progressiveLoad) {\r\n      this.buildAllItems();\r\n    }\r\n\r\n    this.hide();\r\n  };\r\n  /* ICompElement.prototype.hide = function(){\r\n      if(!this.hidden){\r\n          this.hideElement();\r\n          var i,len = this.elements.length;\r\n          for( i = 0; i < len; i+=1 ){\r\n              if(this.elements[i]){\r\n                  this.elements[i].hide();\r\n              }\r\n          }\r\n      }\r\n  }; */\r\n\r\n\r\n  ICompElement.prototype.prepareFrame = function (num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n\r\n    if (!this.isInRange && !this.data.xt) {\r\n      return;\r\n    }\r\n\r\n    if (!this.tm._placeholder) {\r\n      var timeRemapped = this.tm.v;\r\n\r\n      if (timeRemapped === this.data.op) {\r\n        timeRemapped = this.data.op - 1;\r\n      }\r\n\r\n      this.renderedFrame = timeRemapped;\r\n    } else {\r\n      this.renderedFrame = num / this.data.sr;\r\n    }\r\n\r\n    var i;\r\n    var len = this.elements.length;\r\n\r\n    if (!this.completeLayers) {\r\n      this.checkLayers(this.renderedFrame);\r\n    } // This iteration needs to be backwards because of how expressions connect between each other\r\n\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n\r\n        if (this.elements[i]._mdf) {\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  ICompElement.prototype.renderInnerContent = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n  };\r\n\r\n  ICompElement.prototype.setElements = function (elems) {\r\n    this.elements = elems;\r\n  };\r\n\r\n  ICompElement.prototype.getElements = function () {\r\n    return this.elements;\r\n  };\r\n\r\n  ICompElement.prototype.destroyElements = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n  };\r\n\r\n  ICompElement.prototype.destroy = function () {\r\n    this.destroyElements();\r\n    this.destroyBaseElement();\r\n  };\r\n\r\n  function SVGCompElement(data, globalData, comp) {\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n  }\r\n\r\n  extendPrototype([SVGRendererBase, ICompElement, SVGBaseElement], SVGCompElement);\r\n\r\n  SVGCompElement.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function SVGRenderer(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.svgElement = createNS('svg');\r\n    var ariaLabel = '';\r\n\r\n    if (config && config.title) {\r\n      var titleElement = createNS('title');\r\n      var titleId = createElementID();\r\n      titleElement.setAttribute('id', titleId);\r\n      titleElement.textContent = config.title;\r\n      this.svgElement.appendChild(titleElement);\r\n      ariaLabel += titleId;\r\n    }\r\n\r\n    if (config && config.description) {\r\n      var descElement = createNS('desc');\r\n      var descId = createElementID();\r\n      descElement.setAttribute('id', descId);\r\n      descElement.textContent = config.description;\r\n      this.svgElement.appendChild(descElement);\r\n      ariaLabel += ' ' + descId;\r\n    }\r\n\r\n    if (ariaLabel) {\r\n      this.svgElement.setAttribute('aria-labelledby', ariaLabel);\r\n    }\r\n\r\n    var defs = createNS('defs');\r\n    this.svgElement.appendChild(defs);\r\n    var maskElement = createNS('g');\r\n    this.svgElement.appendChild(maskElement);\r\n    this.layerElement = maskElement;\r\n    this.renderConfig = {\r\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      contentVisibility: config && config.contentVisibility || 'visible',\r\n      progressiveLoad: config && config.progressiveLoad || false,\r\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n      viewBoxOnly: config && config.viewBoxOnly || false,\r\n      viewBoxSize: config && config.viewBoxSize || false,\r\n      className: config && config.className || '',\r\n      id: config && config.id || '',\r\n      focusable: config && config.focusable,\r\n      filterSize: {\r\n        width: config && config.filterSize && config.filterSize.width || '100%',\r\n        height: config && config.filterSize && config.filterSize.height || '100%',\r\n        x: config && config.filterSize && config.filterSize.x || '0%',\r\n        y: config && config.filterSize && config.filterSize.y || '0%'\r\n      },\r\n      width: config && config.width,\r\n      height: config && config.height,\r\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\r\n    };\r\n    this.globalData = {\r\n      _mdf: false,\r\n      frameNum: -1,\r\n      defs: defs,\r\n      renderConfig: this.renderConfig\r\n    };\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n    this.rendererType = 'svg';\r\n  }\r\n\r\n  extendPrototype([SVGRendererBase], SVGRenderer);\r\n\r\n  SVGRenderer.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function CVContextData() {\r\n    this.saved = [];\r\n    this.cArrPos = 0;\r\n    this.cTr = new Matrix();\r\n    this.cO = 1;\r\n    var i;\r\n    var len = 15;\r\n    this.savedOp = createTypedArray('float32', len);\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n\r\n    this._length = len;\r\n  }\r\n\r\n  CVContextData.prototype.duplicate = function () {\r\n    var newLength = this._length * 2;\r\n    var currentSavedOp = this.savedOp;\r\n    this.savedOp = createTypedArray('float32', newLength);\r\n    this.savedOp.set(currentSavedOp);\r\n    var i = 0;\r\n\r\n    for (i = this._length; i < newLength; i += 1) {\r\n      this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n\r\n    this._length = newLength;\r\n  };\r\n\r\n  CVContextData.prototype.reset = function () {\r\n    this.cArrPos = 0;\r\n    this.cTr.reset();\r\n    this.cO = 1;\r\n  };\r\n\r\n  function ShapeTransformManager() {\r\n    this.sequences = {};\r\n    this.sequenceList = [];\r\n    this.transform_key_count = 0;\r\n  }\r\n\r\n  ShapeTransformManager.prototype = {\r\n    addTransformSequence: function addTransformSequence(transforms) {\r\n      var i;\r\n      var len = transforms.length;\r\n      var key = '_';\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        key += transforms[i].transform.key + '_';\r\n      }\r\n\r\n      var sequence = this.sequences[key];\r\n\r\n      if (!sequence) {\r\n        sequence = {\r\n          transforms: [].concat(transforms),\r\n          finalTransform: new Matrix(),\r\n          _mdf: false\r\n        };\r\n        this.sequences[key] = sequence;\r\n        this.sequenceList.push(sequence);\r\n      }\r\n\r\n      return sequence;\r\n    },\r\n    processSequence: function processSequence(sequence, isFirstFrame) {\r\n      var i = 0;\r\n      var len = sequence.transforms.length;\r\n      var _mdf = isFirstFrame;\r\n\r\n      while (i < len && !isFirstFrame) {\r\n        if (sequence.transforms[i].transform.mProps._mdf) {\r\n          _mdf = true;\r\n          break;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      if (_mdf) {\r\n        var props;\r\n        sequence.finalTransform.reset();\r\n\r\n        for (i = len - 1; i >= 0; i -= 1) {\r\n          props = sequence.transforms[i].transform.mProps.v.props;\r\n          sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n        }\r\n      }\r\n\r\n      sequence._mdf = _mdf;\r\n    },\r\n    processSequences: function processSequences(isFirstFrame) {\r\n      var i;\r\n      var len = this.sequenceList.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.processSequence(this.sequenceList[i], isFirstFrame);\r\n      }\r\n    },\r\n    getNewKey: function getNewKey() {\r\n      this.transform_key_count += 1;\r\n      return '_' + this.transform_key_count;\r\n    }\r\n  };\r\n\r\n  function CVEffects() {}\r\n\r\n  CVEffects.prototype.renderFrame = function () {};\r\n\r\n  function CVMaskElement(data, element) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.viewData = createSizedArray(this.masksProperties.length);\r\n    var i;\r\n    var len = this.masksProperties.length;\r\n    var hasMasks = false;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.masksProperties[i].mode !== 'n') {\r\n        hasMasks = true;\r\n      }\r\n\r\n      this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\r\n    }\r\n\r\n    this.hasMasks = hasMasks;\r\n\r\n    if (hasMasks) {\r\n      this.element.addRenderableComponent(this);\r\n    }\r\n  }\r\n\r\n  CVMaskElement.prototype.renderFrame = function () {\r\n    if (!this.hasMasks) {\r\n      return;\r\n    }\r\n\r\n    var transform = this.element.finalTransform.mat;\r\n    var ctx = this.element.canvasContext;\r\n    var i;\r\n    var len = this.masksProperties.length;\r\n    var pt;\r\n    var pts;\r\n    var data;\r\n    ctx.beginPath();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.masksProperties[i].mode !== 'n') {\r\n        if (this.masksProperties[i].inv) {\r\n          ctx.moveTo(0, 0);\r\n          ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n          ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n          ctx.lineTo(0, this.element.globalData.compSize.h);\r\n          ctx.lineTo(0, 0);\r\n        }\r\n\r\n        data = this.viewData[i].v;\r\n        pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\r\n        ctx.moveTo(pt[0], pt[1]);\r\n        var j;\r\n        var jLen = data._length;\r\n\r\n        for (j = 1; j < jLen; j += 1) {\r\n          pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n          ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n        }\r\n\r\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n      }\r\n    }\r\n\r\n    this.element.globalData.renderer.save(true);\r\n    ctx.clip();\r\n  };\r\n\r\n  CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\n  CVMaskElement.prototype.destroy = function () {\r\n    this.element = null;\r\n  };\r\n\r\n  function CVBaseElement() {}\r\n\r\n  CVBaseElement.prototype = {\r\n    createElements: function createElements() {},\r\n    initRendererElement: function initRendererElement() {},\r\n    createContainerElements: function createContainerElements() {\r\n      this.canvasContext = this.globalData.canvasContext;\r\n      this.renderableEffectsManager = new CVEffects(this);\r\n    },\r\n    createContent: function createContent() {},\r\n    setBlendMode: function setBlendMode() {\r\n      var globalData = this.globalData;\r\n\r\n      if (globalData.blendMode !== this.data.bm) {\r\n        globalData.blendMode = this.data.bm;\r\n        var blendModeValue = getBlendMode(this.data.bm);\r\n        globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n      }\r\n    },\r\n    createRenderableComponents: function createRenderableComponents() {\r\n      this.maskManager = new CVMaskElement(this.data, this);\r\n    },\r\n    hideElement: function hideElement() {\r\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n        this.hidden = true;\r\n      }\r\n    },\r\n    showElement: function showElement() {\r\n      if (this.isInRange && !this.isTransparent) {\r\n        this.hidden = false;\r\n        this._isFirstFrame = true;\r\n        this.maskManager._isFirstFrame = true;\r\n      }\r\n    },\r\n    renderFrame: function renderFrame() {\r\n      if (this.hidden || this.data.hd) {\r\n        return;\r\n      }\r\n\r\n      this.renderTransform();\r\n      this.renderRenderable();\r\n      this.setBlendMode();\r\n      var forceRealStack = this.data.ty === 0;\r\n      this.globalData.renderer.save(forceRealStack);\r\n      this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n      this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n      this.renderInnerContent();\r\n      this.globalData.renderer.restore(forceRealStack);\r\n\r\n      if (this.maskManager.hasMasks) {\r\n        this.globalData.renderer.restore(true);\r\n      }\r\n\r\n      if (this._isFirstFrame) {\r\n        this._isFirstFrame = false;\r\n      }\r\n    },\r\n    destroy: function destroy() {\r\n      this.canvasContext = null;\r\n      this.data = null;\r\n      this.globalData = null;\r\n      this.maskManager.destroy();\r\n    },\r\n    mHelper: new Matrix()\r\n  };\r\n  CVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\n  CVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\r\n  function CVShapeData(element, data, styles, transformsManager) {\r\n    this.styledShapes = [];\r\n    this.tr = [0, 0, 0, 0, 0, 0];\r\n    var ty = 4;\r\n\r\n    if (data.ty === 'rc') {\r\n      ty = 5;\r\n    } else if (data.ty === 'el') {\r\n      ty = 6;\r\n    } else if (data.ty === 'sr') {\r\n      ty = 7;\r\n    }\r\n\r\n    this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\r\n    var i;\r\n    var len = styles.length;\r\n    var styledShape;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!styles[i].closed) {\r\n        styledShape = {\r\n          transforms: transformsManager.addTransformSequence(styles[i].transforms),\r\n          trNodes: []\r\n        };\r\n        this.styledShapes.push(styledShape);\r\n        styles[i].elements.push(styledShape);\r\n      }\r\n    }\r\n  }\r\n\r\n  CVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\r\n\r\n  function CVShapeElement(data, globalData, comp) {\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this.transformsManager = new ShapeTransformManager();\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\r\n  CVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n  CVShapeElement.prototype.transformHelper = {\r\n    opacity: 1,\r\n    _opMdf: false\r\n  };\r\n  CVShapeElement.prototype.dashResetter = [];\r\n\r\n  CVShapeElement.prototype.createContent = function () {\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n  };\r\n\r\n  CVShapeElement.prototype.createStyleElement = function (data, transforms) {\r\n    var styleElem = {\r\n      data: data,\r\n      type: data.ty,\r\n      preTransforms: this.transformsManager.addTransformSequence(transforms),\r\n      transforms: [],\r\n      elements: [],\r\n      closed: data.hd === true\r\n    };\r\n    var elementData = {};\r\n\r\n    if (data.ty === 'fl' || data.ty === 'st') {\r\n      elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\r\n\r\n      if (!elementData.c.k) {\r\n        styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\r\n      }\r\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n      elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\r\n      elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\r\n      elementData.h = PropertyFactory.getProp(this, data.h || {\r\n        k: 0\r\n      }, 0, 0.01, this);\r\n      elementData.a = PropertyFactory.getProp(this, data.a || {\r\n        k: 0\r\n      }, 0, degToRads, this);\r\n      elementData.g = new GradientProperty(this, data.g, this);\r\n    }\r\n\r\n    elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\r\n\r\n    if (data.ty === 'st' || data.ty === 'gs') {\r\n      styleElem.lc = lineCapEnum[data.lc || 2];\r\n      styleElem.lj = lineJoinEnum[data.lj || 2];\r\n\r\n      if (data.lj == 1) {\r\n        // eslint-disable-line eqeqeq\r\n        styleElem.ml = data.ml;\r\n      }\r\n\r\n      elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\r\n\r\n      if (!elementData.w.k) {\r\n        styleElem.wi = elementData.w.v;\r\n      }\r\n\r\n      if (data.d) {\r\n        var d = new DashProperty(this, data.d, 'canvas', this);\r\n        elementData.d = d;\r\n\r\n        if (!elementData.d.k) {\r\n          styleElem.da = elementData.d.dashArray;\r\n          styleElem[\"do\"] = elementData.d.dashoffset[0];\r\n        }\r\n      }\r\n    } else {\r\n      styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n    }\r\n\r\n    this.stylesList.push(styleElem);\r\n    elementData.style = styleElem;\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.createGroupElement = function () {\r\n    var elementData = {\r\n      it: [],\r\n      prevViewData: []\r\n    };\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.createTransformElement = function (data) {\r\n    var elementData = {\r\n      transform: {\r\n        opacity: 1,\r\n        _opMdf: false,\r\n        key: this.transformsManager.getNewKey(),\r\n        op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\r\n        mProps: TransformPropertyFactory.getTransformProperty(this, data, this)\r\n      }\r\n    };\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.createShapeElement = function (data) {\r\n    var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.reloadShapes = function () {\r\n    this._isFirstFrame = true;\r\n    var i;\r\n    var len = this.itemsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n    len = this.dynamicProperties.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.dynamicProperties[i].getValue();\r\n    }\r\n\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n  };\r\n\r\n  CVShapeElement.prototype.addTransformToStyleList = function (transform) {\r\n    var i;\r\n    var len = this.stylesList.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!this.stylesList[i].closed) {\r\n        this.stylesList[i].transforms.push(transform);\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.removeTransformFromStyleList = function () {\r\n    var i;\r\n    var len = this.stylesList.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!this.stylesList[i].closed) {\r\n        this.stylesList[i].transforms.pop();\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.closeStyles = function (styles) {\r\n    var i;\r\n    var len = styles.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      styles[i].closed = true;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\r\n    var i;\r\n    var len = arr.length - 1;\r\n    var j;\r\n    var jLen;\r\n    var ownStyles = [];\r\n    var ownModifiers = [];\r\n    var processedPos;\r\n    var modifier;\r\n    var currentTransform;\r\n    var ownTransforms = [].concat(transforms);\r\n\r\n    for (i = len; i >= 0; i -= 1) {\r\n      processedPos = this.searchProcessedElement(arr[i]);\r\n\r\n      if (!processedPos) {\r\n        arr[i]._shouldRender = shouldRender;\r\n      } else {\r\n        itemsData[i] = prevViewData[processedPos - 1];\r\n      }\r\n\r\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\r\n        } else {\r\n          itemsData[i].style.closed = false;\r\n        }\r\n\r\n        ownStyles.push(itemsData[i].style);\r\n      } else if (arr[i].ty === 'gr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createGroupElement(arr[i]);\r\n        } else {\r\n          jLen = itemsData[i].it.length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n          }\r\n        }\r\n\r\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\r\n      } else if (arr[i].ty === 'tr') {\r\n        if (!processedPos) {\r\n          currentTransform = this.createTransformElement(arr[i]);\r\n          itemsData[i] = currentTransform;\r\n        }\r\n\r\n        ownTransforms.push(itemsData[i]);\r\n        this.addTransformToStyleList(itemsData[i]);\r\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createShapeElement(arr[i]);\r\n        }\r\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          modifier.init(this, arr[i]);\r\n          itemsData[i] = modifier;\r\n          this.shapeModifiers.push(modifier);\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = false;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      } else if (arr[i].ty === 'rp') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          itemsData[i] = modifier;\r\n          modifier.init(this, arr, i, itemsData);\r\n          this.shapeModifiers.push(modifier);\r\n          shouldRender = false;\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = true;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      }\r\n\r\n      this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n\r\n    this.removeTransformFromStyleList();\r\n    this.closeStyles(ownStyles);\r\n    len = ownModifiers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      ownModifiers[i].closed = true;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderInnerContent = function () {\r\n    this.transformHelper.opacity = 1;\r\n    this.transformHelper._opMdf = false;\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n    this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\r\n  };\r\n\r\n  CVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\r\n    if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n      groupTransform.opacity = parentTransform.opacity;\r\n      groupTransform.opacity *= groupTransform.op.v;\r\n      groupTransform._opMdf = true;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.drawLayer = function () {\r\n    var i;\r\n    var len = this.stylesList.length;\r\n    var j;\r\n    var jLen;\r\n    var k;\r\n    var kLen;\r\n    var elems;\r\n    var nodes;\r\n    var renderer = this.globalData.renderer;\r\n    var ctx = this.globalData.canvasContext;\r\n    var type;\r\n    var currentStyle;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      currentStyle = this.stylesList[i];\r\n      type = currentStyle.type; // Skipping style when\r\n      // Stroke width equals 0\r\n      // style should not be rendered (extra unused repeaters)\r\n      // current opacity equals 0\r\n      // global opacity equals 0\r\n\r\n      if (!((type === 'st' || type === 'gs') && currentStyle.wi === 0 || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\r\n        renderer.save();\r\n        elems = currentStyle.elements;\r\n\r\n        if (type === 'st' || type === 'gs') {\r\n          ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n          ctx.lineWidth = currentStyle.wi;\r\n          ctx.lineCap = currentStyle.lc;\r\n          ctx.lineJoin = currentStyle.lj;\r\n          ctx.miterLimit = currentStyle.ml || 0;\r\n        } else {\r\n          ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n        }\r\n\r\n        renderer.ctxOpacity(currentStyle.coOp);\r\n\r\n        if (type !== 'st' && type !== 'gs') {\r\n          ctx.beginPath();\r\n        }\r\n\r\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\r\n        jLen = elems.length;\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          if (type === 'st' || type === 'gs') {\r\n            ctx.beginPath();\r\n\r\n            if (currentStyle.da) {\r\n              ctx.setLineDash(currentStyle.da);\r\n              ctx.lineDashOffset = currentStyle[\"do\"];\r\n            }\r\n          }\r\n\r\n          nodes = elems[j].trNodes;\r\n          kLen = nodes.length;\r\n\r\n          for (k = 0; k < kLen; k += 1) {\r\n            if (nodes[k].t === 'm') {\r\n              ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\r\n            } else if (nodes[k].t === 'c') {\r\n              ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\r\n            } else {\r\n              ctx.closePath();\r\n            }\r\n          }\r\n\r\n          if (type === 'st' || type === 'gs') {\r\n            ctx.stroke();\r\n\r\n            if (currentStyle.da) {\r\n              ctx.setLineDash(this.dashResetter);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (type !== 'st' && type !== 'gs') {\r\n          ctx.fill(currentStyle.r);\r\n        }\r\n\r\n        renderer.restore();\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\r\n    var i;\r\n    var len = items.length - 1;\r\n    var groupTransform;\r\n    groupTransform = parentTransform;\r\n\r\n    for (i = len; i >= 0; i -= 1) {\r\n      if (items[i].ty === 'tr') {\r\n        groupTransform = data[i].transform;\r\n        this.renderShapeTransform(parentTransform, groupTransform);\r\n      } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\r\n        this.renderPath(items[i], data[i]);\r\n      } else if (items[i].ty === 'fl') {\r\n        this.renderFill(items[i], data[i], groupTransform);\r\n      } else if (items[i].ty === 'st') {\r\n        this.renderStroke(items[i], data[i], groupTransform);\r\n      } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\r\n        this.renderGradientFill(items[i], data[i], groupTransform);\r\n      } else if (items[i].ty === 'gr') {\r\n        this.renderShape(groupTransform, items[i].it, data[i].it);\r\n      } else if (items[i].ty === 'tm') {//\r\n      }\r\n    }\r\n\r\n    if (isMain) {\r\n      this.drawLayer();\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\r\n    if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\r\n      var shapeNodes = styledShape.trNodes;\r\n      var paths = shape.paths;\r\n      var i;\r\n      var len;\r\n      var j;\r\n      var jLen = paths._length;\r\n      shapeNodes.length = 0;\r\n      var groupTransformMat = styledShape.transforms.finalTransform;\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        var pathNodes = paths.shapes[j];\r\n\r\n        if (pathNodes && pathNodes.v) {\r\n          len = pathNodes._length;\r\n\r\n          for (i = 1; i < len; i += 1) {\r\n            if (i === 1) {\r\n              shapeNodes.push({\r\n                t: 'm',\r\n                p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n              });\r\n            }\r\n\r\n            shapeNodes.push({\r\n              t: 'c',\r\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\r\n            });\r\n          }\r\n\r\n          if (len === 1) {\r\n            shapeNodes.push({\r\n              t: 'm',\r\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n            });\r\n          }\r\n\r\n          if (pathNodes.c && len) {\r\n            shapeNodes.push({\r\n              t: 'c',\r\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\r\n            });\r\n            shapeNodes.push({\r\n              t: 'z'\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      styledShape.trNodes = shapeNodes;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderPath = function (pathData, itemData) {\r\n    if (pathData.hd !== true && pathData._shouldRender) {\r\n      var i;\r\n      var len = itemData.styledShapes.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\r\n    var styleElem = itemData.style;\r\n\r\n    if (itemData.c._mdf || this._isFirstFrame) {\r\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\r\n    }\r\n\r\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\r\n    var styleElem = itemData.style;\r\n    var grd;\r\n\r\n    if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf)) {\r\n      var ctx = this.globalData.canvasContext;\r\n      var pt1 = itemData.s.v;\r\n      var pt2 = itemData.e.v;\r\n\r\n      if (styleData.t === 1) {\r\n        grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\r\n      } else {\r\n        var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n        var percent = itemData.h.v;\r\n\r\n        if (percent >= 1) {\r\n          percent = 0.99;\r\n        } else if (percent <= -1) {\r\n          percent = -0.99;\r\n        }\r\n\r\n        var dist = rad * percent;\r\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n        grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\r\n      }\r\n\r\n      var i;\r\n      var len = styleData.g.p;\r\n      var cValues = itemData.g.c;\r\n      var opacity = 1;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (itemData.g._hasOpacity && itemData.g._collapsable) {\r\n          opacity = itemData.g.o[i * 2 + 1];\r\n        }\r\n\r\n        grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\r\n      }\r\n\r\n      styleElem.grd = grd;\r\n    }\r\n\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  };\r\n\r\n  CVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n\r\n    if (d && (d._mdf || this._isFirstFrame)) {\r\n      styleElem.da = d.dashArray;\r\n      styleElem[\"do\"] = d.dashoffset[0];\r\n    }\r\n\r\n    if (itemData.c._mdf || this._isFirstFrame) {\r\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\r\n    }\r\n\r\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n    }\r\n\r\n    if (itemData.w._mdf || this._isFirstFrame) {\r\n      styleElem.wi = itemData.w.v;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.destroy = function () {\r\n    this.shapesData = null;\r\n    this.globalData = null;\r\n    this.canvasContext = null;\r\n    this.stylesList.length = 0;\r\n    this.itemsData.length = 0;\r\n  };\r\n\r\n  function CVTextElement(data, globalData, comp) {\r\n    this.textSpans = [];\r\n    this.yOffset = 0;\r\n    this.fillColorAnim = false;\r\n    this.strokeColorAnim = false;\r\n    this.strokeWidthAnim = false;\r\n    this.stroke = false;\r\n    this.fill = false;\r\n    this.justifyOffset = 0;\r\n    this.currentRender = null;\r\n    this.renderType = 'canvas';\r\n    this.values = {\r\n      fill: 'rgba(0,0,0,0)',\r\n      stroke: 'rgba(0,0,0,0)',\r\n      sWidth: 0,\r\n      fValue: ''\r\n    };\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\r\n  CVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\n  CVTextElement.prototype.buildNewText = function () {\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var hasFill = false;\r\n\r\n    if (documentData.fc) {\r\n      hasFill = true;\r\n      this.values.fill = this.buildColor(documentData.fc);\r\n    } else {\r\n      this.values.fill = 'rgba(0,0,0,0)';\r\n    }\r\n\r\n    this.fill = hasFill;\r\n    var hasStroke = false;\r\n\r\n    if (documentData.sc) {\r\n      hasStroke = true;\r\n      this.values.stroke = this.buildColor(documentData.sc);\r\n      this.values.sWidth = documentData.sw;\r\n    }\r\n\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    var i;\r\n    var len;\r\n    var letters = documentData.l;\r\n    var matrixHelper = this.mHelper;\r\n    this.stroke = hasStroke;\r\n    this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n    len = documentData.finalText.length; // this.tHelper.font = this.values.fValue;\r\n\r\n    var charData;\r\n    var shapeData;\r\n    var k;\r\n    var kLen;\r\n    var shapes;\r\n    var j;\r\n    var jLen;\r\n    var pathNodes;\r\n    var commands;\r\n    var pathArr;\r\n    var singleShape = this.data.singleShape;\r\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n    var xPos = 0;\r\n    var yPos = 0;\r\n    var firstLine = true;\r\n    var cnt = 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n      shapeData = charData && charData.data || {};\r\n      matrixHelper.reset();\r\n\r\n      if (singleShape && letters[i].n) {\r\n        xPos = -trackingOffset;\r\n        yPos += documentData.yOffset;\r\n        yPos += firstLine ? 1 : 0;\r\n        firstLine = false;\r\n      }\r\n\r\n      shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n      jLen = shapes.length;\r\n      matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n\r\n      if (singleShape) {\r\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n      }\r\n\r\n      commands = createSizedArray(jLen - 1);\r\n      var commandsCounter = 0;\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        if (shapes[j].ty === 'sh') {\r\n          kLen = shapes[j].ks.k.i.length;\r\n          pathNodes = shapes[j].ks.k;\r\n          pathArr = [];\r\n\r\n          for (k = 1; k < kLen; k += 1) {\r\n            if (k === 1) {\r\n              pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n            }\r\n\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\r\n          }\r\n\r\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n          commands[commandsCounter] = pathArr;\r\n          commandsCounter += 1;\r\n        }\r\n      }\r\n\r\n      if (singleShape) {\r\n        xPos += letters[i].l;\r\n        xPos += trackingOffset;\r\n      }\r\n\r\n      if (this.textSpans[cnt]) {\r\n        this.textSpans[cnt].elem = commands;\r\n      } else {\r\n        this.textSpans[cnt] = {\r\n          elem: commands\r\n        };\r\n      }\r\n\r\n      cnt += 1;\r\n    }\r\n  };\r\n\r\n  CVTextElement.prototype.renderInnerContent = function () {\r\n    var ctx = this.canvasContext;\r\n    ctx.font = this.values.fValue;\r\n    ctx.lineCap = 'butt';\r\n    ctx.lineJoin = 'miter';\r\n    ctx.miterLimit = 4;\r\n\r\n    if (!this.data.singleShape) {\r\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    var j;\r\n    var jLen;\r\n    var k;\r\n    var kLen;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n    var letters = this.textProperty.currentData.l;\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var lastFill = null;\r\n    var lastStroke = null;\r\n    var lastStrokeW = null;\r\n    var commands;\r\n    var pathArr;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!letters[i].n) {\r\n        renderedLetter = renderedLetters[i];\r\n\r\n        if (renderedLetter) {\r\n          this.globalData.renderer.save();\r\n          this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n          this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n        }\r\n\r\n        if (this.fill) {\r\n          if (renderedLetter && renderedLetter.fc) {\r\n            if (lastFill !== renderedLetter.fc) {\r\n              lastFill = renderedLetter.fc;\r\n              ctx.fillStyle = renderedLetter.fc;\r\n            }\r\n          } else if (lastFill !== this.values.fill) {\r\n            lastFill = this.values.fill;\r\n            ctx.fillStyle = this.values.fill;\r\n          }\r\n\r\n          commands = this.textSpans[i].elem;\r\n          jLen = commands.length;\r\n          this.globalData.canvasContext.beginPath();\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathArr = commands[j];\r\n            kLen = pathArr.length;\r\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n\r\n            for (k = 2; k < kLen; k += 6) {\r\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n            }\r\n          }\r\n\r\n          this.globalData.canvasContext.closePath();\r\n          this.globalData.canvasContext.fill(); /// ctx.fillText(this.textSpans[i].val,0,0);\r\n        }\r\n\r\n        if (this.stroke) {\r\n          if (renderedLetter && renderedLetter.sw) {\r\n            if (lastStrokeW !== renderedLetter.sw) {\r\n              lastStrokeW = renderedLetter.sw;\r\n              ctx.lineWidth = renderedLetter.sw;\r\n            }\r\n          } else if (lastStrokeW !== this.values.sWidth) {\r\n            lastStrokeW = this.values.sWidth;\r\n            ctx.lineWidth = this.values.sWidth;\r\n          }\r\n\r\n          if (renderedLetter && renderedLetter.sc) {\r\n            if (lastStroke !== renderedLetter.sc) {\r\n              lastStroke = renderedLetter.sc;\r\n              ctx.strokeStyle = renderedLetter.sc;\r\n            }\r\n          } else if (lastStroke !== this.values.stroke) {\r\n            lastStroke = this.values.stroke;\r\n            ctx.strokeStyle = this.values.stroke;\r\n          }\r\n\r\n          commands = this.textSpans[i].elem;\r\n          jLen = commands.length;\r\n          this.globalData.canvasContext.beginPath();\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathArr = commands[j];\r\n            kLen = pathArr.length;\r\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n\r\n            for (k = 2; k < kLen; k += 6) {\r\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n            }\r\n          }\r\n\r\n          this.globalData.canvasContext.closePath();\r\n          this.globalData.canvasContext.stroke(); /// ctx.strokeText(letters[i].val,0,0);\r\n        }\r\n\r\n        if (renderedLetter) {\r\n          this.globalData.renderer.restore();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  function CVImageElement(data, globalData, comp) {\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.img = globalData.imageLoader.getAsset(this.assetData);\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n  CVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\n  CVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\n  CVImageElement.prototype.createContent = function () {\r\n    if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\r\n      var canvas = createTag('canvas');\r\n      canvas.width = this.assetData.w;\r\n      canvas.height = this.assetData.h;\r\n      var ctx = canvas.getContext('2d');\r\n      var imgW = this.img.width;\r\n      var imgH = this.img.height;\r\n      var imgRel = imgW / imgH;\r\n      var canvasRel = this.assetData.w / this.assetData.h;\r\n      var widthCrop;\r\n      var heightCrop;\r\n      var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n\r\n      if (imgRel > canvasRel && par === 'xMidYMid slice' || imgRel < canvasRel && par !== 'xMidYMid slice') {\r\n        heightCrop = imgH;\r\n        widthCrop = heightCrop * canvasRel;\r\n      } else {\r\n        widthCrop = imgW;\r\n        heightCrop = widthCrop / canvasRel;\r\n      }\r\n\r\n      ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\r\n      this.img = canvas;\r\n    }\r\n  };\r\n\r\n  CVImageElement.prototype.renderInnerContent = function () {\r\n    this.canvasContext.drawImage(this.img, 0, 0);\r\n  };\r\n\r\n  CVImageElement.prototype.destroy = function () {\r\n    this.img = null;\r\n  };\r\n\r\n  function CVSolidElement(data, globalData, comp) {\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n  CVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\n  CVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\n  CVSolidElement.prototype.renderInnerContent = function () {\r\n    var ctx = this.canvasContext;\r\n    ctx.fillStyle = this.data.sc;\r\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh); //\r\n  };\r\n\r\n  function CanvasRendererBase(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\r\n      context: config && config.context || null,\r\n      progressiveLoad: config && config.progressiveLoad || false,\r\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      contentVisibility: config && config.contentVisibility || 'visible',\r\n      className: config && config.className || '',\r\n      id: config && config.id || ''\r\n    };\r\n    this.renderConfig.dpr = config && config.dpr || 1;\r\n\r\n    if (this.animationItem.wrapper) {\r\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\r\n    }\r\n\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n      frameNum: -1,\r\n      _mdf: false,\r\n      renderConfig: this.renderConfig,\r\n      currentGlobalAlpha: -1\r\n    };\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n    this.rendererType = 'canvas';\r\n  }\r\n\r\n  extendPrototype([BaseRenderer], CanvasRendererBase);\r\n\r\n  CanvasRendererBase.prototype.createShape = function (data) {\r\n    return new CVShapeElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createText = function (data) {\r\n    return new CVTextElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createImage = function (data) {\r\n    return new CVImageElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createSolid = function (data) {\r\n    return new CVSolidElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\n  CanvasRendererBase.prototype.ctxTransform = function (props) {\r\n    if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\r\n      return;\r\n    }\r\n\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\r\n      return;\r\n    }\r\n\r\n    this.transformMat.cloneFromProps(props);\r\n    var cProps = this.contextData.cTr.props;\r\n    this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]); // this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\r\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n    var trProps = this.contextData.cTr.props;\r\n    this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.ctxOpacity = function (op) {\r\n    /* if(op === 1){\r\n          return;\r\n      } */\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n      this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n      return;\r\n    }\r\n\r\n    this.contextData.cO *= op < 0 ? 0 : op;\r\n\r\n    if (this.globalData.currentGlobalAlpha !== this.contextData.cO) {\r\n      this.canvasContext.globalAlpha = this.contextData.cO;\r\n      this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.reset = function () {\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.restore();\r\n      return;\r\n    }\r\n\r\n    this.contextData.reset();\r\n  };\r\n\r\n  CanvasRendererBase.prototype.save = function (actionFlag) {\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.save();\r\n      return;\r\n    }\r\n\r\n    if (actionFlag) {\r\n      this.canvasContext.save();\r\n    }\r\n\r\n    var props = this.contextData.cTr.props;\r\n\r\n    if (this.contextData._length <= this.contextData.cArrPos) {\r\n      this.contextData.duplicate();\r\n    }\r\n\r\n    var i;\r\n    var arr = this.contextData.saved[this.contextData.cArrPos];\r\n\r\n    for (i = 0; i < 16; i += 1) {\r\n      arr[i] = props[i];\r\n    }\r\n\r\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n    this.contextData.cArrPos += 1;\r\n  };\r\n\r\n  CanvasRendererBase.prototype.restore = function (actionFlag) {\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.restore();\r\n      return;\r\n    }\r\n\r\n    if (actionFlag) {\r\n      this.canvasContext.restore();\r\n      this.globalData.blendMode = 'source-over';\r\n    }\r\n\r\n    this.contextData.cArrPos -= 1;\r\n    var popped = this.contextData.saved[this.contextData.cArrPos];\r\n    var i;\r\n    var arr = this.contextData.cTr.props;\r\n\r\n    for (i = 0; i < 16; i += 1) {\r\n      arr[i] = popped[i];\r\n    }\r\n\r\n    this.canvasContext.setTransform(popped[0], popped[1], popped[4], popped[5], popped[12], popped[13]);\r\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n    this.contextData.cO = popped;\r\n\r\n    if (this.globalData.currentGlobalAlpha !== popped) {\r\n      this.canvasContext.globalAlpha = popped;\r\n      this.globalData.currentGlobalAlpha = popped;\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.configAnimation = function (animData) {\r\n    if (this.animationItem.wrapper) {\r\n      this.animationItem.container = createTag('canvas');\r\n      var containerStyle = this.animationItem.container.style;\r\n      containerStyle.width = '100%';\r\n      containerStyle.height = '100%';\r\n      var origin = '0px 0px 0px';\r\n      containerStyle.transformOrigin = origin;\r\n      containerStyle.mozTransformOrigin = origin;\r\n      containerStyle.webkitTransformOrigin = origin;\r\n      containerStyle['-webkit-transform'] = origin;\r\n      containerStyle.contentVisibility = this.renderConfig.contentVisibility;\r\n      this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n      this.canvasContext = this.animationItem.container.getContext('2d');\r\n\r\n      if (this.renderConfig.className) {\r\n        this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n      }\r\n\r\n      if (this.renderConfig.id) {\r\n        this.animationItem.container.setAttribute('id', this.renderConfig.id);\r\n      }\r\n    } else {\r\n      this.canvasContext = this.renderConfig.context;\r\n    }\r\n\r\n    this.data = animData;\r\n    this.layers = animData.layers;\r\n    this.transformCanvas = {\r\n      w: animData.w,\r\n      h: animData.h,\r\n      sx: 0,\r\n      sy: 0,\r\n      tx: 0,\r\n      ty: 0\r\n    };\r\n    this.setupGlobalData(animData, document.body);\r\n    this.globalData.canvasContext = this.canvasContext;\r\n    this.globalData.renderer = this;\r\n    this.globalData.isDashed = false;\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.globalData.transformCanvas = this.transformCanvas;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n    this.updateContainerSize();\r\n  };\r\n\r\n  CanvasRendererBase.prototype.updateContainerSize = function (width, height) {\r\n    this.reset();\r\n    var elementWidth;\r\n    var elementHeight;\r\n\r\n    if (width) {\r\n      elementWidth = width;\r\n      elementHeight = height;\r\n      this.canvasContext.canvas.width = elementWidth;\r\n      this.canvasContext.canvas.height = elementHeight;\r\n    } else {\r\n      if (this.animationItem.wrapper && this.animationItem.container) {\r\n        elementWidth = this.animationItem.wrapper.offsetWidth;\r\n        elementHeight = this.animationItem.wrapper.offsetHeight;\r\n      } else {\r\n        elementWidth = this.canvasContext.canvas.width;\r\n        elementHeight = this.canvasContext.canvas.height;\r\n      }\r\n\r\n      this.canvasContext.canvas.width = elementWidth * this.renderConfig.dpr;\r\n      this.canvasContext.canvas.height = elementHeight * this.renderConfig.dpr;\r\n    }\r\n\r\n    var elementRel;\r\n    var animationRel;\r\n\r\n    if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\r\n      var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n      var fillType = par[1] || 'meet';\r\n      var pos = par[0] || 'xMidYMid';\r\n      var xPos = pos.substr(0, 4);\r\n      var yPos = pos.substr(4);\r\n      elementRel = elementWidth / elementHeight;\r\n      animationRel = this.transformCanvas.w / this.transformCanvas.h;\r\n\r\n      if (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice') {\r\n        this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n      } else {\r\n        this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n      }\r\n\r\n      if (xPos === 'xMid' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2 * this.renderConfig.dpr;\r\n      } else if (xPos === 'xMax' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\r\n      } else {\r\n        this.transformCanvas.tx = 0;\r\n      }\r\n\r\n      if (yPos === 'YMid' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2 * this.renderConfig.dpr;\r\n      } else if (yPos === 'YMax' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) * this.renderConfig.dpr;\r\n      } else {\r\n        this.transformCanvas.ty = 0;\r\n      }\r\n    } else if (this.renderConfig.preserveAspectRatio === 'none') {\r\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n      this.transformCanvas.tx = 0;\r\n      this.transformCanvas.ty = 0;\r\n    } else {\r\n      this.transformCanvas.sx = this.renderConfig.dpr;\r\n      this.transformCanvas.sy = this.renderConfig.dpr;\r\n      this.transformCanvas.tx = 0;\r\n      this.transformCanvas.ty = 0;\r\n    }\r\n\r\n    this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\r\n    /* var i, len = this.elements.length;\r\n      for(i=0;i<len;i+=1){\r\n          if(this.elements[i] && this.elements[i].data.ty === 0){\r\n              this.elements[i].resize(this.globalData.transformCanvas);\r\n          }\r\n      } */\r\n\r\n    this.ctxTransform(this.transformCanvas.props);\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n    this.canvasContext.closePath();\r\n    this.canvasContext.clip();\r\n    this.renderFrame(this.renderedFrame, true);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.destroy = function () {\r\n    if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\r\n      this.animationItem.wrapper.innerText = '';\r\n    }\r\n\r\n    var i;\r\n    var len = this.layers ? this.layers.length : 0;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n\r\n    this.elements.length = 0;\r\n    this.globalData.canvasContext = null;\r\n    this.animationItem.container = null;\r\n    this.destroyed = true;\r\n  };\r\n\r\n  CanvasRendererBase.prototype.renderFrame = function (num, forceRender) {\r\n    if (this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender || this.destroyed || num === -1) {\r\n      return;\r\n    }\r\n\r\n    this.renderedFrame = num;\r\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n    this.globalData.frameId += 1;\r\n    this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\r\n    this.globalData.projectInterface.currentFrame = num; // console.log('--------');\r\n    // console.log('NEW: ',num);\r\n\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    if (!this.completeLayers) {\r\n      this.checkLayers(num);\r\n    }\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].prepareFrame(num - this.layers[i].st);\r\n      }\r\n    }\r\n\r\n    if (this.globalData._mdf) {\r\n      if (this.renderConfig.clearCanvas === true) {\r\n        this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n      } else {\r\n        this.save();\r\n      }\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        if (this.completeLayers || this.elements[i]) {\r\n          this.elements[i].renderFrame();\r\n        }\r\n      }\r\n\r\n      if (this.renderConfig.clearCanvas !== true) {\r\n        this.restore();\r\n      }\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.buildItem = function (pos) {\r\n    var elements = this.elements;\r\n\r\n    if (elements[pos] || this.layers[pos].ty === 99) {\r\n      return;\r\n    }\r\n\r\n    var element = this.createItem(this.layers[pos], this, this.globalData);\r\n    elements[pos] = element;\r\n    element.initExpressions();\r\n    /* if(this.layers[pos].ty === 0){\r\n          element.resize(this.globalData.transformCanvas);\r\n      } */\r\n  };\r\n\r\n  CanvasRendererBase.prototype.checkPendingElements = function () {\r\n    while (this.pendingElements.length) {\r\n      var element = this.pendingElements.pop();\r\n      element.checkParenting();\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.hide = function () {\r\n    this.animationItem.container.style.display = 'none';\r\n  };\r\n\r\n  CanvasRendererBase.prototype.show = function () {\r\n    this.animationItem.container.style.display = 'block';\r\n  };\r\n\r\n  function CVCompElement(data, globalData, comp) {\r\n    this.completeLayers = false;\r\n    this.layers = data.layers;\r\n    this.pendingElements = [];\r\n    this.elements = createSizedArray(this.layers.length);\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n  }\r\n\r\n  extendPrototype([CanvasRendererBase, ICompElement, CVBaseElement], CVCompElement);\r\n\r\n  CVCompElement.prototype.renderInnerContent = function () {\r\n    var ctx = this.canvasContext;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(this.data.w, 0);\r\n    ctx.lineTo(this.data.w, this.data.h);\r\n    ctx.lineTo(0, this.data.h);\r\n    ctx.lineTo(0, 0);\r\n    ctx.clip();\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n  };\r\n\r\n  CVCompElement.prototype.destroy = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n\r\n    this.layers = null;\r\n    this.elements = null;\r\n  };\r\n\r\n  CVCompElement.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function CanvasRenderer(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\r\n      context: config && config.context || null,\r\n      progressiveLoad: config && config.progressiveLoad || false,\r\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      contentVisibility: config && config.contentVisibility || 'visible',\r\n      className: config && config.className || '',\r\n      id: config && config.id || '',\r\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\r\n    };\r\n    this.renderConfig.dpr = config && config.dpr || 1;\r\n\r\n    if (this.animationItem.wrapper) {\r\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\r\n    }\r\n\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n      frameNum: -1,\r\n      _mdf: false,\r\n      renderConfig: this.renderConfig,\r\n      currentGlobalAlpha: -1\r\n    };\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n    this.rendererType = 'canvas';\r\n  }\r\n\r\n  extendPrototype([CanvasRendererBase], CanvasRenderer);\r\n\r\n  CanvasRenderer.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function HBaseElement() {}\r\n\r\n  HBaseElement.prototype = {\r\n    checkBlendMode: function checkBlendMode() {},\r\n    initRendererElement: function initRendererElement() {\r\n      this.baseElement = createTag(this.data.tg || 'div');\r\n\r\n      if (this.data.hasMask) {\r\n        this.svgElement = createNS('svg');\r\n        this.layerElement = createNS('g');\r\n        this.maskedElement = this.layerElement;\r\n        this.svgElement.appendChild(this.layerElement);\r\n        this.baseElement.appendChild(this.svgElement);\r\n      } else {\r\n        this.layerElement = this.baseElement;\r\n      }\r\n\r\n      styleDiv(this.baseElement);\r\n    },\r\n    createContainerElements: function createContainerElements() {\r\n      this.renderableEffectsManager = new CVEffects(this);\r\n      this.transformedElement = this.baseElement;\r\n      this.maskedElement = this.layerElement;\r\n\r\n      if (this.data.ln) {\r\n        this.layerElement.setAttribute('id', this.data.ln);\r\n      }\r\n\r\n      if (this.data.cl) {\r\n        this.layerElement.setAttribute('class', this.data.cl);\r\n      }\r\n\r\n      if (this.data.bm !== 0) {\r\n        this.setBlendMode();\r\n      }\r\n    },\r\n    renderElement: function renderElement() {\r\n      var transformedElementStyle = this.transformedElement ? this.transformedElement.style : {};\r\n\r\n      if (this.finalTransform._matMdf) {\r\n        var matrixValue = this.finalTransform.mat.toCSS();\r\n        transformedElementStyle.transform = matrixValue;\r\n        transformedElementStyle.webkitTransform = matrixValue;\r\n      }\r\n\r\n      if (this.finalTransform._opMdf) {\r\n        transformedElementStyle.opacity = this.finalTransform.mProp.o.v;\r\n      }\r\n    },\r\n    renderFrame: function renderFrame() {\r\n      // If it is exported as hidden (data.hd === true) no need to render\r\n      // If it is not visible no need to render\r\n      if (this.data.hd || this.hidden) {\r\n        return;\r\n      }\r\n\r\n      this.renderTransform();\r\n      this.renderRenderable();\r\n      this.renderElement();\r\n      this.renderInnerContent();\r\n\r\n      if (this._isFirstFrame) {\r\n        this._isFirstFrame = false;\r\n      }\r\n    },\r\n    destroy: function destroy() {\r\n      this.layerElement = null;\r\n      this.transformedElement = null;\r\n\r\n      if (this.matteElement) {\r\n        this.matteElement = null;\r\n      }\r\n\r\n      if (this.maskManager) {\r\n        this.maskManager.destroy();\r\n        this.maskManager = null;\r\n      }\r\n    },\r\n    createRenderableComponents: function createRenderableComponents() {\r\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    addEffects: function addEffects() {},\r\n    setMatte: function setMatte() {}\r\n  };\r\n  HBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\n  HBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\n  HBaseElement.prototype.buildElementParenting = BaseRenderer.prototype.buildElementParenting;\r\n\r\n  function HSolidElement(data, globalData, comp) {\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\r\n\r\n  HSolidElement.prototype.createContent = function () {\r\n    var rect;\r\n\r\n    if (this.data.hasMask) {\r\n      rect = createNS('rect');\r\n      rect.setAttribute('width', this.data.sw);\r\n      rect.setAttribute('height', this.data.sh);\r\n      rect.setAttribute('fill', this.data.sc);\r\n      this.svgElement.setAttribute('width', this.data.sw);\r\n      this.svgElement.setAttribute('height', this.data.sh);\r\n    } else {\r\n      rect = createTag('div');\r\n      rect.style.width = this.data.sw + 'px';\r\n      rect.style.height = this.data.sh + 'px';\r\n      rect.style.backgroundColor = this.data.sc;\r\n    }\r\n\r\n    this.layerElement.appendChild(rect);\r\n  };\r\n\r\n  function HShapeElement(data, globalData, comp) {\r\n    // List of drawable elements\r\n    this.shapes = []; // Full shape data\r\n\r\n    this.shapesData = data.shapes; // List of styles that will be applied to shapes\r\n\r\n    this.stylesList = []; // List of modifiers that will be applied to shapes\r\n\r\n    this.shapeModifiers = []; // List of items in shape tree\r\n\r\n    this.itemsData = []; // List of items in previous shape tree\r\n\r\n    this.processedElements = []; // List of animated components\r\n\r\n    this.animatedContents = [];\r\n    this.shapesContainer = createNS('g');\r\n    this.initElement(data, globalData, comp); // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n\r\n    this.prevViewData = [];\r\n    this.currentBBox = {\r\n      x: 999999,\r\n      y: -999999,\r\n      h: 0,\r\n      w: 0\r\n    };\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\r\n  HShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\n  HShapeElement.prototype.createContent = function () {\r\n    var cont;\r\n    this.baseElement.style.fontSize = 0;\r\n\r\n    if (this.data.hasMask) {\r\n      this.layerElement.appendChild(this.shapesContainer);\r\n      cont = this.svgElement;\r\n    } else {\r\n      cont = createNS('svg');\r\n      var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n      cont.setAttribute('width', size.w);\r\n      cont.setAttribute('height', size.h);\r\n      cont.appendChild(this.shapesContainer);\r\n      this.layerElement.appendChild(cont);\r\n    }\r\n\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    this.shapeCont = cont;\r\n  };\r\n\r\n  HShapeElement.prototype.getTransformedPoint = function (transformers, point) {\r\n    var i;\r\n    var len = transformers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n    }\r\n\r\n    return point;\r\n  };\r\n\r\n  HShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\r\n    var shape = item.sh.v;\r\n    var transformers = item.transformers;\r\n    var i;\r\n    var len = shape._length;\r\n    var vPoint;\r\n    var oPoint;\r\n    var nextIPoint;\r\n    var nextVPoint;\r\n\r\n    if (len <= 1) {\r\n      return;\r\n    }\r\n\r\n    for (i = 0; i < len - 1; i += 1) {\r\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n\r\n    if (shape.c) {\r\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n  };\r\n\r\n  HShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n    var bounds = this.shapeBoundingBox;\r\n    boundingBox.x = bmMin(bounds.left, boundingBox.x);\r\n    boundingBox.xMax = bmMax(bounds.right, boundingBox.xMax);\r\n    boundingBox.y = bmMin(bounds.top, boundingBox.y);\r\n    boundingBox.yMax = bmMax(bounds.bottom, boundingBox.yMax);\r\n  };\r\n\r\n  HShapeElement.prototype.shapeBoundingBox = {\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0\r\n  };\r\n  HShapeElement.prototype.tempBoundingBox = {\r\n    x: 0,\r\n    xMax: 0,\r\n    y: 0,\r\n    yMax: 0,\r\n    width: 0,\r\n    height: 0\r\n  };\r\n\r\n  HShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\r\n    var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\r\n\r\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\r\n      // eslint-disable-line no-plusplus\r\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n      c = 3 * p1[i] - 3 * p0[i];\r\n      b |= 0; // eslint-disable-line no-bitwise\r\n\r\n      a |= 0; // eslint-disable-line no-bitwise\r\n\r\n      c |= 0; // eslint-disable-line no-bitwise\r\n\r\n      if (a === 0 && b === 0) {//\r\n      } else if (a === 0) {\r\n        t = -c / b;\r\n\r\n        if (t > 0 && t < 1) {\r\n          bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\r\n        }\r\n      } else {\r\n        b2ac = b * b - 4 * c * a;\r\n\r\n        if (b2ac >= 0) {\r\n          t1 = (-b + bmSqrt(b2ac)) / (2 * a);\r\n          if (t1 > 0 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\r\n          t2 = (-b - bmSqrt(b2ac)) / (2 * a);\r\n          if (t2 > 0 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\r\n        }\r\n      }\r\n    }\r\n\r\n    this.shapeBoundingBox.left = bmMin.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.top = bmMin.apply(null, bounds[1]);\r\n    this.shapeBoundingBox.right = bmMax.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.bottom = bmMax.apply(null, bounds[1]);\r\n  };\r\n\r\n  HShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\r\n    return bmPow(1 - t, 3) * p0[i] + 3 * bmPow(1 - t, 2) * t * p1[i] + 3 * (1 - t) * bmPow(t, 2) * p2[i] + bmPow(t, 3) * p3[i];\r\n  };\r\n\r\n  HShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\r\n    var i;\r\n    var len = itemsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (itemsData[i] && itemsData[i].sh) {\r\n        this.calculateShapeBoundingBox(itemsData[i], boundingBox);\r\n      } else if (itemsData[i] && itemsData[i].it) {\r\n        this.calculateBoundingBox(itemsData[i].it, boundingBox);\r\n      } else if (itemsData[i] && itemsData[i].style && itemsData[i].w) {\r\n        this.expandStrokeBoundingBox(itemsData[i].w, boundingBox);\r\n      }\r\n    }\r\n  };\r\n\r\n  HShapeElement.prototype.expandStrokeBoundingBox = function (widthProperty, boundingBox) {\r\n    var width = 0;\r\n\r\n    if (widthProperty.keyframes) {\r\n      for (var i = 0; i < widthProperty.keyframes.length; i += 1) {\r\n        var kfw = widthProperty.keyframes[i].s;\r\n\r\n        if (kfw > width) {\r\n          width = kfw;\r\n        }\r\n      }\r\n\r\n      width *= widthProperty.mult;\r\n    } else {\r\n      width = widthProperty.v * widthProperty.mult;\r\n    }\r\n\r\n    boundingBox.x -= width;\r\n    boundingBox.xMax += width;\r\n    boundingBox.y -= width;\r\n    boundingBox.yMax += width;\r\n  };\r\n\r\n  HShapeElement.prototype.currentBoxContains = function (box) {\r\n    return this.currentBBox.x <= box.x && this.currentBBox.y <= box.y && this.currentBBox.width + this.currentBBox.x >= box.x + box.width && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\r\n  };\r\n\r\n  HShapeElement.prototype.renderInnerContent = function () {\r\n    this._renderShapeFrame();\r\n\r\n    if (!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n      var tempBoundingBox = this.tempBoundingBox;\r\n      var max = 999999;\r\n      tempBoundingBox.x = max;\r\n      tempBoundingBox.xMax = -max;\r\n      tempBoundingBox.y = max;\r\n      tempBoundingBox.yMax = -max;\r\n      this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n      tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n      tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y; // var tempBoundingBox = this.shapeCont.getBBox();\r\n\r\n      if (this.currentBoxContains(tempBoundingBox)) {\r\n        return;\r\n      }\r\n\r\n      var changed = false;\r\n\r\n      if (this.currentBBox.w !== tempBoundingBox.width) {\r\n        this.currentBBox.w = tempBoundingBox.width;\r\n        this.shapeCont.setAttribute('width', tempBoundingBox.width);\r\n        changed = true;\r\n      }\r\n\r\n      if (this.currentBBox.h !== tempBoundingBox.height) {\r\n        this.currentBBox.h = tempBoundingBox.height;\r\n        this.shapeCont.setAttribute('height', tempBoundingBox.height);\r\n        changed = true;\r\n      }\r\n\r\n      if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\r\n        this.currentBBox.w = tempBoundingBox.width;\r\n        this.currentBBox.h = tempBoundingBox.height;\r\n        this.currentBBox.x = tempBoundingBox.x;\r\n        this.currentBBox.y = tempBoundingBox.y;\r\n        this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n        var shapeStyle = this.shapeCont.style;\r\n        var shapeTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        shapeStyle.transform = shapeTransform;\r\n        shapeStyle.webkitTransform = shapeTransform;\r\n      }\r\n    }\r\n  };\r\n\r\n  function HTextElement(data, globalData, comp) {\r\n    this.textSpans = [];\r\n    this.textPaths = [];\r\n    this.currentBBox = {\r\n      x: 999999,\r\n      y: -999999,\r\n      h: 0,\r\n      w: 0\r\n    };\r\n    this.renderType = 'svg';\r\n    this.isMasked = false;\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\r\n\r\n  HTextElement.prototype.createContent = function () {\r\n    this.isMasked = this.checkMasks();\r\n\r\n    if (this.isMasked) {\r\n      this.renderType = 'svg';\r\n      this.compW = this.comp.data.w;\r\n      this.compH = this.comp.data.h;\r\n      this.svgElement.setAttribute('width', this.compW);\r\n      this.svgElement.setAttribute('height', this.compH);\r\n      var g = createNS('g');\r\n      this.maskedElement.appendChild(g);\r\n      this.innerElem = g;\r\n    } else {\r\n      this.renderType = 'html';\r\n      this.innerElem = this.layerElement;\r\n    }\r\n\r\n    this.checkParenting();\r\n  };\r\n\r\n  HTextElement.prototype.buildNewText = function () {\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var innerElemStyle = this.innerElem.style;\r\n    var textColor = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n    innerElemStyle.fill = textColor;\r\n    innerElemStyle.color = textColor;\r\n\r\n    if (documentData.sc) {\r\n      innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n      innerElemStyle.strokeWidth = documentData.sw + 'px';\r\n    }\r\n\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n\r\n    if (!this.globalData.fontManager.chars) {\r\n      innerElemStyle.fontSize = documentData.finalSize + 'px';\r\n      innerElemStyle.lineHeight = documentData.finalSize + 'px';\r\n\r\n      if (fontData.fClass) {\r\n        this.innerElem.className = fontData.fClass;\r\n      } else {\r\n        innerElemStyle.fontFamily = fontData.fFamily;\r\n        var fWeight = documentData.fWeight;\r\n        var fStyle = documentData.fStyle;\r\n        innerElemStyle.fontStyle = fStyle;\r\n        innerElemStyle.fontWeight = fWeight;\r\n      }\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    var letters = documentData.l;\r\n    len = letters.length;\r\n    var tSpan;\r\n    var tParent;\r\n    var tCont;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes;\r\n    var shapeStr = '';\r\n    var cnt = 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.globalData.fontManager.chars) {\r\n        if (!this.textPaths[cnt]) {\r\n          tSpan = createNS('path');\r\n          tSpan.setAttribute('stroke-linecap', lineCapEnum[1]);\r\n          tSpan.setAttribute('stroke-linejoin', lineJoinEnum[2]);\r\n          tSpan.setAttribute('stroke-miterlimit', '4');\r\n        } else {\r\n          tSpan = this.textPaths[cnt];\r\n        }\r\n\r\n        if (!this.isMasked) {\r\n          if (this.textSpans[cnt]) {\r\n            tParent = this.textSpans[cnt];\r\n            tCont = tParent.children[0];\r\n          } else {\r\n            tParent = createTag('div');\r\n            tParent.style.lineHeight = 0;\r\n            tCont = createNS('svg');\r\n            tCont.appendChild(tSpan);\r\n            styleDiv(tParent);\r\n          }\r\n        }\r\n      } else if (!this.isMasked) {\r\n        if (this.textSpans[cnt]) {\r\n          tParent = this.textSpans[cnt];\r\n          tSpan = this.textPaths[cnt];\r\n        } else {\r\n          tParent = createTag('span');\r\n          styleDiv(tParent);\r\n          tSpan = createTag('span');\r\n          styleDiv(tSpan);\r\n          tParent.appendChild(tSpan);\r\n        }\r\n      } else {\r\n        tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n      } // tSpan.setAttribute('visibility', 'hidden');\r\n\r\n\r\n      if (this.globalData.fontManager.chars) {\r\n        var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        var shapeData;\r\n\r\n        if (charData) {\r\n          shapeData = charData.data;\r\n        } else {\r\n          shapeData = null;\r\n        }\r\n\r\n        matrixHelper.reset();\r\n\r\n        if (shapeData && shapeData.shapes && shapeData.shapes.length) {\r\n          shapes = shapeData.shapes[0].it;\r\n          matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n          shapeStr = this.createPathShape(matrixHelper, shapes);\r\n          tSpan.setAttribute('d', shapeStr);\r\n        }\r\n\r\n        if (!this.isMasked) {\r\n          this.innerElem.appendChild(tParent);\r\n\r\n          if (shapeData && shapeData.shapes) {\r\n            // document.body.appendChild is needed to get exact measure of shape\r\n            document.body.appendChild(tCont);\r\n            var boundingBox = tCont.getBBox();\r\n            tCont.setAttribute('width', boundingBox.width + 2);\r\n            tCont.setAttribute('height', boundingBox.height + 2);\r\n            tCont.setAttribute('viewBox', boundingBox.x - 1 + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\r\n            var tContStyle = tCont.style;\r\n            var tContTranslation = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\r\n            tContStyle.transform = tContTranslation;\r\n            tContStyle.webkitTransform = tContTranslation;\r\n            letters[i].yOffset = boundingBox.y - 1;\r\n          } else {\r\n            tCont.setAttribute('width', 1);\r\n            tCont.setAttribute('height', 1);\r\n          }\r\n\r\n          tParent.appendChild(tCont);\r\n        } else {\r\n          this.innerElem.appendChild(tSpan);\r\n        }\r\n      } else {\r\n        tSpan.textContent = letters[i].val;\r\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n\r\n        if (!this.isMasked) {\r\n          this.innerElem.appendChild(tParent); //\r\n\r\n          var tStyle = tSpan.style;\r\n          var tSpanTranslation = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\r\n          tStyle.transform = tSpanTranslation;\r\n          tStyle.webkitTransform = tSpanTranslation;\r\n        } else {\r\n          this.innerElem.appendChild(tSpan);\r\n        }\r\n      } //\r\n\r\n\r\n      if (!this.isMasked) {\r\n        this.textSpans[cnt] = tParent;\r\n      } else {\r\n        this.textSpans[cnt] = tSpan;\r\n      }\r\n\r\n      this.textSpans[cnt].style.display = 'block';\r\n      this.textPaths[cnt] = tSpan;\r\n      cnt += 1;\r\n    }\r\n\r\n    while (cnt < this.textSpans.length) {\r\n      this.textSpans[cnt].style.display = 'none';\r\n      cnt += 1;\r\n    }\r\n  };\r\n\r\n  HTextElement.prototype.renderInnerContent = function () {\r\n    var svgStyle;\r\n\r\n    if (this.data.singleShape) {\r\n      if (!this._isFirstFrame && !this.lettersChangedFlag) {\r\n        return;\r\n      }\r\n\r\n      if (this.isMasked && this.finalTransform._matMdf) {\r\n        // Todo Benchmark if using this is better than getBBox\r\n        this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\r\n        svgStyle = this.svgElement.style;\r\n        var translation = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n        svgStyle.transform = translation;\r\n        svgStyle.webkitTransform = translation;\r\n      }\r\n    }\r\n\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n\r\n    if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\r\n      return;\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    var count = 0;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n    var letters = this.textProperty.currentData.l;\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var textSpan;\r\n    var textPath;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (letters[i].n) {\r\n        count += 1;\r\n      } else {\r\n        textSpan = this.textSpans[i];\r\n        textPath = this.textPaths[i];\r\n        renderedLetter = renderedLetters[count];\r\n        count += 1;\r\n\r\n        if (renderedLetter._mdf.m) {\r\n          if (!this.isMasked) {\r\n            textSpan.style.webkitTransform = renderedLetter.m;\r\n            textSpan.style.transform = renderedLetter.m;\r\n          } else {\r\n            textSpan.setAttribute('transform', renderedLetter.m);\r\n          }\r\n        } /// /textSpan.setAttribute('opacity',renderedLetter.o);\r\n\r\n\r\n        textSpan.style.opacity = renderedLetter.o;\r\n\r\n        if (renderedLetter.sw && renderedLetter._mdf.sw) {\r\n          textPath.setAttribute('stroke-width', renderedLetter.sw);\r\n        }\r\n\r\n        if (renderedLetter.sc && renderedLetter._mdf.sc) {\r\n          textPath.setAttribute('stroke', renderedLetter.sc);\r\n        }\r\n\r\n        if (renderedLetter.fc && renderedLetter._mdf.fc) {\r\n          textPath.setAttribute('fill', renderedLetter.fc);\r\n          textPath.style.color = renderedLetter.fc;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\r\n      var boundingBox = this.innerElem.getBBox();\r\n\r\n      if (this.currentBBox.w !== boundingBox.width) {\r\n        this.currentBBox.w = boundingBox.width;\r\n        this.svgElement.setAttribute('width', boundingBox.width);\r\n      }\r\n\r\n      if (this.currentBBox.h !== boundingBox.height) {\r\n        this.currentBBox.h = boundingBox.height;\r\n        this.svgElement.setAttribute('height', boundingBox.height);\r\n      }\r\n\r\n      var margin = 1;\r\n\r\n      if (this.currentBBox.w !== boundingBox.width + margin * 2 || this.currentBBox.h !== boundingBox.height + margin * 2 || this.currentBBox.x !== boundingBox.x - margin || this.currentBBox.y !== boundingBox.y - margin) {\r\n        this.currentBBox.w = boundingBox.width + margin * 2;\r\n        this.currentBBox.h = boundingBox.height + margin * 2;\r\n        this.currentBBox.x = boundingBox.x - margin;\r\n        this.currentBBox.y = boundingBox.y - margin;\r\n        this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n        svgStyle = this.svgElement.style;\r\n        var svgTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        svgStyle.transform = svgTransform;\r\n        svgStyle.webkitTransform = svgTransform;\r\n      }\r\n    }\r\n  };\r\n\r\n  function HCameraElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initHierarchy();\r\n    var getProp = PropertyFactory.getProp;\r\n    this.pe = getProp(this, data.pe, 0, 0, this);\r\n\r\n    if (data.ks.p.s) {\r\n      this.px = getProp(this, data.ks.p.x, 1, 0, this);\r\n      this.py = getProp(this, data.ks.p.y, 1, 0, this);\r\n      this.pz = getProp(this, data.ks.p.z, 1, 0, this);\r\n    } else {\r\n      this.p = getProp(this, data.ks.p, 1, 0, this);\r\n    }\r\n\r\n    if (data.ks.a) {\r\n      this.a = getProp(this, data.ks.a, 1, 0, this);\r\n    }\r\n\r\n    if (data.ks.or.k.length && data.ks.or.k[0].to) {\r\n      var i;\r\n      var len = data.ks.or.k.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        data.ks.or.k[i].to = null;\r\n        data.ks.or.k[i].ti = null;\r\n      }\r\n    }\r\n\r\n    this.or = getProp(this, data.ks.or, 1, degToRads, this);\r\n    this.or.sh = true;\r\n    this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\r\n    this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\r\n    this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\r\n    this.mat = new Matrix();\r\n    this._prevMat = new Matrix();\r\n    this._isFirstFrame = true; // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\r\n\r\n    this.finalTransform = {\r\n      mProp: this\r\n    };\r\n  }\r\n\r\n  extendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\n  HCameraElement.prototype.setup = function () {\r\n    var i;\r\n    var len = this.comp.threeDElements.length;\r\n    var comp;\r\n    var perspectiveStyle;\r\n    var containerStyle;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      // [perspectiveElem,container]\r\n      comp = this.comp.threeDElements[i];\r\n\r\n      if (comp.type === '3d') {\r\n        perspectiveStyle = comp.perspectiveElem.style;\r\n        containerStyle = comp.container.style;\r\n        var perspective = this.pe.v + 'px';\r\n        var origin = '0px 0px 0px';\r\n        var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n        perspectiveStyle.perspective = perspective;\r\n        perspectiveStyle.webkitPerspective = perspective;\r\n        containerStyle.transformOrigin = origin;\r\n        containerStyle.mozTransformOrigin = origin;\r\n        containerStyle.webkitTransformOrigin = origin;\r\n        perspectiveStyle.transform = matrix;\r\n        perspectiveStyle.webkitTransform = matrix;\r\n      }\r\n    }\r\n  };\r\n\r\n  HCameraElement.prototype.createElements = function () {};\r\n\r\n  HCameraElement.prototype.hide = function () {};\r\n\r\n  HCameraElement.prototype.renderFrame = function () {\r\n    var _mdf = this._isFirstFrame;\r\n    var i;\r\n    var len;\r\n\r\n    if (this.hierarchy) {\r\n      len = this.hierarchy.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n      }\r\n    }\r\n\r\n    if (_mdf || this.pe._mdf || this.p && this.p._mdf || this.px && (this.px._mdf || this.py._mdf || this.pz._mdf) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || this.a && this.a._mdf) {\r\n      this.mat.reset();\r\n\r\n      if (this.hierarchy) {\r\n        len = this.hierarchy.length - 1;\r\n\r\n        for (i = len; i >= 0; i -= 1) {\r\n          var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n          this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\r\n          this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\r\n          this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n          this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\r\n          this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\r\n        }\r\n      }\r\n\r\n      if (this.p) {\r\n        this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\r\n      } else {\r\n        this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\r\n      }\r\n\r\n      if (this.a) {\r\n        var diffVector;\r\n\r\n        if (this.p) {\r\n          diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\r\n        } else {\r\n          diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\r\n        }\r\n\r\n        var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2)); // var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n\r\n        var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\r\n        var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\r\n        var mRotationX = Math.atan2(lookDir[1], lookLengthOnXZ);\r\n        var mRotationY = Math.atan2(lookDir[0], -lookDir[2]);\r\n        this.mat.rotateY(mRotationY).rotateX(-mRotationX);\r\n      }\r\n\r\n      this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n      this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n      this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\r\n      this.mat.translate(0, 0, this.pe.v);\r\n      var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n\r\n      if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n        len = this.comp.threeDElements.length;\r\n        var comp;\r\n        var perspectiveStyle;\r\n        var containerStyle;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          comp = this.comp.threeDElements[i];\r\n\r\n          if (comp.type === '3d') {\r\n            if (hasMatrixChanged) {\r\n              var matValue = this.mat.toCSS();\r\n              containerStyle = comp.container.style;\r\n              containerStyle.transform = matValue;\r\n              containerStyle.webkitTransform = matValue;\r\n            }\r\n\r\n            if (this.pe._mdf) {\r\n              perspectiveStyle = comp.perspectiveElem.style;\r\n              perspectiveStyle.perspective = this.pe.v + 'px';\r\n              perspectiveStyle.webkitPerspective = this.pe.v + 'px';\r\n            }\r\n          }\r\n        }\r\n\r\n        this.mat.clone(this._prevMat);\r\n      }\r\n    }\r\n\r\n    this._isFirstFrame = false;\r\n  };\r\n\r\n  HCameraElement.prototype.prepareFrame = function (num) {\r\n    this.prepareProperties(num, true);\r\n  };\r\n\r\n  HCameraElement.prototype.destroy = function () {};\r\n\r\n  HCameraElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  function HImageElement(data, globalData, comp) {\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\r\n\r\n  HImageElement.prototype.createContent = function () {\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    var img = new Image();\r\n\r\n    if (this.data.hasMask) {\r\n      this.imageElem = createNS('image');\r\n      this.imageElem.setAttribute('width', this.assetData.w + 'px');\r\n      this.imageElem.setAttribute('height', this.assetData.h + 'px');\r\n      this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n      this.layerElement.appendChild(this.imageElem);\r\n      this.baseElement.setAttribute('width', this.assetData.w);\r\n      this.baseElement.setAttribute('height', this.assetData.h);\r\n    } else {\r\n      this.layerElement.appendChild(img);\r\n    }\r\n\r\n    img.crossOrigin = 'anonymous';\r\n    img.src = assetPath;\r\n\r\n    if (this.data.ln) {\r\n      this.baseElement.setAttribute('id', this.data.ln);\r\n    }\r\n  };\r\n\r\n  function HybridRendererBase(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n      className: config && config.className || '',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n      filterSize: {\r\n        width: config && config.filterSize && config.filterSize.width || '400%',\r\n        height: config && config.filterSize && config.filterSize.height || '400%',\r\n        x: config && config.filterSize && config.filterSize.x || '-100%',\r\n        y: config && config.filterSize && config.filterSize.y || '-100%'\r\n      }\r\n    };\r\n    this.globalData = {\r\n      _mdf: false,\r\n      frameNum: -1,\r\n      renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n    this.rendererType = 'html';\r\n  }\r\n\r\n  extendPrototype([BaseRenderer], HybridRendererBase);\r\n  HybridRendererBase.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\n  HybridRendererBase.prototype.checkPendingElements = function () {\r\n    while (this.pendingElements.length) {\r\n      var element = this.pendingElements.pop();\r\n      element.checkParenting();\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.appendElementInPos = function (element, pos) {\r\n    var newDOMElement = element.getBaseElement();\r\n\r\n    if (!newDOMElement) {\r\n      return;\r\n    }\r\n\r\n    var layer = this.layers[pos];\r\n\r\n    if (!layer.ddd || !this.supports3d) {\r\n      if (this.threeDElements) {\r\n        this.addTo3dContainer(newDOMElement, pos);\r\n      } else {\r\n        var i = 0;\r\n        var nextDOMElement;\r\n        var nextLayer;\r\n        var tmpDOMElement;\r\n\r\n        while (i < pos) {\r\n          if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\r\n            nextLayer = this.elements[i];\r\n            tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n            nextDOMElement = tmpDOMElement || nextDOMElement;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (nextDOMElement) {\r\n          if (!layer.ddd || !this.supports3d) {\r\n            this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n          }\r\n        } else if (!layer.ddd || !this.supports3d) {\r\n          this.layerElement.appendChild(newDOMElement);\r\n        }\r\n      }\r\n    } else {\r\n      this.addTo3dContainer(newDOMElement, pos);\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.createShape = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGShapeElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HShapeElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createText = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGTextLottieElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HTextElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createCamera = function (data) {\r\n    this.camera = new HCameraElement(data, this.globalData, this);\r\n    return this.camera;\r\n  };\r\n\r\n  HybridRendererBase.prototype.createImage = function (data) {\r\n    if (!this.supports3d) {\r\n      return new IImageElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HImageElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createSolid = function (data) {\r\n    if (!this.supports3d) {\r\n      return new ISolidElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HSolidElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\n  HybridRendererBase.prototype.getThreeDContainerByPos = function (pos) {\r\n    var i = 0;\r\n    var len = this.threeDElements.length;\r\n\r\n    while (i < len) {\r\n      if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n        return this.threeDElements[i].perspectiveElem;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  HybridRendererBase.prototype.createThreeDContainer = function (pos, type) {\r\n    var perspectiveElem = createTag('div');\r\n    var style;\r\n    var containerStyle;\r\n    styleDiv(perspectiveElem);\r\n    var container = createTag('div');\r\n    styleDiv(container);\r\n\r\n    if (type === '3d') {\r\n      style = perspectiveElem.style;\r\n      style.width = this.globalData.compSize.w + 'px';\r\n      style.height = this.globalData.compSize.h + 'px';\r\n      var center = '50% 50%';\r\n      style.webkitTransformOrigin = center;\r\n      style.mozTransformOrigin = center;\r\n      style.transformOrigin = center;\r\n      containerStyle = container.style;\r\n      var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n      containerStyle.transform = matrix;\r\n      containerStyle.webkitTransform = matrix;\r\n    }\r\n\r\n    perspectiveElem.appendChild(container); // this.resizerElem.appendChild(perspectiveElem);\r\n\r\n    var threeDContainerData = {\r\n      container: container,\r\n      perspectiveElem: perspectiveElem,\r\n      startPos: pos,\r\n      endPos: pos,\r\n      type: type\r\n    };\r\n    this.threeDElements.push(threeDContainerData);\r\n    return threeDContainerData;\r\n  };\r\n\r\n  HybridRendererBase.prototype.build3dContainers = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n    var lastThreeDContainerData;\r\n    var currentContainer = '';\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.layers[i].ddd && this.layers[i].ty !== 3) {\r\n        if (currentContainer !== '3d') {\r\n          currentContainer = '3d';\r\n          lastThreeDContainerData = this.createThreeDContainer(i, '3d');\r\n        }\r\n\r\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n      } else {\r\n        if (currentContainer !== '2d') {\r\n          currentContainer = '2d';\r\n          lastThreeDContainerData = this.createThreeDContainer(i, '2d');\r\n        }\r\n\r\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n      }\r\n    }\r\n\r\n    len = this.threeDElements.length;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.addTo3dContainer = function (elem, pos) {\r\n    var i = 0;\r\n    var len = this.threeDElements.length;\r\n\r\n    while (i < len) {\r\n      if (pos <= this.threeDElements[i].endPos) {\r\n        var j = this.threeDElements[i].startPos;\r\n        var nextElement;\r\n\r\n        while (j < pos) {\r\n          if (this.elements[j] && this.elements[j].getBaseElement) {\r\n            nextElement = this.elements[j].getBaseElement();\r\n          }\r\n\r\n          j += 1;\r\n        }\r\n\r\n        if (nextElement) {\r\n          this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n        } else {\r\n          this.threeDElements[i].container.appendChild(elem);\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.configAnimation = function (animData) {\r\n    var resizerElem = createTag('div');\r\n    var wrapper = this.animationItem.wrapper;\r\n    var style = resizerElem.style;\r\n    style.width = animData.w + 'px';\r\n    style.height = animData.h + 'px';\r\n    this.resizerElem = resizerElem;\r\n    styleDiv(resizerElem);\r\n    style.transformStyle = 'flat';\r\n    style.mozTransformStyle = 'flat';\r\n    style.webkitTransformStyle = 'flat';\r\n\r\n    if (this.renderConfig.className) {\r\n      resizerElem.setAttribute('class', this.renderConfig.className);\r\n    }\r\n\r\n    wrapper.appendChild(resizerElem);\r\n    style.overflow = 'hidden';\r\n    var svg = createNS('svg');\r\n    svg.setAttribute('width', '1');\r\n    svg.setAttribute('height', '1');\r\n    styleDiv(svg);\r\n    this.resizerElem.appendChild(svg);\r\n    var defs = createNS('defs');\r\n    svg.appendChild(defs);\r\n    this.data = animData; // Mask animation\r\n\r\n    this.setupGlobalData(animData, svg);\r\n    this.globalData.defs = defs;\r\n    this.layers = animData.layers;\r\n    this.layerElement = this.resizerElem;\r\n    this.build3dContainers();\r\n    this.updateContainerSize();\r\n  };\r\n\r\n  HybridRendererBase.prototype.destroy = function () {\r\n    if (this.animationItem.wrapper) {\r\n      this.animationItem.wrapper.innerText = '';\r\n    }\r\n\r\n    this.animationItem.container = null;\r\n    this.globalData.defs = null;\r\n    var i;\r\n    var len = this.layers ? this.layers.length : 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.elements[i].destroy();\r\n    }\r\n\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n  };\r\n\r\n  HybridRendererBase.prototype.updateContainerSize = function () {\r\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    var elementRel = elementWidth / elementHeight;\r\n    var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\r\n    var sx;\r\n    var sy;\r\n    var tx;\r\n    var ty;\r\n\r\n    if (animationRel > elementRel) {\r\n      sx = elementWidth / this.globalData.compSize.w;\r\n      sy = elementWidth / this.globalData.compSize.w;\r\n      tx = 0;\r\n      ty = (elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2;\r\n    } else {\r\n      sx = elementHeight / this.globalData.compSize.h;\r\n      sy = elementHeight / this.globalData.compSize.h;\r\n      tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\r\n      ty = 0;\r\n    }\r\n\r\n    var style = this.resizerElem.style;\r\n    style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\r\n    style.transform = style.webkitTransform;\r\n  };\r\n\r\n  HybridRendererBase.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\n  HybridRendererBase.prototype.hide = function () {\r\n    this.resizerElem.style.display = 'none';\r\n  };\r\n\r\n  HybridRendererBase.prototype.show = function () {\r\n    this.resizerElem.style.display = 'block';\r\n  };\r\n\r\n  HybridRendererBase.prototype.initItems = function () {\r\n    this.buildAllItems();\r\n\r\n    if (this.camera) {\r\n      this.camera.setup();\r\n    } else {\r\n      var cWidth = this.globalData.compSize.w;\r\n      var cHeight = this.globalData.compSize.h;\r\n      var i;\r\n      var len = this.threeDElements.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        var style = this.threeDElements[i].perspectiveElem.style;\r\n        style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\r\n        style.perspective = style.webkitPerspective;\r\n      }\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.searchExtraCompositions = function (assets) {\r\n    var i;\r\n    var len = assets.length;\r\n    var floatingContainer = createTag('div');\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (assets[i].xt) {\r\n        var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\r\n        comp.initExpressions();\r\n        this.globalData.projectInterface.registerComposition(comp);\r\n      }\r\n    }\r\n  };\r\n\r\n  function HCompElement(data, globalData, comp) {\r\n    this.layers = data.layers;\r\n    this.supports3d = !data.hasMask;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n  }\r\n\r\n  extendPrototype([HybridRendererBase, ICompElement, HBaseElement], HCompElement);\r\n  HCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\n  HCompElement.prototype.createContainerElements = function () {\r\n    this._createBaseContainerElements(); // divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n\r\n\r\n    if (this.data.hasMask) {\r\n      this.svgElement.setAttribute('width', this.data.w);\r\n      this.svgElement.setAttribute('height', this.data.h);\r\n      this.transformedElement = this.baseElement;\r\n    } else {\r\n      this.transformedElement = this.layerElement;\r\n    }\r\n  };\r\n\r\n  HCompElement.prototype.addTo3dContainer = function (elem, pos) {\r\n    var j = 0;\r\n    var nextElement;\r\n\r\n    while (j < pos) {\r\n      if (this.elements[j] && this.elements[j].getBaseElement) {\r\n        nextElement = this.elements[j].getBaseElement();\r\n      }\r\n\r\n      j += 1;\r\n    }\r\n\r\n    if (nextElement) {\r\n      this.layerElement.insertBefore(elem, nextElement);\r\n    } else {\r\n      this.layerElement.appendChild(elem);\r\n    }\r\n  };\r\n\r\n  HCompElement.prototype.createComp = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function HybridRenderer(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n      className: config && config.className || '',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n      filterSize: {\r\n        width: config && config.filterSize && config.filterSize.width || '400%',\r\n        height: config && config.filterSize && config.filterSize.height || '400%',\r\n        x: config && config.filterSize && config.filterSize.x || '-100%',\r\n        y: config && config.filterSize && config.filterSize.y || '-100%'\r\n      },\r\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\r\n    };\r\n    this.globalData = {\r\n      _mdf: false,\r\n      frameNum: -1,\r\n      renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n    this.rendererType = 'html';\r\n  }\r\n\r\n  extendPrototype([HybridRendererBase], HybridRenderer);\r\n\r\n  HybridRenderer.prototype.createComp = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  var CompExpressionInterface = function () {\r\n    return function (comp) {\r\n      function _thisLayerFunction(name) {\r\n        var i = 0;\r\n        var len = comp.layers.length;\r\n\r\n        while (i < len) {\r\n          if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\r\n            return comp.elements[i].layerInterface;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null; // return {active:false};\r\n      }\r\n\r\n      Object.defineProperty(_thisLayerFunction, '_name', {\r\n        value: comp.data.nm\r\n      });\r\n      _thisLayerFunction.layer = _thisLayerFunction;\r\n      _thisLayerFunction.pixelAspect = 1;\r\n      _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\r\n      _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\r\n      _thisLayerFunction.pixelAspect = 1;\r\n      _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\r\n      _thisLayerFunction.displayStartTime = 0;\r\n      _thisLayerFunction.numLayers = comp.layers.length;\r\n      return _thisLayerFunction;\r\n    };\r\n  }();\r\n\r\n  var Expressions = function () {\r\n    var ob = {};\r\n    ob.initExpressions = initExpressions;\r\n\r\n    function initExpressions(animation) {\r\n      var stackCount = 0;\r\n      var registers = [];\r\n\r\n      function pushExpression() {\r\n        stackCount += 1;\r\n      }\r\n\r\n      function popExpression() {\r\n        stackCount -= 1;\r\n\r\n        if (stackCount === 0) {\r\n          releaseInstances();\r\n        }\r\n      }\r\n\r\n      function registerExpressionProperty(expression) {\r\n        if (registers.indexOf(expression) === -1) {\r\n          registers.push(expression);\r\n        }\r\n      }\r\n\r\n      function releaseInstances() {\r\n        var i;\r\n        var len = registers.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          registers[i].release();\r\n        }\r\n\r\n        registers.length = 0;\r\n      }\r\n\r\n      animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n      animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n      animation.renderer.globalData.pushExpression = pushExpression;\r\n      animation.renderer.globalData.popExpression = popExpression;\r\n      animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var MaskManagerInterface = function () {\r\n    function MaskInterface(mask, data) {\r\n      this._mask = mask;\r\n      this._data = data;\r\n    }\r\n\r\n    Object.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n      get: function get() {\r\n        if (this._mask.prop.k) {\r\n          this._mask.prop.getValue();\r\n        }\r\n\r\n        return this._mask.prop;\r\n      }\r\n    });\r\n    Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\r\n      get: function get() {\r\n        if (this._mask.op.k) {\r\n          this._mask.op.getValue();\r\n        }\r\n\r\n        return this._mask.op.v * 100;\r\n      }\r\n    });\r\n\r\n    var MaskManager = function MaskManager(maskManager) {\r\n      var _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n\r\n      var i;\r\n      var len = maskManager.viewData.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n      }\r\n\r\n      var maskFunction = function maskFunction(name) {\r\n        i = 0;\r\n\r\n        while (i < len) {\r\n          if (maskManager.masksProperties[i].nm === name) {\r\n            return _masksInterfaces[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null;\r\n      };\r\n\r\n      return maskFunction;\r\n    };\r\n\r\n    return MaskManager;\r\n  }();\r\n\r\n  var ExpressionPropertyInterface = function () {\r\n    var defaultUnidimensionalValue = {\r\n      pv: 0,\r\n      v: 0,\r\n      mult: 1\r\n    };\r\n    var defaultMultidimensionalValue = {\r\n      pv: [0, 0, 0],\r\n      v: [0, 0, 0],\r\n      mult: 1\r\n    };\r\n\r\n    function completeProperty(expressionValue, property, type) {\r\n      Object.defineProperty(expressionValue, 'velocity', {\r\n        get: function get() {\r\n          return property.getVelocityAtTime(property.comp.currentFrame);\r\n        }\r\n      });\r\n      expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\r\n\r\n      expressionValue.key = function (pos) {\r\n        if (!expressionValue.numKeys) {\r\n          return 0;\r\n        }\r\n\r\n        var value = '';\r\n\r\n        if ('s' in property.keyframes[pos - 1]) {\r\n          value = property.keyframes[pos - 1].s;\r\n        } else if ('e' in property.keyframes[pos - 2]) {\r\n          value = property.keyframes[pos - 2].e;\r\n        } else {\r\n          value = property.keyframes[pos - 2].s;\r\n        }\r\n\r\n        var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\r\n\r\n        valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\r\n        valueProp.value = type === 'unidimensional' ? value[0] : value;\r\n        return valueProp;\r\n      };\r\n\r\n      expressionValue.valueAtTime = property.getValueAtTime;\r\n      expressionValue.speedAtTime = property.getSpeedAtTime;\r\n      expressionValue.velocityAtTime = property.getVelocityAtTime;\r\n      expressionValue.propertyGroup = property.propertyGroup;\r\n    }\r\n\r\n    function UnidimensionalPropertyInterface(property) {\r\n      if (!property || !('pv' in property)) {\r\n        property = defaultUnidimensionalValue;\r\n      }\r\n\r\n      var mult = 1 / property.mult;\r\n      var val = property.pv * mult;\r\n      var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n\r\n      expressionValue.value = val;\r\n      completeProperty(expressionValue, property, 'unidimensional');\r\n      return function () {\r\n        if (property.k) {\r\n          property.getValue();\r\n        }\r\n\r\n        val = property.v * mult;\r\n\r\n        if (expressionValue.value !== val) {\r\n          expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n\r\n          expressionValue.value = val;\r\n          completeProperty(expressionValue, property, 'unidimensional');\r\n        }\r\n\r\n        return expressionValue;\r\n      };\r\n    }\r\n\r\n    function MultidimensionalPropertyInterface(property) {\r\n      if (!property || !('pv' in property)) {\r\n        property = defaultMultidimensionalValue;\r\n      }\r\n\r\n      var mult = 1 / property.mult;\r\n      var len = property.data && property.data.l || property.pv.length;\r\n      var expressionValue = createTypedArray('float32', len);\r\n      var arrValue = createTypedArray('float32', len);\r\n      expressionValue.value = arrValue;\r\n      completeProperty(expressionValue, property, 'multidimensional');\r\n      return function () {\r\n        if (property.k) {\r\n          property.getValue();\r\n        }\r\n\r\n        for (var i = 0; i < len; i += 1) {\r\n          arrValue[i] = property.v[i] * mult;\r\n          expressionValue[i] = arrValue[i];\r\n        }\r\n\r\n        return expressionValue;\r\n      };\r\n    } // TODO: try to avoid using this getter\r\n\r\n\r\n    function defaultGetter() {\r\n      return defaultUnidimensionalValue;\r\n    }\r\n\r\n    return function (property) {\r\n      if (!property) {\r\n        return defaultGetter;\r\n      }\r\n\r\n      if (property.propType === 'unidimensional') {\r\n        return UnidimensionalPropertyInterface(property);\r\n      }\r\n\r\n      return MultidimensionalPropertyInterface(property);\r\n    };\r\n  }();\r\n\r\n  var TransformExpressionInterface = function () {\r\n    return function (transform) {\r\n      function _thisFunction(name) {\r\n        switch (name) {\r\n          case 'scale':\r\n          case 'Scale':\r\n          case 'ADBE Scale':\r\n          case 6:\r\n            return _thisFunction.scale;\r\n\r\n          case 'rotation':\r\n          case 'Rotation':\r\n          case 'ADBE Rotation':\r\n          case 'ADBE Rotate Z':\r\n          case 10:\r\n            return _thisFunction.rotation;\r\n\r\n          case 'ADBE Rotate X':\r\n            return _thisFunction.xRotation;\r\n\r\n          case 'ADBE Rotate Y':\r\n            return _thisFunction.yRotation;\r\n\r\n          case 'position':\r\n          case 'Position':\r\n          case 'ADBE Position':\r\n          case 2:\r\n            return _thisFunction.position;\r\n\r\n          case 'ADBE Position_0':\r\n            return _thisFunction.xPosition;\r\n\r\n          case 'ADBE Position_1':\r\n            return _thisFunction.yPosition;\r\n\r\n          case 'ADBE Position_2':\r\n            return _thisFunction.zPosition;\r\n\r\n          case 'anchorPoint':\r\n          case 'AnchorPoint':\r\n          case 'Anchor Point':\r\n          case 'ADBE AnchorPoint':\r\n          case 1:\r\n            return _thisFunction.anchorPoint;\r\n\r\n          case 'opacity':\r\n          case 'Opacity':\r\n          case 11:\r\n            return _thisFunction.opacity;\r\n\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n\r\n      Object.defineProperty(_thisFunction, 'rotation', {\r\n        get: ExpressionPropertyInterface(transform.r || transform.rz)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'zRotation', {\r\n        get: ExpressionPropertyInterface(transform.rz || transform.r)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'xRotation', {\r\n        get: ExpressionPropertyInterface(transform.rx)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'yRotation', {\r\n        get: ExpressionPropertyInterface(transform.ry)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'scale', {\r\n        get: ExpressionPropertyInterface(transform.s)\r\n      });\r\n\r\n      var _px;\r\n\r\n      var _py;\r\n\r\n      var _pz;\r\n\r\n      var _transformFactory;\r\n\r\n      if (transform.p) {\r\n        _transformFactory = ExpressionPropertyInterface(transform.p);\r\n      } else {\r\n        _px = ExpressionPropertyInterface(transform.px);\r\n        _py = ExpressionPropertyInterface(transform.py);\r\n\r\n        if (transform.pz) {\r\n          _pz = ExpressionPropertyInterface(transform.pz);\r\n        }\r\n      }\r\n\r\n      Object.defineProperty(_thisFunction, 'position', {\r\n        get: function get() {\r\n          if (transform.p) {\r\n            return _transformFactory();\r\n          }\r\n\r\n          return [_px(), _py(), _pz ? _pz() : 0];\r\n        }\r\n      });\r\n      Object.defineProperty(_thisFunction, 'xPosition', {\r\n        get: ExpressionPropertyInterface(transform.px)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'yPosition', {\r\n        get: ExpressionPropertyInterface(transform.py)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'zPosition', {\r\n        get: ExpressionPropertyInterface(transform.pz)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'anchorPoint', {\r\n        get: ExpressionPropertyInterface(transform.a)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'opacity', {\r\n        get: ExpressionPropertyInterface(transform.o)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'skew', {\r\n        get: ExpressionPropertyInterface(transform.sk)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'skewAxis', {\r\n        get: ExpressionPropertyInterface(transform.sa)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'orientation', {\r\n        get: ExpressionPropertyInterface(transform.or)\r\n      });\r\n      return _thisFunction;\r\n    };\r\n  }();\r\n\r\n  var LayerExpressionInterface = function () {\r\n    function getMatrix(time) {\r\n      var toWorldMat = new Matrix();\r\n\r\n      if (time !== undefined) {\r\n        var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n\r\n        propMatrix.clone(toWorldMat);\r\n      } else {\r\n        var transformMat = this._elem.finalTransform.mProp;\r\n        transformMat.applyToMatrix(toWorldMat);\r\n      }\r\n\r\n      return toWorldMat;\r\n    }\r\n\r\n    function toWorldVec(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      toWorldMat.props[12] = 0;\r\n      toWorldMat.props[13] = 0;\r\n      toWorldMat.props[14] = 0;\r\n      return this.applyPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function toWorld(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      return this.applyPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function fromWorldVec(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      toWorldMat.props[12] = 0;\r\n      toWorldMat.props[13] = 0;\r\n      toWorldMat.props[14] = 0;\r\n      return this.invertPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function fromWorld(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      return this.invertPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function applyPoint(matrix, arr) {\r\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n        var i;\r\n        var len = this._elem.hierarchy.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n        }\r\n      }\r\n\r\n      return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\r\n    }\r\n\r\n    function invertPoint(matrix, arr) {\r\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n        var i;\r\n        var len = this._elem.hierarchy.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n        }\r\n      }\r\n\r\n      return matrix.inversePoint(arr);\r\n    }\r\n\r\n    function fromComp(arr) {\r\n      var toWorldMat = new Matrix();\r\n      toWorldMat.reset();\r\n\r\n      this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n\r\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n        var i;\r\n        var len = this._elem.hierarchy.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n        }\r\n\r\n        return toWorldMat.inversePoint(arr);\r\n      }\r\n\r\n      return toWorldMat.inversePoint(arr);\r\n    }\r\n\r\n    function sampleImage() {\r\n      return [1, 1, 1, 1];\r\n    }\r\n\r\n    return function (elem) {\r\n      var transformInterface;\r\n\r\n      function _registerMaskInterface(maskManager) {\r\n        _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n      }\r\n\r\n      function _registerEffectsInterface(effects) {\r\n        _thisLayerFunction.effect = effects;\r\n      }\r\n\r\n      function _thisLayerFunction(name) {\r\n        switch (name) {\r\n          case 'ADBE Root Vectors Group':\r\n          case 'Contents':\r\n          case 2:\r\n            return _thisLayerFunction.shapeInterface;\r\n\r\n          case 1:\r\n          case 6:\r\n          case 'Transform':\r\n          case 'transform':\r\n          case 'ADBE Transform Group':\r\n            return transformInterface;\r\n\r\n          case 4:\r\n          case 'ADBE Effect Parade':\r\n          case 'effects':\r\n          case 'Effects':\r\n            return _thisLayerFunction.effect;\r\n\r\n          case 'ADBE Text Properties':\r\n            return _thisLayerFunction.textInterface;\r\n\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n\r\n      _thisLayerFunction.getMatrix = getMatrix;\r\n      _thisLayerFunction.invertPoint = invertPoint;\r\n      _thisLayerFunction.applyPoint = applyPoint;\r\n      _thisLayerFunction.toWorld = toWorld;\r\n      _thisLayerFunction.toWorldVec = toWorldVec;\r\n      _thisLayerFunction.fromWorld = fromWorld;\r\n      _thisLayerFunction.fromWorldVec = fromWorldVec;\r\n      _thisLayerFunction.toComp = toWorld;\r\n      _thisLayerFunction.fromComp = fromComp;\r\n      _thisLayerFunction.sampleImage = sampleImage;\r\n      _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n      _thisLayerFunction._elem = elem;\r\n      transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n      var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n      Object.defineProperties(_thisLayerFunction, {\r\n        hasParent: {\r\n          get: function get() {\r\n            return elem.hierarchy.length;\r\n          }\r\n        },\r\n        parent: {\r\n          get: function get() {\r\n            return elem.hierarchy[0].layerInterface;\r\n          }\r\n        },\r\n        rotation: getDescriptor(transformInterface, 'rotation'),\r\n        scale: getDescriptor(transformInterface, 'scale'),\r\n        position: getDescriptor(transformInterface, 'position'),\r\n        opacity: getDescriptor(transformInterface, 'opacity'),\r\n        anchorPoint: anchorPointDescriptor,\r\n        anchor_point: anchorPointDescriptor,\r\n        transform: {\r\n          get: function get() {\r\n            return transformInterface;\r\n          }\r\n        },\r\n        active: {\r\n          get: function get() {\r\n            return elem.isInRange;\r\n          }\r\n        }\r\n      });\r\n      _thisLayerFunction.startTime = elem.data.st;\r\n      _thisLayerFunction.index = elem.data.ind;\r\n      _thisLayerFunction.source = elem.data.refId;\r\n      _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n      _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n      _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n      _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n      _thisLayerFunction._name = elem.data.nm;\r\n      _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n      _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n      return _thisLayerFunction;\r\n    };\r\n  }();\r\n\r\n  var propertyGroupFactory = function () {\r\n    return function (interfaceFunction, parentPropertyGroup) {\r\n      return function (val) {\r\n        val = val === undefined ? 1 : val;\r\n\r\n        if (val <= 0) {\r\n          return interfaceFunction;\r\n        }\r\n\r\n        return parentPropertyGroup(val - 1);\r\n      };\r\n    };\r\n  }();\r\n\r\n  var PropertyInterface = function () {\r\n    return function (propertyName, propertyGroup) {\r\n      var interfaceFunction = {\r\n        _name: propertyName\r\n      };\r\n\r\n      function _propertyGroup(val) {\r\n        val = val === undefined ? 1 : val;\r\n\r\n        if (val <= 0) {\r\n          return interfaceFunction;\r\n        }\r\n\r\n        return propertyGroup(val - 1);\r\n      }\r\n\r\n      return _propertyGroup;\r\n    };\r\n  }();\r\n\r\n  var EffectsExpressionInterface = function () {\r\n    var ob = {\r\n      createEffectsInterface: createEffectsInterface\r\n    };\r\n\r\n    function createEffectsInterface(elem, propertyGroup) {\r\n      if (elem.effectsManager) {\r\n        var effectElements = [];\r\n        var effectsData = elem.data.ef;\r\n        var i;\r\n        var len = elem.effectsManager.effectElements.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\r\n        }\r\n\r\n        var effects = elem.data.ef || [];\r\n\r\n        var groupInterface = function groupInterface(name) {\r\n          i = 0;\r\n          len = effects.length;\r\n\r\n          while (i < len) {\r\n            if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n              return effectElements[i];\r\n            }\r\n\r\n            i += 1;\r\n          }\r\n\r\n          return null;\r\n        };\r\n\r\n        Object.defineProperty(groupInterface, 'numProperties', {\r\n          get: function get() {\r\n            return effects.length;\r\n          }\r\n        });\r\n        return groupInterface;\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    function createGroupInterface(data, elements, propertyGroup, elem) {\r\n      function groupInterface(name) {\r\n        var effects = data.ef;\r\n        var i = 0;\r\n        var len = effects.length;\r\n\r\n        while (i < len) {\r\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n            if (effects[i].ty === 5) {\r\n              return effectElements[i];\r\n            }\r\n\r\n            return effectElements[i]();\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        throw new Error();\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\r\n\r\n      var effectElements = [];\r\n      var i;\r\n      var len = data.ef.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (data.ef[i].ty === 5) {\r\n          effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\r\n        } else {\r\n          effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\r\n        }\r\n      }\r\n\r\n      if (data.mn === 'ADBE Color Control') {\r\n        Object.defineProperty(groupInterface, 'color', {\r\n          get: function get() {\r\n            return effectElements[0]();\r\n          }\r\n        });\r\n      }\r\n\r\n      Object.defineProperties(groupInterface, {\r\n        numProperties: {\r\n          get: function get() {\r\n            return data.np;\r\n          }\r\n        },\r\n        _name: {\r\n          value: data.nm\r\n        },\r\n        propertyGroup: {\r\n          value: _propertyGroup\r\n        }\r\n      });\r\n      groupInterface.enabled = data.en !== 0;\r\n      groupInterface.active = groupInterface.enabled;\r\n      return groupInterface;\r\n    }\r\n\r\n    function createValueInterface(element, type, elem, propertyGroup) {\r\n      var expressionProperty = ExpressionPropertyInterface(element.p);\r\n\r\n      function interfaceFunction() {\r\n        if (type === 10) {\r\n          return elem.comp.compInterface(element.p.v);\r\n        }\r\n\r\n        return expressionProperty();\r\n      }\r\n\r\n      if (element.p.setGroupProperty) {\r\n        element.p.setGroupProperty(PropertyInterface('', propertyGroup));\r\n      }\r\n\r\n      return interfaceFunction;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var ShapePathInterface = function () {\r\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\r\n      var prop = view.sh;\r\n\r\n      function interfaceFunction(val) {\r\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\r\n          return interfaceFunction.path;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        path: {\r\n          get: function get() {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n\r\n            return prop;\r\n          }\r\n        },\r\n        shape: {\r\n          get: function get() {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n\r\n            return prop;\r\n          }\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        ix: {\r\n          value: shape.ix\r\n        },\r\n        propertyIndex: {\r\n          value: shape.ix\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        },\r\n        propertyGroup: {\r\n          value: propertyGroup\r\n        }\r\n      });\r\n      return interfaceFunction;\r\n    };\r\n  }();\r\n\r\n  var ShapeExpressionInterface = function () {\r\n    function iterateElements(shapes, view, propertyGroup) {\r\n      var arr = [];\r\n      var i;\r\n      var len = shapes ? shapes.length : 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (shapes[i].ty === 'gr') {\r\n          arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'fl') {\r\n          arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'st') {\r\n          arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'tm') {\r\n          arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'tr') {// arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n        } else if (shapes[i].ty === 'el') {\r\n          arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'sr') {\r\n          arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'sh') {\r\n          arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'rc') {\r\n          arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'rd') {\r\n          arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'rp') {\r\n          arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'gf') {\r\n          arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else {\r\n          arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        }\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function contentsInterfaceFactory(shape, view, propertyGroup) {\r\n      var interfaces;\r\n\r\n      var interfaceFunction = function _interfaceFunction(value) {\r\n        var i = 0;\r\n        var len = interfaces.length;\r\n\r\n        while (i < len) {\r\n          if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\r\n            return interfaces[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (typeof value === 'number') {\r\n          return interfaces[value - 1];\r\n        }\r\n\r\n        return null;\r\n      };\r\n\r\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n      interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n      interfaceFunction.numProperties = interfaces.length;\r\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n      interfaceFunction.transform = transformInterface;\r\n      interfaceFunction.propertyIndex = shape.cix;\r\n      interfaceFunction._name = shape.nm;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function groupInterfaceFactory(shape, view, propertyGroup) {\r\n      var interfaceFunction = function _interfaceFunction(value) {\r\n        switch (value) {\r\n          case 'ADBE Vectors Group':\r\n          case 'Contents':\r\n          case 2:\r\n            return interfaceFunction.content;\r\n          // Not necessary for now. Keeping them here in case a new case appears\r\n          // case 'ADBE Vector Transform Group':\r\n          // case 3:\r\n\r\n          default:\r\n            return interfaceFunction.transform;\r\n        }\r\n      };\r\n\r\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n      var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\r\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n      interfaceFunction.content = content;\r\n      interfaceFunction.transform = transformInterface;\r\n      Object.defineProperty(interfaceFunction, '_name', {\r\n        get: function get() {\r\n          return shape.nm;\r\n        }\r\n      }); // interfaceFunction.content = interfaceFunction;\r\n\r\n      interfaceFunction.numProperties = shape.np;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      interfaceFunction.nm = shape.nm;\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function fillInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(val) {\r\n        if (val === 'Color' || val === 'color') {\r\n          return interfaceFunction.color;\r\n        }\r\n\r\n        if (val === 'Opacity' || val === 'opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        color: {\r\n          get: ExpressionPropertyInterface(view.c)\r\n        },\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        }\r\n      });\r\n      view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function gradientFillInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(val) {\r\n        if (val === 'Start Point' || val === 'start point') {\r\n          return interfaceFunction.startPoint;\r\n        }\r\n\r\n        if (val === 'End Point' || val === 'end point') {\r\n          return interfaceFunction.endPoint;\r\n        }\r\n\r\n        if (val === 'Opacity' || val === 'opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        startPoint: {\r\n          get: ExpressionPropertyInterface(view.s)\r\n        },\r\n        endPoint: {\r\n          get: ExpressionPropertyInterface(view.e)\r\n        },\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        type: {\r\n          get: function get() {\r\n            return 'a';\r\n          }\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        }\r\n      });\r\n      view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\r\n      view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function defaultInterfaceFactory() {\r\n      function interfaceFunction() {\r\n        return null;\r\n      }\r\n\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function strokeInterfaceFactory(shape, view, propertyGroup) {\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\r\n\r\n      function addPropertyToDashOb(i) {\r\n        Object.defineProperty(dashOb, shape.d[i].nm, {\r\n          get: ExpressionPropertyInterface(view.d.dataProps[i].p)\r\n        });\r\n      }\r\n\r\n      var i;\r\n      var len = shape.d ? shape.d.length : 0;\r\n      var dashOb = {};\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        addPropertyToDashOb(i);\r\n        view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n      }\r\n\r\n      function interfaceFunction(val) {\r\n        if (val === 'Color' || val === 'color') {\r\n          return interfaceFunction.color;\r\n        }\r\n\r\n        if (val === 'Opacity' || val === 'opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        if (val === 'Stroke Width' || val === 'stroke width') {\r\n          return interfaceFunction.strokeWidth;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        color: {\r\n          get: ExpressionPropertyInterface(view.c)\r\n        },\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        strokeWidth: {\r\n          get: ExpressionPropertyInterface(view.w)\r\n        },\r\n        dash: {\r\n          get: function get() {\r\n            return dashOb;\r\n          }\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        }\r\n      });\r\n      view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n      view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function trimInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(val) {\r\n        if (val === shape.e.ix || val === 'End' || val === 'end') {\r\n          return interfaceFunction.end;\r\n        }\r\n\r\n        if (val === shape.s.ix) {\r\n          return interfaceFunction.start;\r\n        }\r\n\r\n        if (val === shape.o.ix) {\r\n          return interfaceFunction.offset;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\r\n      view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      interfaceFunction.propertyGroup = propertyGroup;\r\n      Object.defineProperties(interfaceFunction, {\r\n        start: {\r\n          get: ExpressionPropertyInterface(view.s)\r\n        },\r\n        end: {\r\n          get: ExpressionPropertyInterface(view.e)\r\n        },\r\n        offset: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function transformInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.a.ix === value || value === 'Anchor Point') {\r\n          return interfaceFunction.anchorPoint;\r\n        }\r\n\r\n        if (shape.o.ix === value || value === 'Opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        if (shape.p.ix === value || value === 'Position') {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\r\n          return interfaceFunction.rotation;\r\n        }\r\n\r\n        if (shape.s.ix === value || value === 'Scale') {\r\n          return interfaceFunction.scale;\r\n        }\r\n\r\n        if (shape.sk && shape.sk.ix === value || value === 'Skew') {\r\n          return interfaceFunction.skew;\r\n        }\r\n\r\n        if (shape.sa && shape.sa.ix === value || value === 'Skew Axis') {\r\n          return interfaceFunction.skewAxis;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n      view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\r\n      view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\r\n      view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n\r\n      if (view.transform.mProps.sk) {\r\n        view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\r\n        view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\r\n      }\r\n\r\n      view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.o)\r\n        },\r\n        position: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.p)\r\n        },\r\n        anchorPoint: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.a)\r\n        },\r\n        scale: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.s)\r\n        },\r\n        rotation: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.r)\r\n        },\r\n        skew: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.sk)\r\n        },\r\n        skewAxis: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.sa)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.ty = 'tr';\r\n      interfaceFunction.mn = shape.mn;\r\n      interfaceFunction.propertyGroup = propertyGroup;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function ellipseInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.p.ix === value) {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.s.ix === value) {\r\n          return interfaceFunction.size;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        size: {\r\n          get: ExpressionPropertyInterface(prop.s)\r\n        },\r\n        position: {\r\n          get: ExpressionPropertyInterface(prop.p)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function starInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.p.ix === value) {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.r.ix === value) {\r\n          return interfaceFunction.rotation;\r\n        }\r\n\r\n        if (shape.pt.ix === value) {\r\n          return interfaceFunction.points;\r\n        }\r\n\r\n        if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\r\n          return interfaceFunction.outerRadius;\r\n        }\r\n\r\n        if (shape.os.ix === value) {\r\n          return interfaceFunction.outerRoundness;\r\n        }\r\n\r\n        if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\r\n          return interfaceFunction.innerRadius;\r\n        }\r\n\r\n        if (shape.is && shape.is.ix === value) {\r\n          return interfaceFunction.innerRoundness;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\r\n      prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\r\n      prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\r\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n\r\n      if (shape.ir) {\r\n        prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\r\n        prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        position: {\r\n          get: ExpressionPropertyInterface(prop.p)\r\n        },\r\n        rotation: {\r\n          get: ExpressionPropertyInterface(prop.r)\r\n        },\r\n        points: {\r\n          get: ExpressionPropertyInterface(prop.pt)\r\n        },\r\n        outerRadius: {\r\n          get: ExpressionPropertyInterface(prop.or)\r\n        },\r\n        outerRoundness: {\r\n          get: ExpressionPropertyInterface(prop.os)\r\n        },\r\n        innerRadius: {\r\n          get: ExpressionPropertyInterface(prop.ir)\r\n        },\r\n        innerRoundness: {\r\n          get: ExpressionPropertyInterface(prop.is)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function rectInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.p.ix === value) {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.r.ix === value) {\r\n          return interfaceFunction.roundness;\r\n        }\r\n\r\n        if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\r\n          return interfaceFunction.size;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        position: {\r\n          get: ExpressionPropertyInterface(prop.p)\r\n        },\r\n        roundness: {\r\n          get: ExpressionPropertyInterface(prop.r)\r\n        },\r\n        size: {\r\n          get: ExpressionPropertyInterface(prop.s)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function roundedInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.r.ix === value || value === 'Round Corners 1') {\r\n          return interfaceFunction.radius;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        radius: {\r\n          get: ExpressionPropertyInterface(prop.rd)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function repeaterInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.c.ix === value || value === 'Copies') {\r\n          return interfaceFunction.copies;\r\n        }\r\n\r\n        if (shape.o.ix === value || value === 'Offset') {\r\n          return interfaceFunction.offset;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\r\n      prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        copies: {\r\n          get: ExpressionPropertyInterface(prop.c)\r\n        },\r\n        offset: {\r\n          get: ExpressionPropertyInterface(prop.o)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    return function (shapes, view, propertyGroup) {\r\n      var interfaces;\r\n\r\n      function _interfaceFunction(value) {\r\n        if (typeof value === 'number') {\r\n          value = value === undefined ? 1 : value;\r\n\r\n          if (value === 0) {\r\n            return propertyGroup;\r\n          }\r\n\r\n          return interfaces[value - 1];\r\n        }\r\n\r\n        var i = 0;\r\n        var len = interfaces.length;\r\n\r\n        while (i < len) {\r\n          if (interfaces[i]._name === value) {\r\n            return interfaces[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      function parentGroupWrapper() {\r\n        return propertyGroup;\r\n      }\r\n\r\n      _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\r\n      interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\r\n      _interfaceFunction.numProperties = interfaces.length;\r\n      _interfaceFunction._name = 'Contents';\r\n      return _interfaceFunction;\r\n    };\r\n  }();\r\n\r\n  var TextExpressionInterface = function () {\r\n    return function (elem) {\r\n      var _prevValue;\r\n\r\n      var _sourceText;\r\n\r\n      function _thisLayerFunction(name) {\r\n        switch (name) {\r\n          case 'ADBE Text Document':\r\n            return _thisLayerFunction.sourceText;\r\n\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n\r\n      Object.defineProperty(_thisLayerFunction, 'sourceText', {\r\n        get: function get() {\r\n          elem.textProperty.getValue();\r\n          var stringValue = elem.textProperty.currentData.t;\r\n\r\n          if (stringValue !== _prevValue) {\r\n            elem.textProperty.currentData.t = _prevValue;\r\n            _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\r\n            // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n\r\n            _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\r\n          }\r\n\r\n          return _sourceText;\r\n        }\r\n      });\r\n      return _thisLayerFunction;\r\n    };\r\n  }();\r\n\r\n  function _typeof$2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$2 = function _typeof(obj) { return typeof obj; }; } else { _typeof$2 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$2(obj); }\r\n\r\n  var FootageInterface = function () {\r\n    var outlineInterfaceFactory = function outlineInterfaceFactory(elem) {\r\n      var currentPropertyName = '';\r\n      var currentProperty = elem.getFootageData();\r\n\r\n      function init() {\r\n        currentPropertyName = '';\r\n        currentProperty = elem.getFootageData();\r\n        return searchProperty;\r\n      }\r\n\r\n      function searchProperty(value) {\r\n        if (currentProperty[value]) {\r\n          currentPropertyName = value;\r\n          currentProperty = currentProperty[value];\r\n\r\n          if (_typeof$2(currentProperty) === 'object') {\r\n            return searchProperty;\r\n          }\r\n\r\n          return currentProperty;\r\n        }\r\n\r\n        var propertyNameIndex = value.indexOf(currentPropertyName);\r\n\r\n        if (propertyNameIndex !== -1) {\r\n          var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\r\n          currentProperty = currentProperty[index];\r\n\r\n          if (_typeof$2(currentProperty) === 'object') {\r\n            return searchProperty;\r\n          }\r\n\r\n          return currentProperty;\r\n        }\r\n\r\n        return '';\r\n      }\r\n\r\n      return init;\r\n    };\r\n\r\n    var dataInterfaceFactory = function dataInterfaceFactory(elem) {\r\n      function interfaceFunction(value) {\r\n        if (value === 'Outline') {\r\n          return interfaceFunction.outlineInterface();\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      interfaceFunction._name = 'Outline';\r\n      interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\r\n      return interfaceFunction;\r\n    };\r\n\r\n    return function (elem) {\r\n      function _interfaceFunction(value) {\r\n        if (value === 'Data') {\r\n          return _interfaceFunction.dataInterface;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      _interfaceFunction._name = 'Data';\r\n      _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\r\n      return _interfaceFunction;\r\n    };\r\n  }();\r\n\r\n  var interfaces = {\r\n    layer: LayerExpressionInterface,\r\n    effects: EffectsExpressionInterface,\r\n    comp: CompExpressionInterface,\r\n    shape: ShapeExpressionInterface,\r\n    text: TextExpressionInterface,\r\n    footage: FootageInterface\r\n  };\r\n\r\n  function getInterface(type) {\r\n    return interfaces[type] || null;\r\n  }\r\n\r\n  function _typeof$1(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$1 = function _typeof(obj) { return typeof obj; }; } else { _typeof$1 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$1(obj); }\r\n\r\n  /* eslint-disable */\r\n\r\n  /*\r\n   Copyright 2014 David Bau.\r\n\r\n   Permission is hereby granted, free of charge, to any person obtaining\r\n   a copy of this software and associated documentation files (the\r\n   \"Software\"), to deal in the Software without restriction, including\r\n   without limitation the rights to use, copy, modify, merge, publish,\r\n   distribute, sublicense, and/or sell copies of the Software, and to\r\n   permit persons to whom the Software is furnished to do so, subject to\r\n   the following conditions:\r\n\r\n   The above copyright notice and this permission notice shall be\r\n   included in all copies or substantial portions of the Software.\r\n\r\n   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n   */\r\n  function seedRandom(pool, math) {\r\n    //\r\n    // The following constants are related to IEEE 754 limits.\r\n    //\r\n    var global = this,\r\n        width = 256,\r\n        // each RC4 output is 0 <= x < 256\r\n    chunks = 6,\r\n        // at least six RC4 outputs for each double\r\n    digits = 52,\r\n        // there are 52 significant digits in a double\r\n    rngname = 'random',\r\n        // rngname: name for Math.random and Math.seedrandom\r\n    startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto; // node.js crypto module, initialized at the bottom.\r\n    //\r\n    // seedrandom()\r\n    // This is the seedrandom function described above.\r\n    //\r\n\r\n    function seedrandom(seed, options, callback) {\r\n      var key = [];\r\n      options = options === true ? {\r\n        entropy: true\r\n      } : options || {}; // Flatten the seed string or build one from local entropy if needed.\r\n\r\n      var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed === null ? autoseed() : seed, 3), key); // Use the seed to initialize an ARC4 generator.\r\n\r\n      var arc4 = new ARC4(key); // This function returns a random double in [0, 1) that contains\r\n      // randomness in every bit of the mantissa of the IEEE 754 value.\r\n\r\n      var prng = function prng() {\r\n        var n = arc4.g(chunks),\r\n            // Start with a numerator n < 2 ^ 48\r\n        d = startdenom,\r\n            //   and denominator d = 2 ^ 48.\r\n        x = 0; //   and no 'extra last byte'.\r\n\r\n        while (n < significance) {\r\n          // Fill up all significant digits by\r\n          n = (n + x) * width; //   shifting numerator and\r\n\r\n          d *= width; //   denominator and generating a\r\n\r\n          x = arc4.g(1); //   new least-significant-byte.\r\n        }\r\n\r\n        while (n >= overflow) {\r\n          // To avoid rounding up, before adding\r\n          n /= 2; //   last byte, shift everything\r\n\r\n          d /= 2; //   right using integer math until\r\n\r\n          x >>>= 1; //   we have exactly the desired bits.\r\n        }\r\n\r\n        return (n + x) / d; // Form the number within [0, 1).\r\n      };\r\n\r\n      prng.int32 = function () {\r\n        return arc4.g(4) | 0;\r\n      };\r\n\r\n      prng.quick = function () {\r\n        return arc4.g(4) / 0x100000000;\r\n      };\r\n\r\n      prng[\"double\"] = prng; // Mix the randomness into accumulated entropy.\r\n\r\n      mixkey(tostring(arc4.S), pool); // Calling convention: what to return as a function of prng, seed, is_math.\r\n\r\n      return (options.pass || callback || function (prng, seed, is_math_call, state) {\r\n        if (state) {\r\n          // Load the arc4 state from the given state if it has an S array.\r\n          if (state.S) {\r\n            copy(state, arc4);\r\n          } // Only provide the .state method if requested via options.state.\r\n\r\n\r\n          prng.state = function () {\r\n            return copy(arc4, {});\r\n          };\r\n        } // If called as a method of Math (Math.seedrandom()), mutate\r\n        // Math.random because that is how seedrandom.js has worked since v1.0.\r\n\r\n\r\n        if (is_math_call) {\r\n          math[rngname] = prng;\r\n          return seed;\r\n        } // Otherwise, it is a newer calling convention, so return the\r\n        // prng directly.\r\n        else return prng;\r\n      })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\r\n    }\r\n\r\n    math['seed' + rngname] = seedrandom; //\r\n    // ARC4\r\n    //\r\n    // An ARC4 implementation.  The constructor takes a key in the form of\r\n    // an array of at most (width) integers that should be 0 <= x < (width).\r\n    //\r\n    // The g(count) method returns a pseudorandom integer that concatenates\r\n    // the next (count) outputs from ARC4.  Its return value is a number x\r\n    // that is in the range 0 <= x < (width ^ count).\r\n    //\r\n\r\n    function ARC4(key) {\r\n      var t,\r\n          keylen = key.length,\r\n          me = this,\r\n          i = 0,\r\n          j = me.i = me.j = 0,\r\n          s = me.S = []; // The empty key [] is treated as [0].\r\n\r\n      if (!keylen) {\r\n        key = [keylen++];\r\n      } // Set up S using the standard key scheduling algorithm.\r\n\r\n\r\n      while (i < width) {\r\n        s[i] = i++;\r\n      }\r\n\r\n      for (i = 0; i < width; i++) {\r\n        s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\r\n        s[j] = t;\r\n      } // The \"g\" method returns the next (count) outputs as one number.\r\n\r\n\r\n      me.g = function (count) {\r\n        // Using instance members instead of closure state nearly doubles speed.\r\n        var t,\r\n            r = 0,\r\n            i = me.i,\r\n            j = me.j,\r\n            s = me.S;\r\n\r\n        while (count--) {\r\n          t = s[i = mask & i + 1];\r\n          r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\r\n        }\r\n\r\n        me.i = i;\r\n        me.j = j;\r\n        return r; // For robust unpredictability, the function call below automatically\r\n        // discards an initial batch of values.  This is called RC4-drop[256].\r\n        // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n      };\r\n    } //\r\n    // copy()\r\n    // Copies internal state of ARC4 to or from a plain object.\r\n    //\r\n\r\n\r\n    function copy(f, t) {\r\n      t.i = f.i;\r\n      t.j = f.j;\r\n      t.S = f.S.slice();\r\n      return t;\r\n    } //\r\n    // flatten()\r\n    // Converts an object tree to nested arrays of strings.\r\n    //\r\n\r\n\r\n    function flatten(obj, depth) {\r\n      var result = [],\r\n          typ = _typeof$1(obj),\r\n          prop;\r\n\r\n      if (depth && typ == 'object') {\r\n        for (prop in obj) {\r\n          try {\r\n            result.push(flatten(obj[prop], depth - 1));\r\n          } catch (e) {}\r\n        }\r\n      }\r\n\r\n      return result.length ? result : typ == 'string' ? obj : obj + '\\0';\r\n    } //\r\n    // mixkey()\r\n    // Mixes a string seed into a key that is an array of integers, and\r\n    // returns a shortened string seed that is equivalent to the result key.\r\n    //\r\n\r\n\r\n    function mixkey(seed, key) {\r\n      var stringseed = seed + '',\r\n          smear,\r\n          j = 0;\r\n\r\n      while (j < stringseed.length) {\r\n        key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\r\n      }\r\n\r\n      return tostring(key);\r\n    } //\r\n    // autoseed()\r\n    // Returns an object for autoseeding, using window.crypto and Node crypto\r\n    // module if available.\r\n    //\r\n\r\n\r\n    function autoseed() {\r\n      try {\r\n        if (nodecrypto) {\r\n          return tostring(nodecrypto.randomBytes(width));\r\n        }\r\n\r\n        var out = new Uint8Array(width);\r\n        (global.crypto || global.msCrypto).getRandomValues(out);\r\n        return tostring(out);\r\n      } catch (e) {\r\n        var browser = global.navigator,\r\n            plugins = browser && browser.plugins;\r\n        return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n      }\r\n    } //\r\n    // tostring()\r\n    // Converts an array of charcodes to a string\r\n    //\r\n\r\n\r\n    function tostring(a) {\r\n      return String.fromCharCode.apply(0, a);\r\n    } //\r\n    // When seedrandom.js is loaded, we immediately mix a few bits\r\n    // from the built-in RNG into the entropy pool.  Because we do\r\n    // not want to interfere with deterministic PRNG state later,\r\n    // seedrandom will not call math.random on its own again after\r\n    // initialization.\r\n    //\r\n\r\n\r\n    mixkey(math.random(), pool); //\r\n    // Nodejs and AMD support: export the implementation as a module using\r\n    // either convention.\r\n    //\r\n    // End anonymous scope, and pass initial values.\r\n  }\r\n\r\n  ;\r\n\r\n  function initialize$2(BMMath) {\r\n    seedRandom([], BMMath);\r\n  }\r\n\r\n  var propTypes = {\r\n    SHAPE: 'shape'\r\n  };\r\n\r\n  function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\n  var ExpressionManager = function () {\r\n    'use strict';\r\n\r\n    var ob = {};\r\n    var Math = BMMath;\r\n    var window = null;\r\n    var document = null;\r\n    var XMLHttpRequest = null;\r\n    var fetch = null;\r\n    var frames = null;\r\n    initialize$2(BMMath);\r\n\r\n    function $bm_isInstanceOfArray(arr) {\r\n      return arr.constructor === Array || arr.constructor === Float32Array;\r\n    }\r\n\r\n    function isNumerable(tOfV, v) {\r\n      return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\r\n    }\r\n\r\n    function $bm_neg(a) {\r\n      var tOfA = _typeof(a);\r\n\r\n      if (tOfA === 'number' || tOfA === 'boolean' || a instanceof Number) {\r\n        return -a;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a)) {\r\n        var i;\r\n        var lenA = a.length;\r\n        var retArr = [];\r\n\r\n        for (i = 0; i < lenA; i += 1) {\r\n          retArr[i] = -a[i];\r\n        }\r\n\r\n        return retArr;\r\n      }\r\n\r\n      if (a.propType) {\r\n        return a.v;\r\n      }\r\n\r\n      return -a;\r\n    }\r\n\r\n    var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\r\n    var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\r\n    var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\r\n\r\n    function sum(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      if (tOfA === 'string' || tOfB === 'string') {\r\n        return a + b;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        return a + b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        a = a.slice(0);\r\n        a[0] += b;\r\n        return a;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        b = b.slice(0);\r\n        b[0] = a + b[0];\r\n        return b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n        var i = 0;\r\n        var lenA = a.length;\r\n        var lenB = b.length;\r\n        var retArr = [];\r\n\r\n        while (i < lenA || i < lenB) {\r\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n            retArr[i] = a[i] + b[i];\r\n          } else {\r\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return retArr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    var add = sum;\r\n\r\n    function sub(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        if (tOfA === 'string') {\r\n          a = parseInt(a, 10);\r\n        }\r\n\r\n        if (tOfB === 'string') {\r\n          b = parseInt(b, 10);\r\n        }\r\n\r\n        return a - b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        a = a.slice(0);\r\n        a[0] -= b;\r\n        return a;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        b = b.slice(0);\r\n        b[0] = a - b[0];\r\n        return b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n        var i = 0;\r\n        var lenA = a.length;\r\n        var lenB = b.length;\r\n        var retArr = [];\r\n\r\n        while (i < lenA || i < lenB) {\r\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n            retArr[i] = a[i] - b[i];\r\n          } else {\r\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return retArr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    function mul(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      var arr;\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        return a * b;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        len = a.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a[i] * b;\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        len = b.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a * b[i];\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    function div(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      var arr;\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        return a / b;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        len = a.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a[i] / b;\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        len = b.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a / b[i];\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    function mod(a, b) {\r\n      if (typeof a === 'string') {\r\n        a = parseInt(a, 10);\r\n      }\r\n\r\n      if (typeof b === 'string') {\r\n        b = parseInt(b, 10);\r\n      }\r\n\r\n      return a % b;\r\n    }\r\n\r\n    var $bm_sum = sum;\r\n    var $bm_sub = sub;\r\n    var $bm_mul = mul;\r\n    var $bm_div = div;\r\n    var $bm_mod = mod;\r\n\r\n    function clamp(num, min, max) {\r\n      if (min > max) {\r\n        var mm = max;\r\n        max = min;\r\n        min = mm;\r\n      }\r\n\r\n      return Math.min(Math.max(num, min), max);\r\n    }\r\n\r\n    function radiansToDegrees(val) {\r\n      return val / degToRads;\r\n    }\r\n\r\n    var radians_to_degrees = radiansToDegrees;\r\n\r\n    function degreesToRadians(val) {\r\n      return val * degToRads;\r\n    }\r\n\r\n    var degrees_to_radians = radiansToDegrees;\r\n    var helperLengthArray = [0, 0, 0, 0, 0, 0];\r\n\r\n    function length(arr1, arr2) {\r\n      if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n        arr2 = arr2 || 0;\r\n        return Math.abs(arr1 - arr2);\r\n      }\r\n\r\n      if (!arr2) {\r\n        arr2 = helperLengthArray;\r\n      }\r\n\r\n      var i;\r\n      var len = Math.min(arr1.length, arr2.length);\r\n      var addedLength = 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n      }\r\n\r\n      return Math.sqrt(addedLength);\r\n    }\r\n\r\n    function normalize(vec) {\r\n      return div(vec, length(vec));\r\n    }\r\n\r\n    function rgbToHsl(val) {\r\n      var r = val[0];\r\n      var g = val[1];\r\n      var b = val[2];\r\n      var max = Math.max(r, g, b);\r\n      var min = Math.min(r, g, b);\r\n      var h;\r\n      var s;\r\n      var l = (max + min) / 2;\r\n\r\n      if (max === min) {\r\n        h = 0; // achromatic\r\n\r\n        s = 0; // achromatic\r\n      } else {\r\n        var d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n        switch (max) {\r\n          case r:\r\n            h = (g - b) / d + (g < b ? 6 : 0);\r\n            break;\r\n\r\n          case g:\r\n            h = (b - r) / d + 2;\r\n            break;\r\n\r\n          case b:\r\n            h = (r - g) / d + 4;\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n\r\n        h /= 6;\r\n      }\r\n\r\n      return [h, s, l, val[3]];\r\n    }\r\n\r\n    function hue2rgb(p, q, t) {\r\n      if (t < 0) t += 1;\r\n      if (t > 1) t -= 1;\r\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n      if (t < 1 / 2) return q;\r\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n      return p;\r\n    }\r\n\r\n    function hslToRgb(val) {\r\n      var h = val[0];\r\n      var s = val[1];\r\n      var l = val[2];\r\n      var r;\r\n      var g;\r\n      var b;\r\n\r\n      if (s === 0) {\r\n        r = l; // achromatic\r\n\r\n        b = l; // achromatic\r\n\r\n        g = l; // achromatic\r\n      } else {\r\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        var p = 2 * l - q;\r\n        r = hue2rgb(p, q, h + 1 / 3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1 / 3);\r\n      }\r\n\r\n      return [r, g, b, val[3]];\r\n    }\r\n\r\n    function linear(t, tMin, tMax, value1, value2) {\r\n      if (value1 === undefined || value2 === undefined) {\r\n        value1 = tMin;\r\n        value2 = tMax;\r\n        tMin = 0;\r\n        tMax = 1;\r\n      }\r\n\r\n      if (tMax < tMin) {\r\n        var _tMin = tMax;\r\n        tMax = tMin;\r\n        tMin = _tMin;\r\n      }\r\n\r\n      if (t <= tMin) {\r\n        return value1;\r\n      }\r\n\r\n      if (t >= tMax) {\r\n        return value2;\r\n      }\r\n\r\n      var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\r\n\r\n      if (!value1.length) {\r\n        return value1 + (value2 - value1) * perc;\r\n      }\r\n\r\n      var i;\r\n      var len = value1.length;\r\n      var arr = createTypedArray('float32', len);\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function random(min, max) {\r\n      if (max === undefined) {\r\n        if (min === undefined) {\r\n          min = 0;\r\n          max = 1;\r\n        } else {\r\n          max = min;\r\n          min = undefined;\r\n        }\r\n      }\r\n\r\n      if (max.length) {\r\n        var i;\r\n        var len = max.length;\r\n\r\n        if (!min) {\r\n          min = createTypedArray('float32', len);\r\n        }\r\n\r\n        var arr = createTypedArray('float32', len);\r\n        var rnd = BMMath.random();\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = min[i] + rnd * (max[i] - min[i]);\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      if (min === undefined) {\r\n        min = 0;\r\n      }\r\n\r\n      var rndm = BMMath.random();\r\n      return min + rndm * (max - min);\r\n    }\r\n\r\n    function createPath(points, inTangents, outTangents, closed) {\r\n      var i;\r\n      var len = points.length;\r\n      var path = shapePool.newElement();\r\n      path.setPathData(!!closed, len);\r\n      var arrPlaceholder = [0, 0];\r\n      var inVertexPoint;\r\n      var outVertexPoint;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        inVertexPoint = inTangents && inTangents[i] ? inTangents[i] : arrPlaceholder;\r\n        outVertexPoint = outTangents && outTangents[i] ? outTangents[i] : arrPlaceholder;\r\n        path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\r\n      }\r\n\r\n      return path;\r\n    }\r\n\r\n    function initiateExpression(elem, data, property) {\r\n      // Bail out if we don't want expressions\r\n      function noOp(_value) {\r\n        return _value;\r\n      }\r\n\r\n      if (!elem.globalData.renderConfig.runExpressions) {\r\n        return noOp;\r\n      }\r\n\r\n      var val = data.x;\r\n      var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n\r\n      var _needsRandom = val.indexOf('random') !== -1;\r\n\r\n      var elemType = elem.data.ty;\r\n      var transform;\r\n      var $bm_transform;\r\n      var content;\r\n      var effect;\r\n      var thisProperty = property;\r\n      thisProperty.valueAtTime = thisProperty.getValueAtTime;\r\n      Object.defineProperty(thisProperty, 'value', {\r\n        get: function get() {\r\n          return thisProperty.v;\r\n        }\r\n      });\r\n      elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\r\n      elem.comp.displayStartTime = 0;\r\n      var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n      var outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n      var width = elem.data.sw ? elem.data.sw : 0;\r\n      var height = elem.data.sh ? elem.data.sh : 0;\r\n      var name = elem.data.nm;\r\n      var loopIn;\r\n      var loop_in;\r\n      var loopOut;\r\n      var loop_out;\r\n      var smooth;\r\n      var toWorld;\r\n      var fromWorld;\r\n      var fromComp;\r\n      var toComp;\r\n      var fromCompToSurface;\r\n      var position;\r\n      var rotation;\r\n      var anchorPoint;\r\n      var scale;\r\n      var thisLayer;\r\n      var thisComp;\r\n      var mask;\r\n      var valueAtTime;\r\n      var velocityAtTime;\r\n      var scoped_bm_rt; // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\r\n\r\n      var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\r\n\r\n      var numKeys = property.kf ? data.k.length : 0;\r\n      var active = !this.data || this.data.hd !== true;\r\n\r\n      var wiggle = function wiggle(freq, amp) {\r\n        var iWiggle;\r\n        var j;\r\n        var lenWiggle = this.pv.length ? this.pv.length : 1;\r\n        var addedAmps = createTypedArray('float32', lenWiggle);\r\n        freq = 5;\r\n        var iterations = Math.floor(time * freq);\r\n        iWiggle = 0;\r\n        j = 0;\r\n\r\n        while (iWiggle < iterations) {\r\n          // var rnd = BMMath.random();\r\n          for (j = 0; j < lenWiggle; j += 1) {\r\n            addedAmps[j] += -amp + amp * 2 * BMMath.random(); // addedAmps[j] += -amp + amp*2*rnd;\r\n          }\r\n\r\n          iWiggle += 1;\r\n        } // var rnd2 = BMMath.random();\r\n\r\n\r\n        var periods = time * freq;\r\n        var perc = periods - Math.floor(periods);\r\n        var arr = createTypedArray('float32', lenWiggle);\r\n\r\n        if (lenWiggle > 1) {\r\n          for (j = 0; j < lenWiggle; j += 1) {\r\n            arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc; // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n            // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n          }\r\n\r\n          return arr;\r\n        }\r\n\r\n        return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n      }.bind(this);\r\n\r\n      if (thisProperty.loopIn) {\r\n        loopIn = thisProperty.loopIn.bind(thisProperty);\r\n        loop_in = loopIn;\r\n      }\r\n\r\n      if (thisProperty.loopOut) {\r\n        loopOut = thisProperty.loopOut.bind(thisProperty);\r\n        loop_out = loopOut;\r\n      }\r\n\r\n      if (thisProperty.smooth) {\r\n        smooth = thisProperty.smooth.bind(thisProperty);\r\n      }\r\n\r\n      function loopInDuration(type, duration) {\r\n        return loopIn(type, duration, true);\r\n      }\r\n\r\n      function loopOutDuration(type, duration) {\r\n        return loopOut(type, duration, true);\r\n      }\r\n\r\n      if (this.getValueAtTime) {\r\n        valueAtTime = this.getValueAtTime.bind(this);\r\n      }\r\n\r\n      if (this.getVelocityAtTime) {\r\n        velocityAtTime = this.getVelocityAtTime.bind(this);\r\n      }\r\n\r\n      var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n      function lookAt(elem1, elem2) {\r\n        var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\r\n        var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\r\n        var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\r\n        return [yaw, pitch, 0];\r\n      }\r\n\r\n      function easeOut(t, tMin, tMax, val1, val2) {\r\n        return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\r\n      }\r\n\r\n      function easeIn(t, tMin, tMax, val1, val2) {\r\n        return applyEase(easeInBez, t, tMin, tMax, val1, val2);\r\n      }\r\n\r\n      function ease(t, tMin, tMax, val1, val2) {\r\n        return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\r\n      }\r\n\r\n      function applyEase(fn, t, tMin, tMax, val1, val2) {\r\n        if (val1 === undefined) {\r\n          val1 = tMin;\r\n          val2 = tMax;\r\n        } else {\r\n          t = (t - tMin) / (tMax - tMin);\r\n        }\r\n\r\n        if (t > 1) {\r\n          t = 1;\r\n        } else if (t < 0) {\r\n          t = 0;\r\n        }\r\n\r\n        var mult = fn(t);\r\n\r\n        if ($bm_isInstanceOfArray(val1)) {\r\n          var iKey;\r\n          var lenKey = val1.length;\r\n          var arr = createTypedArray('float32', lenKey);\r\n\r\n          for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n            arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\r\n          }\r\n\r\n          return arr;\r\n        }\r\n\r\n        return (val2 - val1) * mult + val1;\r\n      }\r\n\r\n      function nearestKey(time) {\r\n        var iKey;\r\n        var lenKey = data.k.length;\r\n        var index;\r\n        var keyTime;\r\n\r\n        if (!data.k.length || typeof data.k[0] === 'number') {\r\n          index = 0;\r\n          keyTime = 0;\r\n        } else {\r\n          index = -1;\r\n          time *= elem.comp.globalData.frameRate;\r\n\r\n          if (time < data.k[0].t) {\r\n            index = 1;\r\n            keyTime = data.k[0].t;\r\n          } else {\r\n            for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\r\n              if (time === data.k[iKey].t) {\r\n                index = iKey + 1;\r\n                keyTime = data.k[iKey].t;\r\n                break;\r\n              } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\r\n                if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\r\n                  index = iKey + 2;\r\n                  keyTime = data.k[iKey + 1].t;\r\n                } else {\r\n                  index = iKey + 1;\r\n                  keyTime = data.k[iKey].t;\r\n                }\r\n\r\n                break;\r\n              }\r\n            }\r\n\r\n            if (index === -1) {\r\n              index = iKey + 1;\r\n              keyTime = data.k[iKey].t;\r\n            }\r\n          }\r\n        }\r\n\r\n        var obKey = {};\r\n        obKey.index = index;\r\n        obKey.time = keyTime / elem.comp.globalData.frameRate;\r\n        return obKey;\r\n      }\r\n\r\n      function key(ind) {\r\n        var obKey;\r\n        var iKey;\r\n        var lenKey;\r\n\r\n        if (!data.k.length || typeof data.k[0] === 'number') {\r\n          throw new Error('The property has no keyframe at index ' + ind);\r\n        }\r\n\r\n        ind -= 1;\r\n        obKey = {\r\n          time: data.k[ind].t / elem.comp.globalData.frameRate,\r\n          value: []\r\n        };\r\n        var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\r\n        lenKey = arr.length;\r\n\r\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n          obKey[iKey] = arr[iKey];\r\n          obKey.value[iKey] = arr[iKey];\r\n        }\r\n\r\n        return obKey;\r\n      }\r\n\r\n      function framesToTime(fr, fps) {\r\n        if (!fps) {\r\n          fps = elem.comp.globalData.frameRate;\r\n        }\r\n\r\n        return fr / fps;\r\n      }\r\n\r\n      function timeToFrames(t, fps) {\r\n        if (!t && t !== 0) {\r\n          t = time;\r\n        }\r\n\r\n        if (!fps) {\r\n          fps = elem.comp.globalData.frameRate;\r\n        }\r\n\r\n        return t * fps;\r\n      }\r\n\r\n      function seedRandom(seed) {\r\n        BMMath.seedrandom(randSeed + seed);\r\n      }\r\n\r\n      function sourceRectAtTime() {\r\n        return elem.sourceRectAtTime();\r\n      }\r\n\r\n      function substring(init, end) {\r\n        if (typeof value === 'string') {\r\n          if (end === undefined) {\r\n            return value.substring(init);\r\n          }\r\n\r\n          return value.substring(init, end);\r\n        }\r\n\r\n        return '';\r\n      }\r\n\r\n      function substr(init, end) {\r\n        if (typeof value === 'string') {\r\n          if (end === undefined) {\r\n            return value.substr(init);\r\n          }\r\n\r\n          return value.substr(init, end);\r\n        }\r\n\r\n        return '';\r\n      }\r\n\r\n      function posterizeTime(framesPerSecond) {\r\n        time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\r\n        value = valueAtTime(time);\r\n      }\r\n\r\n      var time;\r\n      var velocity;\r\n      var value;\r\n      var text;\r\n      var textIndex;\r\n      var textTotal;\r\n      var selectorValue;\r\n      var index = elem.data.ind;\r\n      var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n      var parent;\r\n      var randSeed = Math.floor(Math.random() * 1000000);\r\n      var globalData = elem.globalData;\r\n\r\n      function executeExpression(_value) {\r\n        // globalData.pushExpression();\r\n        value = _value;\r\n\r\n        if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n          return value;\r\n        }\r\n\r\n        if (this.propType === 'textSelector') {\r\n          textIndex = this.textIndex;\r\n          textTotal = this.textTotal;\r\n          selectorValue = this.selectorValue;\r\n        }\r\n\r\n        if (!thisLayer) {\r\n          text = elem.layerInterface.text;\r\n          thisLayer = elem.layerInterface;\r\n          thisComp = elem.comp.compInterface;\r\n          toWorld = thisLayer.toWorld.bind(thisLayer);\r\n          fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n          fromComp = thisLayer.fromComp.bind(thisLayer);\r\n          toComp = thisLayer.toComp.bind(thisLayer);\r\n          mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n          fromCompToSurface = fromComp;\r\n        }\r\n\r\n        if (!transform) {\r\n          transform = elem.layerInterface('ADBE Transform Group');\r\n          $bm_transform = transform;\r\n\r\n          if (transform) {\r\n            anchorPoint = transform.anchorPoint;\r\n            /* position = transform.position;\r\n                      rotation = transform.rotation;\r\n                      scale = transform.scale; */\r\n          }\r\n        }\r\n\r\n        if (elemType === 4 && !content) {\r\n          content = thisLayer('ADBE Root Vectors Group');\r\n        }\r\n\r\n        if (!effect) {\r\n          effect = thisLayer(4);\r\n        }\r\n\r\n        hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n\r\n        if (hasParent && !parent) {\r\n          parent = elem.hierarchy[0].layerInterface;\r\n        }\r\n\r\n        time = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n\r\n        if (_needsRandom) {\r\n          seedRandom(randSeed + time);\r\n        }\r\n\r\n        if (needsVelocity) {\r\n          velocity = velocityAtTime(time);\r\n        }\r\n\r\n        expression_function();\r\n        this.frameExpressionId = elem.globalData.frameId; // TODO: Check if it's possible to return on ShapeInterface the .v value\r\n        // Changed this to a ternary operation because Rollup failed compiling it correctly\r\n\r\n        scoped_bm_rt = scoped_bm_rt.propType === propTypes.SHAPE ? scoped_bm_rt.v : scoped_bm_rt;\r\n        return scoped_bm_rt;\r\n      } // Bundlers will see these as dead code and unless we reference them\r\n\r\n\r\n      executeExpression.__preventDeadCodeRemoval = [$bm_transform, anchorPoint, time, velocity, inPoint, outPoint, width, height, name, loop_in, loop_out, smooth, toComp, fromCompToSurface, toWorld, fromWorld, mask, position, rotation, scale, thisComp, numKeys, active, wiggle, loopInDuration, loopOutDuration, comp, lookAt, easeOut, easeIn, ease, nearestKey, key, text, textIndex, textTotal, selectorValue, framesToTime, timeToFrames, sourceRectAtTime, substring, substr, posterizeTime, index, globalData];\r\n      return executeExpression;\r\n    }\r\n\r\n    ob.initiateExpression = initiateExpression;\r\n    ob.__preventDeadCodeRemoval = [window, document, XMLHttpRequest, fetch, frames, $bm_neg, add, $bm_sum, $bm_sub, $bm_mul, $bm_div, $bm_mod, clamp, radians_to_degrees, degreesToRadians, degrees_to_radians, normalize, rgbToHsl, hslToRgb, linear, random, createPath];\r\n    return ob;\r\n  }();\r\n\r\n  var expressionHelpers = function () {\r\n    function searchExpressions(elem, data, prop) {\r\n      if (data.x) {\r\n        prop.k = true;\r\n        prop.x = true;\r\n        prop.initiateExpression = ExpressionManager.initiateExpression;\r\n        prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\r\n      }\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n      frameNum *= this.elem.globalData.frameRate;\r\n      frameNum -= this.offsetTime;\r\n\r\n      if (frameNum !== this._cachingAtTime.lastFrame) {\r\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n        this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n        this._cachingAtTime.lastFrame = frameNum;\r\n      }\r\n\r\n      return this._cachingAtTime.value;\r\n    }\r\n\r\n    function getSpeedAtTime(frameNum) {\r\n      var delta = -0.01;\r\n      var v1 = this.getValueAtTime(frameNum);\r\n      var v2 = this.getValueAtTime(frameNum + delta);\r\n      var speed = 0;\r\n\r\n      if (v1.length) {\r\n        var i;\r\n\r\n        for (i = 0; i < v1.length; i += 1) {\r\n          speed += Math.pow(v2[i] - v1[i], 2);\r\n        }\r\n\r\n        speed = Math.sqrt(speed) * 100;\r\n      } else {\r\n        speed = 0;\r\n      }\r\n\r\n      return speed;\r\n    }\r\n\r\n    function getVelocityAtTime(frameNum) {\r\n      if (this.vel !== undefined) {\r\n        return this.vel;\r\n      }\r\n\r\n      var delta = -0.001; // frameNum += this.elem.data.st;\r\n\r\n      var v1 = this.getValueAtTime(frameNum);\r\n      var v2 = this.getValueAtTime(frameNum + delta);\r\n      var velocity;\r\n\r\n      if (v1.length) {\r\n        velocity = createTypedArray('float32', v1.length);\r\n        var i;\r\n\r\n        for (i = 0; i < v1.length; i += 1) {\r\n          // removing frameRate\r\n          // if needed, don't add it here\r\n          // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n          velocity[i] = (v2[i] - v1[i]) / delta;\r\n        }\r\n      } else {\r\n        velocity = (v2 - v1) / delta;\r\n      }\r\n\r\n      return velocity;\r\n    }\r\n\r\n    function getStaticValueAtTime() {\r\n      return this.pv;\r\n    }\r\n\r\n    function setGroupProperty(propertyGroup) {\r\n      this.propertyGroup = propertyGroup;\r\n    }\r\n\r\n    return {\r\n      searchExpressions: searchExpressions,\r\n      getSpeedAtTime: getSpeedAtTime,\r\n      getVelocityAtTime: getVelocityAtTime,\r\n      getValueAtTime: getValueAtTime,\r\n      getStaticValueAtTime: getStaticValueAtTime,\r\n      setGroupProperty: setGroupProperty\r\n    };\r\n  }();\r\n\r\n  function addPropertyDecorator() {\r\n    function loopOut(type, duration, durationFlag) {\r\n      if (!this.k || !this.keyframes) {\r\n        return this.pv;\r\n      }\r\n\r\n      type = type ? type.toLowerCase() : '';\r\n      var currentFrame = this.comp.renderedFrame;\r\n      var keyframes = this.keyframes;\r\n      var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n\r\n      if (currentFrame <= lastKeyFrame) {\r\n        return this.pv;\r\n      }\r\n\r\n      var cycleDuration;\r\n      var firstKeyFrame;\r\n\r\n      if (!durationFlag) {\r\n        if (!duration || duration > keyframes.length - 1) {\r\n          duration = keyframes.length - 1;\r\n        }\r\n\r\n        firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n        cycleDuration = lastKeyFrame - firstKeyFrame;\r\n      } else {\r\n        if (!duration) {\r\n          cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\r\n        } else {\r\n          cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\r\n        }\r\n\r\n        firstKeyFrame = lastKeyFrame - cycleDuration;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n      var ret;\r\n\r\n      if (type === 'pingpong') {\r\n        var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n\r\n        if (iterations % 2 !== 0) {\r\n          return this.getValueAtTime((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n        }\r\n      } else if (type === 'offset') {\r\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n        var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(initV.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = (endV[i] - initV[i]) * repeats + current[i];\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return (endV - initV) * repeats + current;\r\n      } else if (type === 'continue') {\r\n        var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(lastValue.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return lastValue + (lastValue - nextLastValue) * ((currentFrame - lastKeyFrame) / 0.001);\r\n      }\r\n\r\n      return this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n    }\r\n\r\n    function loopIn(type, duration, durationFlag) {\r\n      if (!this.k) {\r\n        return this.pv;\r\n      }\r\n\r\n      type = type ? type.toLowerCase() : '';\r\n      var currentFrame = this.comp.renderedFrame;\r\n      var keyframes = this.keyframes;\r\n      var firstKeyFrame = keyframes[0].t;\r\n\r\n      if (currentFrame >= firstKeyFrame) {\r\n        return this.pv;\r\n      }\r\n\r\n      var cycleDuration;\r\n      var lastKeyFrame;\r\n\r\n      if (!durationFlag) {\r\n        if (!duration || duration > keyframes.length - 1) {\r\n          duration = keyframes.length - 1;\r\n        }\r\n\r\n        lastKeyFrame = keyframes[duration].t;\r\n        cycleDuration = lastKeyFrame - firstKeyFrame;\r\n      } else {\r\n        if (!duration) {\r\n          cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\r\n        } else {\r\n          cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\r\n        }\r\n\r\n        lastKeyFrame = firstKeyFrame + cycleDuration;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n      var ret;\r\n\r\n      if (type === 'pingpong') {\r\n        var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\r\n\r\n        if (iterations % 2 === 0) {\r\n          return this.getValueAtTime(((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n        }\r\n      } else if (type === 'offset') {\r\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n        var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(initV.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return current - (endV - initV) * repeats;\r\n      } else if (type === 'continue') {\r\n        var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(firstValue.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = firstValue[i] + (firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame) / 0.001;\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return firstValue + (firstValue - nextFirstValue) * (firstKeyFrame - currentFrame) / 0.001;\r\n      }\r\n\r\n      return this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n    }\r\n\r\n    function smooth(width, samples) {\r\n      if (!this.k) {\r\n        return this.pv;\r\n      }\r\n\r\n      width = (width || 0.4) * 0.5;\r\n      samples = Math.floor(samples || 5);\r\n\r\n      if (samples <= 1) {\r\n        return this.pv;\r\n      }\r\n\r\n      var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n      var initFrame = currentTime - width;\r\n      var endFrame = currentTime + width;\r\n      var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\r\n      var i = 0;\r\n      var j = 0;\r\n      var value;\r\n\r\n      if (this.pv.length) {\r\n        value = createTypedArray('float32', this.pv.length);\r\n      } else {\r\n        value = 0;\r\n      }\r\n\r\n      var sampleValue;\r\n\r\n      while (i < samples) {\r\n        sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\r\n\r\n        if (this.pv.length) {\r\n          for (j = 0; j < this.pv.length; j += 1) {\r\n            value[j] += sampleValue[j];\r\n          }\r\n        } else {\r\n          value += sampleValue;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      if (this.pv.length) {\r\n        for (j = 0; j < this.pv.length; j += 1) {\r\n          value[j] /= samples;\r\n        }\r\n      } else {\r\n        value /= samples;\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    function getTransformValueAtTime(time) {\r\n      if (!this._transformCachingAtTime) {\r\n        this._transformCachingAtTime = {\r\n          v: new Matrix()\r\n        };\r\n      } /// /\r\n\r\n\r\n      var matrix = this._transformCachingAtTime.v;\r\n      matrix.cloneFromProps(this.pre.props);\r\n\r\n      if (this.appliedTransformations < 1) {\r\n        var anchor = this.a.getValueAtTime(time);\r\n        matrix.translate(-anchor[0] * this.a.mult, -anchor[1] * this.a.mult, anchor[2] * this.a.mult);\r\n      }\r\n\r\n      if (this.appliedTransformations < 2) {\r\n        var scale = this.s.getValueAtTime(time);\r\n        matrix.scale(scale[0] * this.s.mult, scale[1] * this.s.mult, scale[2] * this.s.mult);\r\n      }\r\n\r\n      if (this.sk && this.appliedTransformations < 3) {\r\n        var skew = this.sk.getValueAtTime(time);\r\n        var skewAxis = this.sa.getValueAtTime(time);\r\n        matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\r\n      }\r\n\r\n      if (this.r && this.appliedTransformations < 4) {\r\n        var rotation = this.r.getValueAtTime(time);\r\n        matrix.rotate(-rotation * this.r.mult);\r\n      } else if (!this.r && this.appliedTransformations < 4) {\r\n        var rotationZ = this.rz.getValueAtTime(time);\r\n        var rotationY = this.ry.getValueAtTime(time);\r\n        var rotationX = this.rx.getValueAtTime(time);\r\n        var orientation = this.or.getValueAtTime(time);\r\n        matrix.rotateZ(-rotationZ * this.rz.mult).rotateY(rotationY * this.ry.mult).rotateX(rotationX * this.rx.mult).rotateZ(-orientation[2] * this.or.mult).rotateY(orientation[1] * this.or.mult).rotateX(orientation[0] * this.or.mult);\r\n      }\r\n\r\n      if (this.data.p && this.data.p.s) {\r\n        var positionX = this.px.getValueAtTime(time);\r\n        var positionY = this.py.getValueAtTime(time);\r\n\r\n        if (this.data.p.z) {\r\n          var positionZ = this.pz.getValueAtTime(time);\r\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, -positionZ * this.pz.mult);\r\n        } else {\r\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\r\n        }\r\n      } else {\r\n        var position = this.p.getValueAtTime(time);\r\n        matrix.translate(position[0] * this.p.mult, position[1] * this.p.mult, -position[2] * this.p.mult);\r\n      }\r\n\r\n      return matrix; /// /\r\n    }\r\n\r\n    function getTransformStaticValueAtTime() {\r\n      return this.v.clone(new Matrix());\r\n    }\r\n\r\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n\r\n    TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\r\n      var prop = getTransformProperty(elem, data, container);\r\n\r\n      if (prop.dynamicProperties.length) {\r\n        prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n      } else {\r\n        prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n      }\r\n\r\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n      return prop;\r\n    };\r\n\r\n    var propertyGetProp = PropertyFactory.getProp;\r\n\r\n    PropertyFactory.getProp = function (elem, data, type, mult, container) {\r\n      var prop = propertyGetProp(elem, data, type, mult, container); // prop.getVelocityAtTime = getVelocityAtTime;\r\n      // prop.loopOut = loopOut;\r\n      // prop.loopIn = loopIn;\r\n\r\n      if (prop.kf) {\r\n        prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\r\n      } else {\r\n        prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\r\n      }\r\n\r\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n      prop.loopOut = loopOut;\r\n      prop.loopIn = loopIn;\r\n      prop.smooth = smooth;\r\n      prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\r\n      prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\r\n      prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n      prop.propertyIndex = data.ix;\r\n      var value = 0;\r\n\r\n      if (type !== 0) {\r\n        value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\r\n      }\r\n\r\n      prop._cachingAtTime = {\r\n        lastFrame: initialDefaultFrame,\r\n        lastIndex: 0,\r\n        value: value\r\n      };\r\n      expressionHelpers.searchExpressions(elem, data, prop);\r\n\r\n      if (prop.k) {\r\n        container.addDynamicProperty(prop);\r\n      }\r\n\r\n      return prop;\r\n    };\r\n\r\n    function getShapeValueAtTime(frameNum) {\r\n      // For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n      if (!this._cachingAtTime) {\r\n        this._cachingAtTime = {\r\n          shapeValue: shapePool.clone(this.pv),\r\n          lastIndex: 0,\r\n          lastTime: initialDefaultFrame\r\n        };\r\n      }\r\n\r\n      frameNum *= this.elem.globalData.frameRate;\r\n      frameNum -= this.offsetTime;\r\n\r\n      if (frameNum !== this._cachingAtTime.lastTime) {\r\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n        this._cachingAtTime.lastTime = frameNum;\r\n        this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n      }\r\n\r\n      return this._cachingAtTime.shapeValue;\r\n    }\r\n\r\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n    function ShapeExpressions() {}\r\n\r\n    ShapeExpressions.prototype = {\r\n      vertices: function vertices(prop, time) {\r\n        if (this.k) {\r\n          this.getValue();\r\n        }\r\n\r\n        var shapePath = this.v;\r\n\r\n        if (time !== undefined) {\r\n          shapePath = this.getValueAtTime(time, 0);\r\n        }\r\n\r\n        var i;\r\n        var len = shapePath._length;\r\n        var vertices = shapePath[prop];\r\n        var points = shapePath.v;\r\n        var arr = createSizedArray(len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          if (prop === 'i' || prop === 'o') {\r\n            arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n          } else {\r\n            arr[i] = [vertices[i][0], vertices[i][1]];\r\n          }\r\n        }\r\n\r\n        return arr;\r\n      },\r\n      points: function points(time) {\r\n        return this.vertices('v', time);\r\n      },\r\n      inTangents: function inTangents(time) {\r\n        return this.vertices('i', time);\r\n      },\r\n      outTangents: function outTangents(time) {\r\n        return this.vertices('o', time);\r\n      },\r\n      isClosed: function isClosed() {\r\n        return this.v.c;\r\n      },\r\n      pointOnPath: function pointOnPath(perc, time) {\r\n        var shapePath = this.v;\r\n\r\n        if (time !== undefined) {\r\n          shapePath = this.getValueAtTime(time, 0);\r\n        }\r\n\r\n        if (!this._segmentsLength) {\r\n          this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n        }\r\n\r\n        var segmentsLength = this._segmentsLength;\r\n        var lengths = segmentsLength.lengths;\r\n        var lengthPos = segmentsLength.totalLength * perc;\r\n        var i = 0;\r\n        var len = lengths.length;\r\n        var accumulatedLength = 0;\r\n        var pt;\r\n\r\n        while (i < len) {\r\n          if (accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n            var initIndex = i;\r\n            var endIndex = shapePath.c && i === len - 1 ? 0 : i + 1;\r\n            var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\r\n            pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n            break;\r\n          } else {\r\n            accumulatedLength += lengths[i].addedLength;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (!pt) {\r\n          pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\r\n        }\r\n\r\n        return pt;\r\n      },\r\n      vectorOnPath: function vectorOnPath(perc, time, vectorType) {\r\n        // perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n        if (perc == 1) {\r\n          // eslint-disable-line eqeqeq\r\n          perc = this.v.c;\r\n        } else if (perc == 0) {\r\n          // eslint-disable-line eqeqeq\r\n          perc = 0.999;\r\n        }\r\n\r\n        var pt1 = this.pointOnPath(perc, time);\r\n        var pt2 = this.pointOnPath(perc + 0.001, time);\r\n        var xLength = pt2[0] - pt1[0];\r\n        var yLength = pt2[1] - pt1[1];\r\n        var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\r\n\r\n        if (magnitude === 0) {\r\n          return [0, 0];\r\n        }\r\n\r\n        var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\r\n        return unitVector;\r\n      },\r\n      tangentOnPath: function tangentOnPath(perc, time) {\r\n        return this.vectorOnPath(perc, time, 'tangent');\r\n      },\r\n      normalOnPath: function normalOnPath(perc, time) {\r\n        return this.vectorOnPath(perc, time, 'normal');\r\n      },\r\n      setGroupProperty: expressionHelpers.setGroupProperty,\r\n      getValueAtTime: expressionHelpers.getStaticValueAtTime\r\n    };\r\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n\r\n    ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\r\n      var prop = propertyGetShapeProp(elem, data, type, arr, trims);\r\n      prop.propertyIndex = data.ix;\r\n      prop.lock = false;\r\n\r\n      if (type === 3) {\r\n        expressionHelpers.searchExpressions(elem, data.pt, prop);\r\n      } else if (type === 4) {\r\n        expressionHelpers.searchExpressions(elem, data.ks, prop);\r\n      }\r\n\r\n      if (prop.k) {\r\n        elem.addDynamicProperty(prop);\r\n      }\r\n\r\n      return prop;\r\n    };\r\n  }\r\n\r\n  function initialize$1() {\r\n    addPropertyDecorator();\r\n  }\r\n\r\n  function addDecorator() {\r\n    function searchExpressions() {\r\n      if (this.data.d.x) {\r\n        this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\r\n        this.addEffect(this.getExpressionValue.bind(this));\r\n        return true;\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    TextProperty.prototype.getExpressionValue = function (currentValue, text) {\r\n      var newValue = this.calculateExpression(text);\r\n\r\n      if (currentValue.t !== newValue) {\r\n        var newData = {};\r\n        this.copyData(newData, currentValue);\r\n        newData.t = newValue.toString();\r\n        newData.__complete = false;\r\n        return newData;\r\n      }\r\n\r\n      return currentValue;\r\n    };\r\n\r\n    TextProperty.prototype.searchProperty = function () {\r\n      var isKeyframed = this.searchKeyframes();\r\n      var hasExpressions = this.searchExpressions();\r\n      this.kf = isKeyframed || hasExpressions;\r\n      return this.kf;\r\n    };\r\n\r\n    TextProperty.prototype.searchExpressions = searchExpressions;\r\n  }\r\n\r\n  function initialize() {\r\n    addDecorator();\r\n  }\r\n\r\n  function SVGComposableEffect() {}\r\n\r\n  SVGComposableEffect.prototype = {\r\n    createMergeNode: function createMergeNode(resultId, ins) {\r\n      var feMerge = createNS('feMerge');\r\n      feMerge.setAttribute('result', resultId);\r\n      var feMergeNode;\r\n      var i;\r\n\r\n      for (i = 0; i < ins.length; i += 1) {\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in', ins[i]);\r\n        feMerge.appendChild(feMergeNode);\r\n        feMerge.appendChild(feMergeNode);\r\n      }\r\n\r\n      return feMerge;\r\n    }\r\n  };\r\n\r\n  function SVGTintFilter(filter, filterManager, elem, id, source) {\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n    feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result', id + '_tint_1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result', id + '_tint_2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    var feMerge = this.createMergeNode(id, [source, id + '_tint_1', id + '_tint_2']);\r\n    filter.appendChild(feMerge);\r\n  }\r\n\r\n  extendPrototype([SVGComposableEffect], SVGTintFilter);\r\n\r\n  SVGTintFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var colorBlack = this.filterManager.effectElements[0].p.v;\r\n      var colorWhite = this.filterManager.effectElements[1].p.v;\r\n      var opacity = this.filterManager.effectElements[2].p.v / 100;\r\n      this.matrixFilter.setAttribute('values', colorWhite[0] - colorBlack[0] + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n  };\r\n\r\n  function SVGFillFilter(filter, filterManager, elem, id) {\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result', id);\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n  }\r\n\r\n  SVGFillFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var color = this.filterManager.effectElements[2].p.v;\r\n      var opacity = this.filterManager.effectElements[6].p.v;\r\n      this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n  };\r\n\r\n  function SVGStrokeEffect(fil, filterManager, elem) {\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n  }\r\n\r\n  SVGStrokeEffect.prototype.initialize = function () {\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path;\r\n    var groupPath;\r\n    var i;\r\n    var len;\r\n\r\n    if (this.filterManager.effectElements[1].p.v === 1) {\r\n      len = this.elem.maskManager.masksProperties.length;\r\n      i = 0;\r\n    } else {\r\n      i = this.filterManager.effectElements[0].p.v - 1;\r\n      len = i + 1;\r\n    }\r\n\r\n    groupPath = createNS('g');\r\n    groupPath.setAttribute('fill', 'none');\r\n    groupPath.setAttribute('stroke-linecap', 'round');\r\n    groupPath.setAttribute('stroke-dashoffset', 1);\r\n\r\n    for (i; i < len; i += 1) {\r\n      path = createNS('path');\r\n      groupPath.appendChild(path);\r\n      this.paths.push({\r\n        p: path,\r\n        m: i\r\n      });\r\n    }\r\n\r\n    if (this.filterManager.effectElements[10].p.v === 3) {\r\n      var mask = createNS('mask');\r\n      var id = createElementID();\r\n      mask.setAttribute('id', id);\r\n      mask.setAttribute('mask-type', 'alpha');\r\n      mask.appendChild(groupPath);\r\n      this.elem.globalData.defs.appendChild(mask);\r\n      var g = createNS('g');\r\n      g.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\r\n\r\n      while (elemChildren[0]) {\r\n        g.appendChild(elemChildren[0]);\r\n      }\r\n\r\n      this.elem.layerElement.appendChild(g);\r\n      this.masker = mask;\r\n      groupPath.setAttribute('stroke', '#fff');\r\n    } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n      if (this.filterManager.effectElements[10].p.v === 2) {\r\n        elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n\r\n        while (elemChildren.length) {\r\n          this.elem.layerElement.removeChild(elemChildren[0]);\r\n        }\r\n      }\r\n\r\n      this.elem.layerElement.appendChild(groupPath);\r\n      this.elem.layerElement.removeAttribute('mask');\r\n      groupPath.setAttribute('stroke', '#fff');\r\n    }\r\n\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n  };\r\n\r\n  SVGStrokeEffect.prototype.renderFrame = function (forceRender) {\r\n    if (!this.initialized) {\r\n      this.initialize();\r\n    }\r\n\r\n    var i;\r\n    var len = this.paths.length;\r\n    var mask;\r\n    var path;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.paths[i].m !== -1) {\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n\r\n        if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\r\n          path.setAttribute('d', mask.lastPath);\r\n        }\r\n\r\n        if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\r\n          var dasharrayValue;\r\n\r\n          if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\r\n            var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n            var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n            var l = path.getTotalLength();\r\n            dasharrayValue = '0 0 0 ' + l * s + ' ';\r\n            var lineLength = l * (e - s);\r\n            var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n            var units = Math.floor(lineLength / segment);\r\n            var j;\r\n\r\n            for (j = 0; j < units; j += 1) {\r\n              dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01 + ' ';\r\n            }\r\n\r\n            dasharrayValue += '0 ' + l * 10 + ' 0 0';\r\n          } else {\r\n            dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n          }\r\n\r\n          path.setAttribute('stroke-dasharray', dasharrayValue);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n      this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\r\n    }\r\n\r\n    if (forceRender || this.filterManager.effectElements[6].p._mdf) {\r\n      this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\r\n    }\r\n\r\n    if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n      if (forceRender || this.filterManager.effectElements[3].p._mdf) {\r\n        var color = this.filterManager.effectElements[3].p.v;\r\n        this.pathMasker.setAttribute('stroke', 'rgb(' + bmFloor(color[0] * 255) + ',' + bmFloor(color[1] * 255) + ',' + bmFloor(color[2] * 255) + ')');\r\n      }\r\n    }\r\n  };\r\n\r\n  function SVGTritoneFilter(filter, filterManager, elem, id) {\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n    feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feComponentTransfer.setAttribute('result', id);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = createNS('feFuncR');\r\n    feFuncR.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = createNS('feFuncG');\r\n    feFuncG.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = createNS('feFuncB');\r\n    feFuncB.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n    filter.appendChild(feComponentTransfer);\r\n  }\r\n\r\n  SVGTritoneFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var color1 = this.filterManager.effectElements[0].p.v;\r\n      var color2 = this.filterManager.effectElements[1].p.v;\r\n      var color3 = this.filterManager.effectElements[2].p.v;\r\n      var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n      var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n      var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n      this.feFuncR.setAttribute('tableValues', tableR);\r\n      this.feFuncG.setAttribute('tableValues', tableG);\r\n      this.feFuncB.setAttribute('tableValues', tableB);\r\n    }\r\n  };\r\n\r\n  function SVGProLevelsFilter(filter, filterManager, elem, id) {\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = createNS('feComponentTransfer'); // Red\r\n\r\n    if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\r\n      this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    } // Green\r\n\r\n\r\n    if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\r\n      this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    } // Blue\r\n\r\n\r\n    if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\r\n      this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    } // Alpha\r\n\r\n\r\n    if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\r\n      this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    } // RGB\r\n\r\n\r\n    if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\r\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n      filter.appendChild(feComponentTransfer);\r\n    }\r\n\r\n    if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\r\n      feComponentTransfer = createNS('feComponentTransfer');\r\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n      feComponentTransfer.setAttribute('result', id);\r\n      filter.appendChild(feComponentTransfer);\r\n      this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n      this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n      this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n  }\r\n\r\n  SVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\r\n    var feFunc = createNS(type);\r\n    feFunc.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n  };\r\n\r\n  SVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null, {\r\n      length: segments\r\n    });\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack;\r\n    var inputDelta = inputWhite - inputBlack;\r\n\r\n    while (cnt <= 256) {\r\n      perc = cnt / 256;\r\n\r\n      if (perc <= min) {\r\n        colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n      } else if (perc >= max) {\r\n        colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n      } else {\r\n        colorValue = outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma);\r\n      }\r\n\r\n      table[pos] = colorValue;\r\n      pos += 1;\r\n      cnt += 256 / (segments - 1);\r\n    }\r\n\r\n    return table.join(' ');\r\n  };\r\n\r\n  SVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var val;\r\n      var effectElements = this.filterManager.effectElements;\r\n\r\n      if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\r\n        val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\r\n        this.feFuncRComposed.setAttribute('tableValues', val);\r\n        this.feFuncGComposed.setAttribute('tableValues', val);\r\n        this.feFuncBComposed.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\r\n        val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\r\n        this.feFuncR.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\r\n        val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\r\n        this.feFuncG.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\r\n        val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\r\n        this.feFuncB.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\r\n        val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\r\n        this.feFuncA.setAttribute('tableValues', val);\r\n      }\r\n    }\r\n  };\r\n\r\n  function SVGDropShadowEffect(filter, filterManager, elem, id, source) {\r\n    var globalFilterSize = filterManager.container.globalData.renderConfig.filterSize;\r\n    var filterSize = filterManager.data.fs || globalFilterSize;\r\n    filter.setAttribute('x', filterSize.x || globalFilterSize.x);\r\n    filter.setAttribute('y', filterSize.y || globalFilterSize.y);\r\n    filter.setAttribute('width', filterSize.width || globalFilterSize.width);\r\n    filter.setAttribute('height', filterSize.height || globalFilterSize.height);\r\n    this.filterManager = filterManager;\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in', 'SourceAlpha');\r\n    feGaussianBlur.setAttribute('result', id + '_drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation', '0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n    var feOffset = createNS('feOffset');\r\n    feOffset.setAttribute('dx', '25');\r\n    feOffset.setAttribute('dy', '0');\r\n    feOffset.setAttribute('in', id + '_drop_shadow_1');\r\n    feOffset.setAttribute('result', id + '_drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = createNS('feFlood');\r\n    feFlood.setAttribute('flood-color', '#00ff00');\r\n    feFlood.setAttribute('flood-opacity', '1');\r\n    feFlood.setAttribute('result', id + '_drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n    var feComposite = createNS('feComposite');\r\n    feComposite.setAttribute('in', id + '_drop_shadow_3');\r\n    feComposite.setAttribute('in2', id + '_drop_shadow_2');\r\n    feComposite.setAttribute('operator', 'in');\r\n    feComposite.setAttribute('result', id + '_drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n    var feMerge = this.createMergeNode(id, [id + '_drop_shadow_4', source]);\r\n    filter.appendChild(feMerge); //\r\n  }\r\n\r\n  extendPrototype([SVGComposableEffect], SVGDropShadowEffect);\r\n\r\n  SVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n        this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n      }\r\n\r\n      if (forceRender || this.filterManager.effectElements[0].p._mdf) {\r\n        var col = this.filterManager.effectElements[0].p.v;\r\n        this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\r\n      }\r\n\r\n      if (forceRender || this.filterManager.effectElements[1].p._mdf) {\r\n        this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\r\n      }\r\n\r\n      if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\r\n        var distance = this.filterManager.effectElements[3].p.v;\r\n        var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n        var x = distance * Math.cos(angle);\r\n        var y = distance * Math.sin(angle);\r\n        this.feOffset.setAttribute('dx', x);\r\n        this.feOffset.setAttribute('dy', y);\r\n      }\r\n    }\r\n  };\r\n\r\n  var _svgMatteSymbols = [];\r\n\r\n  function SVGMatte3Effect(filterElem, filterManager, elem) {\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = createNS('g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n  }\r\n\r\n  SVGMatte3Effect.prototype.findSymbol = function (mask) {\r\n    var i = 0;\r\n    var len = _svgMatteSymbols.length;\r\n\r\n    while (i < len) {\r\n      if (_svgMatteSymbols[i] === mask) {\r\n        return _svgMatteSymbols[i];\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\r\n    var parentNode = mask.layerElement.parentNode;\r\n\r\n    if (!parentNode) {\r\n      return;\r\n    }\r\n\r\n    var children = parentNode.children;\r\n    var i = 0;\r\n    var len = children.length;\r\n\r\n    while (i < len) {\r\n      if (children[i] === mask.layerElement) {\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    var nextChild;\r\n\r\n    if (i <= len - 2) {\r\n      nextChild = children[i + 1];\r\n    }\r\n\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n\r\n    if (nextChild) {\r\n      parentNode.insertBefore(useElem, nextChild);\r\n    } else {\r\n      parentNode.appendChild(useElem);\r\n    }\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\r\n    if (!this.findSymbol(mask)) {\r\n      var symbolId = createElementID();\r\n      var masker = createNS('mask');\r\n      masker.setAttribute('id', mask.layerId);\r\n      masker.setAttribute('mask-type', 'alpha');\r\n\r\n      _svgMatteSymbols.push(mask);\r\n\r\n      var defs = elem.globalData.defs;\r\n      defs.appendChild(masker);\r\n      var symbol = createNS('symbol');\r\n      symbol.setAttribute('id', symbolId);\r\n      this.replaceInParent(mask, symbolId);\r\n      symbol.appendChild(mask.layerElement);\r\n      defs.appendChild(symbol);\r\n      var useElem = createNS('use');\r\n      useElem.setAttribute('href', '#' + symbolId);\r\n      masker.appendChild(useElem);\r\n      mask.data.hd = false;\r\n      mask.show();\r\n    }\r\n\r\n    elem.setMatte(mask.layerId);\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.initialize = function () {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var elements = this.elem.comp.elements;\r\n    var i = 0;\r\n    var len = elements.length;\r\n\r\n    while (i < len) {\r\n      if (elements[i] && elements[i].data.ind === ind) {\r\n        this.setElementAsMask(this.elem, elements[i]);\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    this.initialized = true;\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.renderFrame = function () {\r\n    if (!this.initialized) {\r\n      this.initialize();\r\n    }\r\n  };\r\n\r\n  function SVGGaussianBlurEffect(filter, filterManager, elem, id) {\r\n    // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n    filter.setAttribute('x', '-100%');\r\n    filter.setAttribute('y', '-100%');\r\n    filter.setAttribute('width', '300%');\r\n    filter.setAttribute('height', '300%');\r\n    this.filterManager = filterManager;\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('result', id);\r\n    filter.appendChild(feGaussianBlur);\r\n    this.feGaussianBlur = feGaussianBlur;\r\n  }\r\n\r\n  SVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      // Empirical value, matching AE's blur appearance.\r\n      var kBlurrinessToSigma = 0.3;\r\n      var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma; // Dimensions mapping:\r\n      //\r\n      //   1 -> horizontal & vertical\r\n      //   2 -> horizontal only\r\n      //   3 -> vertical only\r\n      //\r\n\r\n      var dimensions = this.filterManager.effectElements[1].p.v;\r\n      var sigmaX = dimensions == 3 ? 0 : sigma; // eslint-disable-line eqeqeq\r\n\r\n      var sigmaY = dimensions == 2 ? 0 : sigma; // eslint-disable-line eqeqeq\r\n\r\n      this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + ' ' + sigmaY); // Repeat edges mapping:\r\n      //\r\n      //   0 -> off -> duplicate\r\n      //   1 -> on  -> wrap\r\n\r\n      var edgeMode = this.filterManager.effectElements[2].p.v == 1 ? 'wrap' : 'duplicate'; // eslint-disable-line eqeqeq\r\n\r\n      this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n    }\r\n  };\r\n\r\n  registerRenderer('canvas', CanvasRenderer);\r\n  registerRenderer('html', HybridRenderer);\r\n  registerRenderer('svg', SVGRenderer); // Registering shape modifiers\r\n\r\n  ShapeModifiers.registerModifier('tm', TrimModifier);\r\n  ShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\r\n  ShapeModifiers.registerModifier('rp', RepeaterModifier);\r\n  ShapeModifiers.registerModifier('rd', RoundCornersModifier);\r\n  ShapeModifiers.registerModifier('zz', ZigZagModifier);\r\n  ShapeModifiers.registerModifier('op', OffsetPathModifier); // Registering expression plugin\r\n\r\n  setExpressionsPlugin(Expressions);\r\n  setExpressionInterfaces(getInterface);\r\n  initialize$1();\r\n  initialize(); // Registering svg effects\r\n\r\n  registerEffect(20, SVGTintFilter, true);\r\n  registerEffect(21, SVGFillFilter, true);\r\n  registerEffect(22, SVGStrokeEffect, false);\r\n  registerEffect(23, SVGTritoneFilter, true);\r\n  registerEffect(24, SVGProLevelsFilter, true);\r\n  registerEffect(25, SVGDropShadowEffect, true);\r\n  registerEffect(28, SVGMatte3Effect, false);\r\n  registerEffect(29, SVGGaussianBlurEffect, true);\r\n\r\n  return lottie;\r\n\r\n}));\r\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"QRCodeStyling\"] = factory();\n\telse\n\t\troot[\"QRCodeStyling\"] = factory();\n})(self, function() {\nreturn ","//---------------------------------------------------------------------\n//\n// QR Code Generator for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n// The word 'QR Code' is registered trademark of\n// DENSO WAVE INCORPORATED\n//  http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n\nvar qrcode = function() {\n\n  //---------------------------------------------------------------------\n  // qrcode\n  //---------------------------------------------------------------------\n\n  /**\n   * qrcode\n   * @param typeNumber 1 to 40\n   * @param errorCorrectionLevel 'L','M','Q','H'\n   */\n  var qrcode = function(typeNumber, errorCorrectionLevel) {\n\n    var PAD0 = 0xEC;\n    var PAD1 = 0x11;\n\n    var _typeNumber = typeNumber;\n    var _errorCorrectionLevel = QRErrorCorrectionLevel[errorCorrectionLevel];\n    var _modules = null;\n    var _moduleCount = 0;\n    var _dataCache = null;\n    var _dataList = [];\n\n    var _this = {};\n\n    var makeImpl = function(test, maskPattern) {\n\n      _moduleCount = _typeNumber * 4 + 17;\n      _modules = function(moduleCount) {\n        var modules = new Array(moduleCount);\n        for (var row = 0; row < moduleCount; row += 1) {\n          modules[row] = new Array(moduleCount);\n          for (var col = 0; col < moduleCount; col += 1) {\n            modules[row][col] = null;\n          }\n        }\n        return modules;\n      }(_moduleCount);\n\n      setupPositionProbePattern(0, 0);\n      setupPositionProbePattern(_moduleCount - 7, 0);\n      setupPositionProbePattern(0, _moduleCount - 7);\n      setupPositionAdjustPattern();\n      setupTimingPattern();\n      setupTypeInfo(test, maskPattern);\n\n      if (_typeNumber >= 7) {\n        setupTypeNumber(test);\n      }\n\n      if (_dataCache == null) {\n        _dataCache = createData(_typeNumber, _errorCorrectionLevel, _dataList);\n      }\n\n      mapData(_dataCache, maskPattern);\n    };\n\n    var setupPositionProbePattern = function(row, col) {\n\n      for (var r = -1; r <= 7; r += 1) {\n\n        if (row + r <= -1 || _moduleCount <= row + r) continue;\n\n        for (var c = -1; c <= 7; c += 1) {\n\n          if (col + c <= -1 || _moduleCount <= col + c) continue;\n\n          if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n              || (0 <= c && c <= 6 && (r == 0 || r == 6) )\n              || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n            _modules[row + r][col + c] = true;\n          } else {\n            _modules[row + r][col + c] = false;\n          }\n        }\n      }\n    };\n\n    var getBestMaskPattern = function() {\n\n      var minLostPoint = 0;\n      var pattern = 0;\n\n      for (var i = 0; i < 8; i += 1) {\n\n        makeImpl(true, i);\n\n        var lostPoint = QRUtil.getLostPoint(_this);\n\n        if (i == 0 || minLostPoint > lostPoint) {\n          minLostPoint = lostPoint;\n          pattern = i;\n        }\n      }\n\n      return pattern;\n    };\n\n    var setupTimingPattern = function() {\n\n      for (var r = 8; r < _moduleCount - 8; r += 1) {\n        if (_modules[r][6] != null) {\n          continue;\n        }\n        _modules[r][6] = (r % 2 == 0);\n      }\n\n      for (var c = 8; c < _moduleCount - 8; c += 1) {\n        if (_modules[6][c] != null) {\n          continue;\n        }\n        _modules[6][c] = (c % 2 == 0);\n      }\n    };\n\n    var setupPositionAdjustPattern = function() {\n\n      var pos = QRUtil.getPatternPosition(_typeNumber);\n\n      for (var i = 0; i < pos.length; i += 1) {\n\n        for (var j = 0; j < pos.length; j += 1) {\n\n          var row = pos[i];\n          var col = pos[j];\n\n          if (_modules[row][col] != null) {\n            continue;\n          }\n\n          for (var r = -2; r <= 2; r += 1) {\n\n            for (var c = -2; c <= 2; c += 1) {\n\n              if (r == -2 || r == 2 || c == -2 || c == 2\n                  || (r == 0 && c == 0) ) {\n                _modules[row + r][col + c] = true;\n              } else {\n                _modules[row + r][col + c] = false;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var setupTypeNumber = function(test) {\n\n      var bits = QRUtil.getBCHTypeNumber(_typeNumber);\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;\n      }\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n      }\n    };\n\n    var setupTypeInfo = function(test, maskPattern) {\n\n      var data = (_errorCorrectionLevel << 3) | maskPattern;\n      var bits = QRUtil.getBCHTypeInfo(data);\n\n      // vertical\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 6) {\n          _modules[i][8] = mod;\n        } else if (i < 8) {\n          _modules[i + 1][8] = mod;\n        } else {\n          _modules[_moduleCount - 15 + i][8] = mod;\n        }\n      }\n\n      // horizontal\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 8) {\n          _modules[8][_moduleCount - i - 1] = mod;\n        } else if (i < 9) {\n          _modules[8][15 - i - 1 + 1] = mod;\n        } else {\n          _modules[8][15 - i - 1] = mod;\n        }\n      }\n\n      // fixed module\n      _modules[_moduleCount - 8][8] = (!test);\n    };\n\n    var mapData = function(data, maskPattern) {\n\n      var inc = -1;\n      var row = _moduleCount - 1;\n      var bitIndex = 7;\n      var byteIndex = 0;\n      var maskFunc = QRUtil.getMaskFunction(maskPattern);\n\n      for (var col = _moduleCount - 1; col > 0; col -= 2) {\n\n        if (col == 6) col -= 1;\n\n        while (true) {\n\n          for (var c = 0; c < 2; c += 1) {\n\n            if (_modules[row][col - c] == null) {\n\n              var dark = false;\n\n              if (byteIndex < data.length) {\n                dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n              }\n\n              var mask = maskFunc(row, col - c);\n\n              if (mask) {\n                dark = !dark;\n              }\n\n              _modules[row][col - c] = dark;\n              bitIndex -= 1;\n\n              if (bitIndex == -1) {\n                byteIndex += 1;\n                bitIndex = 7;\n              }\n            }\n          }\n\n          row += inc;\n\n          if (row < 0 || _moduleCount <= row) {\n            row -= inc;\n            inc = -inc;\n            break;\n          }\n        }\n      }\n    };\n\n    var createBytes = function(buffer, rsBlocks) {\n\n      var offset = 0;\n\n      var maxDcCount = 0;\n      var maxEcCount = 0;\n\n      var dcdata = new Array(rsBlocks.length);\n      var ecdata = new Array(rsBlocks.length);\n\n      for (var r = 0; r < rsBlocks.length; r += 1) {\n\n        var dcCount = rsBlocks[r].dataCount;\n        var ecCount = rsBlocks[r].totalCount - dcCount;\n\n        maxDcCount = Math.max(maxDcCount, dcCount);\n        maxEcCount = Math.max(maxEcCount, ecCount);\n\n        dcdata[r] = new Array(dcCount);\n\n        for (var i = 0; i < dcdata[r].length; i += 1) {\n          dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];\n        }\n        offset += dcCount;\n\n        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n        var rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);\n\n        var modPoly = rawPoly.mod(rsPoly);\n        ecdata[r] = new Array(rsPoly.getLength() - 1);\n        for (var i = 0; i < ecdata[r].length; i += 1) {\n          var modIndex = i + modPoly.getLength() - ecdata[r].length;\n          ecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;\n        }\n      }\n\n      var totalCodeCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalCodeCount += rsBlocks[i].totalCount;\n      }\n\n      var data = new Array(totalCodeCount);\n      var index = 0;\n\n      for (var i = 0; i < maxDcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < dcdata[r].length) {\n            data[index] = dcdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      for (var i = 0; i < maxEcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < ecdata[r].length) {\n            data[index] = ecdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      return data;\n    };\n\n    var createData = function(typeNumber, errorCorrectionLevel, dataList) {\n\n      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectionLevel);\n\n      var buffer = qrBitBuffer();\n\n      for (var i = 0; i < dataList.length; i += 1) {\n        var data = dataList[i];\n        buffer.put(data.getMode(), 4);\n        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n        data.write(buffer);\n      }\n\n      // calc num max data.\n      var totalDataCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalDataCount += rsBlocks[i].dataCount;\n      }\n\n      if (buffer.getLengthInBits() > totalDataCount * 8) {\n        throw 'code length overflow. ('\n          + buffer.getLengthInBits()\n          + '>'\n          + totalDataCount * 8\n          + ')';\n      }\n\n      // end code\n      if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n        buffer.put(0, 4);\n      }\n\n      // padding\n      while (buffer.getLengthInBits() % 8 != 0) {\n        buffer.putBit(false);\n      }\n\n      // padding\n      while (true) {\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD0, 8);\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD1, 8);\n      }\n\n      return createBytes(buffer, rsBlocks);\n    };\n\n    _this.addData = function(data, mode) {\n\n      mode = mode || 'Byte';\n\n      var newData = null;\n\n      switch(mode) {\n      case 'Numeric' :\n        newData = qrNumber(data);\n        break;\n      case 'Alphanumeric' :\n        newData = qrAlphaNum(data);\n        break;\n      case 'Byte' :\n        newData = qr8BitByte(data);\n        break;\n      case 'Kanji' :\n        newData = qrKanji(data);\n        break;\n      default :\n        throw 'mode:' + mode;\n      }\n\n      _dataList.push(newData);\n      _dataCache = null;\n    };\n\n    _this.isDark = function(row, col) {\n      if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {\n        throw row + ',' + col;\n      }\n      return _modules[row][col];\n    };\n\n    _this.getModuleCount = function() {\n      return _moduleCount;\n    };\n\n    _this.make = function() {\n      if (_typeNumber < 1) {\n        var typeNumber = 1;\n\n        for (; typeNumber < 40; typeNumber++) {\n          var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, _errorCorrectionLevel);\n          var buffer = qrBitBuffer();\n\n          for (var i = 0; i < _dataList.length; i++) {\n            var data = _dataList[i];\n            buffer.put(data.getMode(), 4);\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n            data.write(buffer);\n          }\n\n          var totalDataCount = 0;\n          for (var i = 0; i < rsBlocks.length; i++) {\n            totalDataCount += rsBlocks[i].dataCount;\n          }\n\n          if (buffer.getLengthInBits() <= totalDataCount * 8) {\n            break;\n          }\n        }\n\n        _typeNumber = typeNumber;\n      }\n\n      makeImpl(false, getBestMaskPattern() );\n    };\n\n    _this.createTableTag = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var qrHtml = '';\n\n      qrHtml += '<table style=\"';\n      qrHtml += ' border-width: 0px; border-style: none;';\n      qrHtml += ' border-collapse: collapse;';\n      qrHtml += ' padding: 0px; margin: ' + margin + 'px;';\n      qrHtml += '\">';\n      qrHtml += '<tbody>';\n\n      for (var r = 0; r < _this.getModuleCount(); r += 1) {\n\n        qrHtml += '<tr>';\n\n        for (var c = 0; c < _this.getModuleCount(); c += 1) {\n          qrHtml += '<td style=\"';\n          qrHtml += ' border-width: 0px; border-style: none;';\n          qrHtml += ' border-collapse: collapse;';\n          qrHtml += ' padding: 0px; margin: 0px;';\n          qrHtml += ' width: ' + cellSize + 'px;';\n          qrHtml += ' height: ' + cellSize + 'px;';\n          qrHtml += ' background-color: ';\n          qrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';\n          qrHtml += ';';\n          qrHtml += '\"/>';\n        }\n\n        qrHtml += '</tr>';\n      }\n\n      qrHtml += '</tbody>';\n      qrHtml += '</table>';\n\n      return qrHtml;\n    };\n\n    _this.createSvgTag = function(cellSize, margin, alt, title) {\n\n      var opts = {};\n      if (typeof arguments[0] == 'object') {\n        // Called by options.\n        opts = arguments[0];\n        // overwrite cellSize and margin.\n        cellSize = opts.cellSize;\n        margin = opts.margin;\n        alt = opts.alt;\n        title = opts.title;\n      }\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      // Compose alt property surrogate\n      alt = (typeof alt === 'string') ? {text: alt} : alt || {};\n      alt.text = alt.text || null;\n      alt.id = (alt.text) ? alt.id || 'qrcode-description' : null;\n\n      // Compose title property surrogate\n      title = (typeof title === 'string') ? {text: title} : title || {};\n      title.text = title.text || null;\n      title.id = (title.text) ? title.id || 'qrcode-title' : null;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var c, mc, r, mr, qrSvg='', rect;\n\n      rect = 'l' + cellSize + ',0 0,' + cellSize +\n        ' -' + cellSize + ',0 0,-' + cellSize + 'z ';\n\n      qrSvg += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"';\n      qrSvg += !opts.scalable ? ' width=\"' + size + 'px\" height=\"' + size + 'px\"' : '';\n      qrSvg += ' viewBox=\"0 0 ' + size + ' ' + size + '\" ';\n      qrSvg += ' preserveAspectRatio=\"xMinYMin meet\"';\n      qrSvg += (title.text || alt.text) ? ' role=\"img\" aria-labelledby=\"' +\n          escapeXml([title.id, alt.id].join(' ').trim() ) + '\"' : '';\n      qrSvg += '>';\n      qrSvg += (title.text) ? '<title id=\"' + escapeXml(title.id) + '\">' +\n          escapeXml(title.text) + '</title>' : '';\n      qrSvg += (alt.text) ? '<description id=\"' + escapeXml(alt.id) + '\">' +\n          escapeXml(alt.text) + '</description>' : '';\n      qrSvg += '<rect width=\"100%\" height=\"100%\" fill=\"white\" cx=\"0\" cy=\"0\"/>';\n      qrSvg += '<path d=\"';\n\n      for (r = 0; r < _this.getModuleCount(); r += 1) {\n        mr = r * cellSize + margin;\n        for (c = 0; c < _this.getModuleCount(); c += 1) {\n          if (_this.isDark(r, c) ) {\n            mc = c*cellSize+margin;\n            qrSvg += 'M' + mc + ',' + mr + rect;\n          }\n        }\n      }\n\n      qrSvg += '\" stroke=\"transparent\" fill=\"black\"/>';\n      qrSvg += '</svg>';\n\n      return qrSvg;\n    };\n\n    _this.createDataURL = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      return createDataURL(size, size, function(x, y) {\n        if (min <= x && x < max && min <= y && y < max) {\n          var c = Math.floor( (x - min) / cellSize);\n          var r = Math.floor( (y - min) / cellSize);\n          return _this.isDark(r, c)? 0 : 1;\n        } else {\n          return 1;\n        }\n      } );\n    };\n\n    _this.createImgTag = function(cellSize, margin, alt) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n\n      var img = '';\n      img += '<img';\n      img += '\\u0020src=\"';\n      img += _this.createDataURL(cellSize, margin);\n      img += '\"';\n      img += '\\u0020width=\"';\n      img += size;\n      img += '\"';\n      img += '\\u0020height=\"';\n      img += size;\n      img += '\"';\n      if (alt) {\n        img += '\\u0020alt=\"';\n        img += escapeXml(alt);\n        img += '\"';\n      }\n      img += '/>';\n\n      return img;\n    };\n\n    var escapeXml = function(s) {\n      var escaped = '';\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charAt(i);\n        switch(c) {\n        case '<': escaped += '&lt;'; break;\n        case '>': escaped += '&gt;'; break;\n        case '&': escaped += '&amp;'; break;\n        case '\"': escaped += '&quot;'; break;\n        default : escaped += c; break;\n        }\n      }\n      return escaped;\n    };\n\n    var _createHalfASCII = function(margin) {\n      var cellSize = 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r1, r2, p;\n\n      var blocks = {\n        '': '',\n        ' ': '',\n        ' ': '',\n        '  ': ' '\n      };\n\n      var blocksLastLineNoMargin = {\n        '': '',\n        ' ': '',\n        ' ': ' ',\n        '  ': ' '\n      };\n\n      var ascii = '';\n      for (y = 0; y < size; y += 2) {\n        r1 = Math.floor((y - min) / cellSize);\n        r2 = Math.floor((y + 1 - min) / cellSize);\n        for (x = 0; x < size; x += 1) {\n          p = '';\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r1, Math.floor((x - min) / cellSize))) {\n            p = ' ';\n          }\n\n          if (min <= x && x < max && min <= y+1 && y+1 < max && _this.isDark(r2, Math.floor((x - min) / cellSize))) {\n            p += ' ';\n          }\n          else {\n            p += '';\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          ascii += (margin < 1 && y+1 >= max) ? blocksLastLineNoMargin[p] : blocks[p];\n        }\n\n        ascii += '\\n';\n      }\n\n      if (size % 2 && margin > 0) {\n        return ascii.substring(0, ascii.length - size - 1) + Array(size+1).join('');\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.createASCII = function(cellSize, margin) {\n      cellSize = cellSize || 1;\n\n      if (cellSize < 2) {\n        return _createHalfASCII(margin);\n      }\n\n      cellSize -= 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r, p;\n\n      var white = Array(cellSize+1).join('');\n      var black = Array(cellSize+1).join('  ');\n\n      var ascii = '';\n      var line = '';\n      for (y = 0; y < size; y += 1) {\n        r = Math.floor( (y - min) / cellSize);\n        line = '';\n        for (x = 0; x < size; x += 1) {\n          p = 1;\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r, Math.floor((x - min) / cellSize))) {\n            p = 0;\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          line += p ? white : black;\n        }\n\n        for (r = 0; r < cellSize; r += 1) {\n          ascii += line + '\\n';\n        }\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.renderTo2dContext = function(context, cellSize) {\n      cellSize = cellSize || 2;\n      var length = _this.getModuleCount();\n      for (var row = 0; row < length; row++) {\n        for (var col = 0; col < length; col++) {\n          context.fillStyle = _this.isDark(row, col) ? 'black' : 'white';\n          context.fillRect(row * cellSize, col * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrcode.stringToBytes\n  //---------------------------------------------------------------------\n\n  qrcode.stringToBytesFuncs = {\n    'default' : function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        bytes.push(c & 0xff);\n      }\n      return bytes;\n    }\n  };\n\n  qrcode.stringToBytes = qrcode.stringToBytesFuncs['default'];\n\n  //---------------------------------------------------------------------\n  // qrcode.createStringToBytes\n  //---------------------------------------------------------------------\n\n  /**\n   * @param unicodeData base64 string of byte array.\n   * [16bit Unicode],[16bit Bytes], ...\n   * @param numChars\n   */\n  qrcode.createStringToBytes = function(unicodeData, numChars) {\n\n    // create conversion map.\n\n    var unicodeMap = function() {\n\n      var bin = base64DecodeInputStream(unicodeData);\n      var read = function() {\n        var b = bin.read();\n        if (b == -1) throw 'eof';\n        return b;\n      };\n\n      var count = 0;\n      var unicodeMap = {};\n      while (true) {\n        var b0 = bin.read();\n        if (b0 == -1) break;\n        var b1 = read();\n        var b2 = read();\n        var b3 = read();\n        var k = String.fromCharCode( (b0 << 8) | b1);\n        var v = (b2 << 8) | b3;\n        unicodeMap[k] = v;\n        count += 1;\n      }\n      if (count != numChars) {\n        throw count + ' != ' + numChars;\n      }\n\n      return unicodeMap;\n    }();\n\n    var unknownChar = '?'.charCodeAt(0);\n\n    return function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        if (c < 128) {\n          bytes.push(c);\n        } else {\n          var b = unicodeMap[s.charAt(i)];\n          if (typeof b == 'number') {\n            if ( (b & 0xff) == b) {\n              // 1byte\n              bytes.push(b);\n            } else {\n              // 2bytes\n              bytes.push(b >>> 8);\n              bytes.push(b & 0xff);\n            }\n          } else {\n            bytes.push(unknownChar);\n          }\n        }\n      }\n      return bytes;\n    };\n  };\n\n  //---------------------------------------------------------------------\n  // QRMode\n  //---------------------------------------------------------------------\n\n  var QRMode = {\n    MODE_NUMBER :    1 << 0,\n    MODE_ALPHA_NUM : 1 << 1,\n    MODE_8BIT_BYTE : 1 << 2,\n    MODE_KANJI :     1 << 3\n  };\n\n  //---------------------------------------------------------------------\n  // QRErrorCorrectionLevel\n  //---------------------------------------------------------------------\n\n  var QRErrorCorrectionLevel = {\n    L : 1,\n    M : 0,\n    Q : 3,\n    H : 2\n  };\n\n  //---------------------------------------------------------------------\n  // QRMaskPattern\n  //---------------------------------------------------------------------\n\n  var QRMaskPattern = {\n    PATTERN000 : 0,\n    PATTERN001 : 1,\n    PATTERN010 : 2,\n    PATTERN011 : 3,\n    PATTERN100 : 4,\n    PATTERN101 : 5,\n    PATTERN110 : 6,\n    PATTERN111 : 7\n  };\n\n  //---------------------------------------------------------------------\n  // QRUtil\n  //---------------------------------------------------------------------\n\n  var QRUtil = function() {\n\n    var PATTERN_POSITION_TABLE = [\n      [],\n      [6, 18],\n      [6, 22],\n      [6, 26],\n      [6, 30],\n      [6, 34],\n      [6, 22, 38],\n      [6, 24, 42],\n      [6, 26, 46],\n      [6, 28, 50],\n      [6, 30, 54],\n      [6, 32, 58],\n      [6, 34, 62],\n      [6, 26, 46, 66],\n      [6, 26, 48, 70],\n      [6, 26, 50, 74],\n      [6, 30, 54, 78],\n      [6, 30, 56, 82],\n      [6, 30, 58, 86],\n      [6, 34, 62, 90],\n      [6, 28, 50, 72, 94],\n      [6, 26, 50, 74, 98],\n      [6, 30, 54, 78, 102],\n      [6, 28, 54, 80, 106],\n      [6, 32, 58, 84, 110],\n      [6, 30, 58, 86, 114],\n      [6, 34, 62, 90, 118],\n      [6, 26, 50, 74, 98, 122],\n      [6, 30, 54, 78, 102, 126],\n      [6, 26, 52, 78, 104, 130],\n      [6, 30, 56, 82, 108, 134],\n      [6, 34, 60, 86, 112, 138],\n      [6, 30, 58, 86, 114, 142],\n      [6, 34, 62, 90, 118, 146],\n      [6, 30, 54, 78, 102, 126, 150],\n      [6, 24, 50, 76, 102, 128, 154],\n      [6, 28, 54, 80, 106, 132, 158],\n      [6, 32, 58, 84, 110, 136, 162],\n      [6, 26, 54, 82, 110, 138, 166],\n      [6, 30, 58, 86, 114, 142, 170]\n    ];\n    var G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);\n    var G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);\n    var G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);\n\n    var _this = {};\n\n    var getBCHDigit = function(data) {\n      var digit = 0;\n      while (data != 0) {\n        digit += 1;\n        data >>>= 1;\n      }\n      return digit;\n    };\n\n    _this.getBCHTypeInfo = function(data) {\n      var d = data << 10;\n      while (getBCHDigit(d) - getBCHDigit(G15) >= 0) {\n        d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );\n      }\n      return ( (data << 10) | d) ^ G15_MASK;\n    };\n\n    _this.getBCHTypeNumber = function(data) {\n      var d = data << 12;\n      while (getBCHDigit(d) - getBCHDigit(G18) >= 0) {\n        d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );\n      }\n      return (data << 12) | d;\n    };\n\n    _this.getPatternPosition = function(typeNumber) {\n      return PATTERN_POSITION_TABLE[typeNumber - 1];\n    };\n\n    _this.getMaskFunction = function(maskPattern) {\n\n      switch (maskPattern) {\n\n      case QRMaskPattern.PATTERN000 :\n        return function(i, j) { return (i + j) % 2 == 0; };\n      case QRMaskPattern.PATTERN001 :\n        return function(i, j) { return i % 2 == 0; };\n      case QRMaskPattern.PATTERN010 :\n        return function(i, j) { return j % 3 == 0; };\n      case QRMaskPattern.PATTERN011 :\n        return function(i, j) { return (i + j) % 3 == 0; };\n      case QRMaskPattern.PATTERN100 :\n        return function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };\n      case QRMaskPattern.PATTERN101 :\n        return function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };\n      case QRMaskPattern.PATTERN110 :\n        return function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };\n      case QRMaskPattern.PATTERN111 :\n        return function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };\n\n      default :\n        throw 'bad maskPattern:' + maskPattern;\n      }\n    };\n\n    _this.getErrorCorrectPolynomial = function(errorCorrectLength) {\n      var a = qrPolynomial([1], 0);\n      for (var i = 0; i < errorCorrectLength; i += 1) {\n        a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );\n      }\n      return a;\n    };\n\n    _this.getLengthInBits = function(mode, type) {\n\n      if (1 <= type && type < 10) {\n\n        // 1 - 9\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 10;\n        case QRMode.MODE_ALPHA_NUM : return 9;\n        case QRMode.MODE_8BIT_BYTE : return 8;\n        case QRMode.MODE_KANJI     : return 8;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 27) {\n\n        // 10 - 26\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 12;\n        case QRMode.MODE_ALPHA_NUM : return 11;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 10;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 41) {\n\n        // 27 - 40\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 14;\n        case QRMode.MODE_ALPHA_NUM : return 13;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 12;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else {\n        throw 'type:' + type;\n      }\n    };\n\n    _this.getLostPoint = function(qrcode) {\n\n      var moduleCount = qrcode.getModuleCount();\n\n      var lostPoint = 0;\n\n      // LEVEL1\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount; col += 1) {\n\n          var sameCount = 0;\n          var dark = qrcode.isDark(row, col);\n\n          for (var r = -1; r <= 1; r += 1) {\n\n            if (row + r < 0 || moduleCount <= row + r) {\n              continue;\n            }\n\n            for (var c = -1; c <= 1; c += 1) {\n\n              if (col + c < 0 || moduleCount <= col + c) {\n                continue;\n              }\n\n              if (r == 0 && c == 0) {\n                continue;\n              }\n\n              if (dark == qrcode.isDark(row + r, col + c) ) {\n                sameCount += 1;\n              }\n            }\n          }\n\n          if (sameCount > 5) {\n            lostPoint += (3 + sameCount - 5);\n          }\n        }\n      };\n\n      // LEVEL2\n\n      for (var row = 0; row < moduleCount - 1; row += 1) {\n        for (var col = 0; col < moduleCount - 1; col += 1) {\n          var count = 0;\n          if (qrcode.isDark(row, col) ) count += 1;\n          if (qrcode.isDark(row + 1, col) ) count += 1;\n          if (qrcode.isDark(row, col + 1) ) count += 1;\n          if (qrcode.isDark(row + 1, col + 1) ) count += 1;\n          if (count == 0 || count == 4) {\n            lostPoint += 3;\n          }\n        }\n      }\n\n      // LEVEL3\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount - 6; col += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row, col + 1)\n              &&  qrcode.isDark(row, col + 2)\n              &&  qrcode.isDark(row, col + 3)\n              &&  qrcode.isDark(row, col + 4)\n              && !qrcode.isDark(row, col + 5)\n              &&  qrcode.isDark(row, col + 6) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount - 6; row += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row + 1, col)\n              &&  qrcode.isDark(row + 2, col)\n              &&  qrcode.isDark(row + 3, col)\n              &&  qrcode.isDark(row + 4, col)\n              && !qrcode.isDark(row + 5, col)\n              &&  qrcode.isDark(row + 6, col) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      // LEVEL4\n\n      var darkCount = 0;\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount; row += 1) {\n          if (qrcode.isDark(row, col) ) {\n            darkCount += 1;\n          }\n        }\n      }\n\n      var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n      lostPoint += ratio * 10;\n\n      return lostPoint;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // QRMath\n  //---------------------------------------------------------------------\n\n  var QRMath = function() {\n\n    var EXP_TABLE = new Array(256);\n    var LOG_TABLE = new Array(256);\n\n    // initialize tables\n    for (var i = 0; i < 8; i += 1) {\n      EXP_TABLE[i] = 1 << i;\n    }\n    for (var i = 8; i < 256; i += 1) {\n      EXP_TABLE[i] = EXP_TABLE[i - 4]\n        ^ EXP_TABLE[i - 5]\n        ^ EXP_TABLE[i - 6]\n        ^ EXP_TABLE[i - 8];\n    }\n    for (var i = 0; i < 255; i += 1) {\n      LOG_TABLE[EXP_TABLE[i] ] = i;\n    }\n\n    var _this = {};\n\n    _this.glog = function(n) {\n\n      if (n < 1) {\n        throw 'glog(' + n + ')';\n      }\n\n      return LOG_TABLE[n];\n    };\n\n    _this.gexp = function(n) {\n\n      while (n < 0) {\n        n += 255;\n      }\n\n      while (n >= 256) {\n        n -= 255;\n      }\n\n      return EXP_TABLE[n];\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrPolynomial\n  //---------------------------------------------------------------------\n\n  function qrPolynomial(num, shift) {\n\n    if (typeof num.length == 'undefined') {\n      throw num.length + '/' + shift;\n    }\n\n    var _num = function() {\n      var offset = 0;\n      while (offset < num.length && num[offset] == 0) {\n        offset += 1;\n      }\n      var _num = new Array(num.length - offset + shift);\n      for (var i = 0; i < num.length - offset; i += 1) {\n        _num[i] = num[i + offset];\n      }\n      return _num;\n    }();\n\n    var _this = {};\n\n    _this.getAt = function(index) {\n      return _num[index];\n    };\n\n    _this.getLength = function() {\n      return _num.length;\n    };\n\n    _this.multiply = function(e) {\n\n      var num = new Array(_this.getLength() + e.getLength() - 1);\n\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        for (var j = 0; j < e.getLength(); j += 1) {\n          num[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );\n        }\n      }\n\n      return qrPolynomial(num, 0);\n    };\n\n    _this.mod = function(e) {\n\n      if (_this.getLength() - e.getLength() < 0) {\n        return _this;\n      }\n\n      var ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );\n\n      var num = new Array(_this.getLength() );\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        num[i] = _this.getAt(i);\n      }\n\n      for (var i = 0; i < e.getLength(); i += 1) {\n        num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);\n      }\n\n      // recursive call\n      return qrPolynomial(num, 0).mod(e);\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // QRRSBlock\n  //---------------------------------------------------------------------\n\n  var QRRSBlock = function() {\n\n    var RS_BLOCK_TABLE = [\n\n      // L\n      // M\n      // Q\n      // H\n\n      // 1\n      [1, 26, 19],\n      [1, 26, 16],\n      [1, 26, 13],\n      [1, 26, 9],\n\n      // 2\n      [1, 44, 34],\n      [1, 44, 28],\n      [1, 44, 22],\n      [1, 44, 16],\n\n      // 3\n      [1, 70, 55],\n      [1, 70, 44],\n      [2, 35, 17],\n      [2, 35, 13],\n\n      // 4\n      [1, 100, 80],\n      [2, 50, 32],\n      [2, 50, 24],\n      [4, 25, 9],\n\n      // 5\n      [1, 134, 108],\n      [2, 67, 43],\n      [2, 33, 15, 2, 34, 16],\n      [2, 33, 11, 2, 34, 12],\n\n      // 6\n      [2, 86, 68],\n      [4, 43, 27],\n      [4, 43, 19],\n      [4, 43, 15],\n\n      // 7\n      [2, 98, 78],\n      [4, 49, 31],\n      [2, 32, 14, 4, 33, 15],\n      [4, 39, 13, 1, 40, 14],\n\n      // 8\n      [2, 121, 97],\n      [2, 60, 38, 2, 61, 39],\n      [4, 40, 18, 2, 41, 19],\n      [4, 40, 14, 2, 41, 15],\n\n      // 9\n      [2, 146, 116],\n      [3, 58, 36, 2, 59, 37],\n      [4, 36, 16, 4, 37, 17],\n      [4, 36, 12, 4, 37, 13],\n\n      // 10\n      [2, 86, 68, 2, 87, 69],\n      [4, 69, 43, 1, 70, 44],\n      [6, 43, 19, 2, 44, 20],\n      [6, 43, 15, 2, 44, 16],\n\n      // 11\n      [4, 101, 81],\n      [1, 80, 50, 4, 81, 51],\n      [4, 50, 22, 4, 51, 23],\n      [3, 36, 12, 8, 37, 13],\n\n      // 12\n      [2, 116, 92, 2, 117, 93],\n      [6, 58, 36, 2, 59, 37],\n      [4, 46, 20, 6, 47, 21],\n      [7, 42, 14, 4, 43, 15],\n\n      // 13\n      [4, 133, 107],\n      [8, 59, 37, 1, 60, 38],\n      [8, 44, 20, 4, 45, 21],\n      [12, 33, 11, 4, 34, 12],\n\n      // 14\n      [3, 145, 115, 1, 146, 116],\n      [4, 64, 40, 5, 65, 41],\n      [11, 36, 16, 5, 37, 17],\n      [11, 36, 12, 5, 37, 13],\n\n      // 15\n      [5, 109, 87, 1, 110, 88],\n      [5, 65, 41, 5, 66, 42],\n      [5, 54, 24, 7, 55, 25],\n      [11, 36, 12, 7, 37, 13],\n\n      // 16\n      [5, 122, 98, 1, 123, 99],\n      [7, 73, 45, 3, 74, 46],\n      [15, 43, 19, 2, 44, 20],\n      [3, 45, 15, 13, 46, 16],\n\n      // 17\n      [1, 135, 107, 5, 136, 108],\n      [10, 74, 46, 1, 75, 47],\n      [1, 50, 22, 15, 51, 23],\n      [2, 42, 14, 17, 43, 15],\n\n      // 18\n      [5, 150, 120, 1, 151, 121],\n      [9, 69, 43, 4, 70, 44],\n      [17, 50, 22, 1, 51, 23],\n      [2, 42, 14, 19, 43, 15],\n\n      // 19\n      [3, 141, 113, 4, 142, 114],\n      [3, 70, 44, 11, 71, 45],\n      [17, 47, 21, 4, 48, 22],\n      [9, 39, 13, 16, 40, 14],\n\n      // 20\n      [3, 135, 107, 5, 136, 108],\n      [3, 67, 41, 13, 68, 42],\n      [15, 54, 24, 5, 55, 25],\n      [15, 43, 15, 10, 44, 16],\n\n      // 21\n      [4, 144, 116, 4, 145, 117],\n      [17, 68, 42],\n      [17, 50, 22, 6, 51, 23],\n      [19, 46, 16, 6, 47, 17],\n\n      // 22\n      [2, 139, 111, 7, 140, 112],\n      [17, 74, 46],\n      [7, 54, 24, 16, 55, 25],\n      [34, 37, 13],\n\n      // 23\n      [4, 151, 121, 5, 152, 122],\n      [4, 75, 47, 14, 76, 48],\n      [11, 54, 24, 14, 55, 25],\n      [16, 45, 15, 14, 46, 16],\n\n      // 24\n      [6, 147, 117, 4, 148, 118],\n      [6, 73, 45, 14, 74, 46],\n      [11, 54, 24, 16, 55, 25],\n      [30, 46, 16, 2, 47, 17],\n\n      // 25\n      [8, 132, 106, 4, 133, 107],\n      [8, 75, 47, 13, 76, 48],\n      [7, 54, 24, 22, 55, 25],\n      [22, 45, 15, 13, 46, 16],\n\n      // 26\n      [10, 142, 114, 2, 143, 115],\n      [19, 74, 46, 4, 75, 47],\n      [28, 50, 22, 6, 51, 23],\n      [33, 46, 16, 4, 47, 17],\n\n      // 27\n      [8, 152, 122, 4, 153, 123],\n      [22, 73, 45, 3, 74, 46],\n      [8, 53, 23, 26, 54, 24],\n      [12, 45, 15, 28, 46, 16],\n\n      // 28\n      [3, 147, 117, 10, 148, 118],\n      [3, 73, 45, 23, 74, 46],\n      [4, 54, 24, 31, 55, 25],\n      [11, 45, 15, 31, 46, 16],\n\n      // 29\n      [7, 146, 116, 7, 147, 117],\n      [21, 73, 45, 7, 74, 46],\n      [1, 53, 23, 37, 54, 24],\n      [19, 45, 15, 26, 46, 16],\n\n      // 30\n      [5, 145, 115, 10, 146, 116],\n      [19, 75, 47, 10, 76, 48],\n      [15, 54, 24, 25, 55, 25],\n      [23, 45, 15, 25, 46, 16],\n\n      // 31\n      [13, 145, 115, 3, 146, 116],\n      [2, 74, 46, 29, 75, 47],\n      [42, 54, 24, 1, 55, 25],\n      [23, 45, 15, 28, 46, 16],\n\n      // 32\n      [17, 145, 115],\n      [10, 74, 46, 23, 75, 47],\n      [10, 54, 24, 35, 55, 25],\n      [19, 45, 15, 35, 46, 16],\n\n      // 33\n      [17, 145, 115, 1, 146, 116],\n      [14, 74, 46, 21, 75, 47],\n      [29, 54, 24, 19, 55, 25],\n      [11, 45, 15, 46, 46, 16],\n\n      // 34\n      [13, 145, 115, 6, 146, 116],\n      [14, 74, 46, 23, 75, 47],\n      [44, 54, 24, 7, 55, 25],\n      [59, 46, 16, 1, 47, 17],\n\n      // 35\n      [12, 151, 121, 7, 152, 122],\n      [12, 75, 47, 26, 76, 48],\n      [39, 54, 24, 14, 55, 25],\n      [22, 45, 15, 41, 46, 16],\n\n      // 36\n      [6, 151, 121, 14, 152, 122],\n      [6, 75, 47, 34, 76, 48],\n      [46, 54, 24, 10, 55, 25],\n      [2, 45, 15, 64, 46, 16],\n\n      // 37\n      [17, 152, 122, 4, 153, 123],\n      [29, 74, 46, 14, 75, 47],\n      [49, 54, 24, 10, 55, 25],\n      [24, 45, 15, 46, 46, 16],\n\n      // 38\n      [4, 152, 122, 18, 153, 123],\n      [13, 74, 46, 32, 75, 47],\n      [48, 54, 24, 14, 55, 25],\n      [42, 45, 15, 32, 46, 16],\n\n      // 39\n      [20, 147, 117, 4, 148, 118],\n      [40, 75, 47, 7, 76, 48],\n      [43, 54, 24, 22, 55, 25],\n      [10, 45, 15, 67, 46, 16],\n\n      // 40\n      [19, 148, 118, 6, 149, 119],\n      [18, 75, 47, 31, 76, 48],\n      [34, 54, 24, 34, 55, 25],\n      [20, 45, 15, 61, 46, 16]\n    ];\n\n    var qrRSBlock = function(totalCount, dataCount) {\n      var _this = {};\n      _this.totalCount = totalCount;\n      _this.dataCount = dataCount;\n      return _this;\n    };\n\n    var _this = {};\n\n    var getRsBlockTable = function(typeNumber, errorCorrectionLevel) {\n\n      switch(errorCorrectionLevel) {\n      case QRErrorCorrectionLevel.L :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n      case QRErrorCorrectionLevel.M :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n      case QRErrorCorrectionLevel.Q :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n      case QRErrorCorrectionLevel.H :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n      default :\n        return undefined;\n      }\n    };\n\n    _this.getRSBlocks = function(typeNumber, errorCorrectionLevel) {\n\n      var rsBlock = getRsBlockTable(typeNumber, errorCorrectionLevel);\n\n      if (typeof rsBlock == 'undefined') {\n        throw 'bad rs block @ typeNumber:' + typeNumber +\n            '/errorCorrectionLevel:' + errorCorrectionLevel;\n      }\n\n      var length = rsBlock.length / 3;\n\n      var list = [];\n\n      for (var i = 0; i < length; i += 1) {\n\n        var count = rsBlock[i * 3 + 0];\n        var totalCount = rsBlock[i * 3 + 1];\n        var dataCount = rsBlock[i * 3 + 2];\n\n        for (var j = 0; j < count; j += 1) {\n          list.push(qrRSBlock(totalCount, dataCount) );\n        }\n      }\n\n      return list;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrBitBuffer\n  //---------------------------------------------------------------------\n\n  var qrBitBuffer = function() {\n\n    var _buffer = [];\n    var _length = 0;\n\n    var _this = {};\n\n    _this.getBuffer = function() {\n      return _buffer;\n    };\n\n    _this.getAt = function(index) {\n      var bufIndex = Math.floor(index / 8);\n      return ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n    };\n\n    _this.put = function(num, length) {\n      for (var i = 0; i < length; i += 1) {\n        _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n      }\n    };\n\n    _this.getLengthInBits = function() {\n      return _length;\n    };\n\n    _this.putBit = function(bit) {\n\n      var bufIndex = Math.floor(_length / 8);\n      if (_buffer.length <= bufIndex) {\n        _buffer.push(0);\n      }\n\n      if (bit) {\n        _buffer[bufIndex] |= (0x80 >>> (_length % 8) );\n      }\n\n      _length += 1;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrNumber\n  //---------------------------------------------------------------------\n\n  var qrNumber = function(data) {\n\n    var _mode = QRMode.MODE_NUMBER;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _data;\n\n      var i = 0;\n\n      while (i + 2 < data.length) {\n        buffer.put(strToNum(data.substring(i, i + 3) ), 10);\n        i += 3;\n      }\n\n      if (i < data.length) {\n        if (data.length - i == 1) {\n          buffer.put(strToNum(data.substring(i, i + 1) ), 4);\n        } else if (data.length - i == 2) {\n          buffer.put(strToNum(data.substring(i, i + 2) ), 7);\n        }\n      }\n    };\n\n    var strToNum = function(s) {\n      var num = 0;\n      for (var i = 0; i < s.length; i += 1) {\n        num = num * 10 + chatToNum(s.charAt(i) );\n      }\n      return num;\n    };\n\n    var chatToNum = function(c) {\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      }\n      throw 'illegal char :' + c;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrAlphaNum\n  //---------------------------------------------------------------------\n\n  var qrAlphaNum = function(data) {\n\n    var _mode = QRMode.MODE_ALPHA_NUM;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var s = _data;\n\n      var i = 0;\n\n      while (i + 1 < s.length) {\n        buffer.put(\n          getCode(s.charAt(i) ) * 45 +\n          getCode(s.charAt(i + 1) ), 11);\n        i += 2;\n      }\n\n      if (i < s.length) {\n        buffer.put(getCode(s.charAt(i) ), 6);\n      }\n    };\n\n    var getCode = function(c) {\n\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      } else if ('A' <= c && c <= 'Z') {\n        return c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;\n      } else {\n        switch (c) {\n        case ' ' : return 36;\n        case '$' : return 37;\n        case '%' : return 38;\n        case '*' : return 39;\n        case '+' : return 40;\n        case '-' : return 41;\n        case '.' : return 42;\n        case '/' : return 43;\n        case ':' : return 44;\n        default :\n          throw 'illegal char :' + c;\n        }\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qr8BitByte\n  //---------------------------------------------------------------------\n\n  var qr8BitByte = function(data) {\n\n    var _mode = QRMode.MODE_8BIT_BYTE;\n    var _data = data;\n    var _bytes = qrcode.stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _bytes.length;\n    };\n\n    _this.write = function(buffer) {\n      for (var i = 0; i < _bytes.length; i += 1) {\n        buffer.put(_bytes[i], 8);\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrKanji\n  //---------------------------------------------------------------------\n\n  var qrKanji = function(data) {\n\n    var _mode = QRMode.MODE_KANJI;\n    var _data = data;\n\n    var stringToBytes = qrcode.stringToBytesFuncs['SJIS'];\n    if (!stringToBytes) {\n      throw 'sjis not supported.';\n    }\n    !function(c, code) {\n      // self test for sjis support.\n      var test = stringToBytes(c);\n      if (test.length != 2 || ( (test[0] << 8) | test[1]) != code) {\n        throw 'sjis not supported.';\n      }\n    }('\\u53cb', 0x9746);\n\n    var _bytes = stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return ~~(_bytes.length / 2);\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _bytes;\n\n      var i = 0;\n\n      while (i + 1 < data.length) {\n\n        var c = ( (0xff & data[i]) << 8) | (0xff & data[i + 1]);\n\n        if (0x8140 <= c && c <= 0x9FFC) {\n          c -= 0x8140;\n        } else if (0xE040 <= c && c <= 0xEBBF) {\n          c -= 0xC140;\n        } else {\n          throw 'illegal char at ' + (i + 1) + '/' + c;\n        }\n\n        c = ( (c >>> 8) & 0xff) * 0xC0 + (c & 0xff);\n\n        buffer.put(c, 13);\n\n        i += 2;\n      }\n\n      if (i < data.length) {\n        throw 'illegal char at ' + (i + 1);\n      }\n    };\n\n    return _this;\n  };\n\n  //=====================================================================\n  // GIF Support etc.\n  //\n\n  //---------------------------------------------------------------------\n  // byteArrayOutputStream\n  //---------------------------------------------------------------------\n\n  var byteArrayOutputStream = function() {\n\n    var _bytes = [];\n\n    var _this = {};\n\n    _this.writeByte = function(b) {\n      _bytes.push(b & 0xff);\n    };\n\n    _this.writeShort = function(i) {\n      _this.writeByte(i);\n      _this.writeByte(i >>> 8);\n    };\n\n    _this.writeBytes = function(b, off, len) {\n      off = off || 0;\n      len = len || b.length;\n      for (var i = 0; i < len; i += 1) {\n        _this.writeByte(b[i + off]);\n      }\n    };\n\n    _this.writeString = function(s) {\n      for (var i = 0; i < s.length; i += 1) {\n        _this.writeByte(s.charCodeAt(i) );\n      }\n    };\n\n    _this.toByteArray = function() {\n      return _bytes;\n    };\n\n    _this.toString = function() {\n      var s = '';\n      s += '[';\n      for (var i = 0; i < _bytes.length; i += 1) {\n        if (i > 0) {\n          s += ',';\n        }\n        s += _bytes[i];\n      }\n      s += ']';\n      return s;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64EncodeOutputStream\n  //---------------------------------------------------------------------\n\n  var base64EncodeOutputStream = function() {\n\n    var _buffer = 0;\n    var _buflen = 0;\n    var _length = 0;\n    var _base64 = '';\n\n    var _this = {};\n\n    var writeEncoded = function(b) {\n      _base64 += String.fromCharCode(encode(b & 0x3f) );\n    };\n\n    var encode = function(n) {\n      if (n < 0) {\n        // error.\n      } else if (n < 26) {\n        return 0x41 + n;\n      } else if (n < 52) {\n        return 0x61 + (n - 26);\n      } else if (n < 62) {\n        return 0x30 + (n - 52);\n      } else if (n == 62) {\n        return 0x2b;\n      } else if (n == 63) {\n        return 0x2f;\n      }\n      throw 'n:' + n;\n    };\n\n    _this.writeByte = function(n) {\n\n      _buffer = (_buffer << 8) | (n & 0xff);\n      _buflen += 8;\n      _length += 1;\n\n      while (_buflen >= 6) {\n        writeEncoded(_buffer >>> (_buflen - 6) );\n        _buflen -= 6;\n      }\n    };\n\n    _this.flush = function() {\n\n      if (_buflen > 0) {\n        writeEncoded(_buffer << (6 - _buflen) );\n        _buffer = 0;\n        _buflen = 0;\n      }\n\n      if (_length % 3 != 0) {\n        // padding\n        var padlen = 3 - _length % 3;\n        for (var i = 0; i < padlen; i += 1) {\n          _base64 += '=';\n        }\n      }\n    };\n\n    _this.toString = function() {\n      return _base64;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64DecodeInputStream\n  //---------------------------------------------------------------------\n\n  var base64DecodeInputStream = function(str) {\n\n    var _str = str;\n    var _pos = 0;\n    var _buffer = 0;\n    var _buflen = 0;\n\n    var _this = {};\n\n    _this.read = function() {\n\n      while (_buflen < 8) {\n\n        if (_pos >= _str.length) {\n          if (_buflen == 0) {\n            return -1;\n          }\n          throw 'unexpected end of file./' + _buflen;\n        }\n\n        var c = _str.charAt(_pos);\n        _pos += 1;\n\n        if (c == '=') {\n          _buflen = 0;\n          return -1;\n        } else if (c.match(/^\\s$/) ) {\n          // ignore if whitespace.\n          continue;\n        }\n\n        _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );\n        _buflen += 6;\n      }\n\n      var n = (_buffer >>> (_buflen - 8) ) & 0xff;\n      _buflen -= 8;\n      return n;\n    };\n\n    var decode = function(c) {\n      if (0x41 <= c && c <= 0x5a) {\n        return c - 0x41;\n      } else if (0x61 <= c && c <= 0x7a) {\n        return c - 0x61 + 26;\n      } else if (0x30 <= c && c <= 0x39) {\n        return c - 0x30 + 52;\n      } else if (c == 0x2b) {\n        return 62;\n      } else if (c == 0x2f) {\n        return 63;\n      } else {\n        throw 'c:' + c;\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // gifImage (B/W)\n  //---------------------------------------------------------------------\n\n  var gifImage = function(width, height) {\n\n    var _width = width;\n    var _height = height;\n    var _data = new Array(width * height);\n\n    var _this = {};\n\n    _this.setPixel = function(x, y, pixel) {\n      _data[y * _width + x] = pixel;\n    };\n\n    _this.write = function(out) {\n\n      //---------------------------------\n      // GIF Signature\n\n      out.writeString('GIF87a');\n\n      //---------------------------------\n      // Screen Descriptor\n\n      out.writeShort(_width);\n      out.writeShort(_height);\n\n      out.writeByte(0x80); // 2bit\n      out.writeByte(0);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Global Color Map\n\n      // black\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n\n      // white\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n\n      //---------------------------------\n      // Image Descriptor\n\n      out.writeString(',');\n      out.writeShort(0);\n      out.writeShort(0);\n      out.writeShort(_width);\n      out.writeShort(_height);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Local Color Map\n\n      //---------------------------------\n      // Raster Data\n\n      var lzwMinCodeSize = 2;\n      var raster = getLZWRaster(lzwMinCodeSize);\n\n      out.writeByte(lzwMinCodeSize);\n\n      var offset = 0;\n\n      while (raster.length - offset > 255) {\n        out.writeByte(255);\n        out.writeBytes(raster, offset, 255);\n        offset += 255;\n      }\n\n      out.writeByte(raster.length - offset);\n      out.writeBytes(raster, offset, raster.length - offset);\n      out.writeByte(0x00);\n\n      //---------------------------------\n      // GIF Terminator\n      out.writeString(';');\n    };\n\n    var bitOutputStream = function(out) {\n\n      var _out = out;\n      var _bitLength = 0;\n      var _bitBuffer = 0;\n\n      var _this = {};\n\n      _this.write = function(data, length) {\n\n        if ( (data >>> length) != 0) {\n          throw 'length over';\n        }\n\n        while (_bitLength + length >= 8) {\n          _out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );\n          length -= (8 - _bitLength);\n          data >>>= (8 - _bitLength);\n          _bitBuffer = 0;\n          _bitLength = 0;\n        }\n\n        _bitBuffer = (data << _bitLength) | _bitBuffer;\n        _bitLength = _bitLength + length;\n      };\n\n      _this.flush = function() {\n        if (_bitLength > 0) {\n          _out.writeByte(_bitBuffer);\n        }\n      };\n\n      return _this;\n    };\n\n    var getLZWRaster = function(lzwMinCodeSize) {\n\n      var clearCode = 1 << lzwMinCodeSize;\n      var endCode = (1 << lzwMinCodeSize) + 1;\n      var bitLength = lzwMinCodeSize + 1;\n\n      // Setup LZWTable\n      var table = lzwTable();\n\n      for (var i = 0; i < clearCode; i += 1) {\n        table.add(String.fromCharCode(i) );\n      }\n      table.add(String.fromCharCode(clearCode) );\n      table.add(String.fromCharCode(endCode) );\n\n      var byteOut = byteArrayOutputStream();\n      var bitOut = bitOutputStream(byteOut);\n\n      // clear code\n      bitOut.write(clearCode, bitLength);\n\n      var dataIndex = 0;\n\n      var s = String.fromCharCode(_data[dataIndex]);\n      dataIndex += 1;\n\n      while (dataIndex < _data.length) {\n\n        var c = String.fromCharCode(_data[dataIndex]);\n        dataIndex += 1;\n\n        if (table.contains(s + c) ) {\n\n          s = s + c;\n\n        } else {\n\n          bitOut.write(table.indexOf(s), bitLength);\n\n          if (table.size() < 0xfff) {\n\n            if (table.size() == (1 << bitLength) ) {\n              bitLength += 1;\n            }\n\n            table.add(s + c);\n          }\n\n          s = c;\n        }\n      }\n\n      bitOut.write(table.indexOf(s), bitLength);\n\n      // end code\n      bitOut.write(endCode, bitLength);\n\n      bitOut.flush();\n\n      return byteOut.toByteArray();\n    };\n\n    var lzwTable = function() {\n\n      var _map = {};\n      var _size = 0;\n\n      var _this = {};\n\n      _this.add = function(key) {\n        if (_this.contains(key) ) {\n          throw 'dup key:' + key;\n        }\n        _map[key] = _size;\n        _size += 1;\n      };\n\n      _this.size = function() {\n        return _size;\n      };\n\n      _this.indexOf = function(key) {\n        return _map[key];\n      };\n\n      _this.contains = function(key) {\n        return typeof _map[key] != 'undefined';\n      };\n\n      return _this;\n    };\n\n    return _this;\n  };\n\n  var createDataURL = function(width, height, getPixel) {\n    var gif = gifImage(width, height);\n    for (var y = 0; y < height; y += 1) {\n      for (var x = 0; x < width; x += 1) {\n        gif.setPixel(x, y, getPixel(x, y) );\n      }\n    }\n\n    var b = byteArrayOutputStream();\n    gif.write(b);\n\n    var base64 = base64EncodeOutputStream();\n    var bytes = b.toByteArray();\n    for (var i = 0; i < bytes.length; i += 1) {\n      base64.writeByte(bytes[i]);\n    }\n    base64.flush();\n\n    return 'data:image/gif;base64,' + base64;\n  };\n\n  //---------------------------------------------------------------------\n  // returns qrcode function.\n\n  return qrcode;\n}();\n\n// multibyte support\n!function() {\n\n  qrcode.stringToBytesFuncs['UTF-8'] = function(s) {\n    // http://stackoverflow.com/questions/18729405/how-to-convert-utf8-string-to-byte-array\n    function toUTF8Array(str) {\n      var utf8 = [];\n      for (var i=0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) utf8.push(charcode);\n        else if (charcode < 0x800) {\n          utf8.push(0xc0 | (charcode >> 6),\n              0x80 | (charcode & 0x3f));\n        }\n        else if (charcode < 0xd800 || charcode >= 0xe000) {\n          utf8.push(0xe0 | (charcode >> 12),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n        // surrogate pair\n        else {\n          i++;\n          // UTF-16 encodes 0x10000-0x10FFFF by\n          // subtracting 0x10000 and splitting the\n          // 20 bits of 0x0-0xFFFFF into two halves\n          charcode = 0x10000 + (((charcode & 0x3ff)<<10)\n            | (str.charCodeAt(i) & 0x3ff));\n          utf8.push(0xf0 | (charcode >>18),\n              0x80 | ((charcode>>12) & 0x3f),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n      }\n      return utf8;\n    }\n    return toUTF8Array(s);\n  };\n\n}();\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n      define([], factory);\n  } else if (typeof exports === 'object') {\n      module.exports = factory();\n  }\n}(function () {\n    return qrcode;\n}));\n","import { UnknownObject } from \"../types\";\n\nconst isObject = (obj: Record<string, unknown>): boolean => !!obj && typeof obj === \"object\" && !Array.isArray(obj);\n\nexport default function mergeDeep(target: UnknownObject, ...sources: UnknownObject[]): UnknownObject {\n  if (!sources.length) return target;\n  const source = sources.shift();\n  if (source === undefined || !isObject(target) || !isObject(source)) return target;\n  target = { ...target };\n  Object.keys(source).forEach((key: string): void => {\n    const targetValue = target[key];\n    const sourceValue = source[key];\n\n    if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n      target[key] = sourceValue;\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\n      target[key] = mergeDeep(Object.assign({}, targetValue), sourceValue);\n    } else {\n      target[key] = sourceValue;\n    }\n  });\n\n  return mergeDeep(target, ...sources);\n}\n","export default function downloadURI(uri: string, name: string): void {\n  const link = document.createElement(\"a\");\n  link.download = name;\n  link.href = uri;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","export default async function toDataURL(url: string): Promise<string> {\n  return new Promise((resolve) => {\n    const xhr = new XMLHttpRequest();\n    xhr.onload = function () {\n      const reader = new FileReader();\n      reader.onloadend = function () {\n        resolve(reader.result as string);\n      };\n      reader.readAsDataURL(xhr.response);\n    };\n    xhr.open(\"GET\", url);\n    xhr.responseType = \"blob\";\n    xhr.send();\n  });\n}\n","import { TypeNumber } from \"../types\";\n\ninterface TypesMap {\n  [key: number]: TypeNumber;\n}\n\nconst qrTypes: TypesMap = {};\n\nfor (let type = 0; type <= 40; type++) {\n  qrTypes[type] = type as TypeNumber;\n}\n\n// 0 types is autodetect\n\n// types = {\n//     0: 0,\n//     1: 1,\n//     ...\n//     40: 40\n// }\n\nexport default qrTypes;\n","interface ErrorCorrectionPercents {\n  [key: string]: number;\n}\n\nexport default {\n  L: 0.07,\n  M: 0.15,\n  Q: 0.25,\n  H: 0.3\n} as ErrorCorrectionPercents;\n","import dotTypes from \"../../constants/dotTypes\";\nimport { DotType, GetNeighbor, DrawArgs, BasicFigureDrawArgs, RotateFigureArgs } from \"../../types\";\n\nexport default class QRDot {\n  _element?: SVGElement;\n  _svg: SVGElement;\n  _type: DotType;\n\n  constructor({ svg, type }: { svg: SVGElement; type: DotType }) {\n    this._svg = svg;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, getNeighbor: GetNeighbor): void {\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case dotTypes.dots:\n        drawFunction = this._drawDot;\n        break;\n      case dotTypes.classy:\n        drawFunction = this._drawClassy;\n        break;\n      case dotTypes.classyRounded:\n        drawFunction = this._drawClassyRounded;\n        break;\n      case dotTypes.rounded:\n        drawFunction = this._drawRounded;\n        break;\n      case dotTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case dotTypes.square:\n      default:\n        drawFunction = this._drawSquare;\n    }\n\n    drawFunction.call(this, { x, y, size, getNeighbor });\n  }\n\n  _rotateFigure({ x, y, size, rotation = 0, draw }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    draw();\n    this._element?.setAttribute(\"transform\", `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n        this._element.setAttribute(\"cx\", String(x + size / 2));\n        this._element.setAttribute(\"cy\", String(y + size / 2));\n        this._element.setAttribute(\"r\", String(size / 2));\n      }\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        this._element.setAttribute(\"x\", String(x));\n        this._element.setAttribute(\"y\", String(y));\n        this._element.setAttribute(\"width\", String(size));\n        this._element.setAttribute(\"height\", String(size));\n      }\n    });\n  }\n\n  //if rotation === 0 - right side is rounded\n  _basicSideRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        this._element.setAttribute(\n          \"d\",\n          `M ${x} ${y}` + //go to top left position\n            `v ${size}` + //draw line to left bottom corner\n            `h ${size / 2}` + //draw line to left bottom corner + half of size right\n            `a ${size / 2} ${size / 2}, 0, 0, 0, 0 ${-size}` // draw rounded corner\n        );\n      }\n    });\n  }\n\n  //if rotation === 0 - top right corner is rounded\n  _basicCornerRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        this._element.setAttribute(\n          \"d\",\n          `M ${x} ${y}` + //go to top left position\n            `v ${size}` + //draw line to left bottom corner\n            `h ${size}` + //draw line to right bottom corner\n            `v ${-size / 2}` + //draw line to right bottom corner + half of size top\n            `a ${size / 2} ${size / 2}, 0, 0, 0, ${-size / 2} ${-size / 2}` // draw rounded corner\n        );\n      }\n    });\n  }\n\n  //if rotation === 0 - top right corner is rounded\n  _basicCornerExtraRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        this._element.setAttribute(\n          \"d\",\n          `M ${x} ${y}` + //go to top left position\n            `v ${size}` + //draw line to left bottom corner\n            `h ${size}` + //draw line to right bottom corner\n            `a ${size} ${size}, 0, 0, 0, ${-size} ${-size}` // draw rounded top right corner\n        );\n      }\n    });\n  }\n\n  //if rotation === 0 - left bottom and right top corners are rounded\n  _basicCornersRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        this._element.setAttribute(\n          \"d\",\n          `M ${x} ${y}` + //go to left top position\n            `v ${size / 2}` + //draw line to left top corner + half of size bottom\n            `a ${size / 2} ${size / 2}, 0, 0, 0, ${size / 2} ${size / 2}` + // draw rounded left bottom corner\n            `h ${size / 2}` + //draw line to right bottom corner\n            `v ${-size / 2}` + //draw line to right bottom corner + half of size top\n            `a ${size / 2} ${size / 2}, 0, 0, 0, ${-size / 2} ${-size / 2}` // draw rounded right top corner\n        );\n      }\n    });\n  }\n\n  _drawDot({ x, y, size }: DrawArgs): void {\n    this._basicDot({ x, y, size, rotation: 0 });\n  }\n\n  _drawSquare({ x, y, size }: DrawArgs): void {\n    this._basicSquare({ x, y, size, rotation: 0 });\n  }\n\n  _drawRounded({ x, y, size, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n    const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n    const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n    const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({ x, y, size, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({ x, y, size, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerRounded({ x, y, size, rotation });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({ x, y, size, rotation });\n      return;\n    }\n  }\n\n  _drawExtraRounded({ x, y, size, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n    const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n    const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n    const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({ x, y, size, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({ x, y, size, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerExtraRounded({ x, y, size, rotation });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({ x, y, size, rotation });\n      return;\n    }\n  }\n\n  _drawClassy({ x, y, size, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n    const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n    const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n    const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({ x, y, size, rotation: Math.PI / 2 });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerRounded({ x, y, size, rotation: -Math.PI / 2 });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerRounded({ x, y, size, rotation: Math.PI / 2 });\n      return;\n    }\n\n    this._basicSquare({ x, y, size, rotation: 0 });\n  }\n\n  _drawClassyRounded({ x, y, size, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? +getNeighbor(-1, 0) : 0;\n    const rightNeighbor = getNeighbor ? +getNeighbor(1, 0) : 0;\n    const topNeighbor = getNeighbor ? +getNeighbor(0, -1) : 0;\n    const bottomNeighbor = getNeighbor ? +getNeighbor(0, 1) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({ x, y, size, rotation: Math.PI / 2 });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerExtraRounded({ x, y, size, rotation: -Math.PI / 2 });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerExtraRounded({ x, y, size, rotation: Math.PI / 2 });\n      return;\n    }\n\n    this._basicSquare({ x, y, size, rotation: 0 });\n  }\n}\n","import { DotTypes } from \"../types\";\n\nexport default {\n  dots: \"dots\",\n  rounded: \"rounded\",\n  classy: \"classy\",\n  classyRounded: \"classy-rounded\",\n  square: \"square\",\n  extraRounded: \"extra-rounded\"\n} as DotTypes;\n","import cornerSquareTypes from \"../../constants/cornerSquareTypes\";\nimport { CornerSquareType, DrawArgs, BasicFigureDrawArgs, RotateFigureArgs } from \"../../types\";\n\nexport default class QRCornerSquare {\n  _element?: SVGElement;\n  _svg: SVGElement;\n  _type: CornerSquareType;\n\n  constructor({ svg, type }: { svg: SVGElement; type: CornerSquareType }) {\n    this._svg = svg;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerSquareTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerSquareTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case cornerSquareTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, { x, y, size, rotation });\n  }\n\n  _rotateFigure({ x, y, size, rotation = 0, draw }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    draw();\n    this._element?.setAttribute(\"transform\", `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        this._element.setAttribute(\"clip-rule\", \"evenodd\");\n        this._element.setAttribute(\n          \"d\",\n          `M ${x + size / 2} ${y}` + // M cx, y //  Move to top of ring\n            `a ${size / 2} ${size / 2} 0 1 0 0.1 0` + // a outerRadius, outerRadius, 0, 1, 0, 1, 0 // Draw outer arc, but don't close it\n            `z` + // Z // Close the outer shape\n            `m 0 ${dotSize}` + // m -1 outerRadius-innerRadius // Move to top point of inner radius\n            `a ${size / 2 - dotSize} ${size / 2 - dotSize} 0 1 1 -0.1 0` + // a innerRadius, innerRadius, 0, 1, 1, -1, 0 // Draw inner arc, but don't close it\n            `Z` // Z // Close the inner ring. Actually will still work without, but inner ring will have one unit missing in stroke\n        );\n      }\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        this._element.setAttribute(\"clip-rule\", \"evenodd\");\n        this._element.setAttribute(\n          \"d\",\n          `M ${x} ${y}` +\n            `v ${size}` +\n            `h ${size}` +\n            `v ${-size}` +\n            `z` +\n            `M ${x + dotSize} ${y + dotSize}` +\n            `h ${size - 2 * dotSize}` +\n            `v ${size - 2 * dotSize}` +\n            `h ${-size + 2 * dotSize}` +\n            `z`\n        );\n      }\n    });\n  }\n\n  _basicExtraRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        this._element.setAttribute(\"clip-rule\", \"evenodd\");\n        this._element.setAttribute(\n          \"d\",\n          `M ${x} ${y + 2.5 * dotSize}` +\n            `v ${2 * dotSize}` +\n            `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${dotSize * 2.5} ${dotSize * 2.5}` +\n            `h ${2 * dotSize}` +\n            `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${dotSize * 2.5} ${-dotSize * 2.5}` +\n            `v ${-2 * dotSize}` +\n            `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${-dotSize * 2.5} ${-dotSize * 2.5}` +\n            `h ${-2 * dotSize}` +\n            `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${-dotSize * 2.5} ${dotSize * 2.5}` +\n            `M ${x + 2.5 * dotSize} ${y + dotSize}` +\n            `h ${2 * dotSize}` +\n            `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${dotSize * 1.5} ${dotSize * 1.5}` +\n            `v ${2 * dotSize}` +\n            `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${-dotSize * 1.5} ${dotSize * 1.5}` +\n            `h ${-2 * dotSize}` +\n            `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${-dotSize * 1.5} ${-dotSize * 1.5}` +\n            `v ${-2 * dotSize}` +\n            `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${dotSize * 1.5} ${-dotSize * 1.5}`\n        );\n      }\n    });\n  }\n\n  _drawDot({ x, y, size, rotation }: DrawArgs): void {\n    this._basicDot({ x, y, size, rotation });\n  }\n\n  _drawSquare({ x, y, size, rotation }: DrawArgs): void {\n    this._basicSquare({ x, y, size, rotation });\n  }\n\n  _drawExtraRounded({ x, y, size, rotation }: DrawArgs): void {\n    this._basicExtraRounded({ x, y, size, rotation });\n  }\n}\n","import { CornerSquareTypes } from \"../types\";\n\nexport default {\n  dot: \"dot\",\n  square: \"square\",\n  extraRounded: \"extra-rounded\"\n} as CornerSquareTypes;\n","import cornerDotTypes from \"../../constants/cornerDotTypes\";\nimport { CornerDotType, RotateFigureArgs, BasicFigureDrawArgs, DrawArgs } from \"../../types\";\n\nexport default class QRCornerDot {\n  _element?: SVGElement;\n  _svg: SVGElement;\n  _type: CornerDotType;\n\n  constructor({ svg, type }: { svg: SVGElement; type: CornerDotType }) {\n    this._svg = svg;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerDotTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerDotTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, { x, y, size, rotation });\n  }\n\n  _rotateFigure({ x, y, size, rotation = 0, draw }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    draw();\n    this._element?.setAttribute(\"transform\", `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n        this._element.setAttribute(\"cx\", String(x + size / 2));\n        this._element.setAttribute(\"cy\", String(y + size / 2));\n        this._element.setAttribute(\"r\", String(size / 2));\n      }\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        this._element.setAttribute(\"x\", String(x));\n        this._element.setAttribute(\"y\", String(y));\n        this._element.setAttribute(\"width\", String(size));\n        this._element.setAttribute(\"height\", String(size));\n      }\n    });\n  }\n\n  _drawDot({ x, y, size, rotation }: DrawArgs): void {\n    this._basicDot({ x, y, size, rotation });\n  }\n\n  _drawSquare({ x, y, size, rotation }: DrawArgs): void {\n    this._basicSquare({ x, y, size, rotation });\n  }\n}\n","import { CornerDotTypes } from \"../types\";\n\nexport default {\n  dot: \"dot\",\n  square: \"square\"\n} as CornerDotTypes;\n","import { ShapeTypes } from \"../types\";\n\nexport default {\n  square: \"square\",\n  circle: \"circle\"\n} as ShapeTypes;\n","import calculateImageSize from \"../tools/calculateImageSize\";\nimport toDataUrl from \"../tools/toDataUrl\";\nimport errorCorrectionPercents from \"../constants/errorCorrectionPercents\";\nimport QRDot from \"../figures/dot/QRDot\";\nimport QRCornerSquare from \"../figures/cornerSquare/QRCornerSquare\";\nimport QRCornerDot from \"../figures/cornerDot/QRCornerDot\";\nimport { RequiredOptions } from \"./QROptions\";\nimport gradientTypes from \"../constants/gradientTypes\";\nimport shapeTypes from \"../constants/shapeTypes\";\nimport { QRCode, FilterFunction, Gradient } from \"../types\";\n\nconst squareMask = [\n  [1, 1, 1, 1, 1, 1, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 1, 1, 1, 1, 1, 1]\n];\n\nconst dotMask = [\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0]\n];\n\nexport default class QRSVG {\n  _element: SVGElement;\n  _defs: SVGElement;\n  _backgroundClipPath?: SVGElement;\n  _dotsClipPath?: SVGElement;\n  _cornersSquareClipPath?: SVGElement;\n  _cornersDotClipPath?: SVGElement;\n  _options: RequiredOptions;\n  _qr?: QRCode;\n  _image?: HTMLImageElement;\n\n  //TODO don't pass all options to this class\n  constructor(options: RequiredOptions) {\n    this._element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    this._element.setAttribute(\"width\", String(options.width));\n    this._element.setAttribute(\"height\", String(options.height));\n    this._defs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n    this._element.appendChild(this._defs);\n\n    this._options = options;\n  }\n\n  get width(): number {\n    return this._options.width;\n  }\n\n  get height(): number {\n    return this._options.height;\n  }\n\n  getElement(): SVGElement {\n    return this._element;\n  }\n\n  async drawQR(qr: QRCode): Promise<void> {\n    const count = qr.getModuleCount();\n    const minSize = Math.min(this._options.width, this._options.height) - this._options.margin * 2;\n    const realQRSize = this._options.shape === shapeTypes.circle ? minSize / Math.sqrt(2) : minSize;\n    const dotSize = Math.floor(realQRSize / count);\n    let drawImageSize = {\n      hideXDots: 0,\n      hideYDots: 0,\n      width: 0,\n      height: 0\n    };\n\n    this._qr = qr;\n\n    if (this._options.image) {\n      //We need it to get image size\n      await this.loadImage();\n      if (!this._image) return;\n      const { imageOptions, qrOptions } = this._options;\n      const coverLevel = imageOptions.imageSize * errorCorrectionPercents[qrOptions.errorCorrectionLevel];\n      const maxHiddenDots = Math.floor(coverLevel * count * count);\n\n      drawImageSize = calculateImageSize({\n        originalWidth: this._image.width,\n        originalHeight: this._image.height,\n        maxHiddenDots,\n        maxHiddenAxisDots: count - 14,\n        dotSize\n      });\n    }\n\n    this.drawBackground();\n    this.drawDots((i: number, j: number): boolean => {\n      if (this._options.imageOptions.hideBackgroundDots) {\n        if (\n          i >= (count - drawImageSize.hideXDots) / 2 &&\n          i < (count + drawImageSize.hideXDots) / 2 &&\n          j >= (count - drawImageSize.hideYDots) / 2 &&\n          j < (count + drawImageSize.hideYDots) / 2\n        ) {\n          return false;\n        }\n      }\n\n      if (squareMask[i]?.[j] || squareMask[i - count + 7]?.[j] || squareMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      if (dotMask[i]?.[j] || dotMask[i - count + 7]?.[j] || dotMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      return true;\n    });\n    this.drawCorners();\n\n    if (this._options.image) {\n      await this.drawImage({ width: drawImageSize.width, height: drawImageSize.height, count, dotSize });\n    }\n  }\n\n  drawBackground(): void {\n    const element = this._element;\n    const options = this._options;\n\n    if (element) {\n      const gradientOptions = options.backgroundOptions?.gradient;\n      const color = options.backgroundOptions?.color;\n\n      if (gradientOptions || color) {\n        this._createColor({\n          options: gradientOptions,\n          color: color,\n          additionalRotation: 0,\n          x: 0,\n          y: 0,\n          height: options.height,\n          width: options.width,\n          name: \"background-color\"\n        });\n      }\n\n      if (options.backgroundOptions?.round) {\n        const size = Math.min(options.width, options.height);\n        const element = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        this._backgroundClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n        this._backgroundClipPath.setAttribute(\"id\", \"clip-path-background-color\");\n        this._defs.appendChild(this._backgroundClipPath);\n\n        element.setAttribute(\"x\", String((options.width - size) / 2));\n        element.setAttribute(\"y\", String((options.height - size) / 2));\n        element.setAttribute(\"width\", String(size));\n        element.setAttribute(\"height\", String(size));\n        element.setAttribute(\"rx\", String((size / 2) * options.backgroundOptions.round));\n\n        this._backgroundClipPath.appendChild(element);\n      }\n    }\n  }\n\n  drawDots(filter?: FilterFunction): void {\n    if (!this._qr) {\n      throw \"QR code is not defined\";\n    }\n\n    const options = this._options;\n    const count = this._qr.getModuleCount();\n\n    if (count > options.width || count > options.height) {\n      throw \"The canvas is too small.\";\n    }\n\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const realQRSize = options.shape === shapeTypes.circle ? minSize / Math.sqrt(2) : minSize;\n    const dotSize = Math.floor(realQRSize / count);\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n\n    this._dotsClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n    this._dotsClipPath.setAttribute(\"id\", \"clip-path-dot-color\");\n    this._defs.appendChild(this._dotsClipPath);\n\n    this._createColor({\n      options: options.dotsOptions?.gradient,\n      color: options.dotsOptions.color,\n      additionalRotation: 0,\n      x: 0,\n      y: 0,\n      height: options.height,\n      width: options.width,\n      name: \"dot-color\"\n    });\n\n    for (let i = 0; i < count; i++) {\n      for (let j = 0; j < count; j++) {\n        if (filter && !filter(i, j)) {\n          continue;\n        }\n        if (!this._qr?.isDark(i, j)) {\n          continue;\n        }\n\n        dot.draw(\n          xBeginning + i * dotSize,\n          yBeginning + j * dotSize,\n          dotSize,\n          (xOffset: number, yOffset: number): boolean => {\n            if (i + xOffset < 0 || j + yOffset < 0 || i + xOffset >= count || j + yOffset >= count) return false;\n            if (filter && !filter(i + xOffset, j + yOffset)) return false;\n            return !!this._qr && this._qr.isDark(i + xOffset, j + yOffset);\n          }\n        );\n\n        if (dot._element && this._dotsClipPath) {\n          this._dotsClipPath.appendChild(dot._element);\n        }\n      }\n    }\n\n    if (options.shape === shapeTypes.circle) {\n      const additionalDots = Math.floor((minSize / dotSize - count) / 2);\n      const fakeCount = count + additionalDots * 2;\n      const xFakeBeginning = xBeginning - additionalDots * dotSize;\n      const yFakeBeginning = yBeginning - additionalDots * dotSize;\n      const fakeMatrix: number[][] = [];\n      const center = Math.floor(fakeCount / 2);\n\n      for (let i = 0; i < fakeCount; i++) {\n        fakeMatrix[i] = [];\n        for (let j = 0; j < fakeCount; j++) {\n          if (\n            i >= additionalDots - 1 &&\n            i <= fakeCount - additionalDots &&\n            j >= additionalDots - 1 &&\n            j <= fakeCount - additionalDots\n          ) {\n            fakeMatrix[i][j] = 0;\n            continue;\n          }\n\n          if (Math.sqrt((i - center) * (i - center) + (j - center) * (j - center)) > center) {\n            fakeMatrix[i][j] = 0;\n            continue;\n          }\n\n          //Get random dots from QR code to show it outside of QR code\n          fakeMatrix[i][j] = this._qr.isDark(\n            j - 2 * additionalDots < 0 ? j : j >= count ? j - 2 * additionalDots : j - additionalDots,\n            i - 2 * additionalDots < 0 ? i : i >= count ? i - 2 * additionalDots : i - additionalDots\n          )\n            ? 1\n            : 0;\n        }\n      }\n\n      for (let i = 0; i < fakeCount; i++) {\n        for (let j = 0; j < fakeCount; j++) {\n          if (!fakeMatrix[i][j]) continue;\n\n          dot.draw(\n            xFakeBeginning + i * dotSize,\n            yFakeBeginning + j * dotSize,\n            dotSize,\n            (xOffset: number, yOffset: number): boolean => {\n              return !!fakeMatrix[i + xOffset]?.[j + yOffset];\n            }\n          );\n          if (dot._element && this._dotsClipPath) {\n            this._dotsClipPath.appendChild(dot._element);\n          }\n        }\n      }\n    }\n  }\n\n  drawCorners(): void {\n    if (!this._qr) {\n      throw \"QR code is not defined\";\n    }\n\n    const element = this._element;\n    const options = this._options;\n\n    if (!element) {\n      throw \"Element code is not defined\";\n    }\n\n    const count = this._qr.getModuleCount();\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const realQRSize = options.shape === shapeTypes.circle ? minSize / Math.sqrt(2) : minSize;\n    const dotSize = Math.floor(realQRSize / count);\n    const cornersSquareSize = dotSize * 7;\n    const cornersDotSize = dotSize * 3;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n\n    [\n      [0, 0, 0],\n      [1, 0, Math.PI / 2],\n      [0, 1, -Math.PI / 2]\n    ].forEach(([column, row, rotation]) => {\n      const x = xBeginning + column * dotSize * (count - 7);\n      const y = yBeginning + row * dotSize * (count - 7);\n      let cornersSquareClipPath = this._dotsClipPath;\n      let cornersDotClipPath = this._dotsClipPath;\n\n      if (options.cornersSquareOptions?.gradient || options.cornersSquareOptions?.color) {\n        cornersSquareClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n        cornersSquareClipPath.setAttribute(\"id\", `clip-path-corners-square-color-${column}-${row}`);\n        this._defs.appendChild(cornersSquareClipPath);\n        this._cornersSquareClipPath = this._cornersDotClipPath = cornersDotClipPath = cornersSquareClipPath;\n\n        this._createColor({\n          options: options.cornersSquareOptions?.gradient,\n          color: options.cornersSquareOptions?.color,\n          additionalRotation: rotation,\n          x,\n          y,\n          height: cornersSquareSize,\n          width: cornersSquareSize,\n          name: `corners-square-color-${column}-${row}`\n        });\n      }\n\n      if (options.cornersSquareOptions?.type) {\n        const cornersSquare = new QRCornerSquare({ svg: this._element, type: options.cornersSquareOptions.type });\n\n        cornersSquare.draw(x, y, cornersSquareSize, rotation);\n\n        if (cornersSquare._element && cornersSquareClipPath) {\n          cornersSquareClipPath.appendChild(cornersSquare._element);\n        }\n      } else {\n        const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n\n        for (let i = 0; i < squareMask.length; i++) {\n          for (let j = 0; j < squareMask[i].length; j++) {\n            if (!squareMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!squareMask[i + xOffset]?.[j + yOffset]\n            );\n\n            if (dot._element && cornersSquareClipPath) {\n              cornersSquareClipPath.appendChild(dot._element);\n            }\n          }\n        }\n      }\n\n      if (options.cornersDotOptions?.gradient || options.cornersDotOptions?.color) {\n        cornersDotClipPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"clipPath\");\n        cornersDotClipPath.setAttribute(\"id\", `clip-path-corners-dot-color-${column}-${row}`);\n        this._defs.appendChild(cornersDotClipPath);\n        this._cornersDotClipPath = cornersDotClipPath;\n\n        this._createColor({\n          options: options.cornersDotOptions?.gradient,\n          color: options.cornersDotOptions?.color,\n          additionalRotation: rotation,\n          x: x + dotSize * 2,\n          y: y + dotSize * 2,\n          height: cornersDotSize,\n          width: cornersDotSize,\n          name: `corners-dot-color-${column}-${row}`\n        });\n      }\n\n      if (options.cornersDotOptions?.type) {\n        const cornersDot = new QRCornerDot({ svg: this._element, type: options.cornersDotOptions.type });\n\n        cornersDot.draw(x + dotSize * 2, y + dotSize * 2, cornersDotSize, rotation);\n\n        if (cornersDot._element && cornersDotClipPath) {\n          cornersDotClipPath.appendChild(cornersDot._element);\n        }\n      } else {\n        const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n\n        for (let i = 0; i < dotMask.length; i++) {\n          for (let j = 0; j < dotMask[i].length; j++) {\n            if (!dotMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!dotMask[i + xOffset]?.[j + yOffset]\n            );\n\n            if (dot._element && cornersDotClipPath) {\n              cornersDotClipPath.appendChild(dot._element);\n            }\n          }\n        }\n      }\n    });\n  }\n\n  loadImage(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const options = this._options;\n      const image = new Image();\n\n      if (!options.image) {\n        return reject(\"Image is not defined\");\n      }\n\n      if (typeof options.imageOptions.crossOrigin === \"string\") {\n        image.crossOrigin = options.imageOptions.crossOrigin;\n      }\n\n      this._image = image;\n      image.onload = (): void => {\n        resolve();\n      };\n      image.src = options.image;\n    });\n  }\n\n  async drawImage({\n    width,\n    height,\n    count,\n    dotSize\n  }: {\n    width: number;\n    height: number;\n    count: number;\n    dotSize: number;\n  }): Promise<void> {\n    const options = this._options;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dx = xBeginning + options.imageOptions.margin + (count * dotSize - width) / 2;\n    const dy = yBeginning + options.imageOptions.margin + (count * dotSize - height) / 2;\n    const dw = width - options.imageOptions.margin * 2;\n    const dh = height - options.imageOptions.margin * 2;\n\n    const image = document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\n    image.setAttribute(\"x\", String(dx));\n    image.setAttribute(\"y\", String(dy));\n    image.setAttribute(\"width\", `${dw}px`);\n    image.setAttribute(\"height\", `${dh}px`);\n\n    const imageUrl = await toDataUrl(options.image || \"\");\n\n    image.setAttribute(\"href\", imageUrl || \"\");\n\n    this._element.appendChild(image);\n  }\n\n  _createColor({\n    options,\n    color,\n    additionalRotation,\n    x,\n    y,\n    height,\n    width,\n    name\n  }: {\n    options?: Gradient;\n    color?: string;\n    additionalRotation: number;\n    x: number;\n    y: number;\n    height: number;\n    width: number;\n    name: string;\n  }): void {\n    const size = width > height ? width : height;\n    const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n    rect.setAttribute(\"x\", String(x));\n    rect.setAttribute(\"y\", String(y));\n    rect.setAttribute(\"height\", String(height));\n    rect.setAttribute(\"width\", String(width));\n    rect.setAttribute(\"clip-path\", `url('#clip-path-${name}')`);\n\n    if (options) {\n      let gradient: SVGElement;\n      if (options.type === gradientTypes.radial) {\n        gradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"radialGradient\");\n        gradient.setAttribute(\"id\", name);\n        gradient.setAttribute(\"gradientUnits\", \"userSpaceOnUse\");\n        gradient.setAttribute(\"fx\", String(x + width / 2));\n        gradient.setAttribute(\"fy\", String(y + height / 2));\n        gradient.setAttribute(\"cx\", String(x + width / 2));\n        gradient.setAttribute(\"cy\", String(y + height / 2));\n        gradient.setAttribute(\"r\", String(size / 2));\n      } else {\n        const rotation = ((options.rotation || 0) + additionalRotation) % (2 * Math.PI);\n        const positiveRotation = (rotation + 2 * Math.PI) % (2 * Math.PI);\n        let x0 = x + width / 2;\n        let y0 = y + height / 2;\n        let x1 = x + width / 2;\n        let y1 = y + height / 2;\n\n        if (\n          (positiveRotation >= 0 && positiveRotation <= 0.25 * Math.PI) ||\n          (positiveRotation > 1.75 * Math.PI && positiveRotation <= 2 * Math.PI)\n        ) {\n          x0 = x0 - width / 2;\n          y0 = y0 - (height / 2) * Math.tan(rotation);\n          x1 = x1 + width / 2;\n          y1 = y1 + (height / 2) * Math.tan(rotation);\n        } else if (positiveRotation > 0.25 * Math.PI && positiveRotation <= 0.75 * Math.PI) {\n          y0 = y0 - height / 2;\n          x0 = x0 - width / 2 / Math.tan(rotation);\n          y1 = y1 + height / 2;\n          x1 = x1 + width / 2 / Math.tan(rotation);\n        } else if (positiveRotation > 0.75 * Math.PI && positiveRotation <= 1.25 * Math.PI) {\n          x0 = x0 + width / 2;\n          y0 = y0 + (height / 2) * Math.tan(rotation);\n          x1 = x1 - width / 2;\n          y1 = y1 - (height / 2) * Math.tan(rotation);\n        } else if (positiveRotation > 1.25 * Math.PI && positiveRotation <= 1.75 * Math.PI) {\n          y0 = y0 + height / 2;\n          x0 = x0 + width / 2 / Math.tan(rotation);\n          y1 = y1 - height / 2;\n          x1 = x1 - width / 2 / Math.tan(rotation);\n        }\n\n        gradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n        gradient.setAttribute(\"id\", name);\n        gradient.setAttribute(\"gradientUnits\", \"userSpaceOnUse\");\n        gradient.setAttribute(\"x1\", String(Math.round(x0)));\n        gradient.setAttribute(\"y1\", String(Math.round(y0)));\n        gradient.setAttribute(\"x2\", String(Math.round(x1)));\n        gradient.setAttribute(\"y2\", String(Math.round(y1)));\n      }\n\n      options.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n        const stop = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n        stop.setAttribute(\"offset\", `${100 * offset}%`);\n        stop.setAttribute(\"stop-color\", color);\n        gradient.appendChild(stop);\n      });\n\n      rect.setAttribute(\"fill\", `url('#${name}')`);\n      this._defs.appendChild(gradient);\n    } else if (color) {\n      rect.setAttribute(\"fill\", color);\n    }\n\n    this._element.appendChild(rect);\n  }\n}\n","interface ImageSizeOptions {\n  originalHeight: number;\n  originalWidth: number;\n  maxHiddenDots: number;\n  maxHiddenAxisDots?: number;\n  dotSize: number;\n}\n\ninterface ImageSizeResult {\n  height: number;\n  width: number;\n  hideYDots: number;\n  hideXDots: number;\n}\n\nexport default function calculateImageSize({\n  originalHeight,\n  originalWidth,\n  maxHiddenDots,\n  maxHiddenAxisDots,\n  dotSize\n}: ImageSizeOptions): ImageSizeResult {\n  const hideDots = { x: 0, y: 0 };\n  const imageSize = { x: 0, y: 0 };\n\n  if (originalHeight <= 0 || originalWidth <= 0 || maxHiddenDots <= 0 || dotSize <= 0) {\n    return {\n      height: 0,\n      width: 0,\n      hideYDots: 0,\n      hideXDots: 0\n    };\n  }\n\n  const k = originalHeight / originalWidth;\n\n  //Getting the maximum possible axis hidden dots\n  hideDots.x = Math.floor(Math.sqrt(maxHiddenDots / k));\n  //The count of hidden dot's can't be less than 1\n  if (hideDots.x <= 0) hideDots.x = 1;\n  //Check the limit of the maximum allowed axis hidden dots\n  if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.x) hideDots.x = maxHiddenAxisDots;\n  //The count of dots should be odd\n  if (hideDots.x % 2 === 0) hideDots.x--;\n  imageSize.x = hideDots.x * dotSize;\n  //Calculate opposite axis hidden dots based on axis value.\n  //The value will be odd.\n  //We use ceil to prevent dots covering by the image.\n  hideDots.y = 1 + 2 * Math.ceil((hideDots.x * k - 1) / 2);\n  imageSize.y = Math.round(imageSize.x * k);\n  //If the result dots count is bigger than max - then decrease size and calculate again\n  if (hideDots.y * hideDots.x > maxHiddenDots || (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y)) {\n    if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y) {\n      hideDots.y = maxHiddenAxisDots;\n      if (hideDots.y % 2 === 0) hideDots.x--;\n    } else {\n      hideDots.y -= 2;\n    }\n    imageSize.y = hideDots.y * dotSize;\n    hideDots.x = 1 + 2 * Math.ceil((hideDots.y / k - 1) / 2);\n    imageSize.x = Math.round(imageSize.y / k);\n  }\n\n  return {\n    height: imageSize.y,\n    width: imageSize.x,\n    hideYDots: hideDots.y,\n    hideXDots: hideDots.x\n  };\n}\n","import { GradientTypes } from \"../types\";\n\nexport default {\n  radial: \"radial\",\n  linear: \"linear\"\n} as GradientTypes;\n","import { DrawTypes } from \"../types\";\n\nexport default {\n  canvas: \"canvas\",\n  svg: \"svg\"\n} as DrawTypes;\n","import qrTypes from \"../constants/qrTypes\";\nimport drawTypes from \"../constants/drawTypes\";\nimport shapeTypes from \"../constants/shapeTypes\";\nimport errorCorrectionLevels from \"../constants/errorCorrectionLevels\";\nimport { ShapeType, DotType, Options, TypeNumber, ErrorCorrectionLevel, Mode, DrawType, Gradient } from \"../types\";\n\nexport interface RequiredOptions extends Options {\n  type: DrawType;\n  shape: ShapeType;\n  width: number;\n  height: number;\n  margin: number;\n  data: string;\n  qrOptions: {\n    typeNumber: TypeNumber;\n    mode?: Mode;\n    errorCorrectionLevel: ErrorCorrectionLevel;\n  };\n  imageOptions: {\n    hideBackgroundDots: boolean;\n    imageSize: number;\n    crossOrigin?: string;\n    margin: number;\n  };\n  dotsOptions: {\n    type: DotType;\n    color: string;\n    gradient?: Gradient;\n  };\n  backgroundOptions: {\n    round: number;\n    color: string;\n    gradient?: Gradient;\n  };\n}\n\nconst defaultOptions: RequiredOptions = {\n  type: drawTypes.canvas,\n  shape: shapeTypes.square,\n  width: 300,\n  height: 300,\n  data: \"\",\n  margin: 0,\n  qrOptions: {\n    typeNumber: qrTypes[0],\n    mode: undefined,\n    errorCorrectionLevel: errorCorrectionLevels.Q\n  },\n  imageOptions: {\n    hideBackgroundDots: true,\n    imageSize: 0.4,\n    crossOrigin: undefined,\n    margin: 0\n  },\n  dotsOptions: {\n    type: \"square\",\n    color: \"#000\"\n  },\n  backgroundOptions: {\n    round: 0,\n    color: \"#fff\"\n  }\n};\n\nexport default defaultOptions;\n","import { ErrorCorrectionLevel } from \"../types\";\n\ninterface ErrorCorrectionLevels {\n  [key: string]: ErrorCorrectionLevel;\n}\n\nexport default {\n  L: \"L\",\n  M: \"M\",\n  Q: \"Q\",\n  H: \"H\"\n} as ErrorCorrectionLevels;\n","import { RequiredOptions } from \"../core/QROptions\";\nimport { Gradient } from \"../types\";\n\nfunction sanitizeGradient(gradient: Gradient): Gradient {\n  const newGradient = { ...gradient };\n\n  if (!newGradient.colorStops || !newGradient.colorStops.length) {\n    throw \"Field 'colorStops' is required in gradient\";\n  }\n\n  if (newGradient.rotation) {\n    newGradient.rotation = Number(newGradient.rotation);\n  } else {\n    newGradient.rotation = 0;\n  }\n\n  newGradient.colorStops = newGradient.colorStops.map((colorStop: { offset: number; color: string }) => ({\n    ...colorStop,\n    offset: Number(colorStop.offset)\n  }));\n\n  return newGradient;\n}\n\nexport default function sanitizeOptions(options: RequiredOptions): RequiredOptions {\n  const newOptions = { ...options };\n\n  newOptions.width = Number(newOptions.width);\n  newOptions.height = Number(newOptions.height);\n  newOptions.margin = Number(newOptions.margin);\n  newOptions.imageOptions = {\n    ...newOptions.imageOptions,\n    hideBackgroundDots: Boolean(newOptions.imageOptions.hideBackgroundDots),\n    imageSize: Number(newOptions.imageOptions.imageSize),\n    margin: Number(newOptions.imageOptions.margin)\n  };\n\n  if (newOptions.margin > Math.min(newOptions.width, newOptions.height)) {\n    newOptions.margin = Math.min(newOptions.width, newOptions.height);\n  }\n\n  newOptions.dotsOptions = {\n    ...newOptions.dotsOptions\n  };\n  if (newOptions.dotsOptions.gradient) {\n    newOptions.dotsOptions.gradient = sanitizeGradient(newOptions.dotsOptions.gradient);\n  }\n\n  if (newOptions.cornersSquareOptions) {\n    newOptions.cornersSquareOptions = {\n      ...newOptions.cornersSquareOptions\n    };\n    if (newOptions.cornersSquareOptions.gradient) {\n      newOptions.cornersSquareOptions.gradient = sanitizeGradient(newOptions.cornersSquareOptions.gradient);\n    }\n  }\n\n  if (newOptions.cornersDotOptions) {\n    newOptions.cornersDotOptions = {\n      ...newOptions.cornersDotOptions\n    };\n    if (newOptions.cornersDotOptions.gradient) {\n      newOptions.cornersDotOptions.gradient = sanitizeGradient(newOptions.cornersDotOptions.gradient);\n    }\n  }\n\n  if (newOptions.backgroundOptions) {\n    newOptions.backgroundOptions = {\n      ...newOptions.backgroundOptions\n    };\n    if (newOptions.backgroundOptions.gradient) {\n      newOptions.backgroundOptions.gradient = sanitizeGradient(newOptions.backgroundOptions.gradient);\n    }\n  }\n\n  return newOptions;\n}\n","import QRCodeStyling from \"./core/QRCodeStyling\";\nimport dotTypes from \"./constants/dotTypes\";\nimport cornerDotTypes from \"./constants/cornerDotTypes\";\nimport cornerSquareTypes from \"./constants/cornerSquareTypes\";\nimport errorCorrectionLevels from \"./constants/errorCorrectionLevels\";\nimport errorCorrectionPercents from \"./constants/errorCorrectionPercents\";\nimport modes from \"./constants/modes\";\nimport qrTypes from \"./constants/qrTypes\";\nimport drawTypes from \"./constants/drawTypes\";\nimport shapeTypes from \"./constants/shapeTypes\";\nimport gradientTypes from \"./constants/gradientTypes\";\n\nexport * from \"./types\";\n\nexport {\n  dotTypes,\n  cornerDotTypes,\n  cornerSquareTypes,\n  errorCorrectionLevels,\n  errorCorrectionPercents,\n  modes,\n  qrTypes,\n  drawTypes,\n  shapeTypes,\n  gradientTypes\n};\n\nexport default QRCodeStyling;\n","import getMode from \"../tools/getMode\";\nimport mergeDeep from \"../tools/merge\";\nimport downloadURI from \"../tools/downloadURI\";\nimport QRSVG from \"./QRSVG\";\nimport drawTypes from \"../constants/drawTypes\";\n\nimport defaultOptions, { RequiredOptions } from \"./QROptions\";\nimport sanitizeOptions from \"../tools/sanitizeOptions\";\nimport { FileExtension, QRCode, Options, DownloadOptions, ExtensionFunction } from \"../types\";\nimport qrcode from \"qrcode-generator\";\n\nexport default class QRCodeStyling {\n  _options: RequiredOptions;\n  _container?: HTMLElement;\n  _canvas?: HTMLCanvasElement;\n  _svg?: SVGElement;\n  _qr?: QRCode;\n  _extension?: ExtensionFunction;\n  _canvasDrawingPromise?: Promise<void>;\n  _svgDrawingPromise?: Promise<void>;\n\n  constructor(options?: Partial<Options>) {\n    this._options = options ? sanitizeOptions(mergeDeep(defaultOptions, options) as RequiredOptions) : defaultOptions;\n    this.update();\n  }\n\n  static _clearContainer(container?: HTMLElement): void {\n    if (container) {\n      container.innerHTML = \"\";\n    }\n  }\n\n  _setupSvg(): void {\n    if (!this._qr) {\n      return;\n    }\n    const qrSVG = new QRSVG(this._options);\n\n    this._svg = qrSVG.getElement();\n    this._svgDrawingPromise = qrSVG.drawQR(this._qr).then(() => {\n      if (!this._svg) return;\n      this._extension?.(qrSVG.getElement(), this._options);\n    });\n  }\n\n  _setupCanvas(): void {\n    if (!this._qr) {\n      return;\n    }\n\n    this._canvas = document.createElement(\"canvas\");\n    this._canvas.width = this._options.width;\n    this._canvas.height = this._options.height;\n\n    this._setupSvg();\n    this._canvasDrawingPromise = this._svgDrawingPromise?.then(() => {\n      if (!this._svg) return;\n\n      const svg = this._svg;\n      const xml = new XMLSerializer().serializeToString(svg);\n      const svg64 = btoa(xml);\n      const image64 = \"data:image/svg+xml;base64,\" + svg64;\n      const image = new Image();\n\n      return new Promise((resolve) => {\n        image.onload = (): void => {\n          this._canvas?.getContext(\"2d\")?.drawImage(image, 0, 0);\n          resolve();\n        };\n\n        image.src = image64;\n      });\n    });\n  }\n\n  async _getElement(extension: FileExtension = \"png\"): Promise<SVGElement | HTMLCanvasElement | undefined> {\n    if (!this._qr) throw \"QR code is empty\";\n\n    if (extension.toLowerCase() === \"svg\") {\n      if (!this._svg || !this._svgDrawingPromise) {\n        this._setupSvg();\n      }\n      await this._svgDrawingPromise;\n      return this._svg;\n    } else {\n      if (!this._canvas || !this._canvasDrawingPromise) {\n        this._setupCanvas();\n      }\n      await this._canvasDrawingPromise;\n      return this._canvas;\n    }\n  }\n\n  update(options?: Partial<Options>): void {\n    QRCodeStyling._clearContainer(this._container);\n    this._options = options ? sanitizeOptions(mergeDeep(this._options, options) as RequiredOptions) : this._options;\n\n    if (!this._options.data) {\n      return;\n    }\n\n    this._qr = qrcode(this._options.qrOptions.typeNumber, this._options.qrOptions.errorCorrectionLevel);\n    this._qr.addData(this._options.data, this._options.qrOptions.mode || getMode(this._options.data));\n    this._qr.make();\n\n    if (this._options.type === drawTypes.canvas) {\n      this._setupCanvas();\n    } else {\n      this._setupSvg();\n    }\n\n    this.append(this._container);\n  }\n\n  append(container?: HTMLElement): void {\n    if (!container) {\n      return;\n    }\n\n    if (typeof container.appendChild !== \"function\") {\n      throw \"Container should be a single DOM node\";\n    }\n\n    if (this._options.type === drawTypes.canvas) {\n      if (this._canvas) {\n        container.appendChild(this._canvas);\n      }\n    } else {\n      if (this._svg) {\n        container.appendChild(this._svg);\n      }\n    }\n\n    this._container = container;\n  }\n\n  applyExtension(extension: ExtensionFunction): void {\n    if (!extension) {\n      throw \"Extension function should be defined.\";\n    }\n\n    this._extension = extension;\n    this.update();\n  }\n\n  deleteExtension(): void {\n    this._extension = undefined;\n    this.update();\n  }\n\n  async getRawData(extension: FileExtension = \"png\"): Promise<Blob | null> {\n    if (!this._qr) throw \"QR code is empty\";\n    const element = await this._getElement(extension);\n\n    if (!element) {\n      return null;\n    }\n\n    if (extension.toLowerCase() === \"svg\") {\n      const serializer = new XMLSerializer();\n      const source = serializer.serializeToString(element);\n\n      return new Blob(['<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source], { type: \"image/svg+xml\" });\n    } else {\n      return new Promise((resolve) => (element as HTMLCanvasElement).toBlob(resolve, `image/${extension}`, 1));\n    }\n  }\n\n  async download(downloadOptions?: Partial<DownloadOptions> | string): Promise<void> {\n    if (!this._qr) throw \"QR code is empty\";\n    let extension = \"png\" as FileExtension;\n    let name = \"qr\";\n\n    //TODO remove deprecated code in the v2\n    if (typeof downloadOptions === \"string\") {\n      extension = downloadOptions as FileExtension;\n      console.warn(\n        \"Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument\"\n      );\n    } else if (typeof downloadOptions === \"object\" && downloadOptions !== null) {\n      if (downloadOptions.name) {\n        name = downloadOptions.name;\n      }\n      if (downloadOptions.extension) {\n        extension = downloadOptions.extension;\n      }\n    }\n\n    const element = await this._getElement(extension);\n\n    if (!element) {\n      return;\n    }\n\n    if (extension.toLowerCase() === \"svg\") {\n      const serializer = new XMLSerializer();\n      let source = serializer.serializeToString(element);\n\n      source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n      const url = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(source);\n      downloadURI(url, `${name}.svg`);\n    } else {\n      const url = (element as HTMLCanvasElement).toDataURL(`image/${extension}`);\n      downloadURI(url, `${name}.${extension}`);\n    }\n  }\n}\n","import modes from \"../constants/modes\";\nimport { Mode } from \"../types\";\n\nexport default function getMode(data: string): Mode {\n  switch (true) {\n    case /^[0-9]*$/.test(data):\n      return modes.numeric;\n    case /^[0-9A-Z $%*+\\-./:]*$/.test(data):\n      return modes.alphanumeric;\n    default:\n      return modes.byte;\n  }\n}\n","import { Mode } from \"../types\";\n\ninterface Modes {\n  [key: string]: Mode;\n}\n\nexport default {\n  numeric: \"Numeric\",\n  alphanumeric: \"Alphanumeric\",\n  byte: \"Byte\",\n  kanji: \"Kanji\"\n} as Modes;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(676);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)"],"names":["n","require","e","t","o","default","l","a","i","insertAt","document","head","getElementsByTagName","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","d","s","documentElement","clientWidth","c","style","setProperty","window","innerHeight","r","p","isMobile","innerHTML","f","attachShadow","mode","shadowRoot","textContent","append","content","cloneNode","HTMLElement","m","w","x","y","width","height","data","DEFLY_DOWNLOAD_URL","image","dotsOptions","color","imageOptions","crossOrigin","margin","cornersSquareOptions","cornersDotOptions","this","getElementById","h","g","u","_","k","v","addEventListener","handleAccordion","handleChangeView","querySelectorAll","onClickDownload","onClickBack","length","forEach","onClickCopy","renderQRCode","target","Element","classList","contains","parentElement","remove","toggle","getAttribute","imageSize","add","position","left","top","opacity","value","body","focus","select","execCommand","removeChild","b","E","C","getDeflyWalletAppMeta","name","D","L","setAttribute","generateDeflyWalletConnectDeepLink","onClickLaunch","A","S","M","DEFLY_WALLET_MODAL_CLASSNAME","B","DEFLY_WALLET_CONNECT_MODAL_ID","F","R","z","onClose","generateDeflyWalletAppDeepLink","open","removeModalWrapperFromDOM","DEFLY_WALLET_REDIRECT_MODAL_ID","T","W","logo","O","H","I","V","host","G","P","j","N","Z","addAudioForConnection","setTimeout","isIOS","src","autoplay","loop","q","fr","ip","op","nm","ddd","assets","layers","ind","ty","sr","ks","ix","to","ti","ao","hasMask","masksProperties","inv","pt","ef","np","mn","en","sw","sh","sc","st","bm","parent","shapes","it","hd","sk","sa","cix","lc","lj","ml","markers","$","U","Y","DEFLY_WALLET_SIGN_TXN_TOAST_ID","renderLottieAnimation","loadAnimation","container","renderer","animationData","Q","X","DEFLY_WALLET_SIGN_TXN_MODAL_ID","J","customElements","define","Promise","next","throw","done","then","apply","Error","captureStackTrace","message","localStorage","getItem","JSON","parse","slice","Math","floor","random","bridgeURL","shouldUseSound","silent","fetch","json","cache","use_sound","Object","assign","servers","console","log","Uint8Array","from","atob","charCodeAt","navigator","test","userAgent","match","brave","getParser","getBrowserName","encodeURIComponent","main_color","close","global","Buffer","resolve","exports","DeflyWalletConnect","network","bridge","deep_link","setItem","app_meta","stringify","connector","shouldShowSignTxnToast","chainId","get","platform","connected","killSession","storageId","qrcodeModal","createSession","querySelector","on","accounts","selectedAccount","detail","isConnected","disconnect","removeItem","formatJsonRpcRequest","sendCustomRequest","forcePushNotification","filter","Boolean","map","reject","flatMap","signers","includes","txn","encodeUnsignedTransaction","toString","Array","isArray","authAddr","msig","signTransactionWithMobile","closeDeflyWalletSignTxnToast","replace","defineProperty","factory","svgNS","locationHref","_useWebWorker","initialDefaultFrame","setWebWorker","flag","getWebWorker","setLocationHref","getLocationHref","createTag","extendPrototype","sources","destination","sourcePrototype","len","attr","prototype","hasOwnProperty","call","getDescriptor","object","prop","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","audioControllerFactory","AudioController","audioFactory","audios","_volume","_isMuted","addAudio","audio","push","pause","resume","setRate","rateValue","createAudio","assetPath","Howl","isPlaying","play","seek","playing","rate","setVolume","setAudioFactory","_updateVolume","mute","unmute","getVolume","volume","createTypedArray","createRegularArray","arr","Uint8ClampedArray","Float32Array","Int16Array","createSizedArray","_typeof$6","obj","Symbol","iterator","constructor","subframeEnabled","expressionsPlugin","expressionsInterfaces","idPrefix$1","isSafari","_shouldRoundValues","bmPow","pow","bmSqrt","sqrt","bmFloor","bmMax","max","bmMin","min","BMMath","ProjectInterface$1","propertyNames","abs","val","absArr","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","bmRnd","round","styleDiv","element","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","frameMultiplier","direction","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","firstFrame","totalFrames","BMDestroyEvent","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","HSVtoRGB","RGBtoHSV","addSaturationToRGB","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","setSubframeEnabled","getSubframeEnabled","setExpressionsPlugin","getExpressionsPlugin","setExpressionInterfaces","getExpressionInterfaces","setDefaultCurveSegments","getDefaultCurveSegments","setIdPrefix","getIdPrefix","createNS","createElementNS","_typeof$5","dataManager","workerFn","workerInstance","_counterId","processes","workerProxy","onmessage","postMessage","path","_workerSelf","setupWorker","fn","Worker","Blob","blob","url","URL","createObjectURL","createWorker","completeLayers","comps","layerData","jLen","kLen","completed","maskProps","convertPathsToAbsoluteValues","findCompLayers","refId","completeShapes","completeText","id","comp","findComp","__used","checkVersion","minimum","animVersionString","animVersion","split","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","checkChars","chars","charData","checkPathProperties","pathData","checkColors","iterateShapes","checkShapes","completeClosingShapes","closed","cl","moduleOb","__complete","completeChars","dataFunctionManager","assetLoader","formatResponse","xhr","contentTypeHeader","getResponseHeader","responseType","indexOf","response","responseText","load","fullPath","callback","errorCallback","XMLHttpRequest","err","onreadystatechange","readyState","status","join","error","send","completeData","payload","animation","event","process","onComplete","onError","createProcess","processId","location","origin","pathname","loadData","completeAnimation","anim","ImagePreloader","proxyImage","canvas","ctx","getContext","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","loadedFootagesCount","totalFootages","imagesLoadedCb","footageLoaded","getAssetsPath","assetData","assetsPath","originalPath","imagePath","testImageLoaded","img","intervalId","setInterval","getBBox","_imageLoaded","clearInterval","bind","createFootageData","ob","footageData","_footageLoaded","ImagePreloaderFactory","images","loadAssets","cb","_createImageData","setAssetsPath","setPath","loadedImages","loadedFootages","destroy","getAsset","createImgData","createImageData","setAttributeNS","_elementHelper","setCacheType","elementHelper","BaseEvent","triggerEvent","eventName","args","_cbs","callbacks","removeEventListener","splice","markerParser","parsePayloadLines","line","lines","keys","keysCount","trim","_markers","_marker","markerData","time","tm","duration","dr","cm","__","ProjectInterface","registerComposition","compositions","_thisProjectFunction","prepareFrame","xt","currentFrame","compInterface","renderers","registerRenderer","key","getRenderer","_typeof$4","AnimationItem","isLoaded","currentRawFrame","frameRate","frameMult","playSpeed","playDirection","playCount","isPaused","animationID","timeCompleted","segmentPos","isSubframeEnabled","segments","_idle","_completedLoop","projectInterface","imagePreloader","audioController","configAnimation","onSetupError","onSegmentComplete","drawnFrameEvent","setParams","params","wrapper","animType","RendererClass","rendererSettings","globalData","defs","setProjectInterface","undefined","parseInt","autoloadSegments","initialSegment","setupAnimation","lastIndexOf","substr","fileName","trigger","setData","wrapperAttributes","attributes","getNamedItem","prerender","includeLayers","newLayers","fonts","fontManager","addChars","addFonts","initExpressions","loadNextSegment","segment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","animData","searchExtraCompositions","updaFrameModifier","waitForFontsLoaded","triggerConfigError","rendererType","initItems","gotoFrame","resize","_width","_height","updateContainerSize","setSubframe","renderFrame","triggerRenderFrameError","togglePause","stop","setCurrentRawFrameValue","getMarkerData","markerName","marker","goToAndStop","isFrame","numValue","Number","isNaN","frameModifier","goToAndPlay","playSegments","advanceTime","nextValue","_isComplete","checkSegments","adjustSegment","setSpeed","setDirection","setSegment","init","end","pendingFrame","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onSegmentStart","onDestroy","getPath","getAssetData","hide","show","getDuration","updateDocumentData","index","getElementByPath","animationManager","registeredAnimations","initTime","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","subtractPlayingCount","registerAnimation","elem","addPlayingCount","activate","nowTime","elapsedTime","requestAnimationFrame","first","searchAnimations","standalone","animElements","concat","getElementsByClassName","lenAnims","innerText","div","freeze","unfreeze","getRegisteredAnimations","animations","BezierFactory","str","beziers","bezEasing","BezierEasing","kSampleStepSize","float32ArraySupported","aA1","aA2","calcBezier","aT","getSlope","points","_p","_mSampleValues","_precomputed","mX1","mY1","mX2","mY2","_precompute","_getTForX","_calcSampleValues","aX","mSampleValues","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","pooling","poolFactory","initialLength","_create","_release","_length","_maxLength","pool","newElement","release","bezierLengthPool","addedLength","percents","lengths","segmentsLengthPool","totalLength","bezFunction","math","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","getBezierLength","pt1","pt2","pt3","pt4","ptCoord","perc","ptDistance","curveSegments","point","lastPoint","lengthData","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","bezierSegmentPoints","getSegmentsLength","shapeData","segmentsLength","pathV","pathO","pathI","getNewSegment","startPerc","endPerc","t0","t1","u0","u1","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","getPointInSegment","percent","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","bez","PropertyFactory","initFrame","mathAbs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","keyData","nextKeyData","keyframeMetadata","fnc","iterationIndex","lastIndex","keyframes","keyframesMetadata","endValue","nextKeyTime","keyTime","__fnct","getBezierEasing","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","out","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","quaternionToEuler","omega","cosom","sinom","scale0","scale1","ax","ay","az","aw","bx","by","bz","bw","acos","sin","slerp","createQuaternion","values","c1","cos","c2","c3","s1","s2","s3","getValueAtCurrentTime","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","_mdf","processEffectsSequence","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","addDynamicProperty","ValueProperty","vel","getValue","MultiDimensionalProperty","KeyframedValueProperty","KeyframedMultidimensionalProperty","arrLen","getProp","DynamicPropertyContainer","dynamicProperties","_isAnimated","iterateDynamicProperties","initDynamicPropertyContainer","pointPool","ShapePath","setPathData","setLength","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","cnt","shapePool","shapePath","clone","shape","cloned","ShapeCollection","addShape","releaseShapes","shapeCollectionPool","newShapeCollection","shapeCollection","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","paths","localShapeCollection","shape1","shape2","shapesEqual","ShapeProperty","reset","KeyframedShapeProperty","EllShapeProperty","cPoint","EllShapePropertyFactory","convertEllToPath","p0","p1","s0","_cw","_v","StarShapeProperty","StarShapePropertyFactory","sy","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","or","os","rad","roundness","perimSegment","numPts","angle","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","RectShapePropertyFactory","convertRectToPath","v0","v1","Matrix","_cos","_sin","_tan","tan","_rnd","props","rotate","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","skew","skewFromAxis","scale","sz","setTransform","translate","tx","tz","transform","a2","b2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_identityCalculated","a1","b1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","isIdentity","_identity","equals","matr","cloneFromProps","applyToPoint","applyToX","applyToY","applyToZ","getInverseMatrix","determinant","inverseMatrix","inversePoint","applyToPointArray","inversePoints","pts","retPts","applyToTriplePoints","p4","p5","p12","p13","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","_typeof$3","lottie","setLocation","href","setSubframeRendering","setPrefix","prefix","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","useWebWorker","setIDPrefix","__getFactory","version","scripts","myScript","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","PuckerAndBloatModifier","initModifierProperties","addShapeToModifier","setAsAnimated","processKeys","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","processShapes","shapePaths","_s","totalShapeLength","edges","newShapesData","addShapes","lastShape","pop","addPaths","newPaths","addSegment","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","amount","processPath","centerPoint","pathLength","clonedPath","TransformPropertyFactory","defaultVector","TransformProperty","pre","appliedTransformations","px","py","pz","rx","ry","rz","_isDirty","applyToMatrix","mat","forceRender","precalculateMatrix","autoOriented","v2","getValueAtTime","autoOrient","_addDynamicProperty","getTransformProperty","RepeaterModifier","RoundCornersModifier","floatEqual","floatZero","lerp","lerpPoint","quadRoots","singleRoot","delta","polynomialCoefficients","p3","singlePoint","PolynomialBezier","linearize","pointEqual","coeffx","coeffy","extrema","intersectData","t2","box","boundingBox","cx","cy","splitData","boxIntersect","intersectsImpl","depth","tolerance","intersections","maxRecursion","d1s","d2s","crossProduct","lineIntersection","start1","end1","start2","end2","v3","v4","polarOffset","pointDistance","hypot","ZigZagModifier","setPoint","outputBezier","amplitude","outAmplitude","inAmplitude","angO","angI","getPerpendicularVector","vector","rot","getProjectingAngle","cur","prevIndex","nextIndex","pVector","zigZagCorner","frequency","pointType","prevPoint","nextPoint","prevDist","nextDist","zigZagSegment","dist","normalAngle","linearOffset","offsetSegment","p1a","p1b","p2b","p2a","joinLines","seg1","seg2","lineJoin","miterLimit","angleOut","tangentAngle","angleIn","center","radius","intersection","getIntersection","intersect","pruneSegmentIntersection","outa","outb","pruneIntersections","offsetSegmentSplit","right","mid","flex","inflectionPoints","OffsetPathModifier","getFontProperties","fontData","styles","fStyle","fWeight","toLowerCase","weight","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","hasReloaded","copies","ceil","group","reloadShapes","elems","transformData","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","rd","currentV","currentI","currentO","closerV","distance","newPosPerc","derivative","denom","tcusp","square","root","p10","p11","p20","p21","bounds","bottom","other","shapeSegmentInverted","pointsType","count","inputBezier","multiSegments","lastSeg","multiSegment","FontManager","emptyChar","size","combinedCharacters","surrogateModifiers","zeroWidthJoiner","setUpNode","font","family","parentNode","fontFamily","node","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","offsetWidth","familyArray","enabledFamilies","trimFontOptions","createHelper","def","helper","engine","fontProps","tHelper","fFamily","fClass","tCanvasHelper","OffscreenCanvas","measureText","text","getComputedTextLength","Font","typekitLoaded","_warned","Date","now","setIsLoadedBinded","setIsLoaded","checkLoadedFontsBinded","checkLoadedFonts","isModifier","firstCharCode","secondCharCode","sum","isZeroWidthJoiner","isCombinedCharacter","_char3","fontPrototype","found","ch","list","fontArr","_pendingFonts","loadedSelector","shouldLoadFont","loaded","monoCase","sansCase","fPath","fOrigin","rel","getCharData","_char","warn","getFontByName","fName","_char2","fontName","doubleSize","singleSize","loadedCount","RenderableElement","initRenderable","isInRange","hidden","isTransparent","renderableComponents","addRenderableComponent","component","removeRenderableComponent","prepareRenderableFrame","num","checkLayerLimits","checkTransparency","finalTransform","mProp","renderConfig","hideOnTransparent","renderRenderable","sourceRectAtTime","getLayerSize","textData","getBlendMode","blendModeEnums","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","EffectsManager","effects","effectElements","effectItem","GroupEffect","BaseElement","FrameElement","FootageElement","imageLoader","initBaseData","AudioElement","_isPlaying","_canPlay","_currentTime","_volumeMultiplier","_previousVolume","_placeholder","lv","au","BaseRenderer","TransformElement","MaskElement","maskElement","viewData","solidPath","rect","expansor","feMorph","properties","currentMasks","layerId","maskType","maskRef","getShapeProp","lastPath","filterID","expan","lastOperator","filterId","lastRadius","mask","createLayerSolidPath","invRect","drawPath","maskedElement","eff","checkMasks","LayerExpressionInterface","EffectsExpressionInterface","ShapeExpressionInterface","TextExpressionInterface","CompExpressionInterface","layerInterface","maskManager","registerMaskInterface","effectsInterface","createEffectsInterface","registerEffectsInterface","shapeInterface","shapesData","itemsData","textInterface","setBlendMode","blendModeValue","baseElement","layerElement","effectsManager","getType","prepareProperties","isVisible","_isParent","getBaseElement","FootageInterface","getFootageData","timeRemapped","totalVolume","volumeValue","checkLayers","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","createFootage","buildAllItems","pInterface","progressiveLoad","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","pendingElements","pathValue","setupGlobalData","fontsContainer","animationItem","compSize","initTransform","_matMdf","_opMdf","renderTransform","finalMat","globalToLocal","transforms","ptNew","mHelper","getMaskProperty","isFirstFrame","getMaskelement","pathNodes","pathString","pathShapeValue","filtersFactory","filId","skipCoordinates","fil","feColorMatrix","featureSupport","registeredEffects","idPrefix","SVGEffects","filterManager","source","createFilter","filters","Effect","effect","countsAsEffect","registerEffect","SVGBaseElement","HierarchyElement","RenderableDOMElement","IImageElement","initElement","sourceRect","ProcessedElement","IShapeElement","initRendererElement","createContainerElements","matteElement","transformedElement","_sizeChanged","layerElementParent","td","matteMasks","symbolElement","gg","tt","ln","cp","clipId","cpGroup","renderElement","destroyBaseElement","createRenderableComponents","renderableEffectsManager","getMatte","matteType","useElement","masker","createAlphaToLuminanceFilter","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","setMatte","initHierarchy","checkParenting","createContent","renderInnerContent","innerElem","pr","imagePreserveAspectRatio","addShapeToModifiers","shapeModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","searchProcessedElement","processedElements","addProcessedElement","lineCapEnum","lineJoinEnum","SVGShapeData","transformers","level","caches","lStr","lvl","SVGStyleData","pElem","msElem","DashProperty","dataProps","dashStr","dashArray","dashoffset","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGNoStyleData","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","SVGTransformData","comparePoints","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","gf","cst","opacityId","maskId","opFill","of","ms","ost","buildShapeString","_o","_i","shapeString","SVGElementsRenderer","_identityMatrix","_matrixHelper","renderContentTransform","styleData","itemData","renderNoop","renderPath","pathStringTransformed","redraw","iterations","lLen","renderFill","styleElem","renderGradientStroke","renderGradient","renderStroke","hasOpacity","attr1","attr2","cValues","oValues","ang","createRenderFunction","SVGShapeElement","stylesList","animatedContents","LetterProps","fc","TextProperty","_frameId","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","setElementStyles","render","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","update","updated","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","charCode","charactersArray","shouldCombine","charAt","newLineFlag","letters","anchorGrouping","currentSize","currentPos","currentLine","lineWidth","maxLineWidth","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","an","anIndexes","animatorJustifyOffset","extra","animatorData","letterData","based","animators","indexes","fh","fs","fb","rn","totalChars","newInd","currentInd","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","TextSelectorProp","TextSelectorPropFactory","_currentTextLength","finalS","finalE","xe","ne","sm","getMult","textProperty","easer","tot","smoothness","threshold","newCharsFlag","divisor","getTextSelectorProp","TextAnimatorDataProperty","animatorProps","defaultData","textAnimatorAnimatables","TextAnimatorProperty","renderType","_hasMaskedPath","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","ITextElement","searchProperties","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","tanAngle","matrixHelper","renderedLettersCount","tLength","pi","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","letterM","letterP","defaultPropsArray","animatorFirstCharOffset","justifyOffsetMult","isNewLine","animatorOffset","atan","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","emptyShapeData","SVGTextLottieElement","textSpans","ISolidElement","NullElement","SVGRendererBase","ICompElement","SVGCompElement","supports3d","SVGRenderer","config","svgElement","ariaLabel","title","titleElement","titleId","description","descElement","descId","preserveAspectRatio","contentVisibility","viewBoxOnly","viewBoxSize","className","focusable","filterSize","runExpressions","destroyed","CVContextData","saved","cArrPos","cTr","cO","savedOp","ShapeTransformManager","sequences","sequenceList","transform_key_count","CVEffects","CVMaskElement","hasMasks","CVBaseElement","CVShapeData","transformsManager","styledShapes","styledShape","addTransformSequence","trNodes","CVShapeElement","CVTextElement","stroke","fill","currentRender","sWidth","fValue","CVImageElement","CVSolidElement","CanvasRendererBase","clearCanvas","context","dpr","devicePixelRatio","currentGlobalAlpha","contextData","transformMat","CVCompElement","CanvasRenderer","HBaseElement","HSolidElement","HShapeElement","shapesContainer","currentBBox","HTextElement","textPaths","isMasked","HCameraElement","pe","_prevMat","HImageElement","HybridRendererBase","threeDElements","camera","HCompElement","HybridRenderer","singleShape","textContainer","buildTextContents","textArray","textContents","currentTextContent","String","fromCharCode","buildShapeData","shapeItem","tSpan","usesGlyphs","cachedSpansLength","span","childSpan","glyph","glyphElement","_debug","tElement","justify","textBox","bbox","renderedLetter","textSpan","findIndexByInd","appendElementInPos","elementIndex","tp","matteMask","nextElement","setElements","getElements","destroyElements","duplicate","newLength","currentSavedOp","set","sequence","processSequence","processSequences","getNewKey","canvasContext","beginPath","moveTo","lineTo","bezierCurveTo","save","clip","createElements","blendMode","globalCompositeOperation","hideElement","showElement","forceRealStack","ctxTransform","ctxOpacity","restore","transformHelper","dashResetter","preTransforms","co","wi","da","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","strokeStyle","grd","lineCap","setLineDash","lineDashOffset","closePath","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","hasFill","hasStroke","commands","pathArr","commandsCounter","lastFill","lastStroke","lastStrokeW","widthCrop","heightCrop","imgW","imgH","imgRel","canvasRel","par","drawImage","cProps","trProps","globalAlpha","actionFlag","popped","containerStyle","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","fillType","clearRect","checkBlendMode","tg","transformedElementStyle","matrixValue","webkitTransform","addEffects","backgroundColor","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","item","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","shapeBoundingBox","xMax","yMax","tempBoundingBox","b2ac","calculateF","calculateBoundingBox","expandStrokeBoundingBox","widthProperty","kfw","currentBoxContains","changed","shapeStyle","shapeTransform","compW","compH","innerElemStyle","textColor","strokeWidth","lineHeight","tParent","tCont","children","tContStyle","tContTranslation","tStyle","tSpanTranslation","svgStyle","translation","textPath","svgTransform","setup","perspectiveStyle","perspectiveElem","perspective","webkitPerspective","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","mRotationX","mRotationY","hasMatrixChanged","matValue","Image","imageElem","newDOMElement","addTo3dContainer","nextDOMElement","nextLayer","getThreeDContainerByPos","startPos","endPos","createThreeDContainer","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","overflow","svg","cWidth","cHeight","floatingContainer","_createBaseContainerElements","_thisLayerFunction","pixelAspect","frameDuration","displayStartTime","numLayers","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","MaskManagerInterface","MaskInterface","_mask","_data","_masksInterfaces","ExpressionPropertyInterface","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","property","getVelocityAtTime","numKeys","valueProp","valueAtTime","speedAtTime","getSpeedAtTime","velocityAtTime","propertyGroup","defaultGetter","UnidimensionalPropertyInterface","arrValue","MultidimensionalPropertyInterface","TransformExpressionInterface","_thisFunction","rotation","xRotation","yRotation","xPosition","yPosition","zPosition","anchorPoint","_px","_py","_pz","_transformFactory","getMatrix","toWorldMat","toWorldVec","applyPoint","toWorld","fromWorldVec","invertPoint","fromWorld","fromComp","sampleImage","transformInterface","toComp","anchorPointDescriptor","defineProperties","hasParent","anchor_point","active","startTime","inPoint","outPoint","_name","propertyGroupFactory","interfaceFunction","parentPropertyGroup","PropertyInterface","propertyName","createGroupInterface","groupInterface","_propertyGroup","createValueInterface","numProperties","enabled","expressionProperty","setGroupProperty","effectsData","ShapePathInterface","view","propertyIndex","iterateElements","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","gradientFillInterfaceFactory","interfaces","transformInterfaceFactory","contentsInterfaceFactory","startPoint","endPoint","_dashPropertyGroup","dashOb","addPropertyToDashOb","dash","start","skewAxis","outerRadius","outerRoundness","innerRoundness","innerRadius","_interfaceFunction","_prevValue","_sourceText","sourceText","stringValue","_typeof$2","dataInterfaceFactory","outlineInterface","currentPropertyName","currentProperty","propertyNameIndex","outlineInterfaceFactory","dataInterface","footage","getInterface","_typeof$1","seedRandom","startdenom","significance","ARC4","keylen","me","copy","flatten","result","typ","mixkey","seed","smear","stringseed","tostring","options","shortseed","entropy","crypto","msCrypto","getRandomValues","browser","plugins","screen","autoseed","arc4","prng","int32","quick","pass","is_math_call","state","initialize$2","propTypes","SHAPE","_typeof","ExpressionManager","frames","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","noOp","_value","needsVelocity","_needsRandom","elemType","$bm_transform","thisProperty","loopIn","loop_in","loopOut","loop_out","smooth","fromCompToSurface","thisLayer","thisComp","scoped_bm_rt","expression_function","eval","wiggle","freq","amp","iWiggle","lenWiggle","addedAmps","periods","loopInDuration","loopOutDuration","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","pitch","easeOut","val1","val2","applyEase","easeIn","ease","iKey","lenKey","nearestKey","obKey","framesToTime","fps","timeToFrames","seedrandom","randSeed","substring","posterizeTime","framesPerSecond","executeExpression","frameExpressionId","__preventDeadCodeRemoval","expressionHelpers","searchExpressions","speed","_cachingAtTime","getStaticValueAtTime","addPropertyDecorator","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","sampleValue","sampleFrequency","getTransformValueAtTime","_transformCachingAtTime","anchor","rotationZ","rotationY","rotationX","orientation","positionX","positionY","positionZ","getTransformStaticValueAtTime","propertyGetProp","ShapePropertyConstructorFunction","getConstructorFunction","KeyframedShapePropertyConstructorFunction","getKeyframedConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","tangentOnPath","normalOnPath","shapeValue","lastTime","propertyGetShapeProp","trims","initialize$1","addDecorator","getExpressionValue","calculateExpression","isKeyframed","hasExpressions","initialize","SVGComposableEffect","SVGTintFilter","matrixFilter","feMerge","createMergeNode","SVGFillFilter","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","globalFilterSize","feGaussianBlur","feOffset","feFlood","feComposite","resultId","ins","feMergeNode","colorBlack","colorWhite","groupPath","elemChildren","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","SVGGaussianBlurEffect","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","sigma","dimensions","sigmaX","sigmaY","edgeMode","module","self","qrcode","typeNumber","errorCorrectionLevel","_typeNumber","_errorCorrectionLevel","QRErrorCorrectionLevel","_modules","_moduleCount","_dataCache","_dataList","_this","makeImpl","maskPattern","moduleCount","modules","row","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","QRUtil","getPatternPosition","bits","getBCHTypeNumber","getBCHTypeInfo","inc","bitIndex","byteIndex","maskFunc","getMaskFunction","dark","dataList","rsBlocks","QRRSBlock","getRSBlocks","buffer","qrBitBuffer","put","getMode","getLength","getLengthInBits","write","totalDataCount","dataCount","putBit","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","getBuffer","rsPoly","getErrorCorrectPolynomial","modPoly","qrPolynomial","modIndex","getAt","totalCodeCount","addData","qrNumber","qrAlphaNum","qr8BitByte","qrKanji","isDark","getModuleCount","make","minLostPoint","pattern","lostPoint","getLostPoint","getBestMaskPattern","createTableTag","cellSize","qrHtml","createSvgTag","alt","opts","arguments","mr","qrSvg","scalable","escapeXml","createDataURL","createImgTag","escaped","createASCII","r1","r2","blocks","blocksLastLineNoMargin","ascii","white","black","renderTo2dContext","stringToBytes","stringToBytesFuncs","bytes","createStringToBytes","unicodeData","numChars","unicodeMap","bin","base64DecodeInputStream","read","b0","unknownChar","PATTERN_POSITION_TABLE","G15","G18","getBCHDigit","digit","errorCorrectLength","multiply","QRMath","gexp","sameCount","darkCount","EXP_TABLE","LOG_TABLE","glog","_num","ratio","RS_BLOCK_TABLE","qrRSBlock","rsBlock","_buffer","bufIndex","bit","strToNum","chatToNum","getCode","_bytes","SJIS","code","byteArrayOutputStream","writeByte","writeShort","writeBytes","off","writeString","toByteArray","_str","_pos","_buflen","decode","getPixel","gif","setPixel","pixel","raster","getLZWRaster","lzwMinCodeSize","clearCode","endCode","bitLength","lzwTable","_out","_bitLength","_bitBuffer","byteOut","bitOut","flush","dataIndex","_map","_size","base64","_base64","writeEncoded","encode","padlen","utf8","charcode","isObject","mergeDeep","targetValue","sourceValue","downloadURI","uri","link","download","click","toDataURL","onload","reader","FileReader","onloadend","readAsDataURL","_svg","_type","getNeighbor","drawFunction","_drawDot","_drawClassy","_drawClassyRounded","_drawRounded","_drawExtraRounded","_drawSquare","_element","_rotateFigure","draw","_basicDot","_basicSquare","leftNeighbor","rightNeighbor","topNeighbor","bottomNeighbor","neighborsCount","_basicCornerRounded","_basicSideRounded","_basicCornerExtraRounded","_basicCornersRounded","dotSize","_basicExtraRounded","squareMask","dotMask","_defs","_options","qr","minSize","realQRSize","shapeTypes","drawImageSize","hideXDots","hideYDots","_qr","loadImage","_image","qrOptions","coverLevel","errorCorrectionPercents","maxHiddenDots","originalHeight","originalWidth","maxHiddenAxisDots","hideDots","drawBackground","drawDots","hideBackgroundDots","drawCorners","gradientOptions","backgroundOptions","gradient","_createColor","additionalRotation","_backgroundClipPath","xBeginning","yBeginning","dot","_dotsClipPath","xOffset","additionalDots","fakeCount","xFakeBeginning","yFakeBeginning","cornersSquareSize","cornersDotSize","column","cornersSquareClipPath","cornersDotClipPath","_cornersSquareClipPath","_cornersDotClipPath","cornersSquare","cornersDot","dx","dy","dw","dh","imageUrl","positiveRotation","x0","y0","colorStops","qrTypes","drawTypes","sanitizeGradient","newGradient","colorStop","sanitizeOptions","newOptions","qrSVG","getElement","_svgDrawingPromise","drawQR","_extension","_canvas","_setupSvg","_canvasDrawingPromise","xml","XMLSerializer","serializeToString","image64","btoa","extension","_setupCanvas","QRCodeStyling","_clearContainer","_container","_getElement","serializer","toBlob","downloadOptions","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","__esModule","definition","enumerable"],"sourceRoot":""}